(self.webpackChunkapp_gestion=self.webpackChunkapp_gestion||[]).push([[179],{2011:(lt,oe,F)=>{"use strict";F.d(oe,{Dh:()=>pe,GT:()=>_e,cc:()=>Pe,hO:()=>Ge,on:()=>K,pX:()=>de,xv:()=>Ee});var m=F(4650),U=F(127),V=F(5813);lt=F.hmd(lt);const ce=["ngOnDestroy"],de=(ve,Xe,Ke,Me={})=>new Proxy(ve,{get:(Te,xe)=>Ke.runOutsideAngular(()=>{var Qe;if(ve[xe])return!(null===(Qe=Me?.spy)||void 0===Qe)&&Qe.get&&Me.spy.get(xe,ve[xe]),ve[xe];if(ce.indexOf(xe)>-1)return()=>{};const Je=Xe.toPromise().then(q=>{const ye=q&&q[xe];return"function"==typeof ye?ye.bind(q):ye&&ye.then?ye.then(Q=>Ke.run(()=>Q)):Ke.run(()=>ye)});return new Proxy(()=>{},{get:(q,ye)=>Je[ye],apply:(q,ye,Q)=>Je.then(re=>{var ae;const se=re&&re(...Q);return!(null===(ae=Me?.spy)||void 0===ae)&&ae.apply&&Me.spy.apply(xe,Q,se),se})})})}),_e=(ve,Xe)=>{Xe.forEach(Ke=>{Object.getOwnPropertyNames(Ke.prototype||Ke).forEach(Me=>{Object.defineProperty(ve.prototype,Me,Object.getOwnPropertyDescriptor(Ke.prototype||Ke,Me))})})};class he{constructor(Xe){return Xe}}const pe=new m.OlP("angularfire2.app.options"),Ee=new m.OlP("angularfire2.app.name");function K(ve,Xe,Ke){const Te="object"==typeof Ke&&Ke||{};Te.name=Te.name||"string"==typeof Ke&&Ke||"[DEFAULT]";const Qe=U.Z.apps.filter(Je=>Je&&Je.name===Te.name)[0]||Xe.runOutsideAngular(()=>U.Z.initializeApp(ve,Te));try{JSON.stringify(ve)!==JSON.stringify(Qe.options)&&Z("error",`${Qe.name} Firebase App already initialized with different options${lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new he(Qe)}const Z=(ve,...Xe)=>{(0,m.X6Q)()&&typeof console<"u"&&console[ve](...Xe)},te={provide:he,useFactory:K,deps:[pe,m.R0b,[new m.FiY,Ee]]};let Ge=(()=>{class ve{constructor(Ke){U.Z.registerVersion("angularfire",V.q4.full,"core"),U.Z.registerVersion("angularfire",V.q4.full,"app-compat"),U.Z.registerVersion("angular",m.q4F.full,Ke.toString())}static initializeApp(Ke,Me){return{ngModule:ve,providers:[{provide:pe,useValue:Ke},{provide:Ee,useValue:Me}]}}}return ve.\u0275fac=function(Ke){return new(Ke||ve)(m.LFG(m.Lbi))},ve.\u0275mod=m.oAB({type:ve}),ve.\u0275inj=m.cJS({providers:[te]}),ve})();function Pe(ve,Xe,Ke,Me,Te){const[,xe,Qe]=globalThis.\u0275AngularfireInstanceCache.find(Je=>Je[0]===ve)||[];if(xe)return function Ae(ve,Xe){try{return ve.toString()===Xe.toString()}catch{return ve===Xe}}(Te,Qe)||(ge("error",`${Xe} was already initialized on the ${Ke} Firebase App with different settings.${at?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:Te,was:Qe})),xe;{const Je=Me();return globalThis.\u0275AngularfireInstanceCache.push([ve,Je,Te]),Je}}const at=!!lt.hot,ge=(ve,...Xe)=>{(0,m.X6Q)()&&typeof console<"u"&&console[ve](...Xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(lt,oe,F)=>{"use strict";F.d(oe,{q4:()=>ut,iC:()=>Js,HU:()=>Xa,vb:()=>To,JM:()=>nl});var m=F(4650),U=F(5867),V=F(5861),ce=F(9681),de=F(2090),_e=F(4859),he=F(1877),pe=F(8766);const Ee="@firebase/installations",K="0.5.13",te=`w:${K}`,Ge="FIS_v2",Xe=new de.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ke(T){return T instanceof de.ZR&&T.code.includes("request-failed")}function Me({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function Te(T){return{token:T.token,requestStatus:2,expiresIn:re(T.expiresIn),creationTime:Date.now()}}function xe(T,A){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,V.Z)(function*(T,A){const $=(yield A.json()).error;return Xe.create("request-failed",{requestName:T,serverCode:$.code,serverMessage:$.message,serverStatus:$.status})})).apply(this,arguments)}function Je({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function q(T,{refreshToken:A}){const N=Je(T);return N.append("Authorization",function ae(T){return`${Ge} ${T}`}(A)),N}function ye(T){return Q.apply(this,arguments)}function Q(){return(Q=(0,V.Z)(function*(T){const A=yield T();return A.status>=500&&A.status<600?T():A})).apply(this,arguments)}function re(T){return Number(T.replace("s","000"))}function se(T,A){return je.apply(this,arguments)}function je(){return(je=(0,V.Z)(function*({appConfig:T,heartbeatServiceProvider:A},{fid:N}){const $=Me(T),ne=Je(T),le=A.getImmediate({optional:!0});if(le){const xt=yield le.getHeartbeatsHeader();xt&&ne.append("x-firebase-client",xt)}const $e={method:"POST",headers:ne,body:JSON.stringify({fid:N,authVersion:Ge,appId:T.appId,sdkVersion:te})},ht=yield ye(()=>fetch($,$e));if(ht.ok){const xt=yield ht.json();return{fid:xt.fid||N,registrationStatus:2,refreshToken:xt.refreshToken,authToken:Te(xt.authToken)}}throw yield xe("Create Installation",ht)})).apply(this,arguments)}function Be(T){return new Promise(A=>{setTimeout(A,T)})}const Jt=/^[cdef][\w-]{21}$/;function nt(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const N=function tn(T){return function pt(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return Jt.test(N)?N:""}catch{return""}}function Cn(T){return`${T.appName}!${T.appId}`}const rn=new Map;function Kt(T,A){const N=Cn(T);sn(N,A),function Dr(T,A){const N=function Tr(){return!Qr&&"BroadcastChannel"in self&&(Qr=new BroadcastChannel("[Firebase] FID Change"),Qr.onmessage=T=>{sn(T.data.key,T.data.fid)}),Qr}();N&&N.postMessage({key:T,fid:A}),function Pr(){0===rn.size&&Qr&&(Qr.close(),Qr=null)}()}(N,A)}function sn(T,A){const N=rn.get(T);if(N)for(const $ of N)$(A)}let Qr=null;const Jn="firebase-installations-store";let _r=null;function Mn(){return _r||(_r=(0,pe.X3)("firebase-installations-database",1,{upgrade:(T,A)=>{0===A&&T.createObjectStore(Jn)}})),_r}function Ze(T,A){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,V.Z)(function*(T,A){const N=Cn(T),ne=(yield Mn()).transaction(Jn,"readwrite"),le=ne.objectStore(Jn),Re=yield le.get(N);return yield le.put(A,N),yield ne.done,(!Re||Re.fid!==A.fid)&&Kt(T,A.fid),A})).apply(this,arguments)}function ui(T){return cn.apply(this,arguments)}function cn(){return(cn=(0,V.Z)(function*(T){const A=Cn(T),$=(yield Mn()).transaction(Jn,"readwrite");yield $.objectStore(Jn).delete(A),yield $.done})).apply(this,arguments)}function li(T,A){return wi.apply(this,arguments)}function wi(){return(wi=(0,V.Z)(function*(T,A){const N=Cn(T),ne=(yield Mn()).transaction(Jn,"readwrite"),le=ne.objectStore(Jn),Re=yield le.get(N),$e=A(Re);return void 0===$e?yield le.delete(N):yield le.put($e,N),yield ne.done,$e&&(!Re||Re.fid!==$e.fid)&&Kt(T,$e.fid),$e})).apply(this,arguments)}function Fn(T){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,V.Z)(function*(T){let A;const N=yield li(T.appConfig,$=>{const ne=An($),le=yt(T,ne);return A=le.registrationPromise,le.installationEntry});return""===N.fid?{installationEntry:yield A}:{installationEntry:N,registrationPromise:A}})).apply(this,arguments)}function An(T){return Mt(T||{fid:nt(),registrationStatus:0})}function yt(T,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(Xe.create("app-offline"))};const N={fid:A.fid,registrationStatus:1,registrationTime:Date.now()},$=function Ve(T,A){return vn.apply(this,arguments)}(T,N);return{installationEntry:N,registrationPromise:$}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:Xn(T)}:{installationEntry:A}}function vn(){return(vn=(0,V.Z)(function*(T,A){try{const N=yield se(T,A);return Ze(T.appConfig,N)}catch(N){throw Ke(N)&&409===N.customData.serverCode?yield ui(T.appConfig):yield Ze(T.appConfig,{fid:A.fid,registrationStatus:0}),N}})).apply(this,arguments)}function Xn(T){return vr.apply(this,arguments)}function vr(){return(vr=(0,V.Z)(function*(T){let A=yield Gr(T.appConfig);for(;1===A.registrationStatus;)yield Be(100),A=yield Gr(T.appConfig);if(0===A.registrationStatus){const{installationEntry:N,registrationPromise:$}=yield Fn(T);return $||N}return A})).apply(this,arguments)}function Gr(T){return li(T,A=>{if(!A)throw Xe.create("installation-not-found");return Mt(A)})}function Mt(T){return function Or(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function on(T,A){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,V.Z)(function*({appConfig:T,heartbeatServiceProvider:A},N){const $=an(T,N),ne=q(T,N),le=A.getImmediate({optional:!0});if(le){const xt=yield le.getHeartbeatsHeader();xt&&ne.append("x-firebase-client",xt)}const $e={method:"POST",headers:ne,body:JSON.stringify({installation:{sdkVersion:te,appId:T.appId}})},ht=yield ye(()=>fetch($,$e));if(ht.ok)return Te(yield ht.json());throw yield xe("Generate Auth Token",ht)})).apply(this,arguments)}function an(T,{fid:A}){return`${Me(T)}/${A}/authTokens:generate`}function ar(T){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,V.Z)(function*(T,A=!1){let N;const $=yield li(T.appConfig,le=>{if(!W(le))throw Xe.create("not-registered");const Re=le.authToken;if(!A&&z(Re))return le;if(1===Re.requestStatus)return N=it(T,A),le;{if(!navigator.onLine)throw Xe.create("app-offline");const $e=De(le);return N=_t(T,$e),$e}});return N?yield N:$.authToken})).apply(this,arguments)}function it(T,A){return ke.apply(this,arguments)}function ke(){return(ke=(0,V.Z)(function*(T,A){let N=yield ot(T.appConfig);for(;1===N.authToken.requestStatus;)yield Be(100),N=yield ot(T.appConfig);const $=N.authToken;return 0===$.requestStatus?ar(T,A):$})).apply(this,arguments)}function ot(T){return li(T,A=>{if(!W(A))throw Xe.create("not-registered");return function ue(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function _t(T,A){return bt.apply(this,arguments)}function bt(){return(bt=(0,V.Z)(function*(T,A){try{const N=yield on(T,A),$=Object.assign(Object.assign({},A),{authToken:N});return yield Ze(T.appConfig,$),N}catch(N){if(!Ke(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const $=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield Ze(T.appConfig,$)}else yield ui(T.appConfig);throw N}})).apply(this,arguments)}function W(T){return void 0!==T&&2===T.registrationStatus}function z(T){return 2===T.requestStatus&&!function ee(T){const A=Date.now();return A<T.creationTime||T.creationTime+T.expiresIn<A+36e5}(T)}function De(T){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:A})}function gt(){return(gt=(0,V.Z)(function*(T){const A=T,{installationEntry:N,registrationPromise:$}=yield Fn(A);return $?$.catch(console.error):ar(A).catch(console.error),N.fid})).apply(this,arguments)}function Un(){return(Un=(0,V.Z)(function*(T,A=!1){const N=T;return yield gn(N),(yield ar(N,A)).token})).apply(this,arguments)}function gn(T){return mn.apply(this,arguments)}function mn(){return(mn=(0,V.Z)(function*(T){const{registrationPromise:A}=yield Fn(T);A&&(yield A)})).apply(this,arguments)}function zn(T){return Xe.create("missing-app-config-values",{valueName:T})}const lo="installations",kn=T=>{const A=T.getProvider("app").getImmediate(),N=function wn(T){if(!T||!T.options)throw zn("App Configuration");if(!T.name)throw zn("App Name");const A=["projectId","apiKey","appId"];for(const N of A)if(!T.options[N])throw zn(N);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(A);return{app:A,appConfig:N,heartbeatServiceProvider:(0,ce._getProvider)(A,"heartbeat"),_delete:()=>Promise.resolve()}},_s=T=>{const A=T.getProvider("app").getImmediate(),N=(0,ce._getProvider)(A,lo).getImmediate();return{getId:()=>function We(T){return gt.apply(this,arguments)}(N),getToken:ne=>function $t(T){return Un.apply(this,arguments)}(N,ne)}};(function Ca(){(0,ce._registerComponent)(new _e.wA(lo,kn,"PUBLIC")),(0,ce._registerComponent)(new _e.wA("installations-internal",_s,"PRIVATE"))})(),(0,ce.registerVersion)(Ee,K),(0,ce.registerVersion)(Ee,K,"esm2017");const Oi="@firebase/remote-config",rr=new de.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Bc{constructor(A,N,$,ne){this.client=A,this.storage=N,this.storageCache=$,this.logger=ne}isCachedDataFresh(A,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const $=Date.now()-N,ne=$<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${$}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${ne}.`),ne}fetch(A){var N=this;return(0,V.Z)(function*(){const[$,ne]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(ne&&N.isCachedDataFresh(A.cacheMaxAgeMillis,$))return ne;A.eTag=ne&&ne.eTag;const le=yield N.client.fetch(A),Re=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===le.status&&Re.push(N.storage.setLastSuccessfulFetchResponse(le)),yield Promise.all(Re),le})()}}function Au(T=navigator){return T.languages&&T.languages[0]||T.language}class xu{constructor(A,N,$,ne,le,Re){this.firebaseInstallations=A,this.sdkVersion=N,this.namespace=$,this.projectId=ne,this.apiKey=le,this.appId=Re}fetch(A){var N=this;return(0,V.Z)(function*(){var $,ne,le;const[Re,$e]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),xt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,Nt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},vt={sdk_version:N.sdkVersion,app_instance_id:Re,app_instance_id_token:$e,app_id:N.appId,language_code:Au()},Zn={method:"POST",headers:Nt,body:JSON.stringify(vt)},Kr=fetch(xt,Zn),eu=new Promise((tu,aa)=>{A.signal.addEventListener(()=>{const hs=new Error("The operation was aborted.");hs.name="AbortError",aa(hs)})});let xo;try{yield Promise.race([Kr,eu]),xo=yield Kr}catch(tu){let aa="fetch-client-network";throw"AbortError"===(null===($=tu)||void 0===$?void 0:$.name)&&(aa="fetch-timeout"),rr.create(aa,{originalErrorMessage:null===(ne=tu)||void 0===ne?void 0:ne.message})}let Lt=xo.status;const Ts=xo.headers.get("ETag")||void 0;let Ro,ji;if(200===xo.status){let tu;try{tu=yield xo.json()}catch(aa){throw rr.create("fetch-client-parse",{originalErrorMessage:null===(le=aa)||void 0===le?void 0:le.message})}Ro=tu.entries,ji=tu.state}if("INSTANCE_STATE_UNSPECIFIED"===ji?Lt=500:"NO_CHANGE"===ji?Lt=304:("NO_TEMPLATE"===ji||"EMPTY_CONFIG"===ji)&&(Ro={}),304!==Lt&&200!==Lt)throw rr.create("fetch-status",{httpStatus:Lt});return{status:Lt,eTag:Ts,config:Ro}})()}}class Yd{constructor(A,N){this.client=A,this.storage=N}fetch(A){var N=this;return(0,V.Z)(function*(){const $=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(A,$)})()}attemptFetch(A,{throttleEndTimeMillis:N,backoffCount:$}){var ne=this;return(0,V.Z)(function*(){yield function cr(T,A){return new Promise((N,$)=>{const ne=Math.max(A-Date.now(),0),le=setTimeout(N,ne);T.addEventListener(()=>{clearTimeout(le),$(rr.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,N);try{const le=yield ne.client.fetch(A);return yield ne.storage.deleteThrottleMetadata(),le}catch(le){if(!function Pl(T){if(!(T instanceof de.ZR&&T.customData))return!1;const A=Number(T.customData.httpStatus);return 429===A||500===A||503===A||504===A}(le))throw le;const Re={throttleEndTimeMillis:Date.now()+(0,de.$s)($),backoffCount:$+1};return yield ne.storage.setThrottleMetadata(Re),ne.attemptFetch(A,Re)}})()}}class Ru{constructor(A,N,$,ne,le){this.app=A,this._client=N,this._storageCache=$,this._storage=ne,this._logger=le,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Mu(T,A){var N;const $=T.target.error||void 0;return rr.create(A,{originalErrorMessage:$&&(null===(N=$)||void 0===N?void 0:N.message)})}const ws="app_namespace_store";class eh{constructor(A,N,$,ne=function Xd(){return new Promise((T,A)=>{var N;try{const $=indexedDB.open("firebase_remote_config",1);$.onerror=ne=>{A(Mu(ne,"storage-open"))},$.onsuccess=ne=>{T(ne.target.result)},$.onupgradeneeded=ne=>{0===ne.oldVersion&&ne.target.result.createObjectStore(ws,{keyPath:"compositeKey"})}}catch($){A(rr.create("storage-open",{originalErrorMessage:null===(N=$)||void 0===N?void 0:N.message}))}})}()){this.appId=A,this.appName=N,this.namespace=$,this.openDbPromise=ne}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var N=this;return(0,V.Z)(function*(){const $=yield N.openDbPromise;return new Promise((ne,le)=>{var Re;const ht=$.transaction([ws],"readonly").objectStore(ws),xt=N.createCompositeKey(A);try{const Nt=ht.get(xt);Nt.onerror=vt=>{le(Mu(vt,"storage-get"))},Nt.onsuccess=vt=>{const Zn=vt.target.result;ne(Zn?Zn.value:void 0)}}catch(Nt){le(rr.create("storage-get",{originalErrorMessage:null===(Re=Nt)||void 0===Re?void 0:Re.message}))}})})()}set(A,N){var $=this;return(0,V.Z)(function*(){const ne=yield $.openDbPromise;return new Promise((le,Re)=>{var $e;const xt=ne.transaction([ws],"readwrite").objectStore(ws),Nt=$.createCompositeKey(A);try{const vt=xt.put({compositeKey:Nt,value:N});vt.onerror=Zn=>{Re(Mu(Zn,"storage-set"))},vt.onsuccess=()=>{le()}}catch(vt){Re(rr.create("storage-set",{originalErrorMessage:null===($e=vt)||void 0===$e?void 0:$e.message}))}})})()}delete(A){var N=this;return(0,V.Z)(function*(){const $=yield N.openDbPromise;return new Promise((ne,le)=>{var Re;const ht=$.transaction([ws],"readwrite").objectStore(ws),xt=N.createCompositeKey(A);try{const Nt=ht.delete(xt);Nt.onerror=vt=>{le(Mu(vt,"storage-delete"))},Nt.onsuccess=()=>{ne()}}catch(Nt){le(rr.create("storage-delete",{originalErrorMessage:null===(Re=Nt)||void 0===Re?void 0:Re.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class Ll{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,V.Z)(function*(){const N=A.storage.getLastFetchStatus(),$=A.storage.getLastSuccessfulFetchTimestampMillis(),ne=A.storage.getActiveConfig(),le=yield N;le&&(A.lastFetchStatus=le);const Re=yield $;Re&&(A.lastSuccessfulFetchTimestampMillis=Re);const $e=yield ne;$e&&(A.activeConfig=$e)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function xa(){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,V.Z)(function*(){if(!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}!function Es(){(0,ce._registerComponent)(new _e.wA("remote-config",function T(A,{instanceIdentifier:N}){const $=A.getProvider("app").getImmediate(),ne=A.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw rr.create("registration-window");if(!(0,de.hl)())throw rr.create("indexed-db-unavailable");const{projectId:le,apiKey:Re,appId:$e}=$.options;if(!le)throw rr.create("registration-project-id");if(!Re)throw rr.create("registration-api-key");if(!$e)throw rr.create("registration-app-id");const ht=new eh($e,$.name,N=N||"firebase"),xt=new Ll(ht),Nt=new he.Yd(Oi);Nt.logLevel=he.in.ERROR;const vt=new xu(ne,ce.SDK_VERSION,N,le,Re,$e),Zn=new Yd(vt,ht),Kr=new Bc(Zn,ht,xt,Nt),eu=new Ru($,Kr,xt,ht,Nt);return function ur(T){const A=(0,de.m9)(T);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(eu),eu},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(Oi,"0.3.12"),(0,ce.registerVersion)(Oi,"0.3.12","esm2017")}();const Fi="/firebase-messaging-sw.js",ts="/firebase-cloud-messaging-push-scope",ns="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Go="google.c.a.c_id",Ma="google.c.a.c_l",ku="google.c.a.ts",Ul="google.c.a.e";var Ui=(()=>{return(T=Ui||(Ui={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",Ui;var T})();function ci(T){const A=new Uint8Array(T);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ei(T){const N=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),$=atob(N),ne=new Uint8Array($.length);for(let le=0;le<$.length;++le)ne[le]=$.charCodeAt(le);return ne}const co="fcm_token_details_db",Sr="fcm_token_object_Store";function jc(T){return $c.apply(this,arguments)}function $c(){return $c=(0,V.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(le=>le.name).includes(co))return null;let A=null;return(yield(0,pe.X3)(co,5,{upgrade:($=(0,V.Z)(function*(ne,le,Re,$e){var ht;if(le<2||!ne.objectStoreNames.contains(Sr))return;const xt=$e.objectStore(Sr),Nt=yield xt.index("fcmSenderId").get(T);if(yield xt.clear(),Nt)if(2===le){const vt=Nt;if(!vt.auth||!vt.p256dh||!vt.endpoint)return;A={token:vt.fcmToken,createTime:null!==(ht=vt.createTime)&&void 0!==ht?ht:Date.now(),subscriptionOptions:{auth:vt.auth,p256dh:vt.p256dh,endpoint:vt.endpoint,swScope:vt.swScope,vapidKey:"string"==typeof vt.vapidKey?vt.vapidKey:ci(vt.vapidKey)}}}else if(3===le){const vt=Nt;A={token:vt.fcmToken,createTime:vt.createTime,subscriptionOptions:{auth:ci(vt.auth),p256dh:ci(vt.p256dh),endpoint:vt.endpoint,swScope:vt.swScope,vapidKey:ci(vt.vapidKey)}}}else if(4===le){const vt=Nt;A={token:vt.fcmToken,createTime:vt.createTime,subscriptionOptions:{auth:ci(vt.auth),p256dh:ci(vt.p256dh),endpoint:vt.endpoint,swScope:vt.swScope,vapidKey:ci(vt.vapidKey)}}}}),function(le,Re,$e,ht){return $.apply(this,arguments)})})).close(),yield(0,pe.Lj)(co),yield(0,pe.Lj)("fcm_vapid_details_db"),yield(0,pe.Lj)("undefined"),In(A)?A:null;var $}),$c.apply(this,arguments)}function In(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:A}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const di="firebase-messaging-store";let Fr=null;function Wo(){return Fr||(Fr=(0,pe.X3)("firebase-messaging-database",1,{upgrade:(T,A)=>{0===A&&T.createObjectStore(di)}})),Fr}function Is(T){return rs.apply(this,arguments)}function rs(){return(rs=(0,V.Z)(function*(T){const A=bi(T),$=yield(yield Wo()).transaction(di).objectStore(di).get(A);if($)return $;{const ne=yield jc(T.appConfig.senderId);if(ne)return yield nn(T,ne),ne}})).apply(this,arguments)}function nn(T,A){return Na.apply(this,arguments)}function Na(){return(Na=(0,V.Z)(function*(T,A){const N=bi(T),ne=(yield Wo()).transaction(di,"readwrite");return yield ne.objectStore(di).put(A,N),yield ne.done,A})).apply(this,arguments)}function Hs(T){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,V.Z)(function*(T){const A=bi(T),$=(yield Wo()).transaction(di,"readwrite");yield $.objectStore(di).delete(A),yield $.done})).apply(this,arguments)}function bi({appConfig:T}){return T.appId}const Bn=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function At(T,A){return ho.apply(this,arguments)}function ho(){return(ho=(0,V.Z)(function*(T,A){var N;const $=yield Pu(T),ne=Ne(A),le={method:"POST",headers:$,body:JSON.stringify(ne)};let Re;try{Re=yield(yield fetch(ss(T.appConfig),le)).json()}catch($e){throw Bn.create("token-subscribe-failed",{errorInfo:null===(N=$e)||void 0===N?void 0:N.toString()})}if(Re.error)throw Bn.create("token-subscribe-failed",{errorInfo:Re.error.message});if(!Re.token)throw Bn.create("token-subscribe-no-token");return Re.token})).apply(this,arguments)}function Bl(T,A){return is.apply(this,arguments)}function is(){return(is=(0,V.Z)(function*(T,A){var N;const $=yield Pu(T),ne=Ne(A.subscriptionOptions),le={method:"PATCH",headers:$,body:JSON.stringify(ne)};let Re;try{Re=yield(yield fetch(`${ss(T.appConfig)}/${A.token}`,le)).json()}catch($e){throw Bn.create("token-update-failed",{errorInfo:null===(N=$e)||void 0===N?void 0:N.toString()})}if(Re.error)throw Bn.create("token-update-failed",{errorInfo:Re.error.message});if(!Re.token)throw Bn.create("token-update-no-token");return Re.token})).apply(this,arguments)}function La(T,A){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,V.Z)(function*(T,A){var N;const ne={method:"DELETE",headers:yield Pu(T)};try{const Re=yield(yield fetch(`${ss(T.appConfig)}/${A}`,ne)).json();if(Re.error)throw Bn.create("token-unsubscribe-failed",{errorInfo:Re.error.message})}catch(le){throw Bn.create("token-unsubscribe-failed",{errorInfo:null===(N=le)||void 0===N?void 0:N.toString()})}})).apply(this,arguments)}function ss({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function Pu(T){return zo.apply(this,arguments)}function zo(){return(zo=(0,V.Z)(function*({appConfig:T,installations:A}){const N=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function Ne({p256dh:T,auth:A,endpoint:N,vapidKey:$}){const ne={web:{endpoint:N,auth:A,p256dh:T}};return $!==ns&&(ne.web.applicationPubKey=$),ne}const Zt=6048e5;function Fa(T){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,V.Z)(function*(T){const A=yield Ou(T.swRegistration,T.vapidKey),N={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:A.endpoint,auth:ci(A.getKey("auth")),p256dh:ci(A.getKey("p256dh"))},$=yield Is(T.firebaseDependencies);if($){if(Lu($.subscriptionOptions,N))return Date.now()>=$.createTime+Zt?fo(T,{token:$.token,createTime:Date.now(),subscriptionOptions:N}):$.token;try{yield La(T.firebaseDependencies,$.token)}catch(ne){console.warn(ne)}return Ko(T.firebaseDependencies,N)}return Ko(T.firebaseDependencies,N)})).apply(this,arguments)}function Nn(T){return qo.apply(this,arguments)}function qo(){return(qo=(0,V.Z)(function*(T){const A=yield Is(T.firebaseDependencies);A&&(yield La(T.firebaseDependencies,A.token),yield Hs(T.firebaseDependencies));const N=yield T.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function fo(T,A){return hi.apply(this,arguments)}function hi(){return(hi=(0,V.Z)(function*(T,A){try{const N=yield Bl(T.firebaseDependencies,A),$=Object.assign(Object.assign({},A),{token:N,createTime:Date.now()});return yield nn(T.firebaseDependencies,$),N}catch(N){throw yield Nn(T),N}})).apply(this,arguments)}function Ko(T,A){return po.apply(this,arguments)}function po(){return(po=(0,V.Z)(function*(T,A){const $={token:yield At(T,A),createTime:Date.now(),subscriptionOptions:A};return yield nn(T,$),$.token})).apply(this,arguments)}function Ou(T,A){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,V.Z)(function*(T,A){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ei(A)})})).apply(this,arguments)}function Lu(T,A){return A.vapidKey===T.vapidKey&&A.endpoint===T.endpoint&&A.auth===T.auth&&A.p256dh===T.p256dh}function go(T){const A={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function Pn(T,A){if(!A.notification)return;T.notification={};const N=A.notification.title;N&&(T.notification.title=N);const $=A.notification.body;$&&(T.notification.body=$);const ne=A.notification.image;ne&&(T.notification.image=ne)}(A,T),function Vi(T,A){!A.data||(T.data=A.data)}(A,T),function Fu(T,A){var N,$,ne,le,Re;if(!(A.fcmOptions||null!==(N=A.notification)&&void 0!==N&&N.click_action))return;T.fcmOptions={};const $e=null!==(ne=null===($=A.fcmOptions)||void 0===$?void 0:$.link)&&void 0!==ne?ne:null===(le=A.notification)||void 0===le?void 0:le.click_action;$e&&(T.fcmOptions.link=$e);const ht=null===(Re=A.fcmOptions)||void 0===Re?void 0:Re.analytics_label;ht&&(T.fcmOptions.analyticsLabel=ht)}(A,T),A}function Gs(T){return"object"==typeof T&&!!T&&Go in T}function fi(T,A){const N=[];for(let $=0;$<T.length;$++)N.push(T.charAt($)),$<A.length&&N.push(A.charAt($));return N.join("")}function Yo(T){return Bn.create("missing-app-config-values",{valueName:T})}fi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),fi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class nh{constructor(A,N,$){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ne=function th(T){if(!T||!T.options)throw Yo("App Configuration Object");if(!T.name)throw Yo("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:N}=T;for(const $ of A)if(!N[$])throw Yo($);return{appName:T.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:ne,installations:N,analyticsProvider:$}}_delete(){return Promise.resolve()}}function Uu(T){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,V.Z)(function*(T){var A;try{T.swRegistration=yield navigator.serviceWorker.register(Fi,{scope:ts}),T.swRegistration.update().catch(()=>{})}catch(N){throw Bn.create("failed-service-worker-registration",{browserErrorMessage:null===(A=N)||void 0===A?void 0:A.message})}})).apply(this,arguments)}function Jo(T,A){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,V.Z)(function*(T,A){if(!A&&!T.swRegistration&&(yield Uu(T)),A||!T.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw Bn.create("invalid-sw-registration");T.swRegistration=A}})).apply(this,arguments)}function Xo(T,A){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,V.Z)(function*(T,A){A?T.vapidKey=A:T.vapidKey||(T.vapidKey=ns)})).apply(this,arguments)}function ta(){return(ta=(0,V.Z)(function*(T,A){if(!navigator)throw Bn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Bn.create("permission-blocked");return yield Xo(T,A?.vapidKey),yield Jo(T,A?.serviceWorkerRegistration),Fa(T)})).apply(this,arguments)}function ju(T,A,N){return $u.apply(this,arguments)}function $u(){return($u=(0,V.Z)(function*(T,A,N){const $=Hu(A);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent($,{message_id:N[Go],message_name:N[Ma],message_time:N[ku],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Hu(T){switch(T){case Ui.NOTIFICATION_CLICKED:return"notification_open";case Ui.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function os(){return(os=(0,V.Z)(function*(T,A){const N=A.data;if(!N.isFirebaseMessaging)return;T.onMessageHandler&&N.messageType===Ui.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(go(N)):T.onMessageHandler.next(go(N)));const $=N.data;Gs($)&&"1"===$[Ul]&&(yield ju(T,N.messageType,$))})).apply(this,arguments)}const Ws="@firebase/messaging",dr=T=>{const A=new nh(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function Gu(T,A){return os.apply(this,arguments)}(A,N)),A},ti=T=>{const A=T.getProvider("messaging").getImmediate();return{getToken:$=>function ea(T,A){return ta.apply(this,arguments)}(A,$)}};function jl(){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,V.Z)(function*(){try{yield(0,de.eu)()}catch{return!1}return typeof window<"u"&&(0,de.hl)()&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Dn(){(0,ce._registerComponent)(new _e.wA("messaging",dr,"PUBLIC")),(0,ce._registerComponent)(new _e.wA("messaging-internal",ti,"PRIVATE")),(0,ce.registerVersion)(Ws,"0.9.17"),(0,ce.registerVersion)(Ws,"0.9.17","esm2017")}();const mo="analytics",Ku="firebase_id",qs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",na="https://www.googletagmanager.com/gtag/js",qn=new he.Yd("@firebase/analytics");function $a(T){return Promise.all(T.map(A=>A.catch(N=>N)))}function Ha(T,A){const N=document.createElement("script");N.src=`${na}?l=${T}&id=${A}`,N.async=!0,document.head.appendChild(N)}function yo(T,A,N,$,ne,le){return _o.apply(this,arguments)}function _o(){return(_o=(0,V.Z)(function*(T,A,N,$,ne,le){const Re=$[ne];try{if(Re)yield A[Re];else{const ht=(yield $a(N)).find(xt=>xt.measurementId===ne);ht&&(yield A[ht.appId])}}catch($e){qn.error($e)}T("config",ne,le)})).apply(this,arguments)}function vo(T,A,N,$,ne){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,V.Z)(function*(T,A,N,$,ne){try{let le=[];if(ne&&ne.send_to){let Re=ne.send_to;Array.isArray(Re)||(Re=[Re]);const $e=yield $a(N);for(const ht of Re){const xt=$e.find(vt=>vt.measurementId===ht),Nt=xt&&A[xt.appId];if(!Nt){le=[];break}le.push(Nt)}}0===le.length&&(le=Object.values(A)),yield Promise.all(le),T("event",$,ne||{})}catch(le){qn.error(le)}})).apply(this,arguments)}function Hl(){const T=window.document.getElementsByTagName("script");for(const A of Object.values(T))if(A.src&&A.src.includes(na))return A;return null}const er=new de.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),H=new class k{constructor(A={},N=1e3){this.throttleMetadata=A,this.intervalMillis=N}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,N){this.throttleMetadata[A]=N}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function be(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function rt(T){return On.apply(this,arguments)}function On(){return(On=(0,V.Z)(function*(T){var A;const{appId:N,apiKey:$}=T,ne={method:"GET",headers:be($)},le=qs.replace("{app-id}",N),Re=yield fetch(le,ne);if(200!==Re.status&&304!==Re.status){let $e="";try{const ht=yield Re.json();null!==(A=ht.error)&&void 0!==A&&A.message&&($e=ht.error.message)}catch{}throw er.create("config-fetch-failed",{httpStatus:Re.status,responseMessage:$e})}return Re.json()})).apply(this,arguments)}function pn(T){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,V.Z)(function*(T,A=H,N){const{appId:$,apiKey:ne,measurementId:le}=T.options;if(!$)throw er.create("no-app-id");if(!ne){if(le)return{measurementId:le,appId:$};throw er.create("no-api-key")}const Re=A.getThrottleMetadata($)||{backoffCount:0,throttleEndTimeMillis:Date.now()},$e=new zl;return setTimeout((0,V.Z)(function*(){$e.abort()}),void 0!==N?N:6e4),as({appId:$,apiKey:ne,measurementId:le},Re,$e,A)})).apply(this,arguments)}function as(T,A,N){return us.apply(this,arguments)}function us(){return(us=(0,V.Z)(function*(T,{throttleEndTimeMillis:A,backoffCount:N},$,ne=H){var le,Re;const{appId:$e,measurementId:ht}=T;try{yield Zu($,A)}catch(xt){if(ht)return qn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ht} provided in the "measurementId" field in the local Firebase config. [${null===(le=xt)||void 0===le?void 0:le.message}]`),{appId:$e,measurementId:ht};throw xt}try{const xt=yield rt(T);return ne.deleteThrottleMetadata($e),xt}catch(xt){const Nt=xt;if(!Wl(Nt)){if(ne.deleteThrottleMetadata($e),ht)return qn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ht} provided in the "measurementId" field in the local Firebase config. [${Nt?.message}]`),{appId:$e,measurementId:ht};throw xt}const vt=503===Number(null===(Re=Nt?.customData)||void 0===Re?void 0:Re.httpStatus)?(0,de.$s)(N,ne.intervalMillis,30):(0,de.$s)(N,ne.intervalMillis),Zn={throttleEndTimeMillis:Date.now()+vt,backoffCount:N+1};return ne.setThrottleMetadata($e,Zn),qn.debug(`Calling attemptFetch again in ${vt} millis`),as(T,Zn,$,ne)}})).apply(this,arguments)}function Zu(T,A){return new Promise((N,$)=>{const ne=Math.max(A-Date.now(),0),le=setTimeout(N,ne);T.addEventListener(()=>{clearTimeout(le),$(er.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function Wl(T){if(!(T instanceof de.ZR&&T.customData))return!1;const A=Number(T.customData.httpStatus);return 429===A||500===A||503===A||504===A}class zl{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}let wo,Qu;function Eo(){return(Eo=(0,V.Z)(function*(T,A,N,$,ne){if(ne&&ne.global)T("event",N,$);else{const le=yield A;T("event",N,Object.assign(Object.assign({},$),{send_to:le}))}})).apply(this,arguments)}function sa(T){Qu=T}function zc(T){wo=T}function Io(){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,V.Z)(function*(){var T;if(!(0,de.hl)())return qn.warn(er.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,de.eu)()}catch(A){return qn.warn(er.create("indexeddb-unavailable",{errorInfo:null===(T=A)||void 0===T?void 0:T.toString()}).message),!1}return!0})).apply(this,arguments)}function qa(){return(qa=(0,V.Z)(function*(T,A,N,$,ne,le,Re){var $e;const ht=pn(T);ht.then(Kr=>{N[Kr.measurementId]=Kr.appId,T.options.measurementId&&Kr.measurementId!==T.options.measurementId&&qn.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${Kr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Kr=>qn.error(Kr)),A.push(ht);const xt=Io().then(Kr=>{if(Kr)return $.getId()}),[Nt,vt]=yield Promise.all([ht,xt]);Hl()||Ha(le,Nt.measurementId),Qu&&(ne("consent","default",Qu),sa(void 0)),ne("js",new Date);const Zn=null!==($e=Re?.config)&&void 0!==$e?$e:{};return Zn.origin="firebase",Zn.update=!0,null!=vt&&(Zn[Ku]=vt),ne("config",Nt.measurementId,Zn),wo&&(ne("set",wo),zc(void 0)),Nt.measurementId})).apply(this,arguments)}class Yl{constructor(A){this.app=A}_delete(){return delete Di[this.app.options.appId],Promise.resolve()}}let Di={},bo=[];const Ka={};let Ya,oa,Za="dataLayer",Ju=!1;function L_(T,A,N){!function Zg(){const T=[];if((0,de.ru)()&&T.push("This is a browser extension environment."),(0,de.zI)()||T.push("Cookies are not available."),T.length>0){const A=T.map(($,ne)=>`(${ne+1}) ${$}`).join(" "),N=er.create("invalid-analytics-context",{errorInfo:A});qn.warn(N.message)}}();const $=T.options.appId;if(!$)throw er.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw er.create("no-api-key");qn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Di[$])throw er.create("already-exists",{id:$});if(!Ju){!function Ci(T){let A=[];Array.isArray(window[T])?A=window[T]:window[T]=A}(Za);const{wrappedGtag:le,gtagCore:Re}=function ra(T,A,N,$,ne){let le=function(...Re){window[$].push(arguments)};return window[ne]&&"function"==typeof window[ne]&&(le=window[ne]),window[ne]=function Ga(T,A,N,$){function le(){return(le=(0,V.Z)(function*(Re,$e,ht){try{"event"===Re?yield vo(T,A,N,$e,ht):"config"===Re?yield yo(T,A,N,$,$e,ht):"consent"===Re?T("consent","update",ht):T("set",$e)}catch(xt){qn.error(xt)}})).apply(this,arguments)}return function ne(Re,$e,ht){return le.apply(this,arguments)}}(le,T,A,N),{gtagCore:le,wrappedGtag:window[ne]}}(Di,bo,Ka,Za,"gtag");oa=le,Ya=Re,Ju=!0}return Di[$]=function za(T,A,N,$,ne,le,Re){return qa.apply(this,arguments)}(T,bo,Ka,A,Ya,Za,N),new Yl(T)}function U_(){return Gf.apply(this,arguments)}function Gf(){return(Gf=(0,V.Z)(function*(){if((0,de.ru)()||!(0,de.zI)()||!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}const mt="@firebase/analytics";!function Kn(){(0,ce._registerComponent)(new _e.wA(mo,(A,{options:N})=>L_(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,ce._registerComponent)(new _e.wA("analytics-internal",function T(A){try{const N=A.getProvider(mo).getImmediate();return{logEvent:($,ne,le)=>function xn(T,A,N,$){T=(0,de.m9)(T),function rh(T,A,N,$,ne){return Eo.apply(this,arguments)}(oa,Di[T.app.options.appId],A,N,$).catch(ne=>qn.error(ne))}(N,$,ne,le)}}catch(N){throw er.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,ce.registerVersion)(mt,"0.8.1"),(0,ce.registerVersion)(mt,"0.8.1","esm2017")}();var cs=F(4408),ni=F(7565);const Jl=new class Co extends ni.v{}(class Xu extends cs.o{constructor(A,N){super(A,N),this.scheduler=A,this.work=N}schedule(A,N=0){return N>0?super.schedule(A,N):(this.delay=N,this.state=A,this.scheduler.flush(this),this)}execute(A,N){return N>0||this.closed?super.execute(A,N):this._execute(A,N)}requestAsyncId(A,N,$=0){return null!=$&&$>0||null==$&&this.delay>0?super.requestAsyncId(A,N,$):(A.flush(this),0)}});var Kc=F(4986),Xl=F(8505),Qa=F(9468),Ys=F(5363);const ut=new m.GfV("7.4.1"),el="__angularfire_symbol__analyticsIsSupportedValue",Do="__angularfire_symbol__analyticsIsSupported",ec="__angularfire_symbol__remoteConfigIsSupportedValue",tl="__angularfire_symbol__remoteConfigIsSupported",hr="__angularfire_symbol__messagingIsSupportedValue",Zc="__angularfire_symbol__messagingIsSupported";function nl(T,A,N){if(A){if(1===A.length)return A[0];const le=A.filter(Re=>Re.app===N);if(1===le.length)return le[0]}return N.container.getProvider(T).getImmediate({optional:!0})}globalThis[Do]||(globalThis[Do]=U_().then(T=>globalThis[el]=T).catch(()=>globalThis[el]=!1)),globalThis[Zc]||(globalThis[Zc]=jl().then(T=>globalThis[hr]=T).catch(()=>globalThis[hr]=!1)),globalThis[tl]||(globalThis[tl]=xa().then(T=>globalThis[ec]=T).catch(()=>globalThis[ec]=!1));const To=(T,A)=>{const N=A?[A]:(0,U.C6)(),$=[];return N.forEach(ne=>{ne.container.getProvider(T).instances.forEach(Re=>{$.includes(Re)||$.push(Re)})}),$};function So(){}class ds{constructor(A,N=Jl){this.zone=A,this.delegate=N}now(){return this.delegate.now()}schedule(A,N,$){const ne=this.zone;return this.delegate.schedule(function(Re){ne.runGuarded(()=>{A.apply(this,[Re])})},N,$)}}class Qc{constructor(A){this.zone=A,this.task=null}call(A,N){const $=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",So,{},So,So)),N.pipe((0,Xl.b)({next:$,complete:$,error:$})).subscribe(A).add($)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Xa=(()=>{class T{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new ds(Zone.current)),this.insideAngular=N.run(()=>new ds(Zone.current,Kc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(N){return new(N||T)(m.LFG(m.R0b))},T.\u0275prov=m.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function Ti(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function Js(T){return Ti(),function fr(T){return function(N){return(N=N.lift(new Qc(T.ngZone))).pipe((0,Qa.R)(T.outsideAngular),(0,Ys.Q)(T.insideAngular))}}(Ti())(T)}},2090:(lt,oe,F)=>{"use strict";F.d(oe,{$s:()=>ke,BH:()=>Jt,DV:()=>Qn,Dv:()=>vn,G6:()=>xe,GJ:()=>Pr,L:()=>pe,LL:()=>Cn,Pz:()=>pt,Sg:()=>zt,UG:()=>Ae,UI:()=>_r,US:()=>_e,Wj:()=>Gr,Wl:()=>Tt,Yr:()=>Te,ZB:()=>Z,ZR:()=>tn,aH:()=>Be,b$:()=>ve,cI:()=>fn,dS:()=>Or,eu:()=>Je,g5:()=>V,gK:()=>Xn,gQ:()=>wi,h$:()=>he,hl:()=>Qe,hu:()=>U,jU:()=>at,lb:()=>Mt,m9:()=>bt,ne:()=>Fn,p$:()=>K,pd:()=>li,r3:()=>Ft,ru:()=>ge,tV:()=>Ee,uI:()=>Pe,ug:()=>on,vZ:()=>Mn,w1:()=>Ke,w9:()=>Tr,xO:()=>ui,xb:()=>Jn,z$:()=>Ge,zI:()=>q,zd:()=>cn});const U=function(W,z){if(!W)throw V(z)},V=function(W){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+W)},ce=function(W){const z=[];let ee=0;for(let De=0;De<W.length;De++){let ue=W.charCodeAt(De);ue<128?z[ee++]=ue:ue<2048?(z[ee++]=ue>>6|192,z[ee++]=63&ue|128):55296==(64512&ue)&&De+1<W.length&&56320==(64512&W.charCodeAt(De+1))?(ue=65536+((1023&ue)<<10)+(1023&W.charCodeAt(++De)),z[ee++]=ue>>18|240,z[ee++]=ue>>12&63|128,z[ee++]=ue>>6&63|128,z[ee++]=63&ue|128):(z[ee++]=ue>>12|224,z[ee++]=ue>>6&63|128,z[ee++]=63&ue|128)}return z},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,z){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ee=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,De=[];for(let ue=0;ue<W.length;ue+=3){const We=W[ue],gt=ue+1<W.length,$t=gt?W[ue+1]:0,Un=ue+2<W.length,gn=Un?W[ue+2]:0;let dt=(15&$t)<<2|gn>>6,Xt=63&gn;Un||(Xt=64,gt||(dt=64)),De.push(ee[We>>2],ee[(3&We)<<4|$t>>4],ee[dt],ee[Xt])}return De.join("")},encodeString(W,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(W):this.encodeByteArray(ce(W),z)},decodeString(W,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(W):function(W){const z=[];let ee=0,De=0;for(;ee<W.length;){const ue=W[ee++];if(ue<128)z[De++]=String.fromCharCode(ue);else if(ue>191&&ue<224){const We=W[ee++];z[De++]=String.fromCharCode((31&ue)<<6|63&We)}else if(ue>239&&ue<365){const Un=((7&ue)<<18|(63&W[ee++])<<12|(63&W[ee++])<<6|63&W[ee++])-65536;z[De++]=String.fromCharCode(55296+(Un>>10)),z[De++]=String.fromCharCode(56320+(1023&Un))}else{const We=W[ee++],gt=W[ee++];z[De++]=String.fromCharCode((15&ue)<<12|(63&We)<<6|63&gt)}}return z.join("")}(this.decodeStringToByteArray(W,z))},decodeStringToByteArray(W,z){this.init_();const ee=z?this.charToByteMapWebSafe_:this.charToByteMap_,De=[];for(let ue=0;ue<W.length;){const We=ee[W.charAt(ue++)],$t=ue<W.length?ee[W.charAt(ue)]:0;++ue;const gn=ue<W.length?ee[W.charAt(ue)]:64;++ue;const Oe=ue<W.length?ee[W.charAt(ue)]:64;if(++ue,null==We||null==$t||null==gn||null==Oe)throw Error();De.push(We<<2|$t>>4),64!==gn&&(De.push($t<<4&240|gn>>2),64!==Oe&&De.push(gn<<6&192|Oe))}return De},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}},he=function(W){const z=ce(W);return _e.encodeByteArray(z,!0)},pe=function(W){return he(W).replace(/\./g,"")},Ee=function(W){try{return _e.decodeString(W,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function K(W){return Z(void 0,W)}function Z(W,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return z}for(const ee in z)!z.hasOwnProperty(ee)||!te(ee)||(W[ee]=Z(W[ee],z[ee]));return W}function te(W){return"__proto__"!==W}function Ge(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Pe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ge())}function Ae(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function at(){return"object"==typeof self&&self.self===self}function ge(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function ve(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ke(){const W=Ge();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function Te(){return!1}function xe(){return!Ae()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qe(){return"object"==typeof indexedDB}function Je(){return new Promise((W,z)=>{try{let ee=!0;const De="validate-browser-context-for-indexeddb-analytics-module",ue=self.indexedDB.open(De);ue.onsuccess=()=>{ue.result.close(),ee||self.indexedDB.deleteDatabase(De),W(!0)},ue.onupgradeneeded=()=>{ee=!1},ue.onerror=()=>{var We;z((null===(We=ue.error)||void 0===We?void 0:We.message)||"")}}catch(ee){z(ee)}})}function q(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const se=()=>function ye(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u")return;const W=process.env.__FIREBASE_DEFAULTS__,z=process.env.__FIREBASE_DEFAULTS_PATH__;if(W)return z&&console.warn("Values were provided for both __FIREBASE_DEFAULTS__ and __FIREBASE_DEFAULTS_PATH__. __FIREBASE_DEFAULTS_PATH__ will be ignored."),JSON.parse(W);if(z)try{return F(9163)(z)}catch{console.warn(`Unable to read defaults from file provided to __FIREBASE_DEFAULTS_PATH__: ${z}`)}})()||(()=>{if(typeof document>"u")return;const W=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/),z=W&&Ee(W[1]);return z&&JSON.parse(z)})(),Be=()=>{var W;return null===(W=se())||void 0===W?void 0:W.config},pt=W=>{var z;return null===(z=se())||void 0===z?void 0:z[`_${W}`]};class Jt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,ee)=>{this.resolve=z,this.reject=ee})}wrapCallback(z){return(ee,De)=>{ee?this.reject(ee):this.resolve(De),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(ee):z(ee,De))}}}function zt(W,z){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const De=z||"demo-project",ue=W.iat||0,We=W.sub||W.user_id;if(!We)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const gt=Object.assign({iss:`https://securetoken.google.com/${De}`,aud:De,iat:ue,exp:ue+3600,auth_time:ue,sub:We,user_id:We,firebase:{sign_in_provider:"custom",identities:{}}},W);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(gt)),""].join(".")}class tn extends Error{constructor(z,ee,De){super(ee),this.code=z,this.customData=De,this.name="FirebaseError",Object.setPrototypeOf(this,tn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cn.prototype.create)}}class Cn{constructor(z,ee,De){this.service=z,this.serviceName=ee,this.errors=De}create(z,...ee){const De=ee[0]||{},ue=`${this.service}/${z}`,We=this.errors[z],gt=We?function rn(W,z){return W.replace(Kt,(ee,De)=>{const ue=z[De];return null!=ue?String(ue):`<${De}?>`})}(We,De):"Error";return new tn(ue,`${this.serviceName}: ${gt} (${ue}).`,De)}}const Kt=/\{\$([^}]+)}/g;function fn(W){return JSON.parse(W)}function Tt(W){return JSON.stringify(W)}const sn=function(W){let z={},ee={},De={},ue="";try{const We=W.split(".");z=fn(Ee(We[0])||""),ee=fn(Ee(We[1])||""),ue=We[2],De=ee.d||{},delete ee.d}catch{}return{header:z,claims:ee,data:De,signature:ue}},Tr=function(W){const ee=sn(W).claims;return!!ee&&"object"==typeof ee&&ee.hasOwnProperty("iat")},Pr=function(W){const z=sn(W).claims;return"object"==typeof z&&!0===z.admin};function Ft(W,z){return Object.prototype.hasOwnProperty.call(W,z)}function Qn(W,z){if(Object.prototype.hasOwnProperty.call(W,z))return W[z]}function Jn(W){for(const z in W)if(Object.prototype.hasOwnProperty.call(W,z))return!1;return!0}function _r(W,z,ee){const De={};for(const ue in W)Object.prototype.hasOwnProperty.call(W,ue)&&(De[ue]=z.call(ee,W[ue],ue,W));return De}function Mn(W,z){if(W===z)return!0;const ee=Object.keys(W),De=Object.keys(z);for(const ue of ee){if(!De.includes(ue))return!1;const We=W[ue],gt=z[ue];if(Ze(We)&&Ze(gt)){if(!Mn(We,gt))return!1}else if(We!==gt)return!1}for(const ue of De)if(!ee.includes(ue))return!1;return!0}function Ze(W){return null!==W&&"object"==typeof W}function ui(W){const z=[];for(const[ee,De]of Object.entries(W))Array.isArray(De)?De.forEach(ue=>{z.push(encodeURIComponent(ee)+"="+encodeURIComponent(ue))}):z.push(encodeURIComponent(ee)+"="+encodeURIComponent(De));return z.length?"&"+z.join("&"):""}function cn(W){const z={};return W.replace(/^\?/,"").split("&").forEach(De=>{if(De){const[ue,We]=De.split("=");z[decodeURIComponent(ue)]=decodeURIComponent(We)}}),z}function li(W){const z=W.indexOf("?");if(!z)return"";const ee=W.indexOf("#",z);return W.substring(z,ee>0?ee:void 0)}class wi{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,ee){ee||(ee=0);const De=this.W_;if("string"==typeof z)for(let Oe=0;Oe<16;Oe++)De[Oe]=z.charCodeAt(ee)<<24|z.charCodeAt(ee+1)<<16|z.charCodeAt(ee+2)<<8|z.charCodeAt(ee+3),ee+=4;else for(let Oe=0;Oe<16;Oe++)De[Oe]=z[ee]<<24|z[ee+1]<<16|z[ee+2]<<8|z[ee+3],ee+=4;for(let Oe=16;Oe<80;Oe++){const dt=De[Oe-3]^De[Oe-8]^De[Oe-14]^De[Oe-16];De[Oe]=4294967295&(dt<<1|dt>>>31)}let gn,mn,ue=this.chain_[0],We=this.chain_[1],gt=this.chain_[2],$t=this.chain_[3],Un=this.chain_[4];for(let Oe=0;Oe<80;Oe++){Oe<40?Oe<20?(gn=$t^We&(gt^$t),mn=1518500249):(gn=We^gt^$t,mn=1859775393):Oe<60?(gn=We&gt|$t&(We|gt),mn=2400959708):(gn=We^gt^$t,mn=3395469782);const dt=(ue<<5|ue>>>27)+gn+Un+mn+De[Oe]&4294967295;Un=$t,$t=gt,gt=4294967295&(We<<30|We>>>2),We=ue,ue=dt}this.chain_[0]=this.chain_[0]+ue&4294967295,this.chain_[1]=this.chain_[1]+We&4294967295,this.chain_[2]=this.chain_[2]+gt&4294967295,this.chain_[3]=this.chain_[3]+$t&4294967295,this.chain_[4]=this.chain_[4]+Un&4294967295}update(z,ee){if(null==z)return;void 0===ee&&(ee=z.length);const De=ee-this.blockSize;let ue=0;const We=this.buf_;let gt=this.inbuf_;for(;ue<ee;){if(0===gt)for(;ue<=De;)this.compress_(z,ue),ue+=this.blockSize;if("string"==typeof z){for(;ue<ee;)if(We[gt]=z.charCodeAt(ue),++gt,++ue,gt===this.blockSize){this.compress_(We),gt=0;break}}else for(;ue<ee;)if(We[gt]=z[ue],++gt,++ue,gt===this.blockSize){this.compress_(We),gt=0;break}}this.inbuf_=gt,this.total_+=ee}digest(){const z=[];let ee=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ue=this.blockSize-1;ue>=56;ue--)this.buf_[ue]=255&ee,ee/=256;this.compress_(this.buf_);let De=0;for(let ue=0;ue<5;ue++)for(let We=24;We>=0;We-=8)z[De]=this.chain_[ue]>>We&255,++De;return z}}function Fn(W,z){const ee=new Wn(W,z);return ee.subscribe.bind(ee)}class Wn{constructor(z,ee){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ee,this.task.then(()=>{z(this)}).catch(De=>{this.error(De)})}next(z){this.forEachObserver(ee=>{ee.next(z)})}error(z){this.forEachObserver(ee=>{ee.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,ee,De){let ue;if(void 0===z&&void 0===ee&&void 0===De)throw new Error("Missing Observer.");ue=function yt(W,z){if("object"!=typeof W||null===W)return!1;for(const ee of z)if(ee in W&&"function"==typeof W[ee])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:ee,complete:De},void 0===ue.next&&(ue.next=Ve),void 0===ue.error&&(ue.error=Ve),void 0===ue.complete&&(ue.complete=Ve);const We=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ue.error(this.finalError):ue.complete()}catch{}}),this.observers.push(ue),We}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let ee=0;ee<this.observers.length;ee++)this.sendOne(ee,z)}sendOne(z,ee){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{ee(this.observers[z])}catch(De){typeof console<"u"&&console.error&&console.error(De)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ve(){}const vn=function(W,z,ee,De){let ue;if(De<z?ue="at least "+z:De>ee&&(ue=0===ee?"none":"no more than "+ee),ue)throw new Error(W+" failed: Was called with "+De+(1===De?" argument.":" arguments.")+" Expects "+ue+".")};function Xn(W,z){return`${W} failed: ${z} argument `}function Gr(W,z,ee,De){if((!De||ee)&&"function"!=typeof ee)throw new Error(Xn(W,z)+"must be a valid function.")}function Mt(W,z,ee,De){if((!De||ee)&&("object"!=typeof ee||null===ee))throw new Error(Xn(W,z)+"must be a valid context object.")}const Or=function(W){const z=[];let ee=0;for(let De=0;De<W.length;De++){let ue=W.charCodeAt(De);if(ue>=55296&&ue<=56319){const We=ue-55296;De++,U(De<W.length,"Surrogate pair missing trail surrogate."),ue=65536+(We<<10)+(W.charCodeAt(De)-56320)}ue<128?z[ee++]=ue:ue<2048?(z[ee++]=ue>>6|192,z[ee++]=63&ue|128):ue<65536?(z[ee++]=ue>>12|224,z[ee++]=ue>>6&63|128,z[ee++]=63&ue|128):(z[ee++]=ue>>18|240,z[ee++]=ue>>12&63|128,z[ee++]=ue>>6&63|128,z[ee++]=63&ue|128)}return z},on=function(W){let z=0;for(let ee=0;ee<W.length;ee++){const De=W.charCodeAt(ee);De<128?z++:De<2048?z+=2:De>=55296&&De<=56319?(z+=4,ee++):z+=3}return z};function ke(W,z=1e3,ee=2){const De=z*Math.pow(ee,W),ue=Math.round(.5*De*(Math.random()-.5)*2);return Math.min(144e5,De+ue)}function bt(W){return W&&W._delegate?W._delegate:W}},6432:(lt,oe,F)=>{"use strict";var m=F(4650);let U=null;function V(){return U}const he=new m.OlP("DocumentToken");let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Ee(){return(0,m.LFG)(Z)}()},providedIn:"platform"}),n})();const K=new m.OlP("Location Initialized");let Z=(()=>{class n extends pe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return V().getBaseHref(this._doc)}onPopState(t){const r=V().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=V().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){te()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){te()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(he))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Ge(){return new Z((0,m.LFG)(he))}()},providedIn:"platform"}),n})();function te(){return!!window.history.pushState}function Pe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ae(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function at(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(Xe)},providedIn:"root"}),n})();const ve=new m.OlP("appBaseHref");let Xe=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,m.f3M)(he).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Pe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+at(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+at(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+at(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(pe),m.LFG(ve,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ke=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Pe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+at(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+at(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(pe),m.LFG(ve,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Me=(()=>{class n{constructor(t){this._subject=new m.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ae(Qe(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+at(r))}normalize(t){return n.stripTrailingSlash(function xe(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Qe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+at(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+at(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=at,n.joinWithSlash=Pe,n.stripTrailingSlash=Ae,n.\u0275fac=function(t){return new(t||n)(m.LFG(ge))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Te(){return new Me((0,m.LFG)(ge))}()},providedIn:"root"}),n})();function Qe(n){return n.replace(/\/index.html$/,"")}class Ho{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Xi=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Ho(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const h=r.get(a);r.move(h,l),es(h,i)}});for(let i=0,a=r.length;i<a;i++){const h=r.get(i).context;h.index=i,h.count=a,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{es(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function es(n,e){n.context.$implicit=e.item}let ur=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Du,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){lr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){lr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Du{constructor(){this.$implicit=null,this.ngIf=null}}function lr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,m.AaK)(e)}'.`)}let Aa=(()=>{class n{transform(t){return JSON.stringify(t,null,2)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=m.Yjl({name:"json",type:n,pure:!1,standalone:!0}),n})(),$s=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function Sr(n){return"server"===n}let ka=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new Hc((0,m.LFG)(he),window)}),n})();class Hc{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Fr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=di(this.window.history)||di(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function di(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class os extends class Gu extends class _e{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function de(n){U||(U=n)}(new os)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Va(){return Ws=Ws||document.querySelector("base"),Ws?Ws.getAttribute("href"):null}();return null==t?null:function ti(n){dr=dr||document.createElement("a"),dr.setAttribute("href",n);const e=dr.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ws=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Da(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let dr,Ws=null;const Dn=new m.OlP("TRANSITION_ID"),Wu=[{provide:m.ip1,useFactory:function jl(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=V(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Dn,he,m.zs3],multi:!0}];let zu=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Ba=new m.OlP("EventManagerPlugins");let $l=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ba),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class ja{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=V().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let zs=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),pi=(()=>{class n extends zs{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(qu),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(qu))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(he))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function qu(n){V().remove(n)}const mo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ku=/%COMP%/g;function Ha(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ha(n,i,t):(i=i.replace(Ku,n),t.push(i))}return t}function Ci(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let _o=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new vo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case m.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Hl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case m.ifc.ShadowDom:return new Gl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ha(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG($l),m.LFG(pi),m.LFG(m.AFp))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class vo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(mo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ra(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ra(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=mo[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=mo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,i&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ci(r)):this.eventManager.addEventListener(e,t,Ci(r))}}function ra(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Hl extends vo{constructor(e,t,r,i){super(e),this.component=r;const a=Ha(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function qn(n){return"_ngcontent-%COMP%".replace(Ku,n)}(i+"-"+r.id),this.hostAttr=function $a(n){return"_nghost-%COMP%".replace(Ku,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Gl extends vo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Ha(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const h=document.createElement("style");h.textContent=a[l],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let er=(()=>{class n extends ja{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(he))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const b=["alt","control","meta","shift"],C={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},k={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let H=(()=>{class n extends ja{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>V().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),l="code."),b.forEach(w=>{const S=r.indexOf(w);S>-1&&(r.splice(S,1),l+=w+".")}),l+=a,0!=r.length||0===a.length)return null;const y={};return y.domEventName=i,y.fullKey=l,y}static matchEventFullKeyCode(t,r){let i=C[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),b.forEach(l=>{l!==i&&(0,k[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(he))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const zl=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function as(){os.makeCurrent()},multi:!0},{provide:he,useFactory:function Zu(){return(0,m.RDi)(document),document},deps:[]}]),wo=new m.OlP(""),rh=[{provide:m.rWj,useClass:class Gc{addToWindow(e){m.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const i=m.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const h=function(y){l=l||y,a--,0==a&&r(l)};i.forEach(function(y){y.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?V().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:m.lri,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]}],Eo=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function us(){return new m.qLn},deps:[]},{provide:Ba,useClass:er,multi:!0,deps:[he,m.R0b,m.Lbi]},{provide:Ba,useClass:H,multi:!0,deps:[he]},{provide:_o,useClass:_o,deps:[$l,pi,m.AFp]},{provide:m.FYo,useExisting:_o},{provide:zs,useExisting:pi},{provide:pi,useClass:pi,deps:[he]},{provide:$l,useClass:$l,deps:[Ba,m.R0b]},{provide:class Is{},useClass:zu,deps:[]},[]];let ql=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:Dn,useExisting:m.AFp},Wu]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(wo,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[...Eo,...rh],imports:[$s,m.hGG]}),n})(),Zs=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(he))},n.\u0275prov=m.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Wa(){return new Zs((0,m.LFG)(he))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var xn=F(8996),ls=F(3269);function mt(...n){const e=(0,ls.yG)(n);return(0,xn.D)(n,e)}var Bi=F(7579);class Kn extends Bi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Xu=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ni=F(9751);const{isArray:Co}=Array,{getPrototypeOf:Jl,prototype:Qg,keys:Kc}=Object;var Ys=F(4671),ut=F(4004);const{isArray:el}=Array;var hr=F(5403),Zc=F(9672);function Ja(...n){const e=(0,ls.yG)(n),t=(0,ls.jO)(n),{args:r,keys:i}=function Xl(n){if(1===n.length){const e=n[0];if(Co(e))return{args:e,keys:null};if(function Qa(n){return n&&"object"==typeof n&&Jl(n)===Qg}(e)){const t=Kc(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,xn.D)([],e);const a=new ni.y(function Jg(n,e,t=Ys.y){return r=>{Yc(e,()=>{const{length:i}=n,a=new Array(i);let l=i,h=i;for(let y=0;y<i;y++)Yc(e,()=>{const w=(0,xn.D)(n[y],e);let S=!1;w.subscribe((0,hr.x)(r,R=>{a[y]=R,S||(S=!0,h--),h||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>function tl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,l):Ys.y));return t?a.pipe(function ec(n){return(0,ut.U)(e=>function Do(n,e){return el(e)?n(...e):n(e)}(n,e))}(t)):a}function Yc(n,e,t){n?(0,Zc.f)(t,n,e):e()}var tc=F(8189);function To(...n){return function nl(){return(0,tc.J)(1)}()((0,xn.D)(n,(0,ls.yG)(n)))}var So=F(8421);function ds(n){return new ni.y(e=>{(0,So.Xf)(n()).subscribe(e)})}var Qc=F(9635),Xa=F(576);function Ti(n,e){const t=(0,Xa.m)(n)?n:()=>n,r=i=>i.error(t());return new ni.y(e?i=>e.schedule(r,0,i):r)}var Qs=F(515),Ds=F(727),Vr=F(4482);function Ao(){return(0,Vr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,hr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Js extends ni.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Vr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ds.w0;const t=this.getSubject();e.add(this.source.subscribe((0,hr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ds.w0.EMPTY)}return e}refCount(){return Ao()(this)}}function fr(n,e){return(0,Vr.e)((t,r)=>{let i=null,a=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,hr.x)(r,y=>{i?.unsubscribe();let w=0;const S=a++;(0,So.Xf)(n(y,S)).subscribe(i=(0,hr.x)(r,R=>r.next(e?e(y,R,S,w++):R),()=>{i=null,h()}))},()=>{l=!0,h()}))})}function jn(n){return n<=0?()=>Qs.E:(0,Vr.e)((e,t)=>{let r=0;e.subscribe((0,hr.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function nc(...n){const e=(0,ls.yG)(n);return(0,Vr.e)((t,r)=>{(e?To(n,t,e):To(n,t)).subscribe(r)})}function T(n,e){return(0,Vr.e)((t,r)=>{let i=0;t.subscribe((0,hr.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var A=F(5577);function N(n){return(0,Vr.e)((e,t)=>{let r=!1;e.subscribe((0,hr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function $(n=ne){return(0,Vr.e)((e,t)=>{let r=!1;e.subscribe((0,hr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function ne(){return new Xu}function le(n,e){const t=arguments.length>=2;return r=>r.pipe(n?T((i,a)=>n(i,a,r)):Ys.y,jn(1),t?N(e):$(()=>new Xu))}function Re(n,e){return(0,Xa.m)(e)?(0,A.z)(n,e,1):(0,A.z)(n,1)}var $e=F(8505);function ht(n){return(0,Vr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,hr.x)(t,void 0,void 0,l=>{a=(0,So.Xf)(n(l,ht(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function xt(n,e,t,r,i){return(a,l)=>{let h=t,y=e,w=0;a.subscribe((0,hr.x)(l,S=>{const R=w++;y=h?n(y,S,R):(h=!0,S),r&&l.next(y)},i&&(()=>{h&&l.next(y),l.complete()})))}}function Nt(n,e){return(0,Vr.e)(xt(n,e,arguments.length>=2,!0))}function vt(n){return n<=0?()=>Qs.E:(0,Vr.e)((e,t)=>{let r=[];e.subscribe((0,hr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Zn(n,e){const t=arguments.length>=2;return r=>r.pipe(n?T((i,a)=>n(i,a,r)):Ys.y,vt(1),t?N(e):$(()=>new Xu))}function xo(n){return(0,Vr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Lt="primary",Ts=Symbol("RouteTitle");class Ro{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ji(n){return new Ro(n)}function tu(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],h=n[a];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function hs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Wf(n[i],e[i]))return!1;return!0}function Wf(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function Xg(n){return Array.prototype.concat.apply([],n)}function em(n){return n.length>0?n[n.length-1]:null}function Ar(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ss(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,xn.D)(Promise.resolve(n)):mt(n)}const oE={exact:function nm(n,e,t){if(!la(n.segments,e.segments)||!ua(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!nm(n.children[r],e.children[r],t))return!1;return!0},subset:rl},qf={exact:function Kf(n,e){return hs(n,e)},subset:function rm(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Wf(n[t],e[t]))},ignored:()=>!0};function $_(n,e,t){return oE[t.paths](n.root,e.root,t.matrixParams)&&qf[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function rl(n,e,t){return sh(n,e,e.segments,t)}function sh(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!la(i,t)||e.hasChildren()||!ua(i,t,r))}if(n.segments.length===t.length){if(!la(n.segments,t)||!ua(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!rl(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(la(n.segments,i)&&ua(n.segments,i,r)&&n.children[Lt])&&sh(n.children[Lt],e,a,r)}}function ua(n,e,t){return e.every((r,i)=>qf[t](n[i].parameters,r.parameters))}class il{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ji(this.queryParams)),this._queryParamMap}toString(){return uh.serialize(this)}}class en{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ar(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return lh(this)}}class oh{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ji(this.parameters)),this._parameterMap}toString(){return om(this)}}function la(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Zf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return new ah},providedIn:"root"}),n})();class ah{parse(e){const t=new ol(e);return new il(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${sl(e.root,!0)}`,r=function uE(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Xc(t)}=${Xc(i)}`).join("&"):`${Xc(t)}=${Xc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function H_(n){return encodeURI(n)}(e.fragment)}`:""}`}}const uh=new ah;function lh(n){return n.segments.map(e=>om(e)).join("/")}function sl(n,e){if(!n.hasChildren())return lh(n);if(e){const t=n.children[Lt]?sl(n.children[Lt],!1):"",r=[];return Ar(n.children,(i,a)=>{a!==Lt&&r.push(`${a}:${sl(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function im(n,e){let t=[];return Ar(n.children,(r,i)=>{i===Lt&&(t=t.concat(e(r,i)))}),Ar(n.children,(r,i)=>{i!==Lt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Lt?[sl(n.children[Lt],!1)]:[`${i}:${sl(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Lt]?`${lh(n)}/${t[0]}`:`${lh(n)}/(${t.join("//")})`}}function sm(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xc(n){return sm(n).replace(/%3B/gi,";")}function As(n){return sm(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function nu(n){return decodeURIComponent(n)}function Yf(n){return nu(n.replace(/\+/g,"%20"))}function om(n){return`${As(n.path)}${function aE(n){return Object.keys(n).map(e=>`;${As(e)}=${As(n[e])}`).join("")}(n.parameters)}`}const lE=/^[^\/()?;=#]+/;function Qf(n){const e=n.match(lE);return e?e[0]:""}const am=/^[^=?&#]+/,G_=/^[^&#]+/;class ol{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new en([],{}):new en([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Lt]=new en(e,t)),r}parseSegment(){const e=Qf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new m.vHH(4009,!1);return this.capture(e),new oh(nu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Qf(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Qf(this.remaining);i&&(r=i,this.capture(r))}e[nu(t)]=nu(r)}parseQueryParam(e){const t=function um(n){const e=n.match(am);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function cE(n){const e=n.match(G_);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Yf(t),a=Yf(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Qf(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new m.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Lt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Lt]:new en([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new m.vHH(4011,!1)}}function ed(n){return n.segments.length>0?new en([],{[Lt]:n}):n}function xs(n){const e={};for(const r of Object.keys(n.children)){const a=xs(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function al(n){if(1===n.numberOfChildren&&n.children[Lt]){const e=n.children[Lt];return new en(n.segments.concat(e.segments),e.children)}return n}(new en(n.segments,e))}function ru(n){return n instanceof il}function hE(n,e,t,r,i){if(0===t.length)return td(e.root,e.root,e.root,r,i);const a=function cm(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Jf(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return Ar(a.outlets,(y,w)=>{h[w]="string"==typeof y?y.split("/"):y}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((h,y)=>{0==y&&"."===h||(0==y&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new Jf(t,e,r)}(t);return a.toRoot()?td(e.root,e.root,new en([],{}),r,i):function l(y){const w=function Xf(n,e,t,r){if(n.isAbsolute)return new ic(e.root,!0,0);if(-1===r)return new ic(t,t===e.root,0);return function ep(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new m.vHH(4005,!1);i=r.segments.length}return new ic(r,!1,i-a)}(t,r+(ul(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,y),S=w.processChildren?da(w.segmentGroup,w.index,a.commands):nd(w.segmentGroup,w.index,a.commands);return td(e.root,w.segmentGroup,S,r,i)}(n.snapshot?._lastPathIndex)}function ul(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ca(n){return"object"==typeof n&&null!=n&&n.outlets}function td(n,e,t,r,i){let l,a={};r&&Ar(r,(y,w)=>{a[w]=Array.isArray(y)?y.map(S=>`${S}`):`${y}`}),l=n===e?t:z_(n,e,t);const h=ed(xs(l));return new il(h,a,i)}function z_(n,e,t){const r={};return Ar(n.children,(i,a)=>{r[a]=i===e?t:z_(i,e,t)}),new en(n.segments,r)}class Jf{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ul(r[0]))throw new m.vHH(4003,!1);const i=r.find(ca);if(i&&i!==em(r))throw new m.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ic{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function nd(n,e,t){if(n||(n=new en([],{})),0===n.segments.length&&n.hasChildren())return da(n,e,t);const r=function q_(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],h=t[r];if(ca(h))break;const y=`${h}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&w&&"object"==typeof w&&void 0===w.outlets){if(!hh(y,w,l))return a;r+=2}else{if(!hh(y,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new en(n.segments.slice(0,r.pathIndex),{});return a.children[Lt]=new en(n.segments.slice(r.pathIndex),n.children),da(a,0,i)}return r.match&&0===i.length?new en(n.segments,{}):r.match&&!n.hasChildren()?pr(n,e,t):r.match?da(n,0,i):pr(n,e,t)}function da(n,e,t){if(0===t.length)return new en(n.segments,{});{const r=function ch(n){return ca(n[0])?n[0].outlets:{[Lt]:n}}(t),i={};return Ar(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=nd(n.children[l],e,a))}),Ar(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new en(n.segments,i)}}function pr(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(ca(a)){const y=dh(a.outlets);return new en(r,y)}if(0===i&&ul(t[0])){r.push(new oh(n.segments[e].path,hm(t[0]))),i++;continue}const l=ca(a)?a.outlets[Lt]:`${a}`,h=i<t.length-1?t[i+1]:null;l&&h&&ul(h)?(r.push(new oh(l,hm(h))),i+=2):(r.push(new oh(l,{})),i++)}return new en(r,{})}function dh(n){const e={};return Ar(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=pr(new en([],{}),0,t))}),e}function hm(n){const e={};return Ar(n,(t,r)=>e[r]=`${t}`),e}function hh(n,e,t){return n==t.path&&hs(e,t.parameters)}class Mo{constructor(e,t){this.id=e,this.url=t}}class fh extends Mo{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ll extends Mo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ph extends Mo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class fm extends Mo{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class K_ extends Mo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gh extends Mo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fE extends Mo{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class sc extends Mo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tp extends Mo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pm{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class gm{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class mm{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ym{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mh{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yh{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rd{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class _h{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=id(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=id(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=gi(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return gi(e,this._root).map(t=>t.value)}}function id(n,e){if(n===e.value)return e;for(const t of e.children){const r=id(n,t);if(r)return r}return null}function gi(n,e){if(n===e.value)return[e];for(const t of e.children){const r=gi(n,t);if(r.length)return r.unshift(e),r}return[]}class $i{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function fs(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class _m extends _h{constructor(e,t){super(e),this.snapshot=t,od(this,e)}toString(){return this.snapshot.toString()}}function oc(n,e){const t=function ac(n,e){const l=new ri([],{},{},"",{},Lt,e,null,n.root,-1,{});return new wh("",new $i(l,[]))}(n,e),r=new Kn([new oh("",{})]),i=new Kn({}),a=new Kn({}),l=new Kn({}),h=new Kn(""),y=new cl(r,i,l,h,a,Lt,e,t.root);return y.snapshot=t.root,new _m(new $i(y,[]),t)}class cl{constructor(e,t,r,i,a,l,h,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.title=this.data?.pipe((0,ut.U)(w=>w[Ts]))??mt(void 0),this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ut.U)(e=>ji(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ut.U)(e=>ji(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function sd(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function vh(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ri{constructor(e,t,r,i,a,l,h,y,w,S,R,L){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.title=this.data?.[Ts],this.routeConfig=y,this._urlSegment=w,this._lastPathIndex=S,this._correctedLastPathIndex=L??S,this._resolve=R}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ji(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ji(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class wh extends _h{constructor(e,t){super(t),this.url=e,od(this,t)}toString(){return vm(this._root)}}function od(n,e){e.value._routerState=n,e.children.forEach(t=>od(n,t))}function vm(n){const e=n.children.length>0?` { ${n.children.map(vm).join(", ")} } `:"";return`${n.value}${e}`}function np(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,hs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),hs(e.params,t.params)||n.params.next(t.params),function aa(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!hs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),hs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ad(n,e){const t=hs(n.params,e.params)&&function Jc(n,e){return la(n,e)&&n.every((t,r)=>hs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ad(n.parent,e.parent))}function dl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function rp(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return dl(n,r,i);return dl(n,r)})}(n,e,t);return new $i(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>dl(n,h)),l}}const r=function Z_(n){return new cl(new Kn(n.url),new Kn(n.params),new Kn(n.queryParams),new Kn(n.fragment),new Kn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>dl(n,a));return new $i(r,i)}}const Xs="ngNavigationCancelingError";function iu(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=ru(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=ip(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function ip(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Xs]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Eh(n){return wm(n)&&ru(n.url)}function wm(n){return n&&n[Xs]}class Ih{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new bh,this.attachRef=null}}let bh=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ih,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ch=!1;let su=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.name=i||Lt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new m.vHH(4012,Ch);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new m.vHH(4012,Ch);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new m.vHH(4012,Ch);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new m.vHH(4013,Ch);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,y=new Y_(t,h,i.injector);if(r&&function _(n){return!!n.resolveComponentFactory}(r)){const w=r.resolveComponentFactory(l);this.activated=i.createComponent(w,i.length,y)}else this.activated=i.createComponent(l,{index:i.length,injector:y,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(bh),m.Y36(m.s_b),m.$8M("name"),m.Y36(m.sBO),m.Y36(m.lqb))},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class Y_{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===cl?this.route:e===bh?this.childContexts:this.parent.get(e,t)}}let f=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[m.jDz],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},dependencies:[su],encapsulation:2}),n})();function g(n,e){return n.providers&&!n._injector&&(n._injector=(0,m.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function wt(n){const e=n.children&&n.children.map(wt),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Lt&&(t.component=f),t}function bn(n){return n.outlet||Lt}function Hi(n,e){const t=n.filter(r=>bn(r)===e);return t.push(...n.filter(r=>bn(r)!==e)),t}function hl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class ud{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),np(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=fs(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),Ar(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=fs(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=fs(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=fs(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new yh(a.value.snapshot))}),e.children.length&&this.forwardEvent(new ym(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(np(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),np(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=hl(i.snapshot),y=h?.get(m._Vd)??null;l.attachRef=null,l.route=i,l.resolver=y,l.injector=h,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Em{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Dh{constructor(e,t){this.component=e,this.route=t}}function Im(n,e,t){const r=n._root;return fl(r,e?e._root:null,t,[r.value])}function uc(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,m.Z0I)(n)?e.get(n):n:r}function fl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=fs(e);return n.children.forEach(l=>{(function sp(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const y=function op(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!la(n.url,e.url);case"pathParamsOrQueryParamsChange":return!la(n.url,e.url)||!hs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ad(n,e)||!hs(n.queryParams,e.queryParams);default:return!ad(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new Em(r)):(a.data=l.data,a._resolvedData=l._resolvedData),fl(n,e,a.component?h?h.children:null:t,r,i),y&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Dh(h.outlet.component,l))}else l&&ou(e,h,i),i.canActivateChecks.push(new Em(r)),fl(n,null,a.component?h?h.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),Ar(a,(l,h)=>ou(l,t.getContext(h),i)),i}function ou(n,e,t){const r=fs(n),i=n.value;Ar(r,(a,l)=>{ou(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Dh(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function lc(n){return"function"==typeof n}function bm(n){return n instanceof Xu||"EmptyError"===n?.name}const Cm=Symbol("INITIAL_VALUE");function Th(){return fr(n=>Ja(n.map(e=>e.pipe(jn(1),nc(Cm)))).pipe((0,ut.U)(e=>{for(const t of e)if(!0!==t){if(t===Cm)return Cm;if(!1===t||t instanceof il)return t}return!0}),T(e=>e!==Cm),jn(1)))}function Gi(n){return(0,Qc.z)((0,$e.b)(e=>{if(ru(e))throw iu(0,e)}),(0,ut.U)(e=>!0===e))}const Dm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Tm(n,e,t,r,i){const a=mi(n,e,t);return a.matched?function nv(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?mt(i.map(l=>{const h=uc(l,n);return Ss(function WD(n){return n&&lc(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(Th(),Gi()):mt(!0)}(r=g(e,r),e,t).pipe((0,ut.U)(l=>!0===l?a:{...Dm})):mt(a)}function mi(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Dm}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||tu)(t,n,e);if(!i)return{...Dm};const a={};Ar(i.posParams,(h,y)=>{a[y]=h.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function cc(n,e,t,r,i="corrected"){if(t.length>0&&function tT(n,e,t){return t.some(r=>Sm(n,e,r)&&bn(r)!==Lt)}(n,t,r)){const l=new en(e,function eT(n,e,t,r){const i={};i[Lt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&bn(a)!==Lt){const l=new en([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[bn(a)]=l}return i}(n,e,r,new en(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function _E(n,e,t){return t.some(r=>Sm(n,e,r))}(n,t,r)){const l=new en(n.segments,function yE(n,e,t,r,i,a){const l={};for(const h of r)if(Sm(n,t,h)&&!i[bn(h)]){const y=new en([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[bn(h)]=y}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new en(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function Sm(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function rv(n,e,t,r){return!!(bn(n)===r||r!==Lt&&Sm(e,t,n))&&("**"===n.path||mi(e,n,t).matched)}function vE(n,e,t){return 0===e.length&&!n.children[t]}const up=!1;class Am{constructor(e){this.segmentGroup=e||null}}class wE{constructor(e){this.urlTree=e}}function lp(n){return Ti(new Am(n))}function EE(n){return Ti(new wE(n))}class rT{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=cc(this.urlTree.root,[],[],this.config).segmentGroup,t=new en(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Lt).pipe((0,ut.U)(a=>this.createUrlTree(xs(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ht(a=>{if(a instanceof wE)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Am?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Lt).pipe((0,ut.U)(i=>this.createUrlTree(xs(i),e.queryParams,e.fragment))).pipe(ht(i=>{throw i instanceof Am?this.noMatchError(i):i}))}noMatchError(e){return new m.vHH(4002,up)}createUrlTree(e,t,r){const i=ed(e);return new il(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ut.U)(a=>new en([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,xn.D)(i).pipe(Re(a=>{const l=r.children[a],h=Hi(t,a);return this.expandSegmentGroup(e,h,l,a).pipe((0,ut.U)(y=>({segment:y,outlet:a})))}),Nt((a,l)=>(a[l.outlet]=l.segment,a),{}),Zn())}expandSegment(e,t,r,i,a,l){return(0,xn.D)(r).pipe(Re(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,l).pipe(ht(w=>{if(w instanceof Am)return mt(null);throw w}))),le(h=>!!h),ht((h,y)=>{if(bm(h))return vE(t,i,a)?mt(new en([],{})):lp(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,l,h){return rv(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):lp(t):lp(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?EE(a):this.lineralizeSegments(r,a).pipe((0,A.z)(l=>{const h=new en(l,{});return this.expandSegment(e,h,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:h,consumedSegments:y,remainingSegments:w,positionalParamSegments:S}=mi(t,i,a);if(!h)return lp(t);const R=this.applyRedirectCommands(y,i.redirectTo,S);return i.redirectTo.startsWith("/")?EE(R):this.lineralizeSegments(i,R).pipe((0,A.z)(L=>this.expandSegment(e,t,r,L.concat(w),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=g(r,e),r.loadChildren?(r._loadedRoutes?mt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,ut.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new en(i,{})))):mt(new en(i,{}))):Tm(t,r,i,e).pipe(fr(({matched:l,consumedSegments:h,remainingSegments:y})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,A.z)(S=>{const R=S.injector??e,L=S.routes,{segmentGroup:G,slicedSegments:J}=cc(t,h,y,L),Ie=new en(G.segments,G.children);if(0===J.length&&Ie.hasChildren())return this.expandChildren(R,L,Ie).pipe((0,ut.U)(Ut=>new en(h,Ut)));if(0===L.length&&0===J.length)return mt(new en(h,{}));const Fe=bn(r)===a;return this.expandSegment(R,Ie,L,J,Fe?Lt:a,!0).pipe((0,ut.U)(Dt=>new en(h.concat(Dt.segments),Dt.children)))})):lp(t)))}getChildConfig(e,t,r){return t.children?mt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?mt({routes:t._loadedRoutes,injector:t._loadedInjector}):function XD(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?mt(!0):mt(i.map(l=>{const h=uc(l,n);return Ss(function X_(n){return n&&lc(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(Th(),Gi())}(e,t,r).pipe((0,A.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,$e.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function Sh(n){return Ti(ip(up,3))}())):mt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return mt(r);if(i.numberOfChildren>1||!i.children[Lt])return Ti(new m.vHH(4e3,up));i=i.children[Lt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new il(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Ar(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return Ar(t.children,(h,y)=>{l[y]=this.createSegmentGroup(e,h,r,i)}),new en(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new m.vHH(4001,up);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class bR{}class au{constructor(e,t,r,i,a,l,h,y){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=h,this.urlSerializer=y}recognize(){const e=cc(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Lt).pipe((0,ut.U)(t=>{if(null===t)return null;const r=new ri([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Lt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new $i(r,t),a=new wh(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=sd(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,xn.D)(Object.keys(r.children)).pipe(Re(i=>{const a=r.children[i],l=Hi(t,i);return this.processSegmentGroup(e,l,a,i)}),Nt((i,a)=>i&&a?(i.push(...a),i):null),function Kr(n,e=!1){return(0,Vr.e)((t,r)=>{let i=0;t.subscribe((0,hr.x)(r,a=>{const l=n(a,i++);(l||e)&&r.next(a),!l&&r.complete()}))})}(i=>null!==i),N(null),Zn(),(0,ut.U)(i=>{if(null===i)return null;const a=av(i);return function sv(n){n.sort((e,t)=>e.value.outlet===Lt?-1:t.value.outlet===Lt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,xn.D)(t).pipe(Re(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,a)),le(l=>!!l),ht(l=>{if(bm(l))return vE(r,i,a)?mt([]):mt(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!rv(t,r,i,a))return mt(null);let l;if("**"===t.path){const h=i.length>0?em(i).parameters:{},y=bE(r)+i.length;l=mt({snapshot:new ri(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,xm(t),bn(t),t.component??t._loadedComponent??null,t,Ah(r),y,Rm(t),y),consumedSegments:[],remainingSegments:[]})}else l=Tm(r,t,i,e).pipe((0,ut.U)(({matched:h,consumedSegments:y,remainingSegments:w,parameters:S})=>{if(!h)return null;const R=bE(r)+y.length;return{snapshot:new ri(y,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,xm(t),bn(t),t.component??t._loadedComponent??null,t,Ah(r),R,Rm(t),R),consumedSegments:y,remainingSegments:w}}));return l.pipe(fr(h=>{if(null===h)return mt(null);const{snapshot:y,consumedSegments:w,remainingSegments:S}=h;e=t._injector??e;const R=t._loadedInjector??e,L=function ov(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:G,slicedSegments:J}=cc(r,w,S,L.filter(Fe=>void 0===Fe.redirectTo),this.relativeLinkResolution);if(0===J.length&&G.hasChildren())return this.processChildren(R,L,G).pipe((0,ut.U)(Fe=>null===Fe?null:[new $i(y,Fe)]));if(0===L.length&&0===J.length)return mt([new $i(y,[])]);const Ie=bn(t)===a;return this.processSegment(R,L,G,J,Ie?Lt:a).pipe((0,ut.U)(Fe=>null===Fe?null:[new $i(y,Fe)]))}))}}function sT(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function av(n){const e=[],t=new Set;for(const r of n){if(!sT(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=av(r.children);e.push(new $i(r.value,i))}return e.filter(r=>!t.has(r))}function Ah(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function bE(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function xm(n){return n.data||{}}function Rm(n){return n.resolve||{}}function Mm(n){return"string"==typeof n.title||null===n.title}function lv(n){return fr(e=>{const t=n(e);return t?(0,xn.D)(t).pipe((0,ut.U)(()=>e)):mt(e)})}let SE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Lt);return r}getResolvedTitleForRoute(t){return t.data[Ts]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(AE)},providedIn:"root"}),n})(),AE=(()=>{class n extends SE{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Zs))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class uT{}class xE extends class lT{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const cp=new m.OlP("",{providedIn:"root",factory:()=>({})}),dv=new m.OlP("ROUTES");let hv=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return mt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ss(t.loadComponent()).pipe((0,$e.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),xo(()=>{this.componentLoaders.delete(t)})),i=new Js(r,()=>new Bi.x).pipe(Ao());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return mt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,ut.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let y,w,S=!1;Array.isArray(h)?w=h:(y=h.create(t).injector,w=Xg(y.get(dv,[],m.XFs.Self|m.XFs.Optional)));return{routes:w.map(wt),injector:y}}),xo(()=>{this.childrenLoaders.delete(r)})),l=new Js(a,()=>new Bi.x).pipe(Ao());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Ss(t()).pipe((0,A.z)(r=>r instanceof m.YKP||Array.isArray(r)?mt(r):(0,xn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.zs3),m.LFG(m.Sil))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class RE{}class ME{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function kE(n){throw n}function NE(n,e,t){return e.parse("/")}const cT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},SR={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function PE(){const n=(0,m.f3M)(Zf),e=(0,m.f3M)(bh),t=(0,m.f3M)(Me),r=(0,m.f3M)(m.zs3),i=(0,m.f3M)(m.Sil),a=(0,m.f3M)(dv,{optional:!0})??[],l=(0,m.f3M)(cp,{optional:!0})??{},h=(0,m.f3M)(AE),y=(0,m.f3M)(SE,{optional:!0}),w=(0,m.f3M)(RE,{optional:!0}),S=(0,m.f3M)(uT,{optional:!0}),R=new yi(null,n,e,t,r,i,Xg(a));return w&&(R.urlHandlingStrategy=w),S&&(R.routeReuseStrategy=S),R.titleStrategy=y??h,function Nm(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,R),R}let yi=(()=>{class n{constructor(t,r,i,a,l,h,y){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Bi.x,this.errorHandler=kE,this.malformedUriErrorHandler=NE,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>mt(void 0),this.urlHandlingStrategy=new ME,this.routeReuseStrategy=new xE,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(hv),this.configLoader.onLoadEndListener=L=>this.triggerEvent(new gm(L)),this.configLoader.onLoadStartListener=L=>this.triggerEvent(new pm(L)),this.ngModule=l.get(m.h0i),this.console=l.get(m.c2e);const R=l.get(m.R0b);this.isNgZoneEnabled=R instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=function tm(){return new il(new en([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=oc(this.currentUrlTree,this.rootComponentType),this.transitions=new Kn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(T(i=>0!==i.id),(0,ut.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),fr(i=>{let a=!1,l=!1;return mt(i).pipe((0,$e.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),fr(h=>{const y=this.browserUrlTree.toString(),w=!this.navigated||h.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return fv(h.source)&&(this.browserUrlTree=h.extractedUrl),mt(h).pipe(fr(R=>{const L=this.transitions.getValue();return r.next(new fh(R.id,this.serializeUrl(R.extractedUrl),R.source,R.restoredState)),L!==this.transitions.getValue()?Qs.E:Promise.resolve(R)}),function iT(n,e,t,r){return fr(i=>function pl(n,e,t,r,i){return new rT(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,ut.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,$e.b)(R=>{this.currentNavigation={...this.currentNavigation,finalUrl:R.urlAfterRedirects},i.urlAfterRedirects=R.urlAfterRedirects}),function DE(n,e,t,r,i,a){return(0,A.z)(l=>function CR(n,e,t,r,i,a,l="emptyOnly",h="legacy"){return new au(n,e,t,r,i,l,h,a).recognize().pipe(fr(y=>null===y?function IE(n){return new ni.y(e=>e.error(n))}(new bR):mt(y)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,i,a).pipe((0,ut.U)(h=>({...l,targetSnapshot:h}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,$e.b)(R=>{if(i.targetSnapshot=R.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!R.extras.skipLocationChange){const G=this.urlHandlingStrategy.merge(R.urlAfterRedirects,R.rawUrl);this.setBrowserUrl(G,R)}this.browserUrlTree=R.urlAfterRedirects}const L=new K_(R.id,this.serializeUrl(R.extractedUrl),this.serializeUrl(R.urlAfterRedirects),R.targetSnapshot);r.next(L)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:G,source:J,restoredState:Ie,extras:Fe}=h,It=new fh(L,this.serializeUrl(G),J,Ie);r.next(It);const Dt=oc(G,this.rootComponentType).snapshot;return mt(i={...h,targetSnapshot:Dt,urlAfterRedirects:G,extras:{...Fe,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=h.rawUrl,h.resolve(null),Qs.E}),(0,$e.b)(h=>{const y=new gh(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(y)}),(0,ut.U)(h=>i={...h,guards:Im(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),function qD(n,e){return(0,A.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?mt({...t,guardsResult:!0}):function KD(n,e,t,r){return(0,xn.D)(n).pipe((0,A.z)(i=>function JD(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?mt(a.map(h=>{const y=hl(e)??i,w=uc(h,y);return Ss(function ap(n){return n&&lc(n.canDeactivate)}(w)?w.canDeactivate(n,e,t,r):y.runInContext(()=>w(n,e,t,r))).pipe(le())})).pipe(Th()):mt(!0)}(i.component,i.route,t,e,r)),le(i=>!0!==i,!0))}(l,r,i,n).pipe((0,A.z)(h=>h&&function gE(n){return"boolean"==typeof n}(h)?function tv(n,e,t,r){return(0,xn.D)(e).pipe(Re(i=>To(function YD(n,e){return null!==n&&e&&e(new mm(n)),mt(!0)}(i.route.parent,r),function ZD(n,e){return null!==n&&e&&e(new mh(n)),mt(!0)}(i.route,r),function mE(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function J_(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>ds(()=>mt(l.guards.map(y=>{const w=hl(l.node)??t,S=uc(y,w);return Ss(function ev(n){return n&&lc(n.canActivateChild)}(S)?S.canActivateChild(r,n):w.runInContext(()=>S(r,n))).pipe(le())})).pipe(Th())));return mt(a).pipe(Th())}(n,i.path,t),function QD(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return mt(!0);const i=r.map(a=>ds(()=>{const l=hl(e)??t,h=uc(a,l);return Ss(function GD(n){return n&&lc(n.canActivate)}(h)?h.canActivate(e,n):l.runInContext(()=>h(e,n))).pipe(le())}));return mt(i).pipe(Th())}(n,i.route,t))),le(i=>!0!==i,!0))}(r,a,n,e):mt(h)),(0,ut.U)(h=>({...t,guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,$e.b)(h=>{if(i.guardsResult=h.guardsResult,ru(h.guardsResult))throw iu(0,h.guardsResult);const y=new fE(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(y)}),T(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,"",3),!1)),lv(h=>{if(h.guards.canActivateChecks.length)return mt(h).pipe((0,$e.b)(y=>{const w=new sc(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(w)}),fr(y=>{let w=!1;return mt(y).pipe(function DR(n,e){return(0,A.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return mt(t);let a=0;return(0,xn.D)(i).pipe(Re(l=>function xh(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!Mm(i)&&(a[Ts]=i.title),function uv(n,e,t,r){const i=function TE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return mt({});const a={};return(0,xn.D)(i).pipe((0,A.z)(l=>function aT(n,e,t,r){const i=hl(e)??r,a=uc(n,i);return Ss(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(le(),(0,$e.b)(h=>{a[l]=h}))),vt(1),function eu(n){return(0,ut.U)(()=>n)}(a),ht(l=>bm(l)?Qs.E:Ti(l)))}(a,n,e,r).pipe((0,ut.U)(l=>(n._resolvedData=l,n.data=sd(n,t).resolve,i&&Mm(i)&&(n.data[Ts]=i.title),null)))}(l.route,r,n,e)),(0,$e.b)(()=>a++),vt(1),(0,A.z)(l=>a===i.length?mt(t):Qs.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,$e.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(y),this.cancelNavigationTransition(y,"",2))}}))}),(0,$e.b)(y=>{const w=new tp(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(w)}))}),lv(h=>{const y=w=>{const S=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&S.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,$e.b)(R=>{w.component=R}),(0,ut.U)(()=>{})));for(const R of w.children)S.push(...y(R));return S};return Ja(y(h.targetSnapshot.root)).pipe(N(),jn(1))}),lv(()=>this.afterPreactivation()),(0,ut.U)(h=>{const y=function Br(n,e,t){const r=dl(n,e._root,t?t._root:void 0);return new _m(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return i={...h,targetRouterState:y}}),(0,$e.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,ut.U)(r=>(new ud(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,$e.b)({next(){a=!0},complete(){a=!0}}),xo(()=>{a||l||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),ht(h=>{if(l=!0,wm(h)){Eh(h)||(this.navigated=!0,this.restoreHistory(i,!0));const y=new ph(i.id,this.serializeUrl(i.extractedUrl),h.message,h.cancellationCode);if(r.next(y),Eh(h)){const w=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||fv(i.source)};this.scheduleNavigation(w,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const y=new fm(i.id,this.serializeUrl(i.extractedUrl),h,i.targetSnapshot??void 0);r.next(y);try{i.resolve(this.errorHandler(h))}catch(w){i.reject(w)}}return Qs.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const h={...a};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(i.state=h)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(wt),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:h,preserveFragment:y}=r,w=i||this.routerState.root,S=y?this.currentUrlTree.fragment:l;let R=null;switch(h){case"merge":R={...this.currentUrlTree.queryParams,...a};break;case"preserve":R=this.currentUrlTree.queryParams;break;default:R=a||null}return null!==R&&(R=this.removeEmptyProps(R)),hE(w,this.currentUrlTree,t,R,S??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=ru(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function OE(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new m.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...cT}:!1===r?{...SR}:r,ru(t))return $_(this.currentUrlTree,t,i);const a=this.parseUrl(t);return $_(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ll(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let h,y,w;l?(h=l.resolve,y=l.reject,w=l.promise):w=new Promise((L,G)=>{h=L,y=G});const S=++this.navigationId;let R;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),R=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):R=0,this.setTransition({id:S,targetPageId:R,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:h,reject:y,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(L=>Promise.reject(L))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const a=new ph(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:function(){return PE()},providedIn:"root"}),n})();function fv(n){return"imperative"!==n}let hp=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Bi.x,this.subscription=t.events.subscribe(a=>{a instanceof ll&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,m.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,m.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,m.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,l){return!!(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(yi),m.Y36(cl),m.Y36(ge))},n.\u0275dir=m.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&m.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&m.uIk("target",r.target)("href",r.href,m.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[m.TTD]}),n})();class pv{}let gv=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(T(t=>t instanceof ll),Re(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,m.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,h=a._loadedInjector??l;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(l,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(h,a.children??a._loadedRoutes))}return(0,xn.D)(i).pipe((0,tc.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):mt(null);const a=i.pipe((0,A.z)(l=>null===l?mt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,xn.D)([a,l]).pipe((0,tc.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(yi),m.LFG(m.Sil),m.LFG(m.lqb),m.LFG(pv),m.LFG(hv))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ld=new m.OlP("");let FE=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof fh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ll&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof rd&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new rd(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function cd(n,e){return{\u0275kind:n,\u0275providers:e}}function pp(n){return[{provide:dv,multi:!0,useValue:n}]}function fT(){const n=(0,m.f3M)(m.zs3);return e=>{const t=n.get(m.z2F);if(e!==t.components[0])return;const r=n.get(yi),i=n.get(mv);1===n.get(yv)&&r.initialNavigation(),n.get(ko,null,m.XFs.Optional)?.setUpPreloading(),n.get(ld,null,m.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const mv=new m.OlP("",{factory:()=>new Bi.x}),yv=new m.OlP("",{providedIn:"root",factory:()=>1});const ko=new m.OlP("");function mT(n){return cd(0,[{provide:ko,useExisting:gv},{provide:pv,useExisting:n}])}const BE=new m.OlP("ROUTER_FORROOT_GUARD"),_T=[Me,{provide:Zf,useClass:ah},{provide:yi,useFactory:PE},bh,{provide:cl,useFactory:function UE(n){return n.routerState.root},deps:[yi]},hv];function jE(){return new m.PXZ("Router",yi)}let Fm=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[_T,[],pp(t),{provide:BE,useFactory:$E,deps:[[yi,new m.FiY,new m.tp0]]},{provide:cp,useValue:r||{}},r?.useHash?{provide:ge,useClass:Ke}:{provide:ge,useClass:Xe},{provide:ld,useFactory:()=>{const n=(0,m.f3M)(yi),e=(0,m.f3M)(ka),t=(0,m.f3M)(cp);return t.scrollOffset&&e.setOffset(t.scrollOffset),new FE(n,e,t)}},r?.preloadingStrategy?mT(r.preloadingStrategy).\u0275providers:[],{provide:m.PXZ,multi:!0,useFactory:jE},r?.initialNavigation?HE(r):[],[{provide:_v,useFactory:fT},{provide:m.tb,multi:!0,useExisting:_v}]]}}static forChild(t){return{ngModule:n,providers:[pp(t)]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(BE,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[f]}),n})();function $E(n){return"guarded"}function HE(n){return["disabled"===n.initialNavigation?cd(3,[{provide:m.ip1,multi:!0,useFactory:()=>{const e=(0,m.f3M)(yi);return()=>{e.setUpLocationChangeListener()}}},{provide:yv,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?cd(2,[{provide:yv,useValue:0},{provide:m.ip1,multi:!0,deps:[m.zs3],useFactory:e=>{const t=e.get(K,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(a=>{const l=e.get(yi),h=e.get(mv);(function i(a){e.get(yi).events.pipe(T(h=>h instanceof ll||h instanceof ph||h instanceof fm),(0,ut.U)(h=>h instanceof ll||h instanceof ph&&(0===h.code||1===h.code)&&null),T(h=>null!==h),jn(1)).subscribe(()=>{a()})})(()=>{a(!0),r=!0}),l.afterPreactivation=()=>(a(!0),r||h.closed?mt(void 0):h),l.initialNavigation()}))}}]).\u0275providers:[]]}const _v=new m.OlP("");let GE=(()=>{class n{constructor(){this.title="app-gestion"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:30,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-dark",2,"background-color","#334756","color","white"],[1,"container-fluid"],["src","../assets/logo.png","alt","Logo","width","100"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarScroll","aria-controls","navbarScroll","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarScroll",1,"collapse","navbar-collapse","ms-4"],[1,"navbar-nav","me-auto","my-2","my-lg-0","navbar-nav-scroll",2,"--bs-scroll-height","100px"],[1,"nav-item"],["aria-current","page","href","#",1,"nav-link","active"],["href","#",1,"nav-link"],["role","search",1,"d-flex"],["type","search","placeholder","Buscar Juegos","aria-label","Search",1,"form-control","me-2"],["type","submit",1,"btn","btn-fucsia"],[1,"bi","bi-search"]],template:function(t,r){1&t&&(m.TgZ(0,"nav",0)(1,"div",1),m._UZ(2,"img",2),m.TgZ(3,"button",3),m._UZ(4,"span",4),m.qZA(),m.TgZ(5,"div",5)(6,"ul",6)(7,"li",7)(8,"a",8),m._uU(9,"P\xe1gina Principal"),m.qZA()(),m.TgZ(10,"li",7)(11,"a",9),m._uU(12,"Estrategia"),m.qZA()(),m.TgZ(13,"li",7)(14,"a",9),m._uU(15,"Para pensar"),m.qZA()(),m.TgZ(16,"li",7)(17,"a",9),m._uU(18,"Acci\xf3n"),m.qZA()(),m.TgZ(19,"li",7)(20,"a",9),m._uU(21,"Aventura"),m.qZA()(),m.TgZ(22,"li",7)(23,"a",9),m._uU(24,"Terror"),m.qZA()()(),m.TgZ(25,"form",10),m._UZ(26,"input",11),m.TgZ(27,"button",12),m._UZ(28,"i",13),m.qZA()()()()(),m._UZ(29,"router-outlet"))},dependencies:[su]}),n})();var vv=F(4986),ir=F(5813);function wv(){return(0,Vr.e)((n,e)=>{let t,r=!1;n.subscribe((0,hr.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function WE(n,e=Ys.y){return n=n??MR,(0,Vr.e)((t,r)=>{let i,a=!0;t.subscribe((0,hr.x)(r,l=>{const h=e(l);(a||!n(i,h))&&(a=!1,i=h,r.next(l))}))})}function MR(n,e){return n===e}var Et,Wi=F(2011),dc=(F(3704),F(3942)),Se=F(5861),eo=F(9681),ha=F(4859),fa=F(1877),B=F(2090),kR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hc={},Um=Um||{},Gt=kR||self;function Vm(){}function gl(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function gp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Rh="closure_uid_"+(1e9*Math.random()>>>0),bT=0;function qE(n,e,t){return n.call.apply(n.bind,arguments)}function CT(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function zi(n,e,t){return(zi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?qE:CT).apply(null,arguments)}function Bm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Si(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function fc(){this.s=this.s,this.o=this.o}var DT={};fc.prototype.s=!1,fc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function zE(n){return Object.prototype.hasOwnProperty.call(n,Rh)&&n[Rh]||(n[Rh]=++bT)}(this);delete DT[n]}},fc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ev=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function jm(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function $m(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(gl(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function ps(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ps.prototype.h=function(){this.defaultPrevented=!0};var Iv=function(){if(!Gt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Gt.addEventListener("test",Vm,e),Gt.removeEventListener("test",Vm,e)}catch{}return n}();function Hm(n){return/^[\s\xa0]*$/.test(n)}var TT=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function pc(n,e){return n<e?-1:n>e?1:0}function mp(){var n=Gt.navigator;return n&&(n=n.userAgent)?n:""}function pa(n){return-1!=mp().indexOf(n)}function Mh(n){return Mh[" "](n),n}Mh[" "]=Vm;var bv,n,ZE=pa("Opera"),kh=pa("Trident")||pa("MSIE"),Gm=pa("Edge"),ma=Gm||kh,Wm=pa("Gecko")&&!(-1!=mp().toLowerCase().indexOf("webkit")&&!pa("Edge"))&&!(pa("Trident")||pa("MSIE"))&&!pa("Edge"),YE=-1!=mp().toLowerCase().indexOf("webkit")&&!pa("Edge");function zm(){var n=Gt.document;return n?n.documentMode:void 0}e:{var qm="",QE=(n=mp(),Wm?/rv:([^\);]+)(\)|;)/.exec(n):Gm?/Edge\/([\d\.]+)/.exec(n):kh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):YE?/WebKit\/(\S+)/.exec(n):ZE?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(QE&&(qm=QE?QE[1]:""),kh){var Nh=zm();if(null!=Nh&&Nh>parseFloat(qm)){bv=String(Nh);break e}}bv=qm}var Km={};var NR=Gt.document&&kh&&(zm()||parseInt(bv,10))||void 0;function _p(n,e){if(ps.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Wm){e:{try{Mh(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:ST[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&_p.X.h.call(this)}}Si(_p,ps);var ST={2:"touch",3:"pen",4:"mouse"};_p.prototype.h=function(){_p.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var vp="closure_listenable_"+(1e6*Math.random()|0),AT=0;function JE(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++AT,this.ba=this.ea=!1}function Dv(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Tv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function xT(n){const e={};for(const t in n)e[t]=n[t];return e}const Sv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Av(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<Sv.length;a++)t=Sv[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ym(n){this.src=n,this.g={},this.h=0}function wp(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=Ev(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Dv(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function XE(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}Ym.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=XE(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new JE(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var eI="closure_lm_"+(1e6*Math.random()|0),tI={};function RT(n,e,t,r,i){if(r&&r.once)return kT(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)RT(n,e[a],t,r,i);return null}return t=Qm(t),n&&n[vp]?n.N(e,t,gp(r)?!!r.capture:!!r,i):MT(n,e,t,!1,r,i)}function MT(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=gp(i)?!!i.capture:!!i,h=Ep(n);if(h||(n[eI]=h=new Ym(n)),(t=h.add(e,t,r,l,a)).proxy)return t;if(r=function PR(){const e=gc;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Iv||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(PT(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function kT(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)kT(n,e[a],t,r,i);return null}return t=Qm(t),n&&n[vp]?n.O(e,t,gp(r)?!!r.capture:!!r,i):MT(n,e,t,!0,r,i)}function NT(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)NT(n,e[a],t,r,i);else r=gp(r)?!!r.capture:!!r,t=Qm(t),n&&n[vp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=XE(a=n.g[e],t,r,i))&&(Dv(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Ep(n))&&(e=n.g[e.toString()],n=-1,e&&(n=XE(e,t,r,i)),(t=-1<n?e[n]:null)&&nI(t))}function nI(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[vp])wp(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(PT(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Ep(e))?(wp(t,n),0==t.h&&(t.src=null,e[eI]=null)):Dv(n)}}}function PT(n){return n in tI?tI[n]:tI[n]="on"+n}function gc(n,e){if(n.ba)n=!0;else{e=new _p(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&nI(n),n=t.call(r,e)}return n}function Ep(n){return(n=n[eI])instanceof Ym?n:null}var xv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qm(n){return"function"==typeof n?n:(n[xv]||(n[xv]=function(e){return n.handleEvent(e)}),n[xv])}function Zr(){fc.call(this),this.i=new Ym(this),this.P=this,this.I=null}function _i(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ps(e,n);else if(e instanceof ps)e.target=e.target||n;else{var i=e;Av(e=new ps(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=Ph(l,r,!0,e)&&i}if(i=Ph(l=e.g=n,r,!0,e)&&i,i=Ph(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Ph(l=e.g=t[a],r,!1,e)&&i}function Ph(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ba&&l.capture==t){var h=l.listener,y=l.ha||l.src;l.ea&&wp(n.i,l),i=!1!==h.call(y,r)&&i}}return i&&!r.defaultPrevented}Si(Zr,fc),Zr.prototype[vp]=!0,Zr.prototype.removeEventListener=function(n,e,t,r){NT(this,n,e,t,r)},Zr.prototype.M=function(){if(Zr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Dv(t[r]);delete n.g[e],n.h--}}this.I=null},Zr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Zr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Rv=Gt.JSON.stringify;function mc(){var n=Xm;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Mv,iI=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new OT,n=>n.reset());class OT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function sI(n){Gt.setTimeout(()=>{throw n},0)}function oI(n,e){Mv||function Jm(){var n=Gt.Promise.resolve(void 0);Mv=function(){n.then(Oh)}}(),yc||(Mv(),yc=!0),Xm.add(n,e)}var yc=!1,Xm=new class rI{constructor(){this.h=this.g=null}add(e,t){const r=iI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Oh(){for(var n;n=mc();){try{n.h.call(n.g)}catch(t){sI(t)}var e=iI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}yc=!1}function Lh(n,e){Zr.call(this),this.h=n||1,this.g=e||Gt,this.j=zi(this.kb,this),this.l=Date.now()}function Fh(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function ey(n,e,t){if("function"==typeof n)t&&(n=zi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=zi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Gt.setTimeout(n,e||0)}function kv(n){n.g=ey(()=>{n.g=null,n.i&&(n.i=!1,kv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Si(Lh,Zr),(Et=Lh.prototype).ca=!1,Et.R=null,Et.kb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),_i(this,"tick"),this.ca&&(Fh(this),this.start()))}},Et.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Et.M=function(){Lh.X.M.call(this),Fh(this),delete this.g};class Nv extends fc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:kv(this)}M(){super.M(),this.g&&(Gt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dd(n){fc.call(this),this.h=n,this.g={}}Si(dd,fc);var Pv=[];function ty(n,e,t,r){Array.isArray(t)||(t&&(Pv[0]=t.toString()),t=Pv);for(var i=0;i<t.length;i++){var a=RT(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function aI(n){Tv(n.g,function(e,t){this.g.hasOwnProperty(t)&&nI(e)},n),n.g={}}function Ov(){this.g=!0}function Uh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function cI(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return Rv(t)}catch{return e}}(n,t)+(r?" "+r:"")})}dd.prototype.M=function(){dd.X.M.call(this),aI(this)},dd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ov.prototype.Aa=function(){this.g=!1},Ov.prototype.info=function(){};var hd={},Rs=null;function Ip(){return Rs=Rs||new Zr}function dI(n){ps.call(this,hd.Oa,n)}function ny(n){const e=Ip();_i(e,new dI(e,n))}function hI(n,e){ps.call(this,hd.STAT_EVENT,n),this.stat=e}function Ai(n){const e=Ip();_i(e,new hI(e,n))}function Lv(n,e){ps.call(this,hd.Pa,n),this.size=e}function bp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Gt.setTimeout(function(){n()},e)}hd.Oa="serverreachability",Si(dI,ps),hd.STAT_EVENT="statevent",Si(hI,ps),hd.Pa="timingevent",Si(Lv,ps);var ry={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},fI={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function iy(){}function Fv(){}iy.prototype.h=null;var oy,Cp={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function Uv(){ps.call(this,"d")}function sy(){ps.call(this,"c")}function ay(){}function Ms(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new dd(this),this.O=FT,this.T=new Lh(n=ma?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new uy}function uy(){this.i=null,this.g="",this.h=!1}Si(Uv,ps),Si(sy,ps),Si(ay,iy),ay.prototype.g=function(){return new XMLHttpRequest},ay.prototype.i=function(){return{}},oy=new ay;var FT=45e3,Vv={},Bv={};function ly(n,e,t){n.K=1,n.v=cy(ya(e)),n.s=t,n.P=!0,gI(n,null)}function gI(n,e){n.F=Date.now(),Dp(n),n.A=ya(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),Wv(t.i,"t",r),n.C=0,t=n.l.H,n.h=new uy,n.g=nw(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Nv(zi(n.Ka,n,n.g),n.N)),ty(n.S,n.g,"readystatechange",n.hb),e=n.H?xT(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),ny(1),function LT(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",h=a.split("&"),y=0;y<h.length;y++){var w=h[y].split("=");if(1<w.length){var S=w[0];w=w[1];var R=S.split("_");l=2<=R.length&&"type"==R[1]?l+(S+"=")+w+"&":l+(S+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function mI(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function yI(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=jv(n,t),i==Bv){4==e&&(n.o=4,Ai(14),r=!1),Uh(n.j,n.m,null,"[Incomplete Response]");break}if(i==Vv){n.o=4,Ai(15),Uh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Uh(n.j,n.m,i,null),vI(n,i)}mI(n)&&i!=Bv&&i!=Vv&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ai(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),ew(e),e.K=!0,Ai(11))):(Uh(n.j,n.m,t,"[Invalid Chunked Response]"),lu(n),pd(n))}function jv(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Bv:(t=Number(e.substring(t,r)),isNaN(t)?Vv:(r+=1)+t>e.length?Bv:(e=e.substr(r,t),n.C=r+t,e))}function Dp(n){n.V=Date.now()+n.O,_I(n,n.O)}function _I(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=bp(zi(n.fb,n),e)}function fd(n){n.B&&(Gt.clearTimeout(n.B),n.B=null)}function pd(n){0==n.l.G||n.I||my(n.l,n)}function lu(n){fd(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Fh(n.T),aI(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function vI(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||qv(t.h,n)))if(!n.J&&qv(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Cd(t),Mp(t)}Np(t),Ai(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=bp(zi(t.bb,t),6e3));if(1>=TI(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else yl(t,11)}else if((n.J||t.g==n)&&Cd(t),!Hm(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.T=w[0],w=w[1],2==t.G)if("c"==w[0]){t.I=w[1],t.ka=w[2];const S=w[3];null!=S&&(t.ma=S,t.j.info("VER="+t.ma));const R=w[4];null!=R&&(t.Ca=R,t.j.info("SVER="+t.Ca));const L=w[5];null!=L&&"number"==typeof L&&0<L&&(t.J=r=1.5*L,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const G=n.g;if(G){const J=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(J){var a=r.h;a.g||-1==J.indexOf("spdy")&&-1==J.indexOf("quic")&&-1==J.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(Kv(a,a.h),a.h=null))}if(r.D){const Ie=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;Ie&&(r.za=Ie,$n(r.F,r.D,Ie))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=tw(r,r.H?r.ka:null,r.V),l.J){Ap(r.h,l);var h=l,y=r.J;y&&h.setTimeout(y),h.B&&(fd(h),Dp(h)),r.g=l}else gy(r);0<t.i.length&&py(t)}else"stop"!=w[0]&&"close"!=w[0]||yl(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?yl(t,7):fy(t):"noop"!=w[0]&&t.l&&t.l.wa(w),t.A=0)}ny(4)}catch{}}function Hv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(gl(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function OR(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(gl(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function $v(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(gl(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(Et=Ms.prototype).setTimeout=function(n){this.O=n},Et.hb=function(n){n=n.target;const e=this.L;e&&3==cu(n)?e.l():this.Ka(n)},Et.Ka=function(n){try{if(n==this.g)e:{const S=cu(this.g);var e=this.g.Ea();const R=this.g.aa();if(!(3>S)&&(3!=S||ma||this.g&&(this.h.h||this.g.fa()||Zv(this.g)))){this.I||4!=S||7==e||ny(8==e||0>=R?3:2),fd(this);var t=this.g.aa();this.Y=t;t:if(mI(this)){var r=Zv(this.g);n="";var i=r.length,a=4==cu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){lu(this),pd(this);var l="";break t}this.h.i=new Gt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function uI(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.U,S,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var h,y=this.g;if((h=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Hm(h)){var w=h;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,Ai(12),lu(this),pd(this);break e}Uh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,vI(this,t)}this.P?(yI(this,S,l),ma&&this.i&&3==S&&(ty(this.S,this.T,"tick",this.gb),this.T.start())):(Uh(this.j,this.m,l,null),vI(this,l)),4==S&&lu(this),this.i&&!this.I&&(4==S?my(this.l,this):(this.i=!1,Dp(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Ai(12)):(this.o=0,Ai(13)),lu(this),pd(this)}}}catch{}},Et.gb=function(){if(this.g){var n=cu(this.g),e=this.g.fa();this.C<e.length&&(fd(this),yI(this,n,e),this.i&&4!=n&&Dp(this))}},Et.cancel=function(){this.I=!0,lu(this)},Et.fb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function lI(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ny(3),Ai(17)),lu(this),this.o=2,pd(this)):_I(this,this.V-n)};var Gv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _c(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof _c){this.h=void 0!==e?e:n.h,No(this,n.j),this.s=n.s,this.g=n.g,gd(this,n.m),this.l=n.l,e=n.i;var t=new dy;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Tp(this,t),this.o=n.o}else n&&(t=String(n).match(Gv))?(this.h=!!e,No(this,t[1]||"",!0),this.s=md(t[2]||""),this.g=md(t[3]||"",!0),gd(this,t[4]),this.l=md(t[5]||"",!0),Tp(this,t[6]||"",!0),this.o=md(t[7]||"")):(this.h=!!e,this.i=new dy(null,this.h))}function ya(n){return new _c(n)}function No(n,e,t){n.j=t?md(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function gd(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Tp(n,e,t){e instanceof dy?(n.i=e,function jT(n,e){e&&!n.j&&(vc(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(II(this,r),Wv(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Vh(e,LR)),n.i=new dy(e,n.h))}function $n(n,e,t){n.i.set(e,t)}function cy(n){return $n(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function md(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Vh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,UT),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function UT(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}_c.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Vh(e,EI,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Vh(e,EI,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Vh(t,"/"==t.charAt(0)?VT:Sp,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Vh(t,BT)),n.join("")};var EI=/[#\/\?@]/g,Sp=/[#\?:]/g,VT=/[#\?]/g,LR=/[#\?@]/g,BT=/#/g;function dy(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function vc(n){n.g||(n.g=new Map,n.h=0,n.i&&function wI(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function II(n,e){vc(n),e=yd(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function bI(n,e){return vc(n),e=yd(n,e),n.g.has(e)}function Wv(n,e,t){II(n,e),0<t.length&&(n.i=null,n.g.set(yd(n,e),jm(t)),n.h+=t.length)}function yd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function CI(n){this.l=n||$T,n=Gt.PerformanceNavigationTiming?0<(n=Gt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Gt.g&&Gt.g.Ga&&Gt.g.Ga()&&Gt.g.Ga().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Et=dy.prototype).add=function(n,e){vc(this),this.i=null,n=yd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Et.forEach=function(n,e){vc(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Et.oa=function(){vc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},Et.W=function(n){vc(this);let e=[];if("string"==typeof n)bI(this,n)&&(e=e.concat(this.g.get(yd(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Et.set=function(n,e){return vc(this),this.i=null,bI(this,n=yd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Et.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Et.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var $T=10;function DI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function TI(n){return n.h?1:n.g?n.g.size:0}function qv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Kv(n,e){n.g?n.g.add(e):n.h=e}function Ap(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function wc(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return jm(n.i)}function SI(){}function xp(){this.g=new SI}function HT(n,e,t){const r=t||"";try{Hv(n,function(i,a){let l=i;gp(i)&&(l=Rv(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Bh(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Rp(n){this.l=n.$b||null,this.j=n.ib||!1}function to(n,e){Zr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=_d,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}CI.prototype.cancel=function(){if(this.i=wc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},SI.prototype.stringify=function(n){return Gt.JSON.stringify(n,void 0)},SI.prototype.parse=function(n){return Gt.JSON.parse(n,void 0)},Si(Rp,iy),Rp.prototype.g=function(){return new to(this.l,this.j)},Rp.prototype.i=function(n){return function(){return n}}({}),Si(to,Zr);var _d=0;function xi(n){n.j.read().then(n.Sa.bind(n)).catch(n.ga.bind(n))}function _a(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ec(n)}function Ec(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Et=to.prototype).open=function(n,e){if(this.readyState!=_d)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ec(this)},Et.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Gt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ga.bind(this))},Et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,_a(this)),this.readyState=_d},Et.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ec(this)),this.g&&(this.readyState=3,Ec(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if(typeof Gt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xi(this)}else n.text().then(this.Ua.bind(this),this.ga.bind(this))},Et.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?_a(this):Ec(this),3==this.readyState&&xi(this)}},Et.Ua=function(n){this.g&&(this.response=this.responseText=n,_a(this))},Et.Ta=function(n){this.g&&(this.response=n,_a(this))},Et.ga=function(){this.g&&_a(this)},Et.setRequestHeader=function(n,e){this.v.append(n,e)},Et.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Et.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(to.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Po=Gt.JSON.parse;function xr(n){Zr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=vd,this.K=this.L=!1}Si(xr,Zr);var vd="",jh=/^https?$/i,$h=["POST","PUT"];function wd(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Ed(n),ml(n)}function Ed(n){n.D||(n.D=!0,_i(n,"complete"),_i(n,"error"))}function Id(n){if(n.h&&typeof Um<"u"&&(!n.C[1]||4!=cu(n)||2!=n.aa()))if(n.v&&4==cu(n))ey(n.Ha,0,n);else if(_i(n,"readystatechange"),4==cu(n)){n.h=!1;try{const h=n.aa();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(Gv)[1]||null;if(!i&&Gt.self&&Gt.self.location){var a=Gt.self.location.protocol;i=a.substr(0,a.length-1)}r=!jh.test(i?i.toLowerCase():"")}t=r}if(t)_i(n,"complete"),_i(n,"success");else{n.m=6;try{var l=2<cu(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",Ed(n)}}finally{ml(n)}}}function ml(n,e){if(n.g){bd(n);const t=n.g,r=n.C[0]?Vm:null;n.g=null,n.C=null,e||_i(n,"ready");try{t.onreadystatechange=r}catch{}}}function bd(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Gt.clearTimeout(n.A),n.A=null)}function cu(n){return n.g?n.g.readyState:0}function Zv(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case vd:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Yv(n){let e="";return Tv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function hy(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Yv(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):$n(n,e,t))}function Gh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Qv(n){this.Ca=0,this.i=[],this.j=new Ov,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=Gh("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=Gh("baseRetryDelayMs",5e3,n),this.ab=Gh("retryDelaySeedMs",1e4,n),this.Za=Gh("forwardChannelMaxRetries",2,n),this.ta=Gh("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Yb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new CI(n&&n.concurrentRequestLimit),this.Fa=new xp,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=n&&n.Wb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function fy(n){if(Jv(n),3==n.G){var e=n.U++,t=ya(n.F);$n(t,"SID",n.I),$n(t,"RID",e),$n(t,"TYPE","terminate"),kp(n,t),(e=new Ms(n,n.j,e,void 0)).K=2,e.v=cy(ya(t)),t=!1,Gt.navigator&&Gt.navigator.sendBeacon&&(t=Gt.navigator.sendBeacon(e.v.toString(),"")),!t&&Gt.Image&&((new Image).src=e.v,t=!0),t||(e.g=nw(e.l,null),e.g.da(e.v)),e.F=Date.now(),Dp(e)}yy(n)}function Mp(n){n.g&&(ew(n),n.g.cancel(),n.g=null)}function Jv(n){Mp(n),n.u&&(Gt.clearTimeout(n.u),n.u=null),Cd(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Gt.clearTimeout(n.m),n.m=null)}function py(n){DI(n.h)||n.m||(n.m=!0,oI(n.Ja,n),n.C=0)}function Xv(n,e){var t;t=e?e.m:n.U++;const r=ya(n.F);$n(r,"SID",n.I),$n(r,"RID",t),$n(r,"AID",n.T),kp(n,r),n.o&&n.s&&hy(r,n.o,n.s),t=new Ms(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=AI(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Kv(n.h,t),ly(t,r,e)}function kp(n,e){n.ia&&Tv(n.ia,function(t,r){$n(e,r,t)}),n.l&&Hv({},function(t,r){$n(e,r,t)})}function AI(n,e,t){t=Math.min(n.i.length,t);var r=n.l?zi(n.l.Qa,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let h=!0;for(let y=0;y<t;y++){let w=i[y].h;const S=i[y].g;if(w-=a,0>w)a=Math.max(0,i[y].h-100),h=!1;else try{HT(S,l,"req"+w+"_")}catch{r&&r(S)}}if(h){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function gy(n){n.g||n.u||(n.Z=1,oI(n.Ia,n),n.A=0)}function Np(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=bp(zi(n.Ia,n),xI(n,n.A)),n.A++,0))}function ew(n){null!=n.B&&(Gt.clearTimeout(n.B),n.B=null)}function Pp(n){n.g=new Ms(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=ya(n.sa);$n(e,"RID","rpc"),$n(e,"SID",n.I),$n(e,"CI",n.L?"0":"1"),$n(e,"AID",n.T),$n(e,"TYPE","xmlhttp"),kp(n,e),n.o&&n.s&&hy(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=cy(ya(e)),t.s=null,t.P=!0,gI(t,n)}function Cd(n){null!=n.v&&(Gt.clearTimeout(n.v),n.v=null)}function my(n,e){var t=null;if(n.g==e){Cd(n),ew(n),n.g=null;var r=2}else{if(!qv(n.h,e))return;t=e.D,Ap(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;_i(r=Ip(),new Lv(r,t,e,i)),py(n)}else gy(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function WT(n,e){return!(TI(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Ya?0:n.Za)||(n.m=bp(zi(n.Ja,n,e),xI(n,n.C)),n.C++,0)))}(n,e)||2==r&&Np(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:yl(n,5);break;case 4:yl(n,10);break;case 3:yl(n,6);break;default:yl(n,2)}}function xI(n,e){let t=n.Wa+Math.floor(Math.random()*n.ab);return n.l||(t*=2),t*e}function yl(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=zi(n.jb,n);t||(t=new _c("//www.google.com/images/cleardot.gif"),Gt.location&&"http"==Gt.location.protocol||No(t,"https"),cy(t)),function GT(n,e){const t=new Ov;if(Gt.Image){const r=new Image;r.onload=Bm(Bh,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Bm(Bh,t,r,"TestLoadImage: error",!1,e),r.onabort=Bm(Bh,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Bm(Bh,t,r,"TestLoadImage: timeout",!1,e),Gt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ai(2);n.G=0,n.l&&n.l.va(e),yy(n),Jv(n)}function yy(n){if(n.G=0,n.la=[],n.l){const e=wc(n.h);(0!=e.length||0!=n.i.length)&&($m(n.la,e),$m(n.la,n.i),n.h.i.length=0,jm(n.i),n.i.length=0),n.l.ua()}}function tw(n,e,t){var r=t instanceof _c?ya(t):new _c(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),gd(r,r.m);else{var i=Gt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new _c(null,void 0);r&&No(a,r),e&&(a.g=e),i&&gd(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&$n(r,t,e),$n(r,"VER",n.ma),kp(n,r),r}function nw(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new xr(t&&n.Da&&!n.ra?new Rp({ib:!0}):n.ra)).L=n.H,e}function _y(){}function Op(){if(kh&&!(10<=Number(NR)))throw Error("Environmental error: no available transport.")}function ks(n,e){Zr.call(this),this.g=new Qv(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Xb)&&!Hm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Hm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Wh(this)}function vy(n){Uv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function rw(){sy.call(this),this.status=1}function Wh(n){this.g=n}(Et=xr.prototype).da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():oy.g(),this.C=function pI(n){return n.h||(n.h=n.i())}(this.u?this.u:oy),this.g.onreadystatechange=zi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void wd(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Gt.FormData&&n instanceof Gt.FormData,!(0<=Ev($h,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{bd(this),0<this.B&&((this.K=function Hh(n){return kh&&function Cv(){return function ga(n){var e=Km;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=TT(String(bv)).split("."),t=TT("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=pc(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||pc(0==i[2].length,0==a[2].length)||pc(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=zi(this.qa,this)):this.A=ey(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){wd(this,a)}},Et.qa=function(){typeof Um<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_i(this,"timeout"),this.abort(8))},Et.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,_i(this,"complete"),_i(this,"abort"),ml(this))},Et.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ml(this,!0)),xr.X.M.call(this)},Et.Ha=function(){this.s||(this.F||this.v||this.l?Id(this):this.eb())},Et.eb=function(){Id(this)},Et.aa=function(){try{return 2<cu(this)?this.g.status:-1}catch{return-1}},Et.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Et.Ra=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Po(e)}},Et.Ea=function(){return this.m},Et.Na=function(){return"string"==typeof this.j?this.j:String(this.j)},(Et=Qv.prototype).ma=8,Et.G=1,Et.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Ms(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=xT(a),Av(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=AI(this,i,e),$n(t=ya(this.F),"RID",n),$n(t,"CVER",22),this.D&&$n(t,"X-HTTP-Session-Id",this.D),kp(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(Yv(a)))+"&"+e:this.o&&hy(t,this.o,a)),Kv(this.h,i),this.Xa&&$n(t,"TYPE","init"),this.O?($n(t,"$req",e),$n(t,"SID","null"),i.Z=!0,ly(i,t,null)):ly(i,t,e),this.G=2}}else 3==this.G&&(n?Xv(this,n):0==this.i.length||DI(this.h)||Xv(this))},Et.Ia=function(){if(this.u=null,Pp(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=bp(zi(this.cb,this),n)}},Et.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ai(10),Mp(this),Pp(this))},Et.bb=function(){null!=this.v&&(this.v=null,Mp(this),Np(this),Ai(19))},Et.jb=function(n){n?(this.j.info("Successfully pinged google.com"),Ai(2)):(this.j.info("Failed to ping google.com"),Ai(1))},(Et=_y.prototype).xa=function(){},Et.wa=function(){},Et.va=function(){},Et.ua=function(){},Et.Qa=function(){},Op.prototype.g=function(n,e){return new ks(n,e)},Si(ks,Zr),ks.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Ai(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=tw(n,null,n.V),py(n)},ks.prototype.close=function(){fy(this.g)},ks.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Rv(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.$a++,n)),3==e.G&&py(e)},ks.prototype.M=function(){this.g.l=null,delete this.j,fy(this.g),delete this.g,ks.X.M.call(this)},Si(vy,Uv),Si(rw,sy),Si(Wh,_y),Wh.prototype.xa=function(){_i(this.g,"a")},Wh.prototype.wa=function(n){_i(this.g,new vy(n))},Wh.prototype.va=function(n){_i(this.g,new rw(n))},Wh.prototype.ua=function(){_i(this.g,"b")},Op.prototype.createWebChannel=Op.prototype.g,ks.prototype.send=ks.prototype.u,ks.prototype.open=ks.prototype.m,ks.prototype.close=ks.prototype.close,ry.NO_ERROR=0,ry.TIMEOUT=8,ry.HTTP_ERROR=6,fI.COMPLETE="complete",Fv.EventType=Cp,Cp.OPEN="a",Cp.CLOSE="b",Cp.ERROR="c",Cp.MESSAGE="d",Zr.prototype.listen=Zr.prototype.N,xr.prototype.listenOnce=xr.prototype.O,xr.prototype.getLastError=xr.prototype.Na,xr.prototype.getLastErrorCode=xr.prototype.Ea,xr.prototype.getStatus=xr.prototype.aa,xr.prototype.getResponseJson=xr.prototype.Ra,xr.prototype.getResponseText=xr.prototype.fa,xr.prototype.send=xr.prototype.da;var RI=hc.createWebChannelTransport=function(){return new Op},MI=hc.getStatEventTarget=function(){return Ip()},wy=hc.ErrorCode=ry,kI=hc.EventType=fI,zT=hc.Event=hd,NI=hc.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},qT=hc.FetchXmlHttpFactory=Rp,zh=hc.WebChannel=Fv,iw=hc.XhrIo=xr;const sw="@firebase/firestore";class ii{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ii.UNAUTHENTICATED=new ii(null),ii.GOOGLE_CREDENTIALS=new ii("google-credentials-uid"),ii.FIRST_PARTY=new ii("first-party-uid"),ii.MOCK_USER=new ii("mock-user");let Dd="9.11.0";const _l=new fa.Yd("@firebase/firestore");function Ey(){return _l.logLevel}function He(n,...e){if(_l.logLevel<=fa.in.DEBUG){const t=e.map(ow);_l.debug(`Firestore (${Dd}): ${n}`,...t)}}function Rr(n,...e){if(_l.logLevel<=fa.in.ERROR){const t=e.map(ow);_l.error(`Firestore (${Dd}): ${n}`,...t)}}function qh(n,...e){if(_l.logLevel<=fa.in.WARN){const t=e.map(ow);_l.warn(`Firestore (${Dd}): ${n}`,...t)}}function ow(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ft(n="Unexpected state"){const e=`FIRESTORE (${Dd}) INTERNAL ASSERTION FAILED: `+n;throw Rr(e),new Error(e)}function Pt(n,e){n||ft()}function ze(n,e){return n}const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends B.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class si{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class aw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ii.UNAUTHENTICATED))}shutdown(){}}class OI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class LI{constructor(e){this.t=e,this.currentUser=ii.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let l=new si;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new si,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const w=l;e.enqueueRetryable((0,Se.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},y=w=>{He("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(w=>y(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?y(w):(He("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new si)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(He("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pt("string"==typeof r.accessToken),new aw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Pt(null===e||"string"==typeof e),new ii(e)}}class Kh{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=ii.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Pt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class YT{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new Kh(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(ii.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class FI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UI{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&He("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.A;return this.A=a.token,He("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{He("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):He("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Pt("string"==typeof t.token),this.A=t.token,new FI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function VI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class QT{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=VI(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Bt(n,e){return n<e?-1:n>e?1:0}function Td(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function va(n){return n+"\0"}class gr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ue(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ue(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ue(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gr.fromMillis(Date.now())}static fromDate(e){return gr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new gr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Bt(this.nanoseconds,e.nanoseconds):Bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ot{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ot(e)}static min(){return new Ot(new gr(0,0))}static max(){return new Ot(new gr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ns{constructor(e,t,r){void 0===t?t=0:t>e.length&&ft(),void 0===r?r=e.length-t:r>e.length-t&&ft(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Ns.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ns?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Wt extends Ns{construct(e,t,r){return new Wt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ue(we.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Wt(t)}static emptyPath(){return new Wt([])}}const wa=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Er extends Ns{construct(e,t,r){return new Er(e,t,r)}static isValidIdentifier(e){return wa.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Er.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Er(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ue(we.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Ue(we.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Ue(we.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new Ue(we.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Er(t)}static emptyPath(){return new Er([])}}class et{constructor(e){this.path=e}static fromPath(e){return new et(Wt.fromString(e))}static fromName(e){return new et(Wt.fromString(e).popFirst(5))}static empty(){return new et(Wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Wt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Wt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new et(new Wt(e.slice()))}}class Iy{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function uw(n){return n.fields.find(e=>2===e.kind)}function Sd(n){return n.fields.filter(e=>2!==e.kind)}Iy.UNKNOWN_ID=-1;class Zh{constructor(e,t){this.fieldPath=e,this.kind=t}}class Fp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Fp(0,Ps.min())}}function lw(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ot.fromTimestamp(1e9===r?new gr(t+1,0):new gr(t,r));return new Ps(i,et.empty(),e)}function BI(n){return new Ps(n.readTime,n.key,-1)}class Ps{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ps(Ot.min(),et.empty(),-1)}static max(){return new Ps(Ot.max(),et.empty(),-1)}}function by(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=et.comparator(n.documentKey,e.documentKey),0!==t?t:Bt(n.largestBatchId,e.largestBatchId))}const Up="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function vl(n){return Cy.apply(this,arguments)}function Cy(){return Cy=(0,Se.Z)(function*(n){if(n.code!==we.FAILED_PRECONDITION||n.message!==Up)throw n;He("LocalStore","Unexpectedly lost primary lease")}),Cy.apply(this,arguments)}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.reject(t)}static resolve(e){return new fe((t,r)=>{t(e)})}static reject(e){return new fe((t,r)=>{r(e)})}static waitFor(e){return new fe((t,r)=>{let i=0,a=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++a,l&&a===i&&t()},y=>r(y))}),l=!0,a===i&&t()})}static or(e){let t=fe.resolve(!1);for(const r of e)t=t.next(i=>i?fe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new fe((r,i)=>{const a=e.length,l=new Array(a);let h=0;for(let y=0;y<a;y++){const w=y;t(e[w]).next(S=>{l[w]=S,++h,h===a&&r(l)},S=>i(S))}})}static doWhile(e,t){return new fe((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class Ad{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new si,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Yh(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=Dy(r.target.error);this.P.reject(new Yh(e,i))}}static open(e,t,r,i){try{return new Ad(t,e.transaction(i,r))}catch(a){throw new Yh(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(He("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new HI(t)}}class Oo{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Oo.D((0,B.z$)())&&Rr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return He("SimpleDb","Removing database:",e),Ic(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,B.hl)())return!1;if(Oo.N())return!0;const e=(0,B.z$)(),t=Oo.D(e),r=0<t&&t<10,i=Oo.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,Se.Z)(function*(){return t.db||(He("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new Yh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new Ue(we.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Ue(we.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Yh(e,h))},a.onupgradeneeded=l=>{He("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{He("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Se.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.F(e);const y=Ad.open(a.db,e,l?"readonly":"readwrite",r),w=i(y).next(S=>(y.V(),S)).catch(S=>(y.abort(S),fe.reject(S))).toPromise();return w.catch(()=>{}),yield y.v,w}catch(y){const w=y,S="FirebaseError"!==w.name&&h<3;if(He("SimpleDb","Transaction failed with error:",w.message,"Retrying:",S),a.close(),!S)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class $I{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Ic(this.U.delete())}}class Yh extends Ue{constructor(e,t){super(we.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function wl(n){return"IndexedDbTransactionError"===n.name}class HI{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(He("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(He("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ic(r)}add(e){return He("SimpleDb","ADD",this.store.name,e,e),Ic(this.store.add(e))}get(e){return Ic(this.store.get(e)).next(t=>(void 0===t&&(t=null),He("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return He("SimpleDb","DELETE",this.store.name,e),Ic(this.store.delete(e))}count(){return He("SimpleDb","COUNT",this.store.name),Ic(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(l,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new fe((a,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new fe((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){He("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,l,h)=>h.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new fe((r,i)=>{t.onerror=a=>{const l=Dy(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}H(e,t){const r=[];return new fe((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const y=new $I(h),w=t(h.primaryKey,h.value,y);if(w instanceof fe){const S=w.catch(R=>(y.done(),fe.reject(R)));r.push(S)}y.isDone?i():null===y.G?h.continue():h.continue(y.G)}}).next(()=>fe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ic(n){return new fe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Dy(r.target.error);t(i)}})}let cw=!1;function Dy(n){const e=Oo.D((0,B.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ue("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return cw||(cw=!0,setTimeout(()=>{throw r},0)),r}}return n}class XT{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;He("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Se.Z)(function*(){t.task=null;try{He("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){wl(r)?He("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield vl(r)}yield t.nt(6e4)}))}}class eS{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Se.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return fe.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return He("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(h=>{i-=h,r.add(l)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,a)).next(h=>(He("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=BI(a);by(l,r)>0&&(r=l)}),new Ps(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Os{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function GI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function xd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function WI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Os.at=-1;class Mr{constructor(e,t){this.comparator=e,this.root=t||Ri.EMPTY}insert(e,t){return new Mr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ri.BLACK,null,null))}remove(e){return new Mr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ri.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ty(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ty(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ty(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ty(this.root,e,this.comparator,!0)}}class Ty{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ri{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Ri.RED,this.left=i??Ri.EMPTY,this.right=a??Ri.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Ri(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ri.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ri.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ri.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ri.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ft();const e=this.left.check();if(e!==this.right.check())throw ft();return e+(this.isRed()?0:1)}}Ri.EMPTY=null,Ri.RED=!0,Ri.BLACK=!1,Ri.EMPTY=new class{constructor(){this.size=0}get key(){throw ft()}get value(){throw ft()}get color(){throw ft()}get left(){throw ft()}get right(){throw ft()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ri(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hn{constructor(e){this.comparator=e,this.data=new Mr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zI(this.data.getIterator())}getIteratorFrom(e){return new zI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Hn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Hn(this.comparator);return t.data=e,t}}class zI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Qh(n){return n.hasNext()?n.getNext():void 0}class no{constructor(e){this.fields=e,e.sort(Er.comparator)}static empty(){return new no([])}unionWith(e){let t=new Hn(Er.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new no(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Td(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class oi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new oi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new oi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}oi.EMPTY_BYTE_STRING=new oi("");const nS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bc(n){if(Pt(!!n),"string"==typeof n){let e=0;const t=nS.exec(n);if(Pt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:kr(n.seconds),nanos:kr(n.nanos)}}function kr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Cc(n){return"string"==typeof n?oi.fromBase64String(n):oi.fromUint8Array(n)}function Sy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function dw(n){const e=n.mapValue.fields.__previous_value__;return Sy(e)?dw(e):e}function Jh(n){const e=bc(n.mapValue.fields.__local_write_time__.timestampValue);return new gr(e.seconds,e.nanos)}class qI{constructor(e,t,r,i,a,l,h,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=y}}class El{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new El("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof El&&e.projectId===this.projectId&&e.database===this.database}}function Xh(n){return null==n}function ef(n){return 0===n&&1/n==-1/0}function hw(n){return"number"==typeof n&&Number.isInteger(n)&&!ef(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Il={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Vp={nullValue:"NULL_VALUE"};function ro(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Sy(n)?4:Rd(n)?9007199254740991:10:ft()}function du(n,e){if(n===e)return!0;const t=ro(n);if(t!==ro(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Jh(n).isEqual(Jh(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=bc(r.timestampValue),l=bc(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Cc(n.bytesValue).isEqual(Cc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return kr(r.geoPointValue.latitude)===kr(i.geoPointValue.latitude)&&kr(r.geoPointValue.longitude)===kr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return kr(r.integerValue)===kr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=kr(r.doubleValue),l=kr(i.doubleValue);return a===l?ef(a)===ef(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Td(n.arrayValue.values||[],e.arrayValue.values||[],du);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(GI(a)!==GI(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===l[h]||!du(a[h],l[h])))return!1;return!0}(n,e);default:return ft()}var i}function Bp(n,e){return void 0!==(n.values||[]).find(t=>du(t,e))}function io(n,e){if(n===e)return 0;const t=ro(n),r=ro(e);if(t!==r)return Bt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Bt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=kr(i.integerValue||i.doubleValue),h=kr(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return rS(n.timestampValue,e.timestampValue);case 4:return rS(Jh(n),Jh(e));case 5:return Bt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=Cc(i),h=Cc(a);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),h=a.split("/");for(let y=0;y<l.length&&y<h.length;y++){const w=Bt(l[y],h[y]);if(0!==w)return w}return Bt(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Bt(kr(i.latitude),kr(a.latitude));return 0!==l?l:Bt(kr(i.longitude),kr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],h=a.values||[];for(let y=0;y<l.length&&y<h.length;++y){const w=io(l[y],h[y]);if(w)return w}return Bt(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Il.mapValue&&a===Il.mapValue)return 0;if(i===Il.mapValue)return 1;if(a===Il.mapValue)return-1;const l=i.fields||{},h=Object.keys(l),y=a.fields||{},w=Object.keys(y);h.sort(),w.sort();for(let S=0;S<h.length&&S<w.length;++S){const R=Bt(h[S],w[S]);if(0!==R)return R;const L=io(l[h[S]],y[w[S]]);if(0!==L)return L}return Bt(h.length,w.length)}(n.mapValue,e.mapValue);default:throw ft()}}function rS(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Bt(n,e);const t=bc(n),r=bc(e),i=Bt(t.seconds,r.seconds);return 0!==i?i:Bt(t.nanos,r.nanos)}function Dc(n){return KI(n)}function KI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=bc(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Cc(n.bytesValue).toBase64():"referenceValue"in n?et.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=KI(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const h of i)l?l=!1:a+=",",a+=`${h}:${KI(r.fields[h])}`;return a+"}"}(n.mapValue):ft();var e}function Tc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ay(n){return!!n&&"integerValue"in n}function xy(n){return!!n&&"arrayValue"in n}function Rt(n){return!!n&&"nullValue"in n}function ZI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ry(n){return!!n&&"mapValue"in n}function jp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return xd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=jp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=jp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Rd(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function iS(n){return"nullValue"in n?Vp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Tc(El.empty(),et.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ft()}function My(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Tc(El.empty(),et.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Il:ft()}function $p(n,e){const t=io(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Ir(n,e){const t=io(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class qi{constructor(e){this.value=e}static empty(){return new qi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ry(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jp(t)}setAll(e){let t=Er.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=jp(l):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Ry(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return du(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ry(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){xd(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new qi(jp(this.value))}}function fw(n){const e=[];return xd(n.fields,(t,r)=>{const i=new Er([t]);if(Ry(r)){const a=fw(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new no(e)}class Yn{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Yn(e,0,Ot.min(),Ot.min(),qi.empty(),0)}static newFoundDocument(e,t,r){return new Yn(e,1,t,Ot.min(),r,0)}static newNoDocument(e,t){return new Yn(e,2,t,Ot.min(),qi.empty(),0)}static newUnknownDocument(e,t){return new Yn(e,3,t,Ot.min(),qi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class sS{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.ht=null}}function pw(n,e=null,t=[],r=[],i=null,a=null,l=null){return new sS(n,e,t,r,i,a,l)}function Sc(n){const e=ze(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Dc(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Xh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Dc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Dc(r)).join(",")),e.ht=t}return e.ht}function tf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!lS(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!du(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!mw(n.startAt,e.startAt)&&mw(n.endAt,e.endAt)}function ky(n){return et.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Ny(n,e){return n.filters.filter(t=>t instanceof Mi&&t.field.isEqual(e))}function QI(n,e,t){let r=Vp,i=!0;for(const a of Ny(n,e)){let l=Vp,h=!0;switch(a.op){case"<":case"<=":l=iS(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,h=!1;break;case"!=":case"not-in":l=Vp}$p({value:r,inclusive:i},{value:l,inclusive:h})<0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];$p({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function nf(n,e,t){let r=Il,i=!0;for(const a of Ny(n,e)){let l=Il,h=!0;switch(a.op){case">=":case">":l=My(a.value),h=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,h=!1;break;case"!=":case"not-in":l=Il}Ir({value:r,inclusive:i},{value:l,inclusive:h})>0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];Ir({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Mi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new oS(e,t,r):"array-contains"===t?new JI(e,r):"in"===t?new XI(e,r):"not-in"===t?new uS(e,r):"array-contains-any"===t?new Hp(e,r):new Mi(e,t,r)}static lt(e,t,r){return"in"===t?new aS(e,r):new Py(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(io(t,this.value)):null!==t&&ro(this.value)===ro(t)&&this.ft(io(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ft()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class oS extends Mi{constructor(e,t,r){super(e,t,r),this.key=et.fromName(r.referenceValue)}matches(e){const t=et.comparator(e.key,this.key);return this.ft(t)}}class aS extends Mi{constructor(e,t){super(e,"in",t),this.keys=gw(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Py extends Mi{constructor(e,t){super(e,"not-in",t),this.keys=gw(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function gw(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>et.fromName(r.referenceValue))}class JI extends Mi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xy(t)&&Bp(t.arrayValue,this.value)}}class XI extends Mi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Bp(this.value.arrayValue,t)}}class uS extends Mi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Bp(this.value.arrayValue,t)}}class Hp extends Mi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Bp(this.value.arrayValue,r))}}class Lo{constructor(e,t){this.position=e,this.inclusive=t}}class rf{constructor(e,t="asc"){this.field=e,this.dir=t}}function lS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function eb(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?et.comparator(et.fromName(l.referenceValue),t.key):io(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function mw(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!du(n.position[t],e.position[t]))return!1;return!0}class hu{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=y,this._t=null,this.wt=null}}function yw(n,e,t,r,i,a,l,h){return new hu(n,e,t,r,i,a,l,h)}function sf(n){return new hu(n)}function _w(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function vw(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function ww(n){for(const e of n.filters)if(e.dt())return e.field;return null}function tb(n){return null!==n.collectionGroup}function Gp(n){const e=ze(n);if(null===e._t){e._t=[];const t=ww(e),r=vw(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new rf(t)),e._t.push(new rf(Er.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e._t.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new rf(Er.keyField(),a))}}}return e._t}function Ls(n){const e=ze(n);if(!e.wt)if("F"===e.limitType)e.wt=pw(e.path,e.collectionGroup,Gp(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Gp(e))t.push(new rf(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Lo(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Lo(e.startAt.position,e.startAt.inclusive):null;e.wt=pw(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function Ew(n,e,t){return new hu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function af(n,e){return tf(Ls(n),Ls(e))&&n.limitType===e.limitType}function Wp(n){return`${Sc(Ls(n))}|lt:${n.limitType}`}function Iw(n){return`Query(target=${function YI(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Dc(r.value)}`;var r}).join(", ")}]`),Xh(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Dc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Dc(t)).join(",")),`Target(${e})`}(Ls(n))}; limitType=${n.limitType})`}function bw(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):et.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const h=eb(i,a,l);return i.inclusive?h<=0:h<0}(t.startAt,Gp(t),r)||t.endAt&&!function(i,a,l){const h=eb(i,a,l);return i.inclusive?h>=0:h>0}(t.endAt,Gp(t),r)));var t,r}function Cw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function uf(n){return(e,t)=>{let r=!1;for(const i of Gp(n)){const a=cS(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function cS(n,e,t){const r=n.field.isKeyField()?et.comparator(e.key,t.key):function(i,a,l){const h=a.data.field(i),y=l.data.field(i);return null!==h&&null!==y?io(h,y):ft()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ft()}}function nb(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ef(e)?"-0":e}}function rb(n){return{integerValue:""+n}}function ib(n,e){return hw(e)?rb(e):nb(n,e)}class Oy{constructor(){this._=void 0}}function sb(n,e,t){return n instanceof fu?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Md?Dw(n,e):n instanceof kd?Tw(n,e):function(r,i){const a=ob(r,i),l=Sw(a)+Sw(r.yt);return Ay(a)&&Ay(r.yt)?rb(l):nb(r.It,l)}(n,e)}function dS(n,e,t){return n instanceof Md?Dw(n,e):n instanceof kd?Tw(n,e):t}function ob(n,e){return n instanceof lf?Ay(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class fu extends Oy{}class Md extends Oy{constructor(e){super(),this.elements=e}}function Dw(n,e){const t=ab(e);for(const r of n.elements)t.some(i=>du(i,r))||t.push(r);return{arrayValue:{values:t}}}class kd extends Oy{constructor(e){super(),this.elements=e}}function Tw(n,e){let t=ab(e);for(const r of n.elements)t=t.filter(i=>!du(i,r));return{arrayValue:{values:t}}}class lf extends Oy{constructor(e,t){super(),this.It=e,this.yt=t}}function Sw(n){return kr(n.integerValue||n.doubleValue)}function ab(n){return xy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Nd{constructor(e,t){this.field=e,this.transform=t}}class ub{constructor(e,t){this.version=e,this.transformResults=t}}class sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ly(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Fy{}function lb(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new df(n.key,sr.none()):new cf(n.key,n.data,sr.none());{const t=n.data,r=qi.empty();let i=new Hn(Er.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new bl(n.key,r,new no(i.toArray()),sr.none())}}function Aw(n,e,t){n instanceof cf?function(r,i,a){const l=r.value.clone(),h=fb(r.fieldTransforms,i,a.transformResults);l.setAll(h),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof bl?function(r,i,a){if(!Ly(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=fb(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(hb(r)),h.setAll(l),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function zp(n,e,t,r){return n instanceof cf?function(i,a,l,h){if(!Ly(i.precondition,a))return l;const y=i.value.clone(),w=pb(i.fieldTransforms,h,a);return y.setAll(w),a.convertToFoundDocument(a.version,y).setHasLocalMutations(),null}(n,e,t,r):n instanceof bl?function(i,a,l,h){if(!Ly(i.precondition,a))return l;const y=pb(i.fieldTransforms,h,a),w=a.data;return w.setAll(hb(i)),w.setAll(y),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(S=>S.field))}(n,e,t,r):(l=t,Ly(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function cb(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=ob(r.transform,i||null);null!=a&&(null===t&&(t=qi.empty()),t.set(r.field,a))}return t||null}function db(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Td(t,r,(i,a)=>function hS(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Md&&r instanceof Md||t instanceof kd&&r instanceof kd?Td(t.elements,r.elements,du):t instanceof lf&&r instanceof lf?du(t.yt,r.yt):t instanceof fu&&r instanceof fu);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class cf extends Fy{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class bl extends Fy{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function hb(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function fb(n,e,t){const r=new Map;Pt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,dS(l,h,t[i]))}return r}function pb(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,sb(a,l,e))}return r}class df extends Fy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xw extends Fy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class gb{constructor(e){this.count=e}}var jr,yn;function mb(n){switch(n){default:return ft();case we.CANCELLED:case we.UNKNOWN:case we.DEADLINE_EXCEEDED:case we.RESOURCE_EXHAUSTED:case we.INTERNAL:case we.UNAVAILABLE:case we.UNAUTHENTICATED:return!1;case we.INVALID_ARGUMENT:case we.NOT_FOUND:case we.ALREADY_EXISTS:case we.PERMISSION_DENIED:case we.FAILED_PRECONDITION:case we.ABORTED:case we.OUT_OF_RANGE:case we.UNIMPLEMENTED:case we.DATA_LOSS:return!0}}function Rw(n){if(void 0===n)return Rr("GRPC error has no .code"),we.UNKNOWN;switch(n){case jr.OK:return we.OK;case jr.CANCELLED:return we.CANCELLED;case jr.UNKNOWN:return we.UNKNOWN;case jr.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case jr.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case jr.INTERNAL:return we.INTERNAL;case jr.UNAVAILABLE:return we.UNAVAILABLE;case jr.UNAUTHENTICATED:return we.UNAUTHENTICATED;case jr.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case jr.NOT_FOUND:return we.NOT_FOUND;case jr.ALREADY_EXISTS:return we.ALREADY_EXISTS;case jr.PERMISSION_DENIED:return we.PERMISSION_DENIED;case jr.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case jr.ABORTED:return we.ABORTED;case jr.OUT_OF_RANGE:return we.OUT_OF_RANGE;case jr.UNIMPLEMENTED:return we.UNIMPLEMENTED;case jr.DATA_LOSS:return we.DATA_LOSS;default:return ft()}}(yn=jr||(jr={}))[yn.OK=0]="OK",yn[yn.CANCELLED=1]="CANCELLED",yn[yn.UNKNOWN=2]="UNKNOWN",yn[yn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yn[yn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yn[yn.NOT_FOUND=5]="NOT_FOUND",yn[yn.ALREADY_EXISTS=6]="ALREADY_EXISTS",yn[yn.PERMISSION_DENIED=7]="PERMISSION_DENIED",yn[yn.UNAUTHENTICATED=16]="UNAUTHENTICATED",yn[yn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yn[yn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yn[yn.ABORTED=10]="ABORTED",yn[yn.OUT_OF_RANGE=11]="OUT_OF_RANGE",yn[yn.UNIMPLEMENTED=12]="UNIMPLEMENTED",yn[yn.INTERNAL=13]="INTERNAL",yn[yn.UNAVAILABLE=14]="UNAVAILABLE",yn[yn.DATA_LOSS=15]="DATA_LOSS";class Ac{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){xd(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return WI(this.inner)}size(){return this.innerSize}}const fS=new Mr(et.comparator);function Fs(){return fS}const Uy=new Mr(et.comparator);function Pd(...n){let e=Uy;for(const t of n)e=e.insert(t.key,t);return e}function Mw(n){let e=Uy;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Fo(){return qp()}function yb(){return qp()}function qp(){return new Ac(n=>n.toString(),(n,e)=>n.isEqual(e))}const kw=new Mr(et.comparator),pS=new Hn(et.comparator);function Yt(...n){let e=pS;for(const t of n)e=e.add(t);return e}const hf=new Hn(Bt);function Kp(){return hf}class Zp{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Vy.createSynthesizedTargetChangeForCurrentChange(e,t)),new Zp(Ot.min(),r,Kp(),Fs(),Yt())}}class Vy{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Vy(oi.EMPTY_BYTE_STRING,t,Yt(),Yt(),Yt())}}class Yp{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class By{constructor(e,t){this.targetId=e,this.At=t}}class _b{constructor(e,t,r=oi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class jy{constructor(){this.Rt=0,this.bt=$y(),this.Pt=oi.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Yt(),t=Yt(),r=Yt();return this.bt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ft()}}),new Vy(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=$y()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class gS{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Fs(),this.qt=Nw(),this.Kt=new Hn(Bt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:ft()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const a=i.target;if(ky(a))if(0===r){const l=new et(a.path);this.jt(t,l,Yn.newNoDocument(l,Ot.min()))}else Pt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((a,l)=>{const h=this.Xt(l);if(h){if(a.current&&ky(h.target)){const y=new et(h.target.path);null!==this.Ut.get(y)||this.ee(l,y)||this.jt(l,y,Yn.newNoDocument(y,e))}a.Dt&&(t.set(l,a.xt()),a.Nt())}});let r=Yt();this.qt.forEach((a,l)=>{let h=!0;l.forEachWhile(y=>{const w=this.Xt(y);return!w||2===w.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.Ut.forEach((a,l)=>l.setReadTime(e));const i=new Zp(e,t,this.Kt,this.Ut,r);return this.Ut=Fs(),this.qt=Nw(),this.Kt=new Hn(Bt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new jy,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Hn(Bt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||He("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new jy),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function Nw(){return new Mr(et.comparator)}function $y(){return new Mr(et.comparator)}const vb={asc:"ASCENDING",desc:"DESCENDING"},wb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Eb{constructor(e,t){this.databaseId=e,this.gt=t}}function ff(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ib(n,e){return n.gt?e.toBase64():e.toUint8Array()}function mS(n,e){return ff(n,e.toTimestamp())}function vi(n){return Pt(!!n),Ot.fromTimestamp(function(e){const t=bc(e);return new gr(t.seconds,t.nanos)}(n))}function Pw(n,e){return(t=n,new Wt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Ow(n){const e=Wt.fromString(n);return Pt(Pb(e)),e}function Hy(n,e){return Pw(n.databaseId,e.path)}function Ea(n,e){const t=Ow(e);if(t.get(1)!==n.databaseId.projectId)throw new Ue(we.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ue(we.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new et(yS(t))}function Lw(n,e){return Pw(n.databaseId,e)}function bb(n){const e=Ow(n);return 4===e.length?Wt.emptyPath():yS(e)}function Gy(n){return new Wt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yS(n){return Pt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Cb(n,e,t){return{name:Hy(n,e),fields:t.value.mapValue.fields}}function Db(n,e,t){const r=Ea(n,e.name),i=vi(e.updateTime),a=new qi({mapValue:{fields:e.fields}}),l=Yn.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function Qp(n,e){let t;if(e instanceof cf)t={update:Cb(n,e.key,e.value)};else if(e instanceof df)t={delete:Hy(n,e.key)};else if(e instanceof bl)t={update:Cb(n,e.key,e.data),updateMask:Nb(e.fieldMask)};else{if(!(e instanceof xw))return ft();t={verify:Hy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof fu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Md)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof kd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof lf)return{fieldPath:a.field.canonicalString(),increment:l.yt};throw ft()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:mS(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ft()),t;var i}function Fw(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?sr.updateTime(vi(i.updateTime)):void 0!==i.exists?sr.exists(i.exists):sr.none():sr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let h=null;"setToServerValue"in l?(Pt("REQUEST_TIME"===l.setToServerValue),h=new fu):"appendMissingElements"in l?h=new Md(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new kd(l.removeAllFromArray.values||[]):"increment"in l?h=new lf(a,l.increment):ft();const y=Er.fromServerFormat(l.fieldPath);return new Nd(y,h)}(n,i)):[];var i;if(e.update){const i=Ea(n,e.update.name),a=new qi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new no((e.updateMask.fieldPaths||[]).map(w=>Er.fromServerFormat(w)));return new bl(i,a,l,t,r)}return new cf(i,a,t,r)}if(e.delete){const i=Ea(n,e.delete);return new df(i,t)}if(e.verify){const i=Ea(n,e.verify);return new xw(i,t)}return ft()}function Sb(n,e){return{documents:[Lw(n,e.path)]}}function Uw(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Lw(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Lw(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0===y.length)return;const w=y.map(S=>function(R){if("=="===R.op){if(ZI(R.value))return{unaryFilter:{field:Od(R.field),op:"IS_NAN"}};if(Rt(R.value))return{unaryFilter:{field:Od(R.field),op:"IS_NULL"}}}else if("!="===R.op){if(ZI(R.value))return{unaryFilter:{field:Od(R.field),op:"IS_NOT_NAN"}};if(Rt(R.value))return{unaryFilter:{field:Od(R.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Od(R.field),op:Rb(R.op),value:R.value}}}(S));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(y){if(0!==y.length)return y.map(w=>{return{field:Od((S=w).field),direction:Jp(S.dir)};var S})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(w=e.limit,n.gt||Xh(w)?w:{value:w});var w,h,y;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function Ab(n){let e=bb(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Pt(1===r);const S=t.from[0];S.allDescendants?i=S.collectionId:e=e.child(S.collectionId)}let a=[];t.where&&(a=xb(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(S=>{return new rf(Ld((R=S).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let h=null;t.limit&&(h=function(S){let R;return R="object"==typeof S?S.value:S,Xh(R)?null:R}(t.limit));let y=null;var S;t.startAt&&(y=new Lo((S=t.startAt).values||[],!!S.before));let w=null;return t.endAt&&(w=function(S){return new Lo(S.values||[],!S.before)}(t.endAt)),yw(e,i,l,a,h,"F",y,w)}function xb(n){return n?void 0!==n.unaryFilter?[kb(n)]:void 0!==n.fieldFilter?[Mb(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>xb(e)).reduce((e,t)=>e.concat(t)):ft():[]}function Jp(n){return vb[n]}function Rb(n){return wb[n]}function Od(n){return{fieldPath:n.canonicalString()}}function Ld(n){return Er.fromServerFormat(n.fieldPath)}function Mb(n){return Mi.create(Ld(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ft()}}(n.fieldFilter.op),n.fieldFilter.value)}function kb(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Ld(n.unaryFilter.field);return Mi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Ld(n.unaryFilter.field);return Mi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ld(n.unaryFilter.field);return Mi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ld(n.unaryFilter.field);return Mi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ft()}}function Nb(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Pb(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Us(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Lb(e)),e=Ob(n.get(t),e);return Lb(e)}function Ob(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function Lb(n){return n+"\x01\x01"}function pu(n){const e=n.length;if(Pt(e>=2),2===e)return Pt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Wt.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&ft(),n.charAt(l+1)){case"\x01":const h=n.substring(a,l);let y;0===i.length?y=h:(i+=h,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:ft()}a=l+2}return new Wt(r)}const Fb=["userId","batchId"];function Wy(n,e){return[n,Us(e)]}function pf(n,e,t){return[n,Us(e),t]}const ES={},Vw=["prefixPath","collectionGroup","readTime","documentId"],gu=["prefixPath","collectionGroup","documentId"],IS=["collectionGroup","readTime","prefixPath","documentId"],Bw=["canonicalId","targetId"],Xp=["targetId","path"],bS=["path","targetId"],CS=["collectionId","parent"],DS=["indexId","uid"],zy=["uid","sequenceNumber"],qy=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],TS=["indexId","uid","orderedDocumentKey"],SS=["userId","collectionPath","documentId"],Ub=["userId","collectionPath","largestBatchId"],Vb=["userId","collectionGroup","largestBatchId"],Ky=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Bb=[...Ky,"documentOverlays"],jb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$b=jb,UR=[...$b,"indexConfiguration","indexState","indexEntries"];class eg extends jI{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Yr(n,e){const t=ze(n);return Oo.M(t.ie,e)}class Zy{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Aw(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=zp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=zp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=yb();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(i.key)?null:h;const y=lb(l,h);null!==y&&r.set(i.key,y),l.isValidDocument()||l.convertToNoDocument(Ot.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yt())}isEqual(e){return this.batchId===e.batchId&&Td(this.mutations,e.mutations,(t,r)=>db(t,r))&&Td(this.baseMutations,e.baseMutations,(t,r)=>db(t,r))}}class tg{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Pt(e.mutations.length===r.length);let i=kw;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new tg(e,t,r,i)}}class ng{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class xc{constructor(e,t,r,i,a=Ot.min(),l=Ot.min(),h=oi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(e){return new xc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new xc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new xc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Hb{constructor(e){this.re=e}}function Gb(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:rg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Hy(i=n.re,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:ff(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Cl(e.version)};else{if(!e.isUnknownDocument())return ft();r.unknownDocument={path:t.path.toArray(),version:Cl(e.version)}}var i,a;return r}function rg(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Cl(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Rc(n){const e=new gr(n.seconds,n.nanoseconds);return Ot.fromTimestamp(e)}function Fd(n,e){const t=(e.baseMutations||[]).map(a=>Fw(n.re,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>Fw(n.re,a)),i=gr.fromMillis(e.localWriteTimeMs);return new Zy(e.batchId,i,t,r)}function gf(n){const e=Rc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Rc(n.lastLimboFreeSnapshotVersion):Ot.min();let r;var i;return void 0!==n.query.documents?(Pt(1===(i=n.query).documents.length),r=Ls(sf(bb(i.documents[0])))):r=Ls(Ab(n.query)),new xc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,oi.fromBase64String(n.resumeToken))}function jw(n,e){const t=Cl(e.snapshotVersion),r=Cl(e.lastLimboFreeSnapshotVersion);let i;i=ky(e.target)?Sb(n.re,e.target):Uw(n.re,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Sc(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function $w(n){const e=Ab({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Ew(e,e.limit,"L"):e}function Yy(n,e){return new ng(e.largestBatchId,Fw(n.re,e.overlayMutation))}function Hw(n,e){const t=e.path.lastSegment();return[n,Us(e.path.popLast()),t]}function Wb(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Cl(r.readTime),documentKey:Us(r.documentKey.path),largestBatchId:r.largestBatchId}}class zb{getBundleMetadata(e,t){return qb(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Rc(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return qb(e).put({bundleId:(r=t).id,createTime:Cl(vi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Ki(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:$w(i.bundledQuery),readTime:Rc(i.readTime)};var i})}saveNamedQuery(e,t){return Ki(e).put({name:(r=t).name,readTime:Cl(vi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function qb(n){return Yr(n,"bundles")}function Ki(n){return Yr(n,"namedQueries")}class Dl{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Dl(e,t.uid||"")}getOverlay(e,t){return ig(e).get(Hw(this.userId,t)).next(r=>r?Yy(this.It,r):null)}getOverlays(e,t){const r=Fo();return fe.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const h=new ng(t,l);i.push(this.ue(e,h))}),fe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Us(l.getCollectionPath())));const a=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(ig(e).Y("collectionPathOverlayIndex",h))}),fe.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Fo(),a=Us(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return ig(e).W("collectionPathOverlayIndex",l).next(h=>{for(const y of h){const w=Yy(this.It,y);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Fo();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ig(e).Z({index:"collectionGroupOverlayIndex",range:h},(y,w,S)=>{const R=Yy(this.It,w);a.size()<i||R.largestBatchId===l?(a.set(R.getKey(),R),l=R.largestBatchId):S.done()}).next(()=>a)}ue(e,t){return ig(e).put(function(r,i,a){const[l,h,y]=Hw(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:y,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Qp(r.re,a.mutation)}}(this.It,this.userId,t))}}function ig(n){return Yr(n,"documentOverlays")}class Ud{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(kr(e.integerValue));else if("doubleValue"in e){const r=kr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),ef(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Cc(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?Rd(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):ft()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),et.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function VR(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function xS(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=VR(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Ud.Te=new Ud;class Kb{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=xS(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=xS(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Zb{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class sg{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class og{constructor(){this.Be=new Kb,this.Le=new Zb(this.Be),this.Ue=new sg(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Tl{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Tl(this.indexId,this.documentKey,this.arrayValue,r)}}function Vd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Gw(n.arrayValue,e.arrayValue),0!==t?t:(t=Gw(n.directionalValue,e.directionalValue),0!==t?t:et.comparator(n.documentKey,e.documentKey)))}function Gw(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class RS{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=uw(e);if(void 0!==t&&!this.ze(t))return!1;const r=Sd(e);let i=0,a=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const l=r[i];if(!this.He(this.je,l)||!this.Je(this.Ge[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Ge.length||!this.Je(this.Ge[a++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class MS{constructor(){this.Ye=new Ww}addToCollectionParentIndex(e,t){return this.Ye.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve(Ps.min())}getMinOffsetFromCollectionGroup(e,t){return fe.resolve(Ps.min())}updateCollectionGroup(e,t,r){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class Ww{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Hn(Wt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Hn(Wt.comparator)).toArray()}}const mf=new Uint8Array(0);class Yb{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new Ww,this.Ze=new Ac(r=>Sc(r),(r,i)=>tf(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const a={collectionId:r,parent:Us(i)};return zw(e).put(a)}return fe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[va(t),""],!1,!0);return zw(e).W(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(pu(l.parent))}return r})}addFieldIndex(e,t){const r=yf(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=Qy(e);return a.next(h=>{l.put(Wb(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=yf(e),i=Qy(e),a=Mc(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Mc(e);let i=!0;const a=new Map;return fe.forEach(this.tn(t),l=>this.en(e,l).next(h=>{i&&(i=!!h),a.set(l,h)})).next(()=>{if(i){let l=Yt();const h=[];return fe.forEach(a,(y,w)=>{var S;He("IndexedDbIndexManager",`Using index ${S=y,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(Ut=>`${Ut.fieldPath}:${Ut.kind}`).join(",")}`} to execute ${Sc(t)}`);const R=function(Ut,jt){const qt=uw(jt);if(void 0===qt)return null;for(const hn of Ny(Ut,qt.fieldPath))switch(hn.op){case"array-contains-any":return hn.value.arrayValue.values||[];case"array-contains":return[hn.value]}return null}(w,y),L=function(Ut,jt){const qt=new Map;for(const hn of Sd(jt))for(const Ni of Ny(Ut,hn.fieldPath))switch(Ni.op){case"==":case"in":qt.set(hn.fieldPath.canonicalString(),Ni.value);break;case"not-in":case"!=":return qt.set(hn.fieldPath.canonicalString(),Ni.value),Array.from(qt.values())}return null}(w,y),G=function(Ut,jt){const qt=[];let hn=!0;for(const Ni of Sd(jt)){const iE=0===Ni.kind?QI(Ut,Ni.fieldPath,Ut.startAt):nf(Ut,Ni.fieldPath,Ut.startAt);qt.push(iE.value),hn&&(hn=iE.inclusive)}return new Lo(qt,hn)}(w,y),J=function(Ut,jt){const qt=[];let hn=!0;for(const Ni of Sd(jt)){const iE=0===Ni.kind?nf(Ut,Ni.fieldPath,Ut.endAt):QI(Ut,Ni.fieldPath,Ut.endAt);qt.push(iE.value),hn&&(hn=iE.inclusive)}return new Lo(qt,hn)}(w,y),Ie=this.nn(y,w,G),Fe=this.nn(y,w,J),It=this.sn(y,w,L),Dt=this.rn(y.indexId,R,Ie,G.inclusive,Fe,J.inclusive,It);return fe.forEach(Dt,Ut=>r.J(Ut,t.limit).next(jt=>{jt.forEach(qt=>{const hn=et.fromSegments(qt.documentKey);l.has(hn)||(l=l.add(hn),h.push(hn))})}))}).next(()=>h)}return fe.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,a,l,h){const y=(null!=t?t.length:1)*Math.max(r.length,a.length),w=y/(null!=t?t.length:1),S=[];for(let R=0;R<y;++R){const L=t?this.on(t[R/w]):mf,G=this.un(e,L,r[R%w],i),J=this.cn(e,L,a[R%w],l),Ie=h.map(Fe=>this.un(e,L,Fe,!0));S.push(...this.createRange(G,J,Ie))}return S}un(e,t,r,i){const a=new Tl(e,et.empty(),t,r);return i?a:a.Ke()}cn(e,t,r,i){const a=new Tl(e,et.empty(),t,r);return i?a.Ke():a}en(e,t){const r=new RS(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const h of a)r.We(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let r=2;return fe.forEach(this.tn(t),i=>this.en(e,i).next(a=>{a?0!==r&&a.fields.length<function(l){let h=new Hn(Er.comparator),y=!1;for(const w of l.filters){const S=w;S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?y=!0:h=h.add(S.field))}for(const w of l.orderBy)w.field.isKeyField()||(h=h.add(w.field));return h.size+(y?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new og;for(const i of Sd(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.qe(i.kind);Ud.Te.ce(a,l)}return r.$e()}on(e){const t=new og;return Ud.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new og;return Ud.Te.ce(Tc(this.databaseId,t),r.qe(function(i){const a=Sd(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new og);let a=0;for(const l of Sd(e)){const h=r[a++];for(const y of i)if(this.ln(t,l.fieldPath)&&xy(h))i=this.fn(i,l,h);else{const w=y.qe(l.kind);Ud.Te.ce(h,w)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const h of i){const y=new og;y.seed(h.$e()),Ud.Te.ce(l,y.qe(t.kind)),a.push(y)}return a}ln(e,t){return!!e.filters.find(r=>r instanceof Mi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=yf(e),i=Qy(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const l=[];return fe.forEach(a,h=>i.get([h.indexId,this.uid]).next(y=>{l.push(function(w,S){const R=S?new Fp(S.sequenceNumber,new Ps(Rc(S.readTime),new et(pu(S.documentKey)),S.largestBatchId)):Fp.empty(),L=w.fields.map(([G,J])=>new Zh(Er.fromServerFormat(G),J));return new Iy(w.indexId,w.collectionGroup,L,R)}(h,y))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Bt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=yf(e),a=Qy(e);return this._n(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>fe.forEach(h,y=>a.put(Wb(y.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return fe.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?fe.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),fe.forEach(h,y=>this.wn(e,i,y).next(w=>{const S=this.mn(a,y);return w.isEqual(S)?fe.resolve():this.gn(e,a,y,w,S)}))))})}yn(e,t,r,i){return Mc(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return Mc(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Mc(e);let a=new Hn(Vd);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(l,h)=>{a=a.add(new Tl(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}mn(e,t){let r=new Hn(Vd);const i=this.an(t,e);if(null==i)return r;const a=uw(t);if(null!=a){const l=e.data.field(a.fieldPath);if(xy(l))for(const h of l.arrayValue.values||[])r=r.add(new Tl(t.indexId,e.key,this.on(h),i))}else r=r.add(new Tl(t.indexId,e.key,mf,i));return r}gn(e,t,r,i,a){He("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,y,w,S,R){const L=h.getIterator(),G=y.getIterator();let J=Qh(L),Ie=Qh(G);for(;J||Ie;){let Fe=!1,It=!1;if(J&&Ie){const Dt=w(J,Ie);Dt<0?It=!0:Dt>0&&(Fe=!0)}else null!=J?It=!0:Fe=!0;Fe?(S(Ie),Ie=Qh(G)):It?(R(J),J=Qh(L)):(J=Qh(L),Ie=Qh(G))}}(i,a,Vd,h=>{l.push(this.yn(e,t,r,h))},h=>{l.push(this.pn(e,t,r,h))}),fe.waitFor(l)}_n(e){let t=1;return Qy(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,h)=>Vd(l,h)).filter((l,h,y)=>!h||0!==Vd(l,y[h-1]));const i=[];i.push(e);for(const l of r){const h=Vd(l,e),y=Vd(l,t);if(0===h)i[0]=e.Ke();else if(h>0&&y<0)i.push(l),i.push(l.Ke());else if(y>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,mf,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,mf,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(qw)}getMinOffset(e,t){return fe.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||ft())).next(qw)}}function zw(n){return Yr(n,"collectionParents")}function Mc(n){return Yr(n,"indexEntries")}function yf(n){return Yr(n,"indexConfiguration")}function Qy(n){return Yr(n,"indexState")}function qw(n){Pt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;by(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ps(e.readTime,e.documentKey,t)}const Qb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class gs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new gs(e,gs.DEFAULT_COLLECTION_PERCENTILE,gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Bd(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const y=r.Z({range:l},(S,R,L)=>(h++,L.delete()));a.push(y.next(()=>{Pt(1===h)}));const w=[];for(const S of t.mutations){const R=pf(e,S.key.path,t.batchId);a.push(i.delete(R)),w.push(S.key)}return fe.waitFor(a).next(()=>w)}function Jy(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ft();e=n.noDocument}return JSON.stringify(e).length}gs.DEFAULT_COLLECTION_PERCENTILE=10,gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gs.DEFAULT=new gs(41943040,gs.DEFAULT_COLLECTION_PERCENTILE,gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gs.DISABLED=new gs(-1,0,0);class ag{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Pt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new ag(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return jd(e).Z({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=_f(e),l=jd(e);return l.add({}).next(h=>{Pt("number"==typeof h);const y=new Zy(h,t,r,i),w=function(L,G,J){const Ie=J.baseMutations.map(It=>Qp(L.re,It)),Fe=J.mutations.map(It=>Qp(L.re,It));return{userId:G,batchId:J.batchId,localWriteTimeMs:J.localWriteTime.toMillis(),baseMutations:Ie,mutations:Fe}}(this.It,this.userId,y),S=[];let R=new Hn((L,G)=>Bt(L.canonicalString(),G.canonicalString()));for(const L of i){const G=pf(this.userId,L.key.path,h);R=R.add(L.key.path.popLast()),S.push(l.put(w)),S.push(a.put(G,ES))}return R.forEach(L=>{S.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.In[h]=y.keys()}),fe.waitFor(S).next(()=>y)})}lookupMutationBatch(e,t){return jd(e).get(t).next(r=>r?(Pt(r.userId===this.userId),Fd(this.It,r)):null)}Tn(e,t){return this.In[t]?fe.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return jd(e).Z({index:"userMutationsIndex",range:i},(l,h,y)=>{h.userId===this.userId&&(Pt(h.batchId>=r),a=Fd(this.It,h)),y.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return jd(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return jd(e).W("userMutationsIndex",t).next(r=>r.map(i=>Fd(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Wy(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return _f(e).Z({range:i},(l,h,y)=>{const[w,S,R]=l,L=pu(S);if(w===this.userId&&t.path.isEqual(L))return jd(e).get(R).next(G=>{if(!G)throw ft();Pt(G.userId===this.userId),a.push(Fd(this.It,G))});y.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Hn(Bt);const i=[];return t.forEach(a=>{const l=Wy(this.userId,a.path),h=IDBKeyRange.lowerBound(l),y=_f(e).Z({range:h},(w,S,R)=>{const[L,G,J]=w,Ie=pu(G);L===this.userId&&a.path.isEqual(Ie)?r=r.add(J):R.done()});i.push(y)}),fe.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Wy(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new Hn(Bt);return _f(e).Z({range:l},(y,w,S)=>{const[R,L,G]=y,J=pu(L);R===this.userId&&r.isPrefixOf(J)?J.length===i&&(h=h.add(G)):S.done()}).next(()=>this.En(e,h))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(jd(e).get(a).next(l=>{if(null===l)throw ft();Pt(l.userId===this.userId),r.push(Fd(this.It,l))}))}),fe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Bd(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),fe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return fe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return _f(e).Z({range:r},(a,l,h)=>{if(a[0]===this.userId){const y=pu(a[1]);i.push(y)}else h.done()}).next(()=>{Pt(0===i.length)})})}containsKey(e,t){return Xy(e,this.userId,t)}Rn(e){return kS(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Xy(n,e,t){const r=Wy(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return _f(n).Z({range:a,X:!0},(h,y,w)=>{const[S,R,L]=h;S===e&&R===i&&(l=!0),w.done()}).next(()=>l)}function jd(n){return Yr(n,"mutations")}function _f(n){return Yr(n,"documentMutations")}function kS(n){return Yr(n,"mutationQueues")}class $d{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new $d(0)}static vn(){return new $d(-1)}}class NS{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new $d(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Ot.fromTimestamp(new gr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>vf(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Pt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return vf(e).Z((l,h)=>{const y=gf(h);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,a.push(this.removeTargetData(e,y)))}).next(()=>fe.waitFor(a)).next(()=>i)}forEachTarget(e,t){return vf(e).Z((r,i)=>{const a=gf(i);t(a)})}Vn(e){return Kw(e).get("targetGlobalKey").next(t=>(Pt(null!==t),t))}Sn(e,t){return Kw(e).put("targetGlobalKey",t)}Dn(e,t){return vf(e).put(jw(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Sc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return vf(e).Z({range:i,index:"queryTargetsIndex"},(l,h,y)=>{const w=gf(h);tf(t,w.target)&&(a=w,y.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Sl(e);return t.forEach(l=>{const h=Us(l.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),fe.waitFor(i)}removeMatchingKeys(e,t,r){const i=Sl(e);return fe.forEach(t,a=>{const l=Us(a.path);return fe.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Sl(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Sl(e);let a=Yt();return i.Z({range:r,X:!0},(l,h,y)=>{const w=pu(l[1]),S=new et(w);a=a.add(S)}).next(()=>a)}containsKey(e,t){const r=Us(t.path),i=IDBKeyRange.bound([r],[va(r)],!1,!0);let a=0;return Sl(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,h],y,w)=>{0!==l&&(a++,w.done())}).next(()=>a>0)}se(e,t){return vf(e).get(t).next(r=>r?gf(r):null)}}function vf(n){return Yr(n,"targets")}function Kw(n){return Yr(n,"targetGlobal")}function Sl(n){return Yr(n,"targetDocuments")}function Jb([n,e],[t,r]){const i=Bt(n,t);return 0===i?Bt(e,r):i}class Xb{constructor(e){this.xn=e,this.buffer=new Hn(Jb),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Jb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class eC{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;He("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Se.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){wl(r)?He("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield vl(r)}yield t.Fn(3e5)}))}}class PS{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return fe.resolve(Os.at);const r=new Xb(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(Qb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qb):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,a,l,h,y,w;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(He("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),i=this.params.maximumSequenceNumbersToCollect):i=R,l=Date.now(),this.nthSequenceNumber(e,i))).next(R=>(r=R,h=Date.now(),this.removeTargets(e,r,t))).next(R=>(a=R,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(w=Date.now(),Ey()<=fa.in.DEBUG&&He("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-S}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${a} targets in `+(y-h)+`ms\n\tRemoved ${R} documents in `+(w-y)+`ms\nTotal Duration: ${w-S}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:R})))}}class OS{constructor(e,t){this.db=e,this.garbageCollector=new PS(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return ug(e,r)}removeReference(e,t,r){return ug(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ug(e,t)}Gn(e,t){return function(r,i){let a=!1;return kS(r).tt(l=>Xy(r,l,i).next(h=>(h&&(a=!0),fe.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(l,h)=>{if(h<=t){const y=this.Gn(e,l).next(w=>{if(!w)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Ot.min()),Sl(e).delete([0,Us(l.path)])))});i.push(y)}}).next(()=>fe.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ug(e,t)}Kn(e,t){const r=Sl(e);let i,a=Os.at;return r.Z({index:"documentTargetsIndex"},([l,h],{path:y,sequenceNumber:w})=>{0===l?(a!==Os.at&&t(new et(pu(i)),a),a=w,i=y):a=Os.at}).next(()=>{a!==Os.at&&t(new et(pu(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ug(n,e){return Sl(n).put((r=n.currentSequenceNumber,{targetId:0,path:Us(e.path),sequenceNumber:r}));var r}class tC{constructor(){this.changes=new Ac(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?fe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class nC{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Hd(e).put(r)}removeEntry(e,t,r){return Hd(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],rg(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Yn.newInvalidDocument(t);return Hd(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(lg(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:Yn.newInvalidDocument(t)};return Hd(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(lg(t))},(i,a)=>{r={document:this.jn(t,a),size:Jy(a)}}).next(()=>r)}getEntries(e,t){let r=Fs();return this.zn(e,t,(i,a)=>{const l=this.jn(i,a);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=Fs(),i=new Mr(et.comparator);return this.zn(e,t,(a,l)=>{const h=this.jn(a,l);r=r.insert(a,h),i=i.insert(a,Jy(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return fe.resolve();let i=new Hn(Qw);t.forEach(y=>i=i.add(y));const a=IDBKeyRange.bound(lg(i.first()),lg(i.last())),l=i.getIterator();let h=l.getNext();return Hd(e).Z({index:"documentKeyIndex",range:a},(y,w,S)=>{const R=et.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;h&&Qw(h,R)<0;)r(h,null),h=l.getNext();h&&h.isEqual(R)&&(r(h,w),h=l.hasNext()?l.getNext():null),h?S.j(lg(h)):S.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),rg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Hd(e).W(IDBKeyRange.bound(i,a,!0)).next(l=>{let h=Fs();for(const y of l){const w=this.jn(et.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);h=h.insert(w.key,w)}return h})}getAllFromCollectionGroup(e,t,r,i){let a=Fs();const l=LS(t,r),h=LS(t,Ps.max());return Hd(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(y,w,S)=>{const R=this.jn(et.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(R.key,R),a.size===i&&S.done()}).next(()=>a)}newChangeBuffer(e){return new rC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Yw(e).get("remoteDocumentGlobalKey").next(t=>(Pt(!!t),t))}Qn(e,t){return Yw(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function AS(n,e){let t;if(e.document)t=Db(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=et.fromSegments(e.noDocument.path),i=Rc(e.noDocument.readTime);t=Yn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ft();{const r=et.fromSegments(e.unknownDocument.path),i=Rc(e.unknownDocument.version);t=Yn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new gr(r[0],r[1]);return Ot.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Ot.min()))return r}return Yn.newInvalidDocument(e)}}function Zw(n){return new nC(n)}class rC extends tC{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Ac(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Hn((a,l)=>Bt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const h=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,h.readTime)),l.isValidDocument()){const y=Gb(this.Yn.It,l);i=i.add(a.path.popLast()),r+=Jy(y)-h.size,t.push(this.Yn.addEntry(e,a,y))}else if(r-=h.size,this.trackRemovals){const y=Gb(this.Yn.It,l.convertToNoDocument(Ot.min()));t.push(this.Yn.addEntry(e,a,y))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),fe.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,l)=>{this.Xn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function Yw(n){return Yr(n,"remoteDocumentGlobal")}function Hd(n){return Yr(n,"remoteDocumentsV14")}function lg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function LS(n,e){const t=e.documentKey.path.toArray();return[n,rg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Qw(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Bt(t[a],r[a]),i)return i;return i=Bt(t.length,r.length),i||(i=Bt(t[t.length-2],r[r.length-2]),i||Bt(t[t.length-1],r[r.length-1]))}class BR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class FS{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&zp(r.mutation,i,no.empty(),gr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Yt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Yt()){const i=Fo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=Pd();return a.forEach((h,y)=>{l=l.insert(h,y.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Fo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Yt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,r,i){let a=Fs();const l=qp(),h=qp();return t.forEach((y,w)=>{const S=r.get(w.key);i.has(w.key)&&(void 0===S||S.mutation instanceof bl)?a=a.insert(w.key,w):void 0!==S&&(l.set(w.key,S.mutation.getFieldMask()),zp(S.mutation,w,S.mutation.getFieldMask(),gr.now()))}),this.recalculateAndSaveOverlays(e,a).next(y=>(y.forEach((w,S)=>l.set(w,S)),t.forEach((w,S)=>{var R;return h.set(w,new BR(S,null!==(R=l.get(w))&&void 0!==R?R:null))}),h))}recalculateAndSaveOverlays(e,t){const r=qp();let i=new Mr((l,h)=>l-h),a=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(y=>{const w=t.get(y);if(null===w)return;let S=r.get(y)||no.empty();S=h.applyToLocalView(w,S),r.set(y,S);const R=(i.get(h.batchId)||Yt()).add(y);i=i.insert(h.batchId,R)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const y=h.getNext(),w=y.key,S=y.value,R=yb();S.forEach(L=>{if(!a.has(L)){const G=lb(t.get(L),r.get(L));null!==G&&R.set(L,G),a=a.add(L)}}),l.push(this.documentOverlayCache.saveOverlays(e,w,R))}return fe.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return et.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):tb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):fe.resolve(Fo());let h=-1,y=a;return l.next(w=>fe.forEach(w,(S,R)=>(h<R.largestBatchId&&(h=R.largestBatchId),a.get(S)?fe.resolve():this.getBaseDocument(e,S,R).next(L=>{y=y.insert(S,L)}))).next(()=>this.populateOverlays(e,w,a)).next(()=>this.computeViews(e,y,w,Yt())).next(S=>({batchId:h,changes:Mw(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new et(t)).next(r=>{let i=Pd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Pd();return this.indexManager.getCollectionParents(e,i).next(l=>fe.forEach(l,h=>{const y=(w=t,S=h.child(i),new hu(S,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,S;return this.getDocumentsMatchingCollectionQuery(e,y,r).next(w=>{w.forEach((S,R)=>{a=a.insert(S,R)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((h,y)=>{const w=y.getKey();null===i.get(w)&&(i=i.insert(w,Yn.newInvalidDocument(w)))});let l=Pd();return i.forEach((h,y)=>{const w=a.get(h);void 0!==w&&zp(w.mutation,y,no.empty(),gr.now()),bw(t,y)&&(l=l.insert(h,y))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):fe.resolve(Yn.newInvalidDocument(t))}}class jR{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return fe.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:vi(r.createTime)}),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:$w(r.bundledQuery),readTime:vi(r.readTime)}),fe.resolve();var r}}class $R{constructor(){this.overlays=new Mr(et.comparator),this.es=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Fo();return fe.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ue(e,t,a)}),fe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),fe.resolve()}getOverlaysForCollection(e,t,r){const i=Fo(),a=t.length+1,l=new et(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const y=h.getNext().value,w=y.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&y.largestBatchId>r&&i.set(y.getKey(),y)}return fe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Mr((w,S)=>w-S);const l=this.overlays.getIterator();for(;l.hasNext();){const w=l.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let S=a.get(w.largestBatchId);null===S&&(S=Fo(),a=a.insert(w.largestBatchId,S)),S.set(w.getKey(),w)}}const h=Fo(),y=a.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((w,S)=>h.set(w,S)),!(h.size()>=i)););return fe.resolve(h)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new ng(t,r));let a=this.es.get(t);void 0===a&&(a=Yt(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class iC{constructor(){this.ns=new Hn(ki.ss),this.rs=new Hn(ki.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new ki(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new ki(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new et(new Wt([])),r=new ki(t,e),i=new ki(t,e+1),a=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),a.push(l.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new et(new Wt([])),r=new ki(t,e),i=new ki(t,e+1);let a=Yt();return this.rs.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new ki(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ki{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return et.comparator(e.key,t.key)||Bt(e._s,t._s)}static os(e,t){return Bt(e._s,t._s)||et.comparator(e.key,t.key)}}class HR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Hn(ki.ss)}checkEmpty(e){return fe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const l=new Zy(a,t,r,i);this.mutationQueue.push(l);for(const h of i)this.gs=this.gs.add(new ki(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return fe.resolve(l)}lookupMutationBatch(e,t){return fe.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return fe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ki(t,0),i=new ki(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],l=>{const h=this.ys(l._s);a.push(h)}),fe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Hn(Bt);return t.forEach(i=>{const a=new ki(i,0),l=new ki(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,l],h=>{r=r.add(h._s)})}),fe.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;et.isDocumentKey(a)||(a=a.child(""));const l=new ki(new et(a),0);let h=new Hn(Bt);return this.gs.forEachWhile(y=>{const w=y.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(h=h.add(y._s)),!0)},l),fe.resolve(this.Is(h))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Pt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return fe.forEach(t.mutations,i=>{const a=new ki(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new ki(t,0),i=this.gs.firstAfterOrEqual(r);return fe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return fe.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class GR{constructor(e){this.Es=e,this.docs=new Mr(et.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return fe.resolve(r?r.document.mutableCopy():Yn.newInvalidDocument(t))}getEntries(e,t){let r=Fs();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Yn.newInvalidDocument(i))}),fe.resolve(r)}getAllFromCollection(e,t,r){let i=Fs();const a=new et(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:h,value:{document:y}}=l.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||by(BI(y),r)<=0||(i=i.insert(y.key,y.mutableCopy()))}return fe.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ft()}As(e,t){return fe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new e_(this)}getSize(e){return fe.resolve(this.size)}}class e_ extends tC{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),fe.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class WR{constructor(e){this.persistence=e,this.Rs=new Ac(t=>Sc(t),tf),this.lastRemoteSnapshotVersion=Ot.min(),this.highestTargetId=0,this.bs=0,this.Ps=new iC,this.targetCount=0,this.vs=$d.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),fe.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new $d(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.Dn(t),fe.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Rs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),fe.waitFor(a).next(()=>i)}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return fe.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),fe.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),fe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return fe.resolve(r)}containsKey(e,t){return fe.resolve(this.Ps.containsKey(t))}}class Jw{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Os(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new WR(this),this.indexManager=new MS,this.remoteDocumentCache=new GR(r=>this.referenceDelegate.xs(r)),this.It=new Hb(t),this.Ns=new jR(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $R,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new HR(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){He("MemoryPersistence","Starting transaction:",e);const i=new t_(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ms(e,t){return fe.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class t_ extends jI{constructor(e){super(),this.currentSequenceNumber=e}}class cg{constructor(e){this.persistence=e,this.Fs=new iC,this.$s=null}static Bs(e){return new cg(e)}get Ls(){if(this.$s)return this.$s;throw ft()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),fe.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.Ls,r=>{const i=et.fromPath(r);return this.Us(e,i).next(a=>{a||t.removeEntry(i,Ot.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return fe.or([()=>fe.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class sC{constructor(e){this.It=e}$(e,t,r,i){const a=new Ad("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Fb,{unique:!0}),h.createObjectStore("documentMutations"),US(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=fe.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),US(e)),l=l.next(()=>function(h){const y=h.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ot.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,y){return y.store("mutations").W().next(w=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Fb,{unique:!0});const S=y.store("mutations"),R=w.map(L=>S.put(L));return fe.waitFor(R)})}(e,a))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.qs(a))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(a))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(a))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const y=h.createObjectStore("documentOverlays",{keyPath:SS});y.createIndex("collectionPathOverlayIndex",Ub,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",Vb,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const y=h.createObjectStore("remoteDocumentsV14",{keyPath:Vw});y.createIndex("documentKeyIndex",gu),y.createIndex("collectionGroupIndex",IS)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,a))),r<15&&i>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:DS}).createIndex("sequenceNumberIndex",zy,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:qy}).createIndex("documentKeyIndex",TS,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=Jy(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>fe.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(h=>fe.forEach(h,y=>{Pt(y.userId===a.userId);const w=Fd(this.It,y);return Bd(e,a.userId,w).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((l,h)=>{const y=new Wt(l),w=[0,Us(y)];a.push(t.get(w).next(S=>S?fe.resolve():t.put({targetId:0,path:Us(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>fe.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:CS});const r=t.store("collectionParents"),i=new Ww,a=l=>{if(i.add(l)){const h=l.lastSegment(),y=l.popLast();return r.put({collectionId:h,parent:Us(y)})}};return t.store("remoteDocuments").Z({X:!0},(l,h)=>{const y=new Wt(l);return a(y.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,h,y],w)=>{const S=pu(h);return a(S.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=gf(i),l=jw(this.It,a);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,l)=>{const h=t.store("remoteDocumentsV14"),y=(w=l,w.document?new et(Wt.fromString(w.document.name).popFirst(5)):w.noDocument?et.fromSegments(w.noDocument.path):w.unknownDocument?et.fromSegments(w.unknownDocument.path):ft()).path.toArray();var w;const S={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(S))}).next(()=>fe.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=Zw(this.It),a=new Jw(cg.Bs,this.It.re);return r.W().next(l=>{const h=new Map;return l.forEach(y=>{var w;let S=null!==(w=h.get(y.userId))&&void 0!==w?w:Yt();Fd(this.It,y).keys().forEach(R=>S=S.add(R)),h.set(y.userId,S)}),fe.forEach(h,(y,w)=>{const S=new ii(w),R=Dl.oe(this.It,S),L=a.getIndexManager(S),G=ag.oe(S,this.It,L,a.referenceDelegate);return new FS(i,G,R,L).recalculateAndSaveOverlaysForDocumentKeys(new eg(t,Os.at),y).next()})})}}function US(n){n.createObjectStore("targetDocuments",{keyPath:Xp}).createIndex("documentTargetsIndex",bS,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Bw,{unique:!0}),n.createObjectStore("targetGlobal")}const dg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class n_{constructor(e,t,r,i,a,l,h,y,w,S,R=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=l,this.document=h,this.Js=w,this.Ys=S,this.Xs=R,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=L=>Promise.resolve(),!n_.C())throw new Ue(we.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new OS(this,i),this.ii=t+"main",this.It=new Hb(y),this.ri=new Oo(this.ii,this.Xs,new sC(this.It)),this.Cs=new NS(this.referenceDelegate,this.It),this.remoteDocumentCache=Zw(this.It),this.Ns=new zb,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===S&&Rr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ue(we.FAILED_PRECONDITION,dg);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Os(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,Se.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Se.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Se.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>fg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(wl(e))return He("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return He("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return hg(e).get("owner").next(t=>fe.resolve(this.mi(t)))}gi(e){return fg(e).delete(this.clientId)}yi(){var e=this;return(0,Se.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Yr(r,"clientMetadata");return i.W().next(a=>{const l=e.Ii(a,18e5),h=a.filter(y=>-1===l.indexOf(y));return fe.forEach(h,y=>i.delete(y.clientId)).next(()=>h)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?fe.resolve(!0):hg(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ue(we.FAILED_PRECONDITION,dg);return!1}}return!(!this.networkEnabled||!this.inForeground)||fg(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&He("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Se.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new eg(t,Os.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>fg(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return ag.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Yb(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Dl.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){He("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.Xs)?UR:14===l?$b:13===l?jb:12===l?Bb:11===l?Ky:void ft();var l;let h;return this.ri.runTransaction(e,i,a,y=>(h=new eg(y,this.Ss?this.Ss.next():Os.at),"readwrite-primary"===t?this.fi(h).next(w=>!!w||this.di(h)).next(w=>{if(!w)throw Rr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ue(we.FAILED_PRECONDITION,Up);return r(h)}).next(w=>this.wi(h).next(()=>w)):this.Vi(h).next(()=>r(h)))).then(y=>(h.raiseOnCommittedEvent(),y))}Vi(e){return hg(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ue(we.FAILED_PRECONDITION,dg)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return hg(e).put("owner",t)}static C(){return Oo.C()}_i(e){const t=hg(e);return t.get("owner").next(r=>this.mi(r)?(He("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):fe.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Rr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,B.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return He("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Rr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Rr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function hg(n){return Yr(n,"owner")}function fg(n){return Yr(n,"clientMetadata")}function oC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class aC{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Yt(),i=Yt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new aC(e,t.fromCache,r,i)}}class uC{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Oi(e,t,i,r)).next(a=>a||this.Mi(e,t))}ki(e,t){if(_w(t))return fe.resolve(null);let r=Ls(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Ew(t,null,"F"),r=Ls(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=Yt(...a);return this.Ni.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(y=>{const w=this.Fi(t,h);return this.$i(t,w,l,y.readTime)?this.ki(e,Ew(t,null,"F")):this.Bi(e,w,t,y)}))})))}Oi(e,t,r,i){return _w(t)||i.isEqual(Ot.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(a=>{const l=this.Fi(t,a);return this.$i(t,l,r,i)?this.Mi(e,t):(Ey()<=fa.in.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Iw(t)),this.Bi(e,l,t,lw(i,-1)))})}Fi(e,t){let r=new Hn(uf(e));return t.forEach((i,a)=>{bw(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Mi(e,t){return Ey()<=fa.in.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",Iw(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ps.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class VS{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new Mr(Bt),this.qi=new Ac(a=>Sc(a),tf),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FS(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function pg(n,e,t,r){return new VS(n,e,t,r)}function lC(n,e){return cC.apply(this,arguments)}function cC(){return cC=(0,Se.Z)(function*(n,e){const t=ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let y=Yt();for(const w of i){l.push(w.batchId);for(const S of w.mutations)y=y.add(S.key)}for(const w of a){h.push(w.batchId);for(const S of w.mutations)y=y.add(S.key)}return t.localDocuments.getDocuments(r,y).next(w=>({ji:w,removedBatchIds:l,addedBatchIds:h}))})})}),cC.apply(this,arguments)}function zR(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,h,y,w){const S=y.batch,R=S.keys();let L=fe.resolve();return R.forEach(G=>{L=L.next(()=>w.getEntry(h,G)).next(J=>{const Ie=y.docVersions.get(G);Pt(null!==Ie),J.version.compareTo(Ie)<0&&(S.applyToRemoteDocument(J,y),J.isValidDocument()&&(J.setReadTime(y.commitVersion),w.addEntry(J)))})}),L.next(()=>l.mutationQueue.removeMutationBatch(h,S))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=Yt();for(let y=0;y<l.mutationResults.length;++y)l.mutationResults[y].transformResults.length>0&&(h=h.add(l.batch.mutations[y].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function BS(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function jS(n,e){const t=ze(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const h=[];e.targetChanges.forEach((S,R)=>{const L=i.get(R);if(!L)return;h.push(t.Cs.removeMatchingKeys(a,S.removedDocuments,R).next(()=>t.Cs.addMatchingKeys(a,S.addedDocuments,R)));let G=L.withSequenceNumber(a.currentSequenceNumber);var J,Ie,Fe;e.targetMismatches.has(R)?G=G.withResumeToken(oi.EMPTY_BYTE_STRING,Ot.min()).withLastLimboFreeSnapshotVersion(Ot.min()):S.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(S.resumeToken,r)),i=i.insert(R,G),Ie=G,Fe=S,(0===(J=L).resumeToken.approximateByteSize()||Ie.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=3e8||Fe.addedDocuments.size+Fe.modifiedDocuments.size+Fe.removedDocuments.size>0)&&h.push(t.Cs.updateTargetData(a,G))});let y=Fs(),w=Yt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,S))}),h.push(dC(a,l,e.documentUpdates).next(S=>{y=S.Wi,w=S.zi})),!r.isEqual(Ot.min())){const S=t.Cs.getLastRemoteSnapshotVersion(a).next(R=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(S)}return fe.waitFor(h).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,y,w)).next(()=>y)}).then(a=>(t.Ui=i,a))}function dC(n,e,t){let r=Yt(),i=Yt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=Fs();return t.forEach((h,y)=>{const w=a.get(h);y.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(h)),y.isNoDocument()&&y.version.isEqual(Ot.min())?(e.removeEntry(h,y.readTime),l=l.insert(h,y)):!w.isValidDocument()||y.version.compareTo(w.version)>0||0===y.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(y),l=l.insert(h,y)):He("LocalStore","Ignoring outdated watch update for ",h,". Current version:",w.version," Watch version:",y.version)}),{Wi:l,zi:i}})}function $S(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function gg(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,fe.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new xc(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function wf(n,e,t){return r_.apply(this,arguments)}function r_(){return r_=(0,Se.Z)(function*(n,e,t){const r=ze(n),i=r.Ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!wl(l))throw l;He("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),r_.apply(this,arguments)}function mg(n,e,t){const r=ze(n);let i=Ot.min(),a=Yt();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,y,w){const S=ze(h),R=S.qi.get(w);return void 0!==R?fe.resolve(S.Ui.get(R)):S.Cs.getTargetData(y,w)}(r,l,Ls(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,h.targetId).next(y=>{a=y})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:Ot.min(),t?a:Yt())).next(h=>(hC(r,Cw(e),h),{documents:h,Hi:a})))}function HS(n,e){const t=ze(n),r=ze(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.se(a,e).next(l=>l?l.target:null))}function Uo(n,e){const t=ze(n),r=t.Ki.get(e)||Ot.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,lw(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(hC(t,e,i),i))}function hC(n,e,t){let r=n.Ki.get(e)||Ot.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function e0(){return e0=(0,Se.Z)(function*(n,e,t,r){const i=ze(n);let a=Yt(),l=Fs();for(const w of t){const S=e.Ji(w.metadata.name);w.document&&(a=a.add(S));const R=e.Yi(w);R.setReadTime(e.Xi(w.metadata.readTime)),l=l.insert(S,R)}const h=i.Gi.newChangeBuffer({trackRemovals:!0}),y=yield gg(i,(w=r,Ls(sf(Wt.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>dC(w,h,l).next(S=>(h.apply(w),S)).next(S=>i.Cs.removeMatchingKeysForTargetId(w,y.targetId).next(()=>i.Cs.addMatchingKeys(w,a,y.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,S.Wi,S.zi)).next(()=>S.Wi)))}),e0.apply(this,arguments)}function Vo(n,e){return t0.apply(this,arguments)}function t0(){return t0=(0,Se.Z)(function*(n,e,t=Yt()){const r=yield gg(n,Ls($w(e.bundledQuery))),i=ze(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=vi(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(a,e);const h=r.withResumeToken(oi.EMPTY_BYTE_STRING,l);return i.Ui=i.Ui.insert(h.targetId,h),i.Cs.updateTargetData(a,h).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),t0.apply(this,arguments)}function i_(n,e){return`firestore_clients_${n}_${e}`}function fC(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function n0(n,e){return`firestore_targets_${n}_${e}`}class Ef{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Ue(i.error.code,i.error.message))),l?new Ef(e,t,i.state,a):(Rr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class If{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ue(r.error.code,r.error.message))),a?new If(e,r.state,i):(Rr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Kp();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=hw(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new yg(e,a):(Rr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class r0{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new r0(t.clientId,t.onlineState):(Rr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class s_{constructor(){this.activeTargetIds=Kp()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class o_{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Mr(Bt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=i_(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new s_),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Se.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(i_(e.persistenceKey,i));if(a){const l=yg.Zi(i,a);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(n0(this.persistenceKey,e));if(r){const i=If.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(n0(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return He("SharedClientState","READ",e,t),t}setItem(e,t){He("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){He("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(He("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Rr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Se.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let l=Os.at;if(null!=a)try{const h=JSON.parse(a);Pt("number"==typeof h),l=h}catch(h){Rr("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==Os.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Mr(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new Ef(this.currentUser,e,t,r),a=fC(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=fC(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=n0(this.persistenceKey,e),a=new If(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return yg.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return Ef.Zi(new ii(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return If.Zi(i,t)}yr(e){return r0.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Se.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);He("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),l=[],h=[];return a.forEach(y=>{i.has(y)||l.push(y)}),i.forEach(y=>{a.has(y)||h.push(y)}),this.syncEngine.Br(l,h).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Kp();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class pC{constructor(){this.Lr=new s_,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new s_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class gC{qr(e){}shutdown(){}}class mC{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){He("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){He("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const s0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kc{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class yC extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,a){const l=this.ho(e,t);He("RestConnection","Sending: ",l,r);const h={};return this.lo(h,i,a),this.fo(e,l,h,r).then(y=>(He("RestConnection","Received: ",y),y),y=>{throw qh("RestConnection",`${e} failed with error: `,y,"url: ",l,"request:",r),y})}_o(e,t,r,i,a,l){return this.ao(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Dd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.oo}/v1/${t}:${s0[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,l)=>{const h=new iw;h.listenOnce(kI.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case wy.NO_ERROR:const w=h.getResponseJson();He("Connection","XHR received:",JSON.stringify(w)),a(w);break;case wy.TIMEOUT:He("Connection",'RPC "'+e+'" timed out'),l(new Ue(we.DEADLINE_EXCEEDED,"Request time out"));break;case wy.HTTP_ERROR:const S=h.getStatus();if(He("Connection",'RPC "'+e+'" failed with status:',S,"response text:",h.getResponseText()),S>0){const R=h.getResponseJson().error;if(R&&R.status&&R.message){const L=function(G){const J=G.toLowerCase().replace(/_/g,"-");return Object.values(we).indexOf(J)>=0?J:we.UNKNOWN}(R.status);l(new Ue(L,R.message))}else l(new Ue(we.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new Ue(we.UNAVAILABLE,"Connection failed."));break;default:ft()}}finally{He("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(i);h.send(t,"POST",y,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=RI(),l=MI(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new qT({})),this.lo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const y=i.join("");He("Connection","Creating WebChannel: "+y,h);const w=a.createWebChannel(y,h);let S=!1,R=!1;const L=new kc({Hr:J=>{R?He("Connection","Not sending because WebChannel is closed:",J):(S||(He("Connection","Opening WebChannel transport."),w.open(),S=!0),He("Connection","WebChannel sending:",J),w.send(J))},Jr:()=>w.close()}),G=(J,Ie,Fe)=>{J.listen(Ie,It=>{try{Fe(It)}catch(Dt){setTimeout(()=>{throw Dt},0)}})};return G(w,zh.EventType.OPEN,()=>{R||He("Connection","WebChannel transport opened.")}),G(w,zh.EventType.CLOSE,()=>{R||(R=!0,He("Connection","WebChannel transport closed"),L.io())}),G(w,zh.EventType.ERROR,J=>{R||(R=!0,qh("Connection","WebChannel transport errored:",J),L.io(new Ue(we.UNAVAILABLE,"The operation could not be completed")))}),G(w,zh.EventType.MESSAGE,J=>{var Ie;if(!R){const Fe=J.data[0];Pt(!!Fe);const It=Fe,Dt=It.error||(null===(Ie=It[0])||void 0===Ie?void 0:Ie.error);if(Dt){He("Connection","WebChannel received error:",Dt);const Ut=Dt.status;let jt=function(hn){const Ni=jr[hn];if(void 0!==Ni)return Rw(Ni)}(Ut),qt=Dt.message;void 0===jt&&(jt=we.INTERNAL,qt="Unknown error status: "+Ut+" with message "+Dt.message),R=!0,L.io(new Ue(jt,qt)),w.close()}else He("Connection","WebChannel received:",Fe),L.ro(Fe)}}),G(l,zT.STAT_EVENT,J=>{J.stat===NI.PROXY?He("Connection","Detected buffering proxy"):J.stat===NI.NOPROXY&&He("Connection","Detected no buffering proxy")}),setTimeout(()=>{L.so()},0),L}}function a_(){return typeof window<"u"?window:null}function Bo(){return typeof document<"u"?document:null}function _g(n){return new Eb(n,!0)}class _C{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&He("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class vC{constructor(e,t,r,i,a,l,h,y){this.Hs=e,this.vo=r,this.Vo=i,this.So=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=y,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new _C(e,t)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,Se.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,Se.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,Se.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===we.RESOURCE_EXHAUSTED?(Rr(t.toString()),Rr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===we.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new Ue(we.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Mo(){var e=this;this.state=5,this.No.Ro((0,Se.Z)(function*(){e.state=0,e.start()}))}jo(e){return He("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Hs.enqueueAndForget(()=>this.Do===e?t():(He("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class GS extends vC{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.It=a}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function Tb(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:ft(),i=e.targetChange.targetIds||[],a=function(y,w){return y.gt?(Pt(void 0===w||"string"==typeof w),oi.fromBase64String(w||"")):(Pt(void 0===w||w instanceof Uint8Array),oi.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(y){const w=void 0===y.code?we.UNKNOWN:Rw(y.code);return new Ue(w,y.message||"")}(l);t=new _b(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Ea(n,r.document.name),a=vi(r.document.updateTime),l=new qi({mapValue:{fields:r.document.fields}}),h=Yn.newFoundDocument(i,a,l);t=new Yp(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=Ea(n,r.document),a=r.readTime?vi(r.readTime):Ot.min(),l=Yn.newNoDocument(i,a);t=new Yp([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Ea(n,r.document);t=new Yp([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ft();{const r=e.filter,a=new gb(r.count||0);t=new By(r.targetId,a)}}var y;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Ot.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ot.min():a.readTime?vi(a.readTime):Ot.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=Gy(this.It),t.addTarget=function(i,a){let l;const h=a.target;return l=ky(h)?{documents:Sb(i,h)}:{query:Uw(i,h)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=Ib(i,a.resumeToken):a.snapshotVersion.compareTo(Ot.min())>0&&(l.readTime=ff(i,a.snapshotVersion.toTimestamp())),l}(this.It,e);const r=function wS(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ft()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=Gy(this.It),t.removeTarget=e,this.Lo(t)}}class WS extends vC{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.It=a,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function vS(n,e){return n&&n.length>0?(Pt(void 0!==e),n.map(t=>function(r,i){let a=vi(r.updateTime?r.updateTime:i);return a.isEqual(Ot.min())&&(a=vi(i)),new ub(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=vi(e.commitTime);return this.listener.tu(r,t)}return Pt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Gy(this.It),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Qp(this.It,r))};this.Lo(t)}}class zS extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.It=i,this.su=!1}iu(){if(this.su)throw new Ue(we.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.So.ao(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ue(we.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.So._o(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ue(we.UNKNOWN,a.toString())})}terminate(){this.su=!0}}class IC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Rr(t),this.uu=!1):He("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class qS{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.qr(h=>{r.enqueueAndForget((0,Se.Z)(function*(){var y;mu(l)&&(He("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,Se.Z)(function*(w){const S=ze(w);S.wu.add(4),yield Nc(S),S.yu.set("Unknown"),S.wu.delete(4),yield bf(S)}),function(w){return y.apply(this,arguments)})(l))}))}),this.yu=new IC(r,i)}}function bf(n){return bC.apply(this,arguments)}function bC(){return bC=(0,Se.Z)(function*(n){if(mu(n))for(const e of n.mu)yield e(!0)}),bC.apply(this,arguments)}function Nc(n){return u_.apply(this,arguments)}function u_(){return u_=(0,Se.Z)(function*(n){for(const e of n.mu)yield e(!1)}),u_.apply(this,arguments)}function vg(n,e){const t=ze(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),Tf(t)?Df(t):xl(t).Oo()&&l_(t,e))}function Cf(n,e){const t=ze(n),r=xl(t);t._u.delete(e),r.Oo()&&o0(t,e),0===t._u.size&&(r.Oo()?r.$o():mu(t)&&t.yu.set("Unknown"))}function l_(n,e){n.pu.Mt(e.targetId),xl(n).Ho(e)}function o0(n,e){n.pu.Mt(e),xl(n).Jo(e)}function Df(n){n.pu=new gS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n._u.get(e)||null}),xl(n).start(),n.yu.cu()}function Tf(n){return mu(n)&&!xl(n).ko()&&n._u.size>0}function mu(n){return 0===ze(n).wu.size}function CC(n){n.pu=void 0}function DC(n){return c_.apply(this,arguments)}function c_(){return c_=(0,Se.Z)(function*(n){n._u.forEach((e,t)=>{l_(n,e)})}),c_.apply(this,arguments)}function KS(n,e){return a0.apply(this,arguments)}function a0(){return a0=(0,Se.Z)(function*(n,e){CC(n),Tf(n)?(n.yu.lu(e),Df(n)):n.yu.set("Unknown")}),a0.apply(this,arguments)}function qR(n,e,t){return TC.apply(this,arguments)}function TC(){return TC=(0,Se.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof _b&&2===e.state&&e.cause)try{yield(r=(0,Se.Z)(function*(i,a){const l=a.cause;for(const h of a.targetIds)i._u.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i._u.delete(h),i.pu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){He("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield wg(n,r)}else if(e instanceof Yp?n.pu.Gt(e):e instanceof By?n.pu.Yt(e):n.pu.Wt(e),!t.isEqual(Ot.min()))try{const r=yield BS(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.pu.te(a);return l.targetChanges.forEach((h,y)=>{if(h.resumeToken.approximateByteSize()>0){const w=i._u.get(y);w&&i._u.set(y,w.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach(h=>{const y=i._u.get(h);if(!y)return;i._u.set(h,y.withResumeToken(oi.EMPTY_BYTE_STRING,y.snapshotVersion)),o0(i,h);const w=new xc(y.target,h,1,y.sequenceNumber);l_(i,w)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){He("RemoteStore","Failed to raise snapshot:",r),yield wg(n,r)}var r}),TC.apply(this,arguments)}function wg(n,e,t){return u0.apply(this,arguments)}function u0(){return u0=(0,Se.Z)(function*(n,e,t){if(!wl(e))throw e;n.wu.add(1),yield Nc(n),n.yu.set("Offline"),t||(t=()=>BS(n.localStore)),n.asyncQueue.enqueueRetryable((0,Se.Z)(function*(){He("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield bf(n)}))}),u0.apply(this,arguments)}function SC(n,e){return e().catch(t=>wg(n,t,e))}function Sf(n){return AC.apply(this,arguments)}function AC(){return AC=(0,Se.Z)(function*(n){const e=ze(n),t=Gd(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;KR(e);)try{const i=yield $S(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,ZR(e,i)}catch(i){yield wg(e,i)}ZS(e)&&YS(e)}),AC.apply(this,arguments)}function KR(n){return mu(n)&&n.du.length<10}function ZR(n,e){n.du.push(e);const t=Gd(n);t.Oo()&&t.Xo&&t.Zo(e.mutations)}function ZS(n){return mu(n)&&!Gd(n).ko()&&n.du.length>0}function YS(n){Gd(n).start()}function QS(n){return Af.apply(this,arguments)}function Af(){return Af=(0,Se.Z)(function*(n){Gd(n).nu()}),Af.apply(this,arguments)}function JS(n){return l0.apply(this,arguments)}function l0(){return l0=(0,Se.Z)(function*(n){const e=Gd(n);for(const t of n.du)e.Zo(t.mutations)}),l0.apply(this,arguments)}function xC(n,e,t){return Al.apply(this,arguments)}function Al(){return Al=(0,Se.Z)(function*(n,e,t){const r=n.du.shift(),i=tg.from(r,e,t);yield SC(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Sf(n)}),Al.apply(this,arguments)}function RC(n,e){return Eg.apply(this,arguments)}function Eg(){return Eg=(0,Se.Z)(function*(n,e){var t;e&&Gd(n).Xo&&(yield(t=(0,Se.Z)(function*(r,i){if(mb(a=i.code)&&a!==we.ABORTED){const l=r.du.shift();Gd(r).Fo(),yield SC(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield Sf(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),ZS(n)&&YS(n)}),Eg.apply(this,arguments)}function d_(n,e){return c0.apply(this,arguments)}function c0(){return c0=(0,Se.Z)(function*(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),He("RemoteStore","RemoteStore received new credentials");const r=mu(t);t.wu.add(3),yield Nc(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield bf(t)}),c0.apply(this,arguments)}function Ig(n,e){return bg.apply(this,arguments)}function bg(){return bg=(0,Se.Z)(function*(n,e){const t=ze(n);e?(t.wu.delete(2),yield bf(t)):e||(t.wu.add(2),yield Nc(t),t.yu.set("Unknown"))}),bg.apply(this,arguments)}function xl(n){return n.Iu||(n.Iu=function(e,t,r){const i=ze(e);return i.iu(),new GS(t,i.So,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:DC.bind(null,n),Zr:KS.bind(null,n),zo:qR.bind(null,n)}),n.mu.push(function(){var e=(0,Se.Z)(function*(t){t?(n.Iu.Fo(),Tf(n)?Df(n):n.yu.set("Unknown")):(yield n.Iu.stop(),CC(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Gd(n){return n.Tu||(n.Tu=function(e,t,r){const i=ze(e);return i.iu(),new WS(t,i.So,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:QS.bind(null,n),Zr:RC.bind(null,n),eu:JS.bind(null,n),tu:xC.bind(null,n)}),n.mu.push(function(){var e=(0,Se.Z)(function*(t){t?(n.Tu.Fo(),yield Sf(n)):(yield n.Tu.stop(),n.du.length>0&&(He("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class MC{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new MC(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ue(we.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cg(n,e){if(Rr("AsyncQueue",`${e}: ${n}`),wl(n))return new Ue(we.UNAVAILABLE,`${e}: ${n}`);throw n}class Dg{constructor(e){this.comparator=e?(t,r)=>e(t,r)||et.comparator(t.key,r.key):(t,r)=>et.comparator(t.key,r.key),this.keyedMap=Pd(),this.sortedSet=new Mr(this.comparator)}static emptySet(e){return new Dg(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Dg)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Dg;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class d0{constructor(){this.Eu=new Mr(et.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):ft():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class xf{constructor(e,t,r,i,a,l,h,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=y}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new xf(e,t,Dg.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&af(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class XS{constructor(){this.Ru=void 0,this.listeners=[]}}class eA{constructor(){this.queries=new Ac(e=>Wp(e),af),this.onlineState="Unknown",this.bu=new Set}}function h0(n,e){return h_.apply(this,arguments)}function h_(){return h_=(0,Se.Z)(function*(n,e){const t=ze(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new XS),i)try{a.Ru=yield t.onListen(r)}catch(l){const h=Cg(l,`Initialization of query '${Iw(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.Pu(t.onlineState),a.Ru&&e.vu(a.Ru)&&g_(t)}),h_.apply(this,arguments)}function f_(n,e){return p_.apply(this,arguments)}function p_(){return p_=(0,Se.Z)(function*(n,e){const t=ze(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),p_.apply(this,arguments)}function tA(n,e){const t=ze(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.vu(i)&&(r=!0);l.Ru=i}}r&&g_(t)}function nA(n,e,t){const r=ze(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function g_(n){n.bu.forEach(e=>{e.next()})}class Tg{constructor(e,t,r){this.query=e,this.Vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new xf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=xf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.Vu.next(e)}}class YR{constructor(e,t){this.payload=e,this.byteLength=t}Ou(){return"metadata"in this.payload}}class f0{constructor(e){this.It=e}Ji(e){return Ea(this.It,e)}Yi(e){return e.metadata.exists?Db(this.It,e.document,!1):Yn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return vi(e)}}class p0{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=kC(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Wt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new f0(this.It);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||Yt()).add(a);t.set(l,h)}}return t}complete(){var e=this;return(0,Se.Z)(function*(){const t=yield function Xw(n,e,t,r){return e0.apply(this,arguments)}(e.localStore,new f0(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield Vo(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function kC(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class NC{constructor(e){this.key=e}}class rA{constructor(e){this.key=e}}class iA{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=Yt(),this.mutatedKeys=Yt(),this.Gu=uf(e),this.Qu=new Dg(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new d0,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const y="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((S,R)=>{const L=i.get(S),G=bw(this.query,R)?R:null,J=!!L&&this.mutatedKeys.has(L.key),Ie=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let Fe=!1;L&&G?L.data.isEqual(G.data)?J!==Ie&&(r.track({type:3,doc:G}),Fe=!0):this.Hu(L,G)||(r.track({type:2,doc:G}),Fe=!0,(y&&this.Gu(G,y)>0||w&&this.Gu(G,w)<0)&&(h=!0)):!L&&G?(r.track({type:0,doc:G}),Fe=!0):L&&!G&&(r.track({type:1,doc:L}),Fe=!0,(y||w)&&(h=!0)),Fe&&(G?(l=l.add(G),a=Ie?a.add(S):a.delete(S)):(l=l.delete(S),a=a.delete(S)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const S="F"===this.query.limitType?l.last():l.first();l=l.delete(S.key),a=a.delete(S.key),r.track({type:1,doc:S})}return{Qu:l,zu:r,$i:h,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Au();a.sort((w,S)=>function(R,L){const G=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft()}};return G(R)-G(L)}(w.type,S.type)||this.Gu(w.doc,S.doc)),this.Ju(r);const l=t?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,y=h!==this.qu;return this.qu=h,0!==a.length||y?{snapshot:new xf(this.query,e.Qu,i,a,e.mutatedKeys,0===h,y,!1),Xu:l}:{Xu:l}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new d0,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Yt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new rA(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new NC(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Yt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return xf.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class sA{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class oA{constructor(e){this.key=e,this.nc=!1}}class aA{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new Ac(h=>Wp(h),af),this.rc=new Map,this.oc=new Set,this.uc=new Mr(et.comparator),this.cc=new Map,this.ac=new iC,this.hc={},this.lc=new Map,this.fc=$d.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function QR(n,e){return PC.apply(this,arguments)}function PC(){return PC=(0,Se.Z)(function*(n,e){const t=dA(n);let r,i;const a=t.ic.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ec();else{const l=yield gg(t.localStore,Ls(e));t.isPrimaryClient&&vg(t.remoteStore,l);const h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield OC(t,e,r,"current"===h)}return i}),PC.apply(this,arguments)}function OC(n,e,t,r){return LC.apply(this,arguments)}function LC(){return LC=(0,Se.Z)(function*(n,e,t,r){n._c=(S,R,L)=>{return(G=(0,Se.Z)(function*(J,Ie,Fe,It){let Dt=Ie.view.Wu(Fe);Dt.$i&&(Dt=yield mg(J.localStore,Ie.query,!1).then(({documents:qt})=>Ie.view.Wu(qt,Dt)));const Ut=It&&It.targetChanges.get(Ie.targetId),jt=Ie.view.applyChanges(Dt,J.isPrimaryClient,Ut);return j(J,Ie.targetId,jt.Xu),jt.snapshot}),function(J,Ie,Fe,It){return G.apply(this,arguments)})(n,S,R,L);var G};const i=yield mg(n.localStore,e,!0),a=new iA(e,i.Hi),l=a.Wu(i.documents),h=Vy.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),y=a.applyChanges(l,n.isPrimaryClient,h);j(n,t,y.Xu);const w=new sA(e,t,a);return n.ic.set(e,w),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),y.snapshot}),LC.apply(this,arguments)}function JR(n,e){return g0.apply(this,arguments)}function g0(){return g0=(0,Se.Z)(function*(n,e){const t=ze(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(a=>!af(a,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield wf(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Cf(t.remoteStore,r.targetId),x(t,r.targetId)}).catch(vl))):(x(t,r.targetId),yield wf(t.localStore,r.targetId,!0))}),g0.apply(this,arguments)}function FC(){return FC=(0,Se.Z)(function*(n,e,t){const r=hA(n);try{const i=yield function(a,l){const h=ze(a),y=gr.now(),w=l.reduce((L,G)=>L.add(G.key),Yt());let S,R;return h.persistence.runTransaction("Locally write mutations","readwrite",L=>{let G=Fs(),J=Yt();return h.Gi.getEntries(L,w).next(Ie=>{G=Ie,G.forEach((Fe,It)=>{It.isValidDocument()||(J=J.add(Fe))})}).next(()=>h.localDocuments.getOverlayedDocuments(L,G)).next(Ie=>{S=Ie;const Fe=[];for(const It of l){const Dt=cb(It,S.get(It.key).overlayedDocument);null!=Dt&&Fe.push(new bl(It.key,Dt,fw(Dt.value.mapValue),sr.exists(!0)))}return h.mutationQueue.addMutationBatch(L,y,Fe,l)}).next(Ie=>{R=Ie;const Fe=Ie.applyToLocalDocumentSet(S,J);return h.documentOverlayCache.saveOverlays(L,Ie.batchId,Fe)})}).then(()=>({batchId:R.batchId,changes:Mw(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,h){let y=a.hc[a.currentUser.toKey()];y||(y=new Mr(Bt)),y=y.insert(l,h),a.hc[a.currentUser.toKey()]=y}(r,i.batchId,t),yield Ce(r,i.changes),yield Sf(r.remoteStore)}catch(i){const a=Cg(i,"Failed to persist write");t.reject(a)}}),FC.apply(this,arguments)}function uA(n,e){return UC.apply(this,arguments)}function UC(){return UC=(0,Se.Z)(function*(n,e){const t=ze(n);try{const r=yield jS(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.cc.get(a);l&&(Pt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.nc=!0:i.modifiedDocuments.size>0?Pt(l.nc):i.removedDocuments.size>0&&(Pt(l.nc),l.nc=!1))}),yield Ce(t,r,e)}catch(r){yield vl(r)}}),UC.apply(this,arguments)}function lA(n,e,t){const r=ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((a,l)=>{const h=l.view.Pu(e);h.snapshot&&i.push(h.snapshot)}),function(a,l){const h=ze(a);h.onlineState=l;let y=!1;h.queries.forEach((w,S)=>{for(const R of S.listeners)R.Pu(l)&&(y=!0)}),y&&g_(h)}(r.eventManager,e),i.length&&r.sc.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function eM(n,e,t){return s.apply(this,arguments)}function s(){return s=(0,Se.Z)(function*(n,e,t){const r=ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),a=i&&i.key;if(a){let l=new Mr(et.comparator);l=l.insert(a,Yn.newNoDocument(a,Ot.min()));const h=Yt().add(a),y=new Zp(Ot.min(),new Map,new Hn(Bt),l,h);yield uA(r,y),r.uc=r.uc.remove(a),r.cc.delete(e),ie(r)}else yield wf(r.localStore,e,!1).then(()=>x(r,e,t)).catch(vl)}),s.apply(this,arguments)}function o(n,e){return u.apply(this,arguments)}function u(){return u=(0,Se.Z)(function*(n,e){const t=ze(n),r=e.batch.batchId;try{const i=yield zR(t.localStore,e);D(t,r,null),I(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ce(t,i)}catch(i){yield vl(i)}}),u.apply(this,arguments)}function c(n,e,t){return d.apply(this,arguments)}function d(){return d=(0,Se.Z)(function*(n,e,t){const r=ze(n);try{const i=yield function(a,l){const h=ze(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let w;return h.mutationQueue.lookupMutationBatch(y,l).next(S=>(Pt(null!==S),w=S.keys(),h.mutationQueue.removeMutationBatch(y,S))).next(()=>h.mutationQueue.performConsistencyCheck(y)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(y,w,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w)).next(()=>h.localDocuments.getDocuments(y,w))})}(r.localStore,e);D(r,e,t),I(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ce(r,i)}catch(i){yield vl(i)}}),d.apply(this,arguments)}function v(){return v=(0,Se.Z)(function*(n,e){const t=ze(n);mu(t.remoteStore)||He("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=ze(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=Cg(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),v.apply(this,arguments)}function I(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function D(n,e,t){const r=ze(n);let i=r.hc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function x(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||P(n,r)})}function P(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(Cf(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),ie(n))}function j(n,e,t){for(const r of t)r instanceof NC?(n.ac.addReference(r.key,e),Y(n,r)):r instanceof rA?(He("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||P(n,r.key)):ft()}function Y(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(He("SyncEngine","New document in limbo: "+t),n.oc.add(r),ie(n))}function ie(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new et(Wt.fromString(e)),r=n.fc.next();n.cc.set(r,new oA(t)),n.uc=n.uc.insert(t,r),vg(n.remoteStore,new xc(Ls(sf(t.path)),r,2,Os.at))}}function Ce(n,e,t){return qe.apply(this,arguments)}function qe(){return qe=(0,Se.Z)(function*(n,e,t){const r=ze(n),i=[],a=[],l=[];var h;r.ic.isEmpty()||(r.ic.forEach((h,y)=>{l.push(r._c(y,e,t).then(w=>{if((w||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,w?.fromCache?"not-current":"current"),w){i.push(w);const S=aC.Ci(y.targetId,w);a.push(S)}}))}),yield Promise.all(l),r.sc.zo(i),yield(h=(0,Se.Z)(function*(y,w){const S=ze(y);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>fe.forEach(w,L=>fe.forEach(L.Si,G=>S.persistence.referenceDelegate.addReference(R,L.targetId,G)).next(()=>fe.forEach(L.Di,G=>S.persistence.referenceDelegate.removeReference(R,L.targetId,G)))))}catch(R){if(!wl(R))throw R;He("LocalStore","Failed to update sequence numbers: "+R)}for(const R of w){const L=R.targetId;if(!R.fromCache){const G=S.Ui.get(L),Ie=G.withLastLimboFreeSnapshotVersion(G.snapshotVersion);S.Ui=S.Ui.insert(L,Ie)}}}),function(y,w){return h.apply(this,arguments)})(r.localStore,a))}),qe.apply(this,arguments)}function tt(n,e){return ct.apply(this,arguments)}function ct(){return ct=(0,Se.Z)(function*(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){He("SyncEngine","User change. New user:",e.toKey());const r=yield lC(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(l=>{l.forEach(h=>{h.reject(new Ue(we.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ce(t,r.ji)}var i}),ct.apply(this,arguments)}function St(n,e){const t=ze(n),r=t.cc.get(e);if(r&&r.nc)return Yt().add(r.key);{let i=Yt();const a=t.rc.get(e);if(!a)return i;for(const l of a){const h=t.ic.get(l);i=i.unionWith(h.view.ju)}return i}}function Le(n,e){return kt.apply(this,arguments)}function kt(){return kt=(0,Se.Z)(function*(n,e){const t=ze(n),r=yield mg(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&j(t,e.targetId,i.Xu),i}),kt.apply(this,arguments)}function Sn(n,e){return tr.apply(this,arguments)}function tr(){return tr=(0,Se.Z)(function*(n,e){const t=ze(n);return Uo(t.localStore,e).then(r=>Ce(t,r))}),tr.apply(this,arguments)}function Wd(n,e,t,r){return Sg.apply(this,arguments)}function Sg(){return Sg=(0,Se.Z)(function*(n,e,t,r){const i=ze(n),a=yield function(l,h){const y=ze(l),w=ze(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",S=>w.Tn(S,h).next(R=>R?y.localDocuments.getDocuments(S,R):fe.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield Sf(i.remoteStore):"acknowledged"===t||"rejected"===t?(D(i,e,r||null),I(i,e),h=e,ze(ze(i.localStore).mutationQueue).An(h)):ft(),yield Ce(i,a)):He("SyncEngine","Cannot apply mutation batch with id: "+e)}),Sg.apply(this,arguments)}function Ag(){return Ag=(0,Se.Z)(function*(n,e){const t=ze(n);if(dA(t),hA(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield m_(t,r.toArray());t.dc=!0,yield Ig(t.remoteStore,!0);for(const a of i)vg(t.remoteStore,a)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(x(t,l),wf(t.localStore,l,!0))),Cf(t.remoteStore,l)}),yield i,yield m_(t,r),function(a){const l=ze(a);l.cc.forEach((h,y)=>{Cf(l.remoteStore,y)}),l.ac.fs(),l.cc=new Map,l.uc=new Mr(et.comparator)}(t),t.dc=!1,yield Ig(t.remoteStore,!1)}}),Ag.apply(this,arguments)}function m_(n,e,t){return xg.apply(this,arguments)}function xg(){return xg=(0,Se.Z)(function*(n,e,t){const r=ze(n),i=[],a=[];for(const l of e){let h;const y=r.rc.get(l);if(y&&0!==y.length){h=yield gg(r.localStore,Ls(y[0]));for(const w of y){const S=r.ic.get(w),R=yield Le(r,S);R.snapshot&&a.push(R.snapshot)}}else{const w=yield HS(r.localStore,l);h=yield gg(r.localStore,w),yield OC(r,y_(w),l,!1)}i.push(h)}return r.sc.zo(a),i}),xg.apply(this,arguments)}function y_(n){return yw(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function y0(n){const e=ze(n);return ze(ze(e.localStore).persistence).vi()}function _0(n,e,t,r){return Rg.apply(this,arguments)}function Rg(){return Rg=(0,Se.Z)(function*(n,e,t,r){const i=ze(n);if(i.dc)return void He("SyncEngine","Ignoring unexpected query state notification.");const a=i.rc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield Uo(i.localStore,Cw(a[0])),h=Zp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Ce(i,l,h);break}case"rejected":yield wf(i.localStore,e,!0),x(i,e,r);break;default:ft()}}),Rg.apply(this,arguments)}function XN(n,e,t){return cA.apply(this,arguments)}function cA(){return cA=(0,Se.Z)(function*(n,e,t){const r=dA(n);if(r.dc){for(const i of e){if(r.rc.has(i)){He("SyncEngine","Adding an already active target "+i);continue}const a=yield HS(r.localStore,i),l=yield gg(r.localStore,a);yield OC(r,y_(a),l.targetId,!1),vg(r.remoteStore,l)}for(const i of t)r.rc.has(i)&&(yield wf(r.localStore,i,!1).then(()=>{Cf(r.remoteStore,i),x(r,i)}).catch(vl))}}),cA.apply(this,arguments)}function dA(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=uA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=St.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eM.bind(null,e),e.sc.zo=tA.bind(null,e.eventManager),e.sc.wc=nA.bind(null,e.eventManager),e}function hA(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=o.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=c.bind(null,e),e}class tM{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Se.Z)(function*(){t.It=_g(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return pg(this.persistence,new uC,e.initialUser,this.It)}yc(e){return new Jw(cg.Bs,this.It)}gc(e){return new pC}terminate(){var e=this;return(0,Se.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class nM extends tM{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Se.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield hA(r.Ac.syncEngine),yield Sf(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return pg(this.persistence,new uC,e.initialUser,this.It)}Tc(e,t){return new eC(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new eS(t,this.persistence);return new XT(e.asyncQueue,r)}yc(e){const t=oC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?gs.withCacheSize(this.cacheSizeBytes):gs.DEFAULT;return new n_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,a_(),Bo(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new pC}}class tP extends nM{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Se.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof o_&&(r.sharedClientState.syncEngine={Fr:Wd.bind(null,i),$r:_0.bind(null,i),Br:XN.bind(null,i),vi:y0.bind(null,i),Mr:Sn.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,Se.Z)(function*(l){yield function m0(n,e){return Ag.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}gc(e){const t=a_();if(!o_.C(t))throw new Ue(we.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=oC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new o_(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class fA{initialize(e,t){var r=this;return(0,Se.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>lA(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=tt.bind(null,r.syncEngine),yield Ig(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new eA}createDatastore(e){const t=_g(e.databaseInfo.databaseId),r=new yC(e.databaseInfo);return new zS(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>lA(this.syncEngine,h,0),l=mC.C()?new mC:new gC,new qS(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,h,y,w){const S=new aA(r,i,a,l,h,y);return w&&(S.dc=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Se.Z)(function*(t){const r=ze(t);He("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield Nc(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function pA(n,e,t){if(!t)throw new Ue(we.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rM(n,e,t,r){if(!0===e&&!0===r)throw new Ue(we.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function iM(n){if(!et.isDocumentKey(n))throw new Ue(we.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sM(n){if(et.isDocumentKey(n))throw new Ue(we.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function VC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ft()}function _n(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ue(we.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=VC(n);throw new Ue(we.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function oM(n,e){if(e<=0)throw new Ue(we.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const aM=new Map;class uM{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ue(we.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ue(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,rM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class v0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uM({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ue(we.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ue(we.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uM(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ZT;switch(t.type){case"gapi":return new YT(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ue(we.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=aM.get(e);t&&(He("ComponentProvider","Removing Datastore"),aM.delete(e),t.terminate())}(this),Promise.resolve()}}class br{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new br(this.firestore,e,this._key)}}class Vs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vs(this.firestore,e,this._query)}}class Pc extends Vs{constructor(e,t,r){super(e,t,sf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new br(this.firestore,null,new et(e))}withConverter(e){return new Pc(this.firestore,e,this._path)}}function cM(n,e,...t){if(n=(0,B.m9)(n),pA("collection","path",e),n instanceof v0){const r=Wt.fromString(e,...t);return sM(r),new Pc(n,null,r)}{if(!(n instanceof br||n instanceof Pc))throw new Ue(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Wt.fromString(e,...t));return sM(r),new Pc(n.firestore,null,r)}}function BC(n,e,...t){if(n=(0,B.m9)(n),1===arguments.length&&(e=QT.R()),pA("doc","path",e),n instanceof v0){const r=Wt.fromString(e,...t);return iM(r),new br(n,null,new et(r))}{if(!(n instanceof br||n instanceof Pc))throw new Ue(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Wt.fromString(e,...t));return iM(r),new br(n.firestore,n instanceof Pc?n.converter:null,new et(r))}}function dM(n,e){return n=(0,B.m9)(n),e=(0,B.m9)(e),(n instanceof br||n instanceof Pc)&&(e instanceof br||e instanceof Pc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function gA(n,e){return n=(0,B.m9)(n),e=(0,B.m9)(e),n instanceof Vs&&e instanceof Vs&&n.firestore===e.firestore&&af(n._query,e._query)&&n.converter===e.converter}function hM(n,e=10240){let t=0;return{read:()=>(0,Se.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Se.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class jC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Rr("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class rP{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new si,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,Se.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,Se.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,Se.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const a=yield e.Cc(i);return new YR(JSON.parse(a),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,Se.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,Se.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,Se.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class oP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Se.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ue(we.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Se.Z)(function*(a,l){const h=ze(a),y=Gy(h.It)+"/documents",w={documents:l.map(G=>Hy(h.It,G))},S=yield h._o("BatchGetDocuments",y,w,l.length),R=new Map;S.forEach(G=>{const J=function _S(n,e){return"found"in e?function(t,r){Pt(!!r.found);const i=Ea(t,r.found.name),a=vi(r.found.updateTime),l=new qi({mapValue:{fields:r.found.fields}});return Yn.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){Pt(!!r.missing),Pt(!!r.readTime);const i=Ea(t,r.missing),a=vi(r.readTime);return Yn.newNoDocument(i,a)}(n,e):ft()}(h.It,G);R.set(J.key.toString(),J)});const L=[];return l.forEach(G=>{const J=R.get(G.toString());Pt(!!J),L.push(J)}),L}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new df(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Se.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=et.fromPath(i);e.mutations.push(new xw(a,e.precondition(a)))}),yield(r=(0,Se.Z)(function*(i,a){const l=ze(i),h=Gy(l.It)+"/documents",y={writes:a.map(w=>Qp(l.It,w))};yield l.ao("Commit",h,y)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ft();t=Ot.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ue(we.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ot.min())?sr.exists(!1):sr.updateTime(t):sr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ot.min()))throw new Ue(we.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sr.updateTime(t)}return sr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class aP{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.No=new _C(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,Se.Z)(function*(){const t=new oP(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Fc(a)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!Xh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!mb(t)}return!1}}class uP{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ii.UNAUTHENTICATED,this.clientId=QT.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Se.Z)(function*(h){He("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(He("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Se.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ue(we.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Se.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Cg(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function fM(n,e){return mA.apply(this,arguments)}function mA(){return mA=(0,Se.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),He("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Se.Z)(function*(a){r.isEqual(a)||(yield lC(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),mA.apply(this,arguments)}function pM(n,e){return yA.apply(this,arguments)}function yA(){return yA=(0,Se.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield _A(n);He("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>d_(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>d_(e.remoteStore,a)),n.onlineComponents=e}),yA.apply(this,arguments)}function _A(n){return vA.apply(this,arguments)}function vA(){return vA=(0,Se.Z)(function*(n){return n.offlineComponents||(He("FirestoreClient","Using default OfflineComponentProvider"),yield fM(n,new tM)),n.offlineComponents}),vA.apply(this,arguments)}function $C(n){return wA.apply(this,arguments)}function wA(){return wA=(0,Se.Z)(function*(n){return n.onlineComponents||(He("FirestoreClient","Using default OnlineComponentProvider"),yield pM(n,new fA)),n.onlineComponents}),wA.apply(this,arguments)}function gM(n){return _A(n).then(e=>e.persistence)}function HC(n){return _A(n).then(e=>e.localStore)}function EA(n){return $C(n).then(e=>e.remoteStore)}function IA(n){return $C(n).then(e=>e.syncEngine)}function __(n){return bA.apply(this,arguments)}function bA(){return bA=(0,Se.Z)(function*(n){const e=yield $C(n),t=e.eventManager;return t.onListen=QR.bind(null,e.syncEngine),t.onUnlisten=JR.bind(null,e.syncEngine),t}),bA.apply(this,arguments)}function yM(n,e,t={}){const r=new si;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function(i,a,l,h,y){const w=new jC({next:R=>{a.enqueueAndForget(()=>f_(i,S));const L=R.docs.has(l);!L&&R.fromCache?y.reject(new Ue(we.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&R.fromCache&&h&&"server"===h.source?y.reject(new Ue(we.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(R)},error:R=>y.reject(R)}),S=new Tg(sf(l.path),w,{includeMetadataChanges:!0,ku:!0});return h0(i,S)}(yield __(n),n.asyncQueue,e,t,r)})),r.promise}function _M(n,e,t={}){const r=new si;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function(i,a,l,h,y){const w=new jC({next:R=>{a.enqueueAndForget(()=>f_(i,S)),R.fromCache&&"server"===h.source?y.reject(new Ue(we.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(R)},error:R=>y.reject(R)}),S=new Tg(l,w,{includeMetadataChanges:!0,ku:!0});return h0(i,S)}(yield __(n),n.asyncQueue,e,t,r)})),r.promise}class mP{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new _C(this,"async_queue_retry"),this.Wc=()=>{const t=Bo();t&&He("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=Bo();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=Bo();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new si;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,Se.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(t){if(!wl(t))throw t;He("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Rr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=MC.createAndSchedule(this,e,t,r,a=>this.Yc(a));return this.qc.push(i),i}zc(){this.Kc&&ft()}verifyOperationInProgress(){}Xc(){var e=this;return(0,Se.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function CA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class yP{constructor(){this._progressObserver={},this._taskCompletionResolver=new si,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Cr extends v0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new mP,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||vM(this),this._firestoreClient.terminate()}}function ai(n){return n._firestoreClient||vM(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function vM(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new qI(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new uP(n._authCredentials,n._appCheckCredentials,n._queue,r)}function wM(n,e,t){const r=new si;return n.asyncQueue.enqueue((0,Se.Z)(function*(){try{yield fM(n,t),yield pM(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(l=a).name?l.code===we.FAILED_PRECONDITION||l.code===we.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;qh("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function EM(n){if(n._initialized||n._terminated)throw new Ue(we.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Oc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Oc(oi.fromBase64String(e))}catch(t){throw new Ue(we.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Oc(oi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class zd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ue(we.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Mg{constructor(e){this._methodName=e}}class GC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ue(we.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ue(we.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bt(this._lat,e._lat)||Bt(this._long,e._long)}}const SP=/^__.*__$/;class AP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new bl(e,this.data,this.fieldMask,t,this.fieldTransforms):new cf(e,this.data,t,this.fieldTransforms)}}class IM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new bl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft()}}class WC{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new WC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return KC(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(bM(this.sa)&&SP.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class xP{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||_g(e)}da(e,t,r,i=!1){return new WC({sa:e,methodName:t,fa:r,path:Er.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function kg(n){const e=n._freezeSettings(),t=_g(n._databaseId);return new xP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function zC(n,e,t,r,i,a={}){const l=n.da(a.merge||a.mergeFields?2:0,e,t,i);AA("Data must be an object, but it was:",l,r);const h=TM(r,l);let y,w;if(a.merge)y=new no(l.fieldMask),w=l.fieldTransforms;else if(a.mergeFields){const S=[];for(const R of a.mergeFields){const L=xA(e,R,t);if(!l.contains(L))throw new Ue(we.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);AM(S,L)||S.push(L)}y=new no(S),w=l.fieldTransforms.filter(R=>y.covers(R.field))}else y=null,w=l.fieldTransforms;return new AP(new qi(h),y,w)}class w0 extends Mg{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof w0}}function CM(n,e,t){return new WC({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class DA extends Mg{_toFieldTransform(e){return new Nd(e.path,new fu)}isEqual(e){return e instanceof DA}}class RP extends Mg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=CM(this,e,!0),r=this._a.map(a=>Ng(a,t)),i=new Md(r);return new Nd(e.path,i)}isEqual(e){return this===e}}class MP extends Mg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=CM(this,e,!0),r=this._a.map(a=>Ng(a,t)),i=new kd(r);return new Nd(e.path,i)}isEqual(e){return this===e}}class kP extends Mg{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new lf(e.It,ib(e.It,this.wa));return new Nd(e.path,t)}isEqual(e){return this===e}}function TA(n,e,t,r){const i=n.da(1,e,t);AA("Data must be an object, but it was:",i,r);const a=[],l=qi.empty();xd(r,(y,w)=>{const S=qC(e,y,t);w=(0,B.m9)(w);const R=i.ca(S);if(w instanceof w0)a.push(S);else{const L=Ng(w,R);null!=L&&(a.push(S),l.set(S,L))}});const h=new no(a);return new IM(l,h,i.fieldTransforms)}function SA(n,e,t,r,i,a){const l=n.da(1,e,t),h=[xA(e,r,t)],y=[i];if(a.length%2!=0)throw new Ue(we.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<a.length;L+=2)h.push(xA(e,a[L])),y.push(a[L+1]);const w=[],S=qi.empty();for(let L=h.length-1;L>=0;--L)if(!AM(w,h[L])){const G=h[L];let J=y[L];J=(0,B.m9)(J);const Ie=l.ca(G);if(J instanceof w0)w.push(G);else{const Fe=Ng(J,Ie);null!=Fe&&(w.push(G),S.set(G,Fe))}}const R=new no(w);return new IM(S,R,l.fieldTransforms)}function DM(n,e,t,r=!1){return Ng(t,n.da(r?4:3,e))}function Ng(n,e){if(SM(n=(0,B.m9)(n)))return AA("Unsupported field value:",e,n),TM(n,e);if(n instanceof Mg)return function(t,r){if(!bM(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let h=Ng(l,r.aa(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,B.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ib(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=gr.fromDate(t);return{timestampValue:ff(r.It,i)}}if(t instanceof gr){const i=new gr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ff(r.It,i)}}if(t instanceof GC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Oc)return{bytesValue:Ib(r.It,t._byteString)};if(t instanceof br){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ha(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Pw(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${VC(t)}`)}(n,e)}function TM(n,e){const t={};return WI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xd(n,(r,i)=>{const a=Ng(i,e.ra(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function SM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof gr||n instanceof GC||n instanceof Oc||n instanceof br||n instanceof Mg)}function AA(n,e,t){if(!SM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=VC(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function xA(n,e,t){if((e=(0,B.m9)(e))instanceof zd)return e._internalPath;if("string"==typeof e)return qC(n,e);throw KC("Field path arguments must be of type string or ",n,!1,void 0,t)}const NP=new RegExp("[~\\*/\\[\\]]");function qC(n,e,t){if(e.search(NP)>=0)throw KC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new zd(...e.split("."))._internalPath}catch{throw KC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function KC(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let y="";return(a||l)&&(y+=" (found",a&&(y+=` in field ${r}`),l&&(y+=` in document ${i}`),y+=")"),new Ue(we.INVALID_ARGUMENT,h+n+y)}function AM(n,e){return n.some(t=>t.isEqual(e))}class E0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new br(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new PP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ZC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class PP extends E0{data(){return super.data()}}function ZC(n,e){return"string"==typeof e?qC(n,e):e instanceof zd?e._internalPath:e._delegate._internalPath}function xM(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ue(we.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class I0{}function Rf(n,...e){for(const t of e)n=t._apply(n);return n}class OP extends I0{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=kg(e.firestore),r=function(i,a,l,h,y,w,S){let R;if(y.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Ue(we.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){OM(S,w);const G=[];for(const J of S)G.push(PM(h,i,J));R={arrayValue:{values:G}}}else R=PM(h,i,S)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||OM(S,w),R=DM(l,"where",S,"in"===w||"not-in"===w);const L=Mi.create(y,w,R);return function(G,J){if(J.dt()){const Fe=ww(G);if(null!==Fe&&!Fe.isEqual(J.field))throw new Ue(we.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Fe.toString()}' and '${J.field.toString()}'`);const It=vw(G);null!==It&&LM(0,J.field,It)}const Ie=function(Fe,It){for(const Dt of Fe.filters)if(It.indexOf(Dt.op)>=0)return Dt.op;return null}(G,function(Fe){switch(Fe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(J.op));if(null!==Ie)throw new Ue(we.INVALID_ARGUMENT,Ie===J.op?`Invalid query. You cannot use more than one '${J.op.toString()}' filter.`:`Invalid query. You cannot use '${J.op.toString()}' filters with '${Ie.toString()}' filters.`)}(i,L),L}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Vs(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new hu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class FP extends I0{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ue(we.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ue(we.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new rf(i,a);return function(h,y){if(null===vw(h)){const w=ww(h);null!==w&&LM(0,w,y.field)}}(r,l),l}(e._query,this.ma,this.pa);return new Vs(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new hu(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class RM extends I0{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Vs(e.firestore,e.converter,Ew(e._query,this.Ia,this.Ta))}}class MM extends I0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=NM(e,this.type,this.Ea,this.Aa);return new Vs(e.firestore,e.converter,(i=t,new hu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class kM extends I0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=NM(e,this.type,this.Ea,this.Aa);return new Vs(e.firestore,e.converter,(i=t,new hu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function NM(n,e,t,r){if(t[0]=(0,B.m9)(t[0]),t[0]instanceof E0)return function(i,a,l,h,y){if(!h)throw new Ue(we.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const w=[];for(const S of Gp(i))if(S.field.isKeyField())w.push(Tc(a,h.key));else{const R=h.data.field(S.field);if(Sy(R))throw new Ue(we.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const L=S.field.canonicalString();throw new Ue(we.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}w.push(R)}return new Lo(w,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=kg(n.firestore);return function(a,l,h,y,w,S){const R=a.explicitOrderBy;if(w.length>R.length)throw new Ue(we.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let G=0;G<w.length;G++){const J=w[G];if(R[G].field.isKeyField()){if("string"!=typeof J)throw new Ue(we.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof J}`);if(!tb(a)&&-1!==J.indexOf("/"))throw new Ue(we.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${J}' contains a slash.`);const Ie=a.path.child(Wt.fromString(J));if(!et.isDocumentKey(Ie))throw new Ue(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${Ie}' is not because it contains an odd number of segments.`);const Fe=new et(Ie);L.push(Tc(l,Fe))}else{const Ie=DM(h,y,J);L.push(Ie)}}return new Lo(L,S)}(n._query,n.firestore._databaseId,i,e,t,r)}}function PM(n,e,t){if("string"==typeof(t=(0,B.m9)(t))){if(""===t)throw new Ue(we.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tb(e)&&-1!==t.indexOf("/"))throw new Ue(we.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Wt.fromString(t));if(!et.isDocumentKey(r))throw new Ue(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Tc(n,new et(r))}if(t instanceof br)return Tc(n,t._key);throw new Ue(we.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${VC(t)}.`)}function OM(n,e){if(!Array.isArray(n)||0===n.length)throw new Ue(we.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ue(we.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function LM(n,e,t){if(!t.isEqual(e))throw new Ue(we.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class RA{convertValue(e,t="none"){switch(ro(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ft()}}convertObject(e,t){const r={};return xd(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new GC(kr(e.latitude),kr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=dw(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Jh(e));default:return null}}convertTimestamp(e){const t=bc(e);return new gr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Wt.fromString(e);Pt(Pb(r));const i=new El(r.get(1),r.get(3)),a=new et(r.popFirst(5));return i.isEqual(t)||Rr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function YC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class WP extends RA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new br(this.firestore,null,t)}}class Pg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qd extends E0{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new b0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ZC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class b0 extends qd{data(e={}){return super.data(e)}}class Mf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Pg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new b0(this._firestore,this._userDataWriter,r.key,r,new Pg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ue(we.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new b0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Pg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new b0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Pg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,w=-1;return 0!==l.type&&(y=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),w=a.indexOf(l.doc.key)),{type:zP(l.type),doc:h,oldIndex:y,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function zP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft()}}function FM(n,e){return n instanceof qd&&e instanceof qd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Mf&&e instanceof Mf&&n._firestore===e._firestore&&gA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class kf extends RA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new br(this.firestore,null,t)}}function UM(n,e,t){n=_n(n,br);const r=_n(n.firestore,Cr),i=YC(n.converter,e,t);return v_(r,[zC(kg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,sr.none())])}function VM(n,e,t,...r){n=_n(n,br);const i=_n(n.firestore,Cr),a=kg(i);let l;return l="string"==typeof(e=(0,B.m9)(e))||e instanceof zd?SA(a,"updateDoc",n._key,e,t,r):TA(a,"updateDoc",n._key,e),v_(i,[l.toMutation(n._key,sr.exists(!0))])}function BM(n,...e){var t,r,i;n=(0,B.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||CA(e[l])||(a=e[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges};if(CA(e[l])){const R=e[l];e[l]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[l+1]=null===(r=R.error)||void 0===r?void 0:r.bind(R),e[l+2]=null===(i=R.complete)||void 0===i?void 0:i.bind(R)}let y,w,S;if(n instanceof br)w=_n(n.firestore,Cr),S=sf(n._key.path),y={next:R=>{e[l]&&e[l](MA(w,n,R))},error:e[l+1],complete:e[l+2]};else{const R=_n(n,Vs);w=_n(R.firestore,Cr),S=R._query;const L=new kf(w);y={next:G=>{e[l]&&e[l](new Mf(w,L,R,G))},error:e[l+1],complete:e[l+2]},xM(n._query)}return function(R,L,G,J){const Ie=new jC(J),Fe=new Tg(L,Ie,G);return R.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return h0(yield __(R),Fe)})),()=>{Ie.bc(),R.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return f_(yield __(R),Fe)}))}}(ai(w),S,h,y)}function v_(n,e){return function(t,r){const i=new si;return t.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function XR(n,e,t){return FC.apply(this,arguments)}(yield IA(t),r,i)})),i.promise}(ai(n),e)}function MA(n,e,t){const r=t.docs.get(e._key),i=new kf(n);return new qd(n,i,e._key,r,new Pg(t.hasPendingWrites,t.fromCache),e.converter)}const nO={maxAttempts:5};class jM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=kg(e)}set(e,t,r){this._verifyNotCommitted();const i=Nf(e,this._firestore),a=YC(i.converter,t,r),l=zC(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,sr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Nf(e,this._firestore);let l;return l="string"==typeof(t=(0,B.m9)(t))||t instanceof zd?SA(this._dataReader,"WriteBatch.update",a._key,t,r,i):TA(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,sr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Nf(e,this._firestore);return this._mutations=this._mutations.concat(new df(t._key,sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ue(we.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Nf(n,e){if((n=(0,B.m9)(n)).firestore!==e)throw new Ue(we.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class rO extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=kg(e)}get(e){const t=Nf(e,this._firestore),r=new WP(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ft();const a=i[0];if(a.isFoundDocument())return new E0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new E0(this._firestore,r,t._key,null,t.converter);throw ft()})}set(e,t,r){const i=Nf(e,this._firestore),a=YC(i.converter,t,r),l=zC(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Nf(e,this._firestore);let l;return l="string"==typeof(t=(0,B.m9)(t))||t instanceof zd?SA(this._dataReader,"Transaction.update",a._key,t,r,i):TA(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Nf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Nf(e,this._firestore),r=new kf(this._firestore);return super.get(e).then(i=>new qd(this._firestore,r,t._key,i._document,new Pg(!1,!1),t.converter))}}function kA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ue("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function HM(){if(typeof Uint8Array>"u")throw new Ue("unimplemented","Uint8Arrays are not available in this environment.")}function GM(){if(!function tS(){return typeof atob<"u"}())throw new Ue("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Dd=eo.SDK_VERSION,(0,eo._registerComponent)(new ha.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new Cr(new LI(t.getProvider("auth-internal")),new UI(t.getProvider("app-check-internal")),function(h,y){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ue(we.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new El(h.options.projectId,y)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,eo.registerVersion)(sw,"3.6.0",n),(0,eo.registerVersion)(sw,"3.6.0","esm2017")}();class C0{constructor(e){this._delegate=e}static fromBase64String(e){return GM(),new C0(Oc.fromBase64String(e))}static fromUint8Array(e){return HM(),new C0(Oc.fromUint8Array(e))}toBase64(){return GM(),this._delegate.toBase64()}toUint8Array(){return HM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function NA(n){return function hO(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class fO{enableIndexedDbPersistence(e,t){return function vP(n,e){EM(n=_n(n,Cr));const t=ai(n),r=n._freezeSettings(),i=new fA;return wM(t,i,new nM(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function wP(n){EM(n=_n(n,Cr));const e=ai(n),t=n._freezeSettings(),r=new fA;return wM(e,r,new tP(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function EP(n){if(n._initialized&&!n._terminated)throw new Ue(we.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new si;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Se.Z)(function*(){try{yield(t=(0,Se.Z)(function*(r){if(!Oo.C())return Promise.resolve();const i=r+"main";yield Oo.delete(i)}),function(r){return t.apply(this,arguments)})(oC(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class WM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof El||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&qh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function lM(n,e,t,r={}){var i;const a=(n=_n(n,v0))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&qh("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=ii.MOCK_USER;else{l=(0,B.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Ue(we.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new ii(y)}n._authCredentials=new OI(new aw(l,h))}}(this._delegate,e,t,r)}enableNetwork(){return function bP(n){return function lP(n){return n.asyncQueue.enqueue((0,Se.Z)(function*(){const e=yield gM(n),t=yield EA(n);return e.setNetworkEnabled(!0),function(r){const i=ze(r);return i.wu.delete(0),bf(i)}(t)}))}(ai(n=_n(n,Cr)))}(this._delegate)}disableNetwork(){return function CP(n){return function cP(n){return n.asyncQueue.enqueue((0,Se.Z)(function*(){const e=yield gM(n),t=yield EA(n);return e.setNetworkEnabled(!1),(r=(0,Se.Z)(function*(i){const a=ze(i);a.wu.add(0),yield Nc(a),a.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(ai(n=_n(n,Cr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,rM("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function IP(n){return function(e){const t=new si;return e.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function p(n,e){return v.apply(this,arguments)}(yield IA(e),t)})),t.promise}(ai(n=_n(n,Cr)))}(this._delegate)}onSnapshotsInSync(e){return function tO(n,e){return function fP(n,e){const t=new jC(e);return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return r=yield __(n),i=t,ze(r).bu.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return r=yield __(n),i=t,void ze(r).bu.delete(i);var r,i}))}}(ai(n=_n(n,Cr)),CA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ue("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new w_(this,cM(this._delegate,e))}catch(t){throw so(t,"collection()","Firestore.collection()")}}doc(e){try{return new yu(this,BC(this._delegate,e))}catch(t){throw so(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new oo(this,function nP(n,e){if(n=_n(n,v0),pA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ue(we.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Vs(n,null,(t=e,new hu(Wt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw so(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function iO(n,e,t){n=_n(n,Cr);const r=Object.assign(Object.assign({},nO),t);return function(i){if(i.maxAttempts<1)throw new Ue(we.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const h=new si;return i.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){const y=yield function mM(n){return $C(n).then(e=>e.datastore)}(i);new aP(i.asyncQueue,y,l,a,h).run()})),h.promise}(ai(n),i=>e(new rO(n,i)),r)}(this._delegate,t=>e(new zM(this,t)))}batch(){return ai(this._delegate),new qM(new jM(this._delegate,e=>v_(this._delegate,e)))}loadBundle(e){return function DP(n,e){const t=ai(n=_n(n,Cr)),r=new yP;return function pP(n,e,t,r){const i=function(a,l){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,y=function(y,w){if(y instanceof Uint8Array)return hM(y,w);if(y instanceof ArrayBuffer)return hM(new Uint8Array(y),w);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new rP(y,l);var y}(t,_g(e));n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){!function eP(n,e,t){const r=ze(n);var i;(i=(0,Se.Z)(function*(a,l,h){try{const y=yield l.getMetadata();if(yield function(L,G){const J=ze(L),Ie=vi(G.createTime);return J.persistence.runTransaction("hasNewerBundle","readonly",Fe=>J.Ns.getBundleMetadata(Fe,G.id)).then(Fe=>!!Fe&&Fe.createTime.compareTo(Ie)>=0)}(a.localStore,y))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(L=y).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);h._updateProgress(kC(y));const w=new p0(y,a.localStore,l.It);let S=yield l.mc();for(;S;){const L=yield w.Fu(S);L&&h._updateProgress(L),S=yield l.mc()}const R=yield w.complete();return yield Ce(a,R.Lu,void 0),yield function(L,G){const J=ze(L);return J.persistence.runTransaction("Save bundle","readwrite",Ie=>J.Ns.saveBundleMetadata(Ie,G))}(a.localStore,y),h._completeWith(R.progress),Promise.resolve(R.Bu)}catch(y){return qh("SyncEngine",`Loading bundle failed with ${y}`),h._failWith(y),Promise.resolve(new Set)}var L}),function(a,l,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield IA(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function TP(n,e){return function gP(n,e){return n.asyncQueue.enqueue((0,Se.Z)(function*(){return function(t,r){const i=ze(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield HC(n),e)}))}(ai(n=_n(n,Cr)),e).then(t=>t?new Vs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new oo(this,t):null)}}class QC extends RA{constructor(e){super(),this.firestore=e}convertBytes(e){return new C0(new Oc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return yu.forKey(t,this.firestore,null)}}class zM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new QC(e)}get(e){const t=Lg(e);return this._delegate.get(t).then(r=>new D0(this._firestore,new qd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Lg(e);return r?(kA("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Lg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Lg(e);return this._delegate.delete(t),this}}class qM{constructor(e){this._delegate=e}set(e,t,r){const i=Lg(e);return r?(kA("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Lg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Lg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Og{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new b0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new T0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Og.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Og(e,new QC(e),t),i.set(t,a)),a}}Og.INSTANCES=new WeakMap;class yu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new QC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ue("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new yu(t,new br(t._delegate,r,new et(e)))}static forKey(e,t,r){return new yu(t,new br(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new w_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new w_(this.firestore,cM(this._delegate,e))}catch(t){throw so(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,B.m9)(e))instanceof br&&dM(this._delegate,e)}set(e,t){t=kA("DocumentReference.set",t);try{return t?UM(this._delegate,e,t):UM(this._delegate,e)}catch(r){throw so(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?VM(this._delegate,e):VM(this._delegate,e,t,...r)}catch(i){throw so(i,"updateDoc()","DocumentReference.update()")}}delete(){return function XP(n){return v_(_n(n.firestore,Cr),[new df(n._key,sr.none())])}(this._delegate)}onSnapshot(...e){const t=KM(e),r=ZM(e,i=>new D0(this.firestore,new qd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return BM(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function KP(n){n=_n(n,br);const e=_n(n.firestore,Cr),t=ai(e),r=new kf(e);return function dP(n,e){const t=new si;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return(r=(0,Se.Z)(function*(i,a,l){try{const h=yield function(y,w){const S=ze(y);return S.persistence.runTransaction("read document","readonly",R=>S.localDocuments.getDocument(R,w))}(i,a);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Ue(we.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const y=Cg(h,`Failed to get document '${a} from cache`);l.reject(y)}}),function(i,a,l){return r.apply(this,arguments)})(yield HC(n),e,t);var r})),t.promise}(t,n._key).then(i=>new qd(e,r,n._key,i,new Pg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function ZP(n){n=_n(n,br);const e=_n(n.firestore,Cr);return yM(ai(e),n._key,{source:"server"}).then(t=>MA(e,n,t))}(this._delegate):function qP(n){n=_n(n,br);const e=_n(n.firestore,Cr);return yM(ai(e),n._key).then(t=>MA(e,n,t))}(this._delegate),t.then(r=>new D0(this.firestore,new qd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new yu(this.firestore,this._delegate.withConverter(e?Og.getInstance(this.firestore,e):null))}}function so(n,e,t){return n.message=n.message.replace(e,t),n}function KM(n){for(const e of n)if("object"==typeof e&&!NA(e))return e;return{}}function ZM(n,e){var t,r;let i;return i=NA(n[0])?n[0]:NA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class D0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new yu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return FM(this._delegate,e._delegate)}}class T0 extends D0{data(e){const t=this._delegate.data(e);return function KT(n,e){n||ft()}(void 0!==t),t}}class oo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new QC(e)}where(e,t,r){try{return new oo(this.firestore,Rf(this._delegate,function LP(n,e,t){const r=e,i=ZC("where",n);return new OP(i,r,t)}(e,t,r)))}catch(i){throw so(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new oo(this.firestore,Rf(this._delegate,function UP(n,e="asc"){const t=e,r=ZC("orderBy",n);return new FP(r,t)}(e,t)))}catch(r){throw so(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new oo(this.firestore,Rf(this._delegate,function VP(n){return oM("limit",n),new RM("limit",n,"F")}(e)))}catch(t){throw so(t,"limit()","Query.limit()")}}limitToLast(e){try{return new oo(this.firestore,Rf(this._delegate,function BP(n){return oM("limitToLast",n),new RM("limitToLast",n,"L")}(e)))}catch(t){throw so(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new oo(this.firestore,Rf(this._delegate,function jP(...n){return new MM("startAt",n,!0)}(...e)))}catch(t){throw so(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new oo(this.firestore,Rf(this._delegate,function $P(...n){return new MM("startAfter",n,!1)}(...e)))}catch(t){throw so(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new oo(this.firestore,Rf(this._delegate,function HP(...n){return new kM("endBefore",n,!1)}(...e)))}catch(t){throw so(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new oo(this.firestore,Rf(this._delegate,function GP(...n){return new kM("endAt",n,!0)}(...e)))}catch(t){throw so(t,"endAt()","Query.endAt()")}}isEqual(e){return gA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function QP(n){n=_n(n,Vs);const e=_n(n.firestore,Cr),t=ai(e),r=new kf(e);return function hP(n,e){const t=new si;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return(r=(0,Se.Z)(function*(i,a,l){try{const h=yield mg(i,a,!0),y=new iA(a,h.Hi),w=y.Wu(h.documents),S=y.applyChanges(w,!1);l.resolve(S.snapshot)}catch(h){const y=Cg(h,`Failed to execute query '${a} against cache`);l.reject(y)}}),function(i,a,l){return r.apply(this,arguments)})(yield HC(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Mf(e,r,n,i))}(this._delegate):"server"===e?.source?function JP(n){n=_n(n,Vs);const e=_n(n.firestore,Cr),t=ai(e),r=new kf(e);return _M(t,n._query,{source:"server"}).then(i=>new Mf(e,r,n,i))}(this._delegate):function YP(n){n=_n(n,Vs);const e=_n(n.firestore,Cr),t=ai(e),r=new kf(e);return xM(n._query),_M(t,n._query).then(i=>new Mf(e,r,n,i))}(this._delegate),t.then(r=>new PA(this.firestore,new Mf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=KM(e),r=ZM(e,i=>new PA(this.firestore,new Mf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return BM(this._delegate,t,r)}withConverter(e){return new oo(this.firestore,this._delegate.withConverter(e?Og.getInstance(this.firestore,e):null))}}class gO{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new T0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class PA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new oo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new T0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new gO(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new T0(this._firestore,r))})}isEqual(e){return FM(this._delegate,e._delegate)}}class w_ extends oo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new yu(this.firestore,e):null}doc(e){try{return new yu(this.firestore,void 0===e?BC(this._delegate):BC(this._delegate,e))}catch(t){throw so(t,"doc()","CollectionReference.doc()")}}add(e){return function eO(n,e){const t=_n(n.firestore,Cr),r=BC(n),i=YC(n.converter,e);return v_(t,[zC(kg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,sr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new yu(this.firestore,t))}isEqual(e){return dM(this._delegate,e._delegate)}withConverter(e){return new w_(this.firestore,this._delegate.withConverter(e?Og.getInstance(this.firestore,e):null))}}function Lg(n){return _n(n,br)}class OA{constructor(...e){this._delegate=new zd(...e)}static documentId(){return new OA(Er.keyField().canonicalString())}isEqual(e){return(e=(0,B.m9)(e))instanceof zd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Fg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function oO(){return new DA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Fg(e)}static delete(){const e=function sO(){return new w0("deleteField")}();return e._methodName="FieldValue.delete",new Fg(e)}static arrayUnion(...e){const t=function aO(...n){return new RP("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Fg(t)}static arrayRemove(...e){const t=function uO(...n){return new MP("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Fg(t)}static increment(e){const t=function lO(n){return new kP("increment",n)}(e);return t._methodName="FieldValue.increment",new Fg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const mO={Firestore:WM,GeoPoint:GC,Timestamp:gr,Blob:C0,Transaction:zM,WriteBatch:qM,DocumentReference:yu,DocumentSnapshot:D0,Query:oo,QueryDocumentSnapshot:T0,QuerySnapshot:PA,CollectionReference:w_,FieldPath:OA,FieldValue:Fg,setLogLevel:function pO(n){!function PI(n){_l.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function _O(n){(function yO(n,e){n.INTERNAL.registerComponent(new ha.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},mO)))})(n,(e,t)=>new WM(e,t,new fO)),n.registerVersion("@firebase/firestore-compat","0.1.26")}(dc.Z);var LA=F(6451),JC=F(5363),vO=F(6063);class wO extends Bi.x{constructor(e=1/0,t=1/0,r=vO.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let h=0;for(let y=1;y<r.length&&r[y]<=l;y+=2)h=y;h&&r.splice(0,h+1)}}}var YM=F(3099);function QM(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,YM.B)({connector:()=>new wO(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function JM(n,e){return(0,Xa.m)(e)?fr(()=>n,e):fr(()=>n)}var FA=F(9468);F(5867);const e1=new Map,DO={activated:!1,tokenObservers:[]},TO={initialized:!1,enabled:!1};function Zi(n){return e1.get(n)||DO}function _u(n,e){e1.set(n,e)}function eD(){return TO}class MO{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Se.Z)(function*(){t.stop();try{t.pending=new B.BH,yield function kO(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new B.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ao=new B.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function n1(n){if(!Zi(n).activated)throw ao.create("use-before-activation",{appName:n.name})}function jA(n,e){return $A.apply(this,arguments)}function $A(){return $A=(0,Se.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const G=yield l.getHeartbeatsHeader();G&&(a["X-Firebase-Client"]=G)}const h={method:"POST",body:JSON.stringify(e),headers:a};let y,w;try{y=yield fetch(n,h)}catch(G){throw ao.create("fetch-network-error",{originalErrorMessage:null===(r=G)||void 0===r?void 0:r.message})}if(200!==y.status)throw ao.create("fetch-status-error",{httpStatus:y.status});try{w=yield y.json()}catch(G){throw ao.create("fetch-parse-error",{originalErrorMessage:null===(i=G)||void 0===i?void 0:i.message})}const S=w.ttl.match(/^([\d.]+)(s)$/);if(!S||!S[2]||isNaN(Number(S[1])))throw ao.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${w.ttl}`});const R=1e3*Number(S[1]),L=Date.now();return{token:w.token,expireTimeMillis:L+R,issuedAtTimeMillis:L}}),$A.apply(this,arguments)}function LO(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const S0="firebase-app-check-store";let rD=null;function i1(){return rD||(rD=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(ao.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(S0,{keyPath:"compositeKey"})}}catch(r){e(ao.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),rD)}function HA(){return HA=(0,Se.Z)(function*(n,e){const r=(yield i1()).transaction(S0,"readwrite"),a=r.objectStore(S0).put({compositeKey:n,value:e});return new Promise((l,h)=>{a.onsuccess=y=>{l()},r.onerror=y=>{var w;h(ao.create("storage-set",{originalErrorMessage:null===(w=y.target.error)||void 0===w?void 0:w.message}))}})}),HA.apply(this,arguments)}const A0=new fa.Yd("@firebase/app-check");function zA(n,e){return(0,B.hl)()?function BO(n,e){return function s1(n,e){return HA.apply(this,arguments)}(function a1(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{A0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function u1(){return eD().enabled}function l1(){return KA.apply(this,arguments)}function KA(){return KA=(0,Se.Z)(function*(){const n=eD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),KA.apply(this,arguments)}const zO={error:"UNKNOWN_ERROR"};function qO(n){return B.US.encodeString(JSON.stringify(n),!1)}function iD(n){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,Se.Z)(function*(n,e=!1){const t=n.app;n1(t);const r=Zi(t);let a,i=r.token;if(i&&!E_(i)&&(_u(t,Object.assign(Object.assign({},r),{token:void 0})),i=void 0),!i){const y=yield r.cachedTokenPromise;y&&(E_(y)?i=y:yield zA(t,void 0))}if(!e&&i&&E_(i))return{token:i.token};let h,l=!1;if(u1()){r.exchangeTokenPromise||(r.exchangeTokenPromise=jA(LO(t,yield l1()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const y=yield r.exchangeTokenPromise;return yield zA(t,y),_u(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?A0.warn(y.message):A0.error(y),a=y}return i?a?h=E_(i)?{token:i.token,internalError:a}:h1(a):(h={token:i.token},_u(t,Object.assign(Object.assign({},r),{token:i})),yield zA(t,i)):h=h1(a),l&&d1(t,h),h}),ZA.apply(this,arguments)}function QA(n,e){const t=Zi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),_u(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function c1(n){const{app:e}=n,t=Zi(e);let r=t.tokenRefresher;r||(r=function KO(n){const{app:e}=n;return new MO((0,Se.Z)(function*(){let r;if(r=Zi(e).token?yield iD(n,!0):yield iD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Zi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),_u(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function d1(n,e){const t=Zi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function E_(n){return n.expireTimeMillis-Date.now()>0}function h1(n){return{token:qO(zO),error:n}}class ZO{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Zi(this.app);for(const t of e)QA(this.app,t.next);return Promise.resolve()}}const w1="app-check-internal";!function lL(){(0,eo._registerComponent)(new ha.wA("app-check",n=>function YO(n,e){return new ZO(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(w1).initialize()})),(0,eo._registerComponent)(new ha.wA(w1,n=>function QO(n){return{getToken:e=>iD(n,e),addTokenListener:e=>function YA(n,e,t,r){const{app:i}=n,a=Zi(i),l={next:t,error:r,type:e};if(_u(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,l]})),a.token&&E_(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),c1(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>c1(n))}(n,"INTERNAL",e),removeTokenListener:e=>QA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,eo.registerVersion)("@firebase/app-check","0.5.13")}();class oD{constructor(){return(0,ir.vb)("app-check")}}typeof window<"u"&&window;var pL=F(127);const nx=new m.OlP("angularfire2.auth.use-emulator"),rx=new m.OlP("angularfire2.auth.settings"),ix=new m.OlP("angularfire2.auth.tenant-id"),sx=new m.OlP("angularfire2.auth.langugage-code"),ox=new m.OlP("angularfire2.auth.use-device-language"),ax=new m.OlP("angularfire.auth.persistence"),ux=(n,e,t,r,i,a,l,h)=>(0,Wi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,a&&y.useDeviceLanguage(),l)for(const[w,S]of Object.entries(l))y.settings[w]=S;return h&&y.setPersistence(h),y},[t,r,i,a,l,h]);let lx=(()=>{class n{constructor(t,r,i,a,l,h,y,w,S,R,L,G){const J=new Bi.x,Ie=mt(void 0).pipe((0,JC.Q)(l.outsideAngular),fr(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,3704)))),(0,ut.U)(()=>(0,Wi.on)(t,a,r)),(0,ut.U)(Fe=>ux(Fe,a,h,w,S,R,y,L)),QM({bufferSize:1,refCount:!1}));if(Sr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=mt(null);else{Ie.pipe(le()).subscribe();const It=Ie.pipe(fr(jt=>jt.getRedirectResult().then(qt=>qt,()=>null)),ir.iC,QM({bufferSize:1,refCount:!1})),Dt=Ie.pipe(fr(jt=>new ni.y(qt=>({unsubscribe:a.runOutsideAngular(()=>jt.onAuthStateChanged(hn=>qt.next(hn),hn=>qt.error(hn),()=>qt.complete()))})))),Ut=Ie.pipe(fr(jt=>new ni.y(qt=>({unsubscribe:a.runOutsideAngular(()=>jt.onIdTokenChanged(hn=>qt.next(hn),hn=>qt.error(hn),()=>qt.complete()))}))));this.authState=It.pipe(JM(Dt),(0,FA.R)(l.outsideAngular),(0,JC.Q)(l.insideAngular)),this.user=It.pipe(JM(Ut),(0,FA.R)(l.outsideAngular),(0,JC.Q)(l.insideAngular)),this.idToken=this.user.pipe(fr(jt=>jt?(0,xn.D)(jt.getIdToken()):mt(null))),this.idTokenResult=this.user.pipe(fr(jt=>jt?(0,xn.D)(jt.getIdTokenResult()):mt(null))),this.credential=(0,LA.T)(It,J,this.authState.pipe(T(jt=>!jt))).pipe((0,ut.U)(jt=>jt?.user?jt:null),(0,FA.R)(l.outsideAngular),(0,JC.Q)(l.insideAngular))}return(0,Wi.pX)(this,Ie,a,{spy:{apply:(Fe,It,Dt)=>{(Fe.startsWith("signIn")||Fe.startsWith("createUser"))&&Dt.then(Ut=>J.next(Ut))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Wi.Dh),m.LFG(Wi.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(ir.HU),m.LFG(nx,8),m.LFG(rx,8),m.LFG(ix,8),m.LFG(sx,8),m.LFG(ox,8),m.LFG(ax,8),m.LFG(oD,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function I1(n,e){return function mL(n,e=vv.z){return new ni.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function cx(n,e){return I1(n,e).pipe((0,ut.U)(t=>({payload:t,type:"query"})))}function aD(n,e){return cx(n,e).pipe(nc(void 0),wv(),(0,ut.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const y=i.find(S=>S.doc.ref.isEqual(l.ref)),w=t?.payload.docs.find(S=>S.ref.isEqual(l.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(l.metadata)||!y&&w&&JSON.stringify(w.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),a}))}function b1(n,e,t){return aD(n,t).pipe(Nt((r,i)=>function _L(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function vL(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return dx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return dx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return dx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),WE(),(0,ut.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function dx(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function C1(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class D1{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=aD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ut.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(nc(void 0),wv(),T(([r,i])=>i.length>0||!r),(0,ut.U)(([r,i])=>i),ir.iC)}auditTrail(e){return this.stateChanges(e).pipe(Nt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=C1(e);return b1(this.query,t,this.afs.schedulers.outsideAngular).pipe(ir.iC)}valueChanges(e={}){return cx(this.query,this.afs.schedulers.outsideAngular).pipe((0,ut.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ir.iC)}get(e){return(0,xn.D)(this.query.get(e)).pipe(ir.iC)}add(e){return this.ref.add(e)}doc(e){return new T1(this.ref.doc(e),this.afs)}}class T1{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=S1(r,t);return new D1(i,a,this.afs)}snapshotChanges(){return function yL(n,e){return I1(n,e).pipe(nc(void 0),wv(),(0,ut.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ir.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ut.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,xn.D)(this.ref.get(e)).pipe(ir.iC)}}class wL{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?aD(this.query,this.afs.schedulers.outsideAngular).pipe((0,ut.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),T(t=>t.length>0),ir.iC):aD(this.query,this.afs.schedulers.outsideAngular).pipe(ir.iC)}auditTrail(e){return this.stateChanges(e).pipe(Nt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=C1(e);return b1(this.query,t,this.afs.schedulers.outsideAngular).pipe(ir.iC)}valueChanges(e={}){return cx(this.query,this.afs.schedulers.outsideAngular).pipe((0,ut.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),ir.iC)}get(e){return(0,xn.D)(this.query.get(e)).pipe(ir.iC)}}const EL=new m.OlP("angularfire2.enableFirestorePersistence"),IL=new m.OlP("angularfire2.firestore.persistenceSettings"),bL=new m.OlP("angularfire2.firestore.settings"),CL=new m.OlP("angularfire2.firestore.use-emulator");function S1(n,e=(t=>t)){return{query:e(n),ref:n}}let A1=(()=>{class n{constructor(t,r,i,a,l,h,y,w,S,R,L,G,J,Ie,Fe,It,Dt){this.schedulers=y;const Ut=(0,Wi.on)(t,h,r),jt=S;R&&ux(Ut,h,L,J,Ie,Fe,G,It),[this.firestore,this.persistenceEnabled$]=(0,Wi.cc)(`${Ut.name}.firestore`,"AngularFirestore",Ut.name,()=>{const qt=h.runOutsideAngular(()=>Ut.firestore());if(a&&qt.settings(a),jt&&qt.useEmulator(...jt),i&&!Sr(l)){const hn=()=>{try{return(0,xn.D)(qt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Ni){return typeof console<"u"&&console.warn(Ni),mt(!1)}};return[qt,h.runOutsideAngular(hn)]}return[qt,mt(!1)]},[a,jt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=S1(i,r),h=this.schedulers.ngZone.run(()=>a);return new D1(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new wL(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new T1(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Wi.Dh),m.LFG(Wi.xv,8),m.LFG(EL,8),m.LFG(bL,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(ir.HU),m.LFG(IL,8),m.LFG(CL,8),m.LFG(lx,8),m.LFG(nx,8),m.LFG(rx,8),m.LFG(ix,8),m.LFG(sx,8),m.LFG(ox,8),m.LFG(ax,8),m.LFG(oD,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),DL=(()=>{class n{constructor(t){this._afs=t}getInfoWURL(t){return this._afs.collection("games").doc(t).get().pipe((0,ut.U)(r=>r.data()))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(A1))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),TL=(()=>{class n{constructor(t){this._gService=t,this.gameTitle="Guess the Number",this.gameInfo="Guess the number between 1 and 100. You have 10 guesses. Good luck!"}ngOnInit(){this.getInfoWURL()}getInfoWURL(){let r=window.location.href.split("/"),i=r[r.length-1];console.log(i),this._gService.getInfoWURL(i).subscribe(a=>{this.gameTitle=a.name,this.gameInfo=a.info?a.info:"No info available"})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(DL))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-games"]],decls:14,vars:2,consts:[[1,"container-fluid","text-light"],[1,"ms-5","mt-4","mb-4"],[1,"row","container-fluid"],[1,"col-md-8","ms-5","pantallajuego"],[1,"col-md-3","ms-5","bg-info"],[1,"col-md-8","ms-5","mt-2","mb-3","contenedorinfo"],[1,"m-5"],[1,"ms-4","me-4"],[1,"m-5","textocontenedor"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"h3",1),m._uU(2),m.qZA()(),m.TgZ(3,"div",2)(4,"div",3),m._UZ(5,"router-outlet"),m.qZA(),m._UZ(6,"div",4),m.qZA(),m.TgZ(7,"div",2)(8,"div",5)(9,"h4",6),m._uU(10,"Informaci\xf3n del juego"),m.qZA(),m._UZ(11,"hr",7),m.TgZ(12,"div",8),m._uU(13),m.qZA()()()),2&t&&(m.xp6(2),m.Oqu(r.gameTitle),m.xp6(11),m.hij(" ",r.gameInfo," "))},dependencies:[su],styles:[".pantallajuego[_ngcontent-%COMP%]{height:650px;background:linear-gradient(to bottom,#f1f1f1,#f1f1f1)}.contenedorinfo[_ngcontent-%COMP%]{background-color:#f1f1f1}.textocontenedor[_ngcontent-%COMP%]{text-align:justify}"]}),n})();var SL=F(5226),I_=F.n(SL);let AL=(()=>{class n{constructor(t){this._afs=t}getInfo(){return this._afs.collection("games").doc("guessthenumber").get().pipe((0,ut.U)(t=>t.data()))}setScore(t){return this._afs.collection("games").doc("guessthenumber").collection("scores").add(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(A1))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function xL(n,e){if(1&n&&(m.TgZ(0,"div",5)(1,"div",6)(2,"h2",7),m._uU(3,"Intentos: "),m.TgZ(4,"span",8),m._uU(5),m.qZA()()(),m.TgZ(6,"div",9)(7,"h2",7),m._uU(8,"Puntuaci\xf3n: "),m.TgZ(9,"span",10),m._uU(10),m.qZA()()()()),2&n){const t=m.oxw();m.xp6(5),m.Oqu(t.tries),m.xp6(5),m.Oqu(t.puntuacion)}}function RL(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",11)(1,"div",12)(2,"h1"),m._uU(3,"Adivina el n\xfamero"),m.qZA(),m.TgZ(4,"p"),m._uU(5,"Elige el nivel de dificultad"),m.qZA(),m.TgZ(6,"div",13)(7,"button",14),m.NdJ("click",function(){m.CHM(t);const i=m.oxw();return m.KtG(i.setDifficulty("facil"))}),m._uU(8,"F\xe1cil"),m.qZA(),m.TgZ(9,"button",15),m.NdJ("click",function(){m.CHM(t);const i=m.oxw();return m.KtG(i.setDifficulty("medio"))}),m._uU(10,"Medio"),m.qZA(),m.TgZ(11,"button",16),m.NdJ("click",function(){m.CHM(t);const i=m.oxw();return m.KtG(i.setDifficulty("dificil"))}),m._uU(12,"Dif\xedcil"),m.qZA()()()()}}function ML(n,e){1&n&&(m.TgZ(0,"div",17)(1,"div",18)(2,"span",19),m._uU(3,"Loading..."),m.qZA()()())}function kL(n,e){if(1&n&&(m.TgZ(0,"div",11)(1,"div",21)(2,"div")(3,"span"),m._uU(4),m.qZA()()()()),2&n){const t=m.oxw(2);m.xp6(4),m.Oqu(t.hint)}}function NL(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",20)(1,"div",21)(2,"div",11)(3,"div",21)(4,"h1"),m._uU(5,"Adivina el n\xfamero"),m.qZA(),m.TgZ(6,"h3"),m._uU(7),m.qZA(),m.TgZ(8,"p"),m._uU(9),m.qZA(),m.TgZ(10,"div",13),m._UZ(11,"input",22)(12,"br"),m.qZA()()(),m.TgZ(13,"div",11),m._UZ(14,"div",21),m.qZA(),m.YNc(15,kL,5,1,"div",23),m.qZA(),m.TgZ(16,"div",24)(17,"div",11)(18,"div",21)(19,"button",25),m.NdJ("click",function(){m.CHM(t);const i=m.oxw();return m.KtG(i.return())}),m._uU(20,"Volver"),m.qZA(),m._uU(21," "),m.TgZ(22,"button",26),m.NdJ("click",function(){m.CHM(t);const i=m.oxw();return m.KtG(i.checkNumber())}),m._uU(23,"Adivinar"),m.qZA()()()()()}if(2&n){const t=m.oxw();m.xp6(7),m.hij("Dificultad: ",t.dSelected,""),m.xp6(2),m.hij("Elige un n\xfamero del 1 al ",t.numbers.length,""),m.xp6(6),m.Q6J("ngIf",""!=t.hint)}}let PL=(()=>{class n{constructor(t){this._gServ=t,this.dIsSelected=!1,this.dSelected="",this.loading=!1,this.numbers=[],this.tries=0,this.puntuacion=0,this.hint=""}ngOnInit(){this.getInfo()}getInfo(){this._gServ.getInfo().subscribe(t=>{})}setDifficulty(t){this.loading=!0,setTimeout(()=>{this.dSelected=t,this.loading=!1,this.dIsSelected=!0},500),this.generateRandomNumbers(t)}setNumber(t){console.log("set number",t)}checkNumber(){let t=document.getElementById("iptNumber");console.log(t,"Element");let r=t.value;console.log("n",r),this.tries++;let i=this.numbers.filter(a=>a.correct)[0].number;this.numbers[r-1].correct?I_().fire({title:"Correcto!",text:"Has acertado el n\xfamero",icon:"success",confirmButtonText:"Continuar",allowOutsideClick:!1}).then(()=>{switch(this.hint="",document.getElementById("iptNumber").value="",this.generateRandomNumbers(this.dSelected),this.dSelected){case"facil":default:this.puntuacion+=10;break;case"medio":this.puntuacion+=20;break;case"dificil":this.puntuacion+=30}}):I_().fire({title:"Incorrecto!",text:"No es lo que buscas",icon:"error",confirmButtonText:"Continuar",allowOutsideClick:!1}).then(()=>{switch(console.log(i,r),this.hint=i<r?"El n\xfamero debe ser menor que "+r:"El n\xfamero debe ser mayor que "+r,console.log(this.hint,"hint"),this.dSelected){case"facil":this.puntuacion=this.puntuacion>0?this.puntuacion-2:0;break;case"medio":15==this.tries&&I_().fire({title:"Agotaste tus intentos",text:"M\xe1s suerte la pr\xf3xima",icon:"error",allowOutsideClick:!1,confirmButtonText:"Intentar de nuevo"}).then(a=>{this.hint="",document.getElementById("iptNumber").value="",this.generateRandomNumbers(this.dSelected)}),this.puntuacion=this.puntuacion>0?this.puntuacion-4:0;break;case"dificil":5==this.tries&&I_().fire({title:"Agotaste tus intentos",text:"M\xe1s suerte la pr\xf3xima",icon:"error",allowOutsideClick:!1,confirmButtonText:"Intentar de nuevo"}).then(a=>{this.hint="",document.getElementById("iptNumber").value="",this.generateRandomNumbers(this.dSelected)}),this.puntuacion=this.puntuacion>0?this.puntuacion-6:0}}).then(()=>{let a=this.numbers.filter(l=>0==l.disabled);console.log(a)})}generateRandomNumbers(t){return this.generateRandomNumber()}generateRandomNumber(){this.numbers=[],this.tries=0;for(let r=1;r<=1e3;r++)this.numbers.push({number:r,correct:!1,disabled:!1});let t=Math.floor(999*Math.random())+1;return console.log(t),this.numbers[t].correct=!0,console.log(this.numbers),this.numbers}return(){this.puntuacion>0?I_().fire({title:"\xbfQuieres guardar tu puntuaci\xf3n?",text:"Tu puntuaci\xf3n es de "+this.puntuacion,icon:"question",input:"text",inputPlaceholder:"Ingresa tus iniciales",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, guardar!"}).then(t=>{t.isConfirmed&&this._gServ.setScore({name:t.value,score:this.puntuacion}).then(()=>{I_().fire("Guardado!","Tu puntuaci\xf3n ha sido guardada","success").then(()=>{this.puntuacion=0,this.loading=!0,this.dIsSelected=!1,this.dSelected="",setTimeout(()=>{this.loading=!1},500)})})}):(this.loading=!0,this.dIsSelected=!1,this.dSelected="",setTimeout(()=>{this.loading=!1},500))}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(AL))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-guessthenumber"]],decls:5,vars:4,consts:[["class","row justify-content-between",4,"ngIf"],[1,"container","fContainer"],["class","row justify-content-center ",4,"ngIf"],["class","row loading",4,"ngIf"],["class","row easyMode",4,"ngIf"],[1,"row","justify-content-between"],[1,"col-3"],[1,"text-center"],["id","intentos"],[1,"col-4"],["id","puntuacion"],[1,"row","justify-content-center"],[1,"col-md-12","fView"],["role","group","aria-label","Basic example",1,"btn-group"],["type","button","id","facil",1,"btn","btn-secondary",3,"click"],["type","button","id","medio",1,"btn","btn-secondary",3,"click"],["type","button","id","dificil",1,"btn","btn-secondary",3,"click"],[1,"row","loading"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"],[1,"row","easyMode"],[1,"col-md-12"],["type","number","id","iptNumber",1,"form-control"],["class","row justify-content-center",4,"ngIf"],[1,"col-md-12","mt-2"],["type","button","id","return",1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(m.YNc(0,xL,11,2,"div",0),m.TgZ(1,"div",1),m.YNc(2,RL,13,0,"div",2),m.YNc(3,ML,4,0,"div",3),m.YNc(4,NL,24,3,"div",4),m.qZA()),2&t&&(m.Q6J("ngIf",r.dIsSelected&&!r.loading),m.xp6(2),m.Q6J("ngIf",!r.dIsSelected&&!r.loading),m.xp6(1),m.Q6J("ngIf",r.loading&&!r.dIsSelected),m.xp6(1),m.Q6J("ngIf",r.dIsSelected&&!r.loading))},dependencies:[ur],styles:[".fView[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%}.fContainer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%}.loading[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;width:100%;background-color:#f1f1f1}"]}),n})();var OL=F(3532);var UL=F(5032);const x1="@firebase/database";let hx="";function M1(n){hx=n}class jL{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,B.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,B.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class $L{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,B.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const k1=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new jL(e)}}catch{}return new $L},Ug=k1("localStorage"),fx=k1("sessionStorage"),b_=new fa.Yd("@firebase/database"),N1=function(){let n=1;return function(){return n++}}(),P1=function(n){const e=(0,B.dS)(n),t=new B.gQ;t.update(e);const r=t.digest();return B.US.encodeByteArray(r)},x0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=x0.apply(null,r):e+="object"==typeof r?(0,B.Wl)(r):r,e+=" "}return e};let Vg=null,O1=!0;const L1=function(n,e){(0,B.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(b_.logLevel=fa.in.VERBOSE,Vg=b_.log.bind(b_),e&&fx.set("logging_enabled",!0)):"function"==typeof n?Vg=n:(Vg=null,fx.remove("logging_enabled"))},Yi=function(...n){if(!0===O1&&(O1=!1,null===Vg&&!0===fx.get("logging_enabled")&&L1(!0)),Vg){const e=x0.apply(null,n);Vg(e)}},R0=function(n){return function(...e){Yi(n,...e)}},px=function(...n){const e="FIREBASE INTERNAL ERROR: "+x0(...n);b_.error(e)},Lc=function(...n){const e=`FIREBASE FATAL ERROR: ${x0(...n)}`;throw b_.error(e),new Error(e)},Bs=function(...n){const e="FIREBASE WARNING: "+x0(...n);b_.warn(e)},uD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Kd="[MIN_NAME]",Fc="[MAX_NAME]",Bg=function(n,e){if(n===e)return 0;if(n===Kd||e===Fc)return-1;if(e===Kd||n===Fc)return 1;{const t=lD(n),r=lD(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},WL=function(n,e){return n===e?0:n<e?-1:1},M0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,B.Wl)(e))},gx=function(n){if("object"!=typeof n||null===n)return(0,B.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,B.Wl)(e[r]),t+=":",t+=gx(n[e[r]]);return t+="}",t},F1=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Qi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const U1=function(n){(0,B.hu)(!uD(n),"Invalid JSON number");const r=1023;let i,a,l,h,y;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const w=[];for(y=52;y;y-=1)w.push(l%2?1:0),l=Math.floor(l/2);for(y=11;y;y-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const S=w.join("");let R="";for(y=0;y<64;y+=8){let L=parseInt(S.substr(y,8),2).toString(16);1===L.length&&(L="0"+L),R+=L}return R.toLowerCase()},ZL=new RegExp("^-?(0*)\\d{1,10}$"),V1=-2147483648,mx=2147483647,lD=function(n){if(ZL.test(n)){const e=Number(n);if(e>=V1&&e<=mx)return e}return null},C_=function(n){try{n()}catch(e){setTimeout(()=>{throw Bs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},k0=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class QL{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Bs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class JL{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Yi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Bs(e)}}let N0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const G1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,q1="websocket",K1="long_polling";class _x{constructor(e,t,r,i,a=!1,l="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ug.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ug.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Z1(n,e,t){let r;if((0,B.hu)("string"==typeof e,"typeof type must == string"),(0,B.hu)("object"==typeof t,"typeof params must == object"),e===q1)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==K1)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function XL(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Qi(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class eF{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,B.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,B.p$)(this.counters_)}}const vx={},wx={};function Ex(n){const e=n.toString();return vx[e]||(vx[e]=new eF),vx[e]}class nF{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&C_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Pf{constructor(e,t,r,i,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=R0(e),this.stats_=Ex(t),this.urlFn=y=>(this.appCheckToken&&(y.ac=this.appCheckToken),Z1(t,K1,y))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new nF(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,B.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ix((...a)=>{const[l,h,y,w,S]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=y;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&G1.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Pf.forceAllow_=!0}static forceDisallow(){Pf.forceDisallow_=!0}static isAvailable(){return!((0,B.Yr)()||!Pf.forceAllow_&&(Pf.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,B.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,B.h$)(t),i=F1(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,B.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,B.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Ix{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,B.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=N1(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Ix.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Yi("frame writing exception"),h.stack&&Yi(h.stack),Yi(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Yi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,B.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Yi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let dD=null;typeof MozWebSocket<"u"?dD=MozWebSocket:typeof WebSocket<"u"&&(dD=WebSocket);let D_=(()=>{class n{constructor(t,r,i,a,l,h,y){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=R0(this.connId),this.stats_=Ex(r),this.connURL=n.connectionURL_(r,h,y,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const h={v:"5"};return!(0,B.Yr)()&&typeof location<"u"&&location.hostname&&G1.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),l&&(h.p=l),Z1(t,q1,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ug.set("previous_websocket_failure",!0);try{let i;if((0,B.Yr)()){i={headers:{"User-Agent":`Firebase/5/${hx}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new dD(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==dD&&!n.forceDisallow_}static previouslyFailed(){return Ug.isInMemoryStorage||!0===Ug.get("previous_websocket_failure")}markConnectionHealthy(){Ug.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,B.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,B.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,B.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=F1(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),nk=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Pf,D_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=D_&&D_.isAvailable();let i=r&&!D_.previouslyFailed();if(t.webSocketOnly&&(r||Bs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[D_];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class lk{constructor(e,t,r,i,a,l,h,y,w,S){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=y,this.onKill_=w,this.lastSessionId=S,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=R0("c:"+this.id+":"),this.transportManager_=new nk(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=k0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=M0("t",e),r=M0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=M0("t",e),r=M0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=M0("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?px("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):px("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Bs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),k0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):k0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ug.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ck{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class dk{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,B.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,B.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class hD extends dk{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,B.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new hD}getInitialEvent(e){return(0,B.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Gn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Rn(){return new Gn("")}function un(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Of(n){return n.pieces_.length-n.pieceNum_}function or(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Gn(n.pieces_,e)}function Cx(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function P0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function pk(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Gn(e,0)}function Nr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Gn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Gn(t,0)}function ln(n){return n.pieceNum_>=n.pieces_.length}function uo(n,e){const t=un(n),r=un(e);if(null===t)return e;if(t===r)return uo(or(n),or(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function CF(n,e){const t=P0(n,0),r=P0(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Bg(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function Dx(n,e){if(Of(n)!==Of(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function vu(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Of(n)>Of(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class DF{constructor(e,t){this.errorPrefix_=t,this.parts_=P0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,B.ug)(this.parts_[r]);gk(this)}}function gk(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+jg(n))}function jg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Tx extends dk{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Tx}getInitialEvent(e){return(0,B.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const O0=1e3;let pD,$g=(()=>{class n extends ck{constructor(t,r,i,a,l,h,y,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=y,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=R0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=O0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,B.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Tx.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&hD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,B.Wl)(l)),(0,B.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new B.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:h=>{const y=h.d;"ok"===h.s?r.resolve(y):r.reject(y)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,B.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,B.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const y={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,y),this.connected_&&this.sendListen_(y)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,y=>{const w=y.d,S=y.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",y),"ok"!==S&&this.removeListen_(i,a),t.onComplete&&t.onComplete(S,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,B.r3)(t,"w")){const i=(0,B.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();Bs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,B.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,B.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,h=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,B.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,B.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):px("Unrecognized action received from server: "+(0,B.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,B.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=O0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=O0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=O0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Se.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let y=!1,w=null;const S=function(){w?w.close():(y=!0,a())};t.realtime_={close:S,sendRequest:function(G){(0,B.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(G)}};const L=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[G,J]=yield Promise.all([t.authTokenProvider_.getToken(L),t.appCheckTokenProvider_.getToken(L)]);y?Yi("getToken() completed but was canceled"):(Yi("getToken() completed. Creating connection."),t.authToken_=G&&G.accessToken,t.appCheckToken_=J&&J.token,w=new lk(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,Ie=>{Bs(Ie+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(G){t.log_("Failed to get token: "+G),y||(t.repoInfo_.nodeAdmin&&Bs(G),S())}}})()}interrupt(t){Yi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Yi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,B.xb)(this.interruptReasons_)&&(this.reconnectDelay_=O0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>gx(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Gn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Yi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Yi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,B.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+hx.replace(/\./g,"-")]=1,(0,B.uI)()?t["framework.cordova"]=1:(0,B.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=hD.getInstance().currentlyOnline();return(0,B.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class dn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new dn(e,t)}}class fD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new dn(Kd,e),i=new dn(Kd,t);return 0!==this.compare(r,i)}minPost(){return dn.MIN}}class _k extends fD{static get __EMPTY_NODE(){return pD}static set __EMPTY_NODE(e){pD=e}compare(e,t){return Bg(e.name,t.name)}isDefinedOn(e){throw(0,B.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return dn.MIN}maxPost(){return new dn(Fc,pD)}makePost(e,t){return(0,B.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new dn(e,pD)}toString(){return".key"}}const Uc=new _k;class gD{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Ax,Rl=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??jo.EMPTY_NODE,this.right=l??jo.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return jo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return jo.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class jo{constructor(e,t=jo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new jo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Rl.BLACK,null,null))}remove(e){return new jo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Rl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new gD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new gD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new gD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new gD(this.root_,null,this.comparator_,!0,e)}}function NF(n,e){return Bg(n.name,e.name)}function Sx(n,e){return Bg(n,e)}jo.EMPTY_NODE=new class kF{copy(e,t,r,i,a){return this}insert(e,t,r){return new Rl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const vk=function(n){return"number"==typeof n?"number:"+U1(n):"string:"+n},wk=function(n){if(n.isLeafNode()){const e=n.val();(0,B.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,B.r3)(e,".sv"),"Priority must be a string or number.")}else(0,B.hu)(n===Ax||n.isEmpty(),"priority of unexpected type.");(0,B.hu)(n===Ax||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Ek,Ik,bk,T_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,B.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),wk(this.priorityNode_)}static set __childrenNodeConstructor(t){Ek=t}static get __childrenNodeConstructor(){return Ek}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ln(t)?this:".priority"===un(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=un(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,B.hu)(".priority"!==i||1===Of(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(or(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+vk(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?U1(this.value_):this.value_,this.lazyHash_=P1(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,B.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,B.hu)(a>=0,"Unknown leaf type: "+r),(0,B.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const mr=new class FF extends fD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Bg(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return dn.MIN}maxPost(){return new dn(Fc,new T_("[PRIORITY-POST]",bk))}makePost(e,t){const r=Ik(e);return new dn(t,new T_("[PRIORITY-POST]",r))}toString(){return".priority"}},UF=Math.log(2);class VF{constructor(e){this.count=parseInt(Math.log(e+1)/UF,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const mD=function(n,e,t,r){n.sort(e);const i=function(y,w){const S=w-y;let R,L;if(0===S)return null;if(1===S)return R=n[y],L=t?t(R):R,new Rl(L,R.node,Rl.BLACK,null,null);{const G=parseInt(S/2,10)+y,J=i(y,G),Ie=i(G+1,w);return R=n[G],L=t?t(R):R,new Rl(L,R.node,Rl.BLACK,J,Ie)}},h=function(y){let w=null,S=null,R=n.length;const L=function(J,Ie){const Fe=R-J,It=R;R-=J;const Dt=i(Fe+1,It),Ut=n[Fe],jt=t?t(Ut):Ut;G(new Rl(jt,Ut.node,Ie,null,Dt))},G=function(J){w?(w.left=J,w=J):(S=J,w=J)};for(let J=0;J<y.count;++J){const Ie=y.nextBitIsOne(),Fe=Math.pow(2,y.count-(J+1));Ie?L(Fe,Rl.BLACK):(L(Fe,Rl.BLACK),L(Fe,Rl.RED))}return S}(new VF(n.length));return new jo(r||e,h)};let xx;const S_={};class Zd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,B.hu)(S_&&mr,"ChildrenNode.ts has not been loaded"),xx=xx||new Zd({".priority":S_},{".priority":mr}),xx}get(e){const t=(0,B.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof jo?t:null}hasIndex(e){return(0,B.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,B.hu)(e!==Uc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(dn.Wrap);let h,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();h=i?mD(r,e.getCompare()):S_;const y=e.toString(),w=Object.assign({},this.indexSet_);w[y]=e;const S=Object.assign({},this.indexes_);return S[y]=h,new Zd(S,w)}addToIndexes(e,t){const r=(0,B.UI)(this.indexes_,(i,a)=>{const l=(0,B.DV)(this.indexSet_,a);if((0,B.hu)(l,"Missing index implementation for "+a),i===S_){if(l.isDefinedOn(e.node)){const h=[],y=t.getIterator(dn.Wrap);let w=y.getNext();for(;w;)w.name!==e.name&&h.push(w),w=y.getNext();return h.push(e),mD(h,l.getCompare())}return S_}{const h=t.get(e.name);let y=i;return h&&(y=y.remove(new dn(e.name,h))),y.insert(e,e.node)}});return new Zd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,B.UI)(this.indexes_,i=>{if(i===S_)return i;{const a=t.get(e.name);return a?i.remove(new dn(e.name,a)):i}});return new Zd(r,this.indexSet_)}}let L0,Qt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&wk(this.priorityNode_),this.children_.isEmpty()&&(0,B.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return L0||(L0=new n(new jo(Sx),null,Zd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||L0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?L0:r}}getChild(t){const r=un(t);return null===r?this:this.getImmediateChild(r).getChild(or(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,B.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new dn(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?L0:this.priorityNode_;return new n(a,h,l)}}updateChild(t,r){const i=un(t);if(null===i)return r;{(0,B.hu)(".priority"!==un(t)||1===Of(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(or(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(mr,(h,y)=>{r[h]=y.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):l=!1}),!t&&l&&a<2*i){const h=[];for(const y in r)h[y]=r[y];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+vk(this.getPriority().val())+":"),this.forEachChild(mr,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":P1(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new dn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new dn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new dn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,dn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,dn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===F0?-1:0}withIndex(t){if(t===Uc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Uc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(mr),a=r.getIterator(mr);let l=i.getNext(),h=a.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=a.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===Uc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const F0=new class BF extends Qt{constructor(){super(new jo(Sx),Qt.EMPTY_NODE,Zd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Qt.EMPTY_NODE}isEmpty(){return!1}};function $r(n,e=null){if(null===n)return Qt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,B.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new T_(n,$r(e));if(n instanceof Array){let t=Qt.EMPTY_NODE;return Qi(n,(r,i)=>{if((0,B.r3)(n,r)&&"."!==r.substring(0,1)){const a=$r(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority($r(e))}{const t=[];let r=!1;if(Qi(n,(l,h)=>{if("."!==l.substring(0,1)){const y=$r(h);y.isEmpty()||(r=r||!y.getPriority().isEmpty(),t.push(new dn(l,y)))}}),0===t.length)return Qt.EMPTY_NODE;const a=mD(t,NF,l=>l.name,Sx);if(r){const l=mD(t,mr.getCompare());return new Qt(a,$r(e),new Zd({".priority":l},{".priority":mr}))}return new Qt(a,$r(e),Zd.Default)}}Object.defineProperties(dn,{MIN:{value:new dn(Kd,Qt.EMPTY_NODE)},MAX:{value:new dn(Fc,F0)}}),_k.__EMPTY_NODE=Qt.EMPTY_NODE,T_.__childrenNodeConstructor=Qt,function PF(n){Ax=n}(F0),function LF(n){bk=n}(F0),function OF(n){Ik=n}($r);class Rx extends fD{constructor(e){super(),this.indexPath_=e,(0,B.hu)(!ln(e)&&".priority"!==un(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Bg(e.name,t.name):a}makePost(e,t){const r=$r(e),i=Qt.EMPTY_NODE.updateChild(this.indexPath_,r);return new dn(t,i)}maxPost(){const e=Qt.EMPTY_NODE.updateChild(this.indexPath_,F0);return new dn(Fc,e)}toString(){return P0(this.indexPath_,0).join("/")}}const Mx=new class $F extends fD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Bg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return dn.MIN}maxPost(){return dn.MAX}makePost(e,t){const r=$r(e);return new dn(t,r)}toString(){return".value"}},A_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",HF=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=A_.charAt(t%64),t=Math.floor(t/64);(0,B.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=A_.charAt(e[i]);return(0,B.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),Tk=function(n){if(n===""+mx)return"-";const e=lD(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Fc;const a=A_.charAt(A_.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},Sk=function(n){if(n===""+V1)return Kd;const e=lD(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+mx:(delete t[t.length-1],t.join("")):(t[t.length-1]=A_.charAt(A_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function Ak(n){return{type:"value",snapshotNode:n}}function x_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function U0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function V0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Nx{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,B.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(U0(t,h)):(0,B.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(x_(t,r)):l.trackChildChange(V0(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(mr,(i,a)=>{t.hasChild(i)||r.trackChildChange(U0(i,a))}),t.isLeafNode()||t.forEachChild(mr,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(V0(i,a,l))}else r.trackChildChange(x_(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Qt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class B0{constructor(e){this.indexedFilter_=new Nx(e.getIndex()),this.index_=e.getIndex(),this.startPost_=B0.getStartPost_(e),this.endPost_=B0.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new dn(t,r))||(r=Qt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Qt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Qt.EMPTY_NODE);const a=this;return t.forEachChild(mr,(l,h)=>{a.matches(new dn(l,h))||(i=i.updateImmediateChild(l,Qt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class WF{constructor(e){this.rangedFilter_=new B0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new dn(t,r))||(r=Qt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Qt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Qt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const h=a.getNext();let y;if(y=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!y)break;i=i.updateImmediateChild(h.name,h.node),l++}}else{let a,l,h,y;if(i=t.withIndex(this.index_),i=i.updatePriority(Qt.EMPTY_NODE),this.reverse_){y=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const R=this.index_.getCompare();h=(L,G)=>R(G,L)}else y=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let w=0,S=!1;for(;y.hasNext();){const R=y.getNext();!S&&h(a,R)<=0&&(S=!0),S&&w<this.limit_&&h(R,l)<=0?w++:i=i.updateImmediateChild(R.name,Qt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const R=this.index_.getCompare();l=(L,G)=>R(G,L)}else l=this.index_.getCompare();const h=e;(0,B.hu)(h.numChildren()===this.limit_,"");const y=new dn(t,r),w=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),S=this.rangedFilter_.matches(y);if(h.hasChild(t)){const R=h.getImmediateChild(t);let L=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=L&&(L.name===t||h.hasChild(L.name));)L=i.getChildAfterChild(this.index_,L,this.reverse_);const G=null==L?1:l(L,y);if(S&&!r.isEmpty()&&G>=0)return a?.trackChildChange(V0(t,r,R)),h.updateImmediateChild(t,r);{a?.trackChildChange(U0(t,R));const Ie=h.updateImmediateChild(t,Qt.EMPTY_NODE);return null!=L&&this.rangedFilter_.matches(L)?(a?.trackChildChange(x_(L.name,L.node)),Ie.updateImmediateChild(L.name,L.node)):Ie}}return r.isEmpty()?e:S&&l(w,y)>=0?(null!=a&&(a.trackChildChange(U0(w.name,w.node)),a.trackChildChange(x_(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(w.name,Qt.EMPTY_NODE)):e}}class yD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=mr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,B.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,B.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Kd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,B.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,B.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Fc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,B.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===mr}copy(){const e=new yD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Px(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ox(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function _D(n,e){const t=n.copy();return t.index_=e,t}function xk(n){const e={};if(n.isDefault())return e;let t;return n.index_===mr?t="$priority":n.index_===Mx?t="$value":n.index_===Uc?t="$key":((0,B.hu)(n.index_ instanceof Rx,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,B.Wl)(t),n.startSet_&&(e.startAt=(0,B.Wl)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,B.Wl)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,B.Wl)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,B.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Rk(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==mr&&(e.i=n.index_.toString()),e}class vD extends ck{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=R0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,B.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=vD.getListenId_(e,r),h={};this.listens_[l]=h;const y=xk(e._queryParams);this.restRequest_(a+".json",y,(w,S)=>{let R=S;if(404===w&&(R=null,w=null),null===w&&this.onDataUpdate_(a,R,!1,r),(0,B.DV)(this.listens_,l)===h){let L;L=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(L,null)}})}unlisten(e,t){const r=vD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=xk(e._queryParams),r=e._path.toString(),i=new B.BH;return this.restRequest_(r+".json",t,(a,l)=>{let h=l;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,B.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let y=null;if(h.status>=200&&h.status<300){try{y=(0,B.cI)(h.responseText)}catch{Bs("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,y)}else 401!==h.status&&404!==h.status&&Bs("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class QF{constructor(){this.rootNode_=Qt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function wD(){return{value:null,children:new Map}}function R_(n,e,t){if(ln(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=un(e);n.children.has(r)||n.children.set(r,wD()),R_(n.children.get(r),e=or(e),t)}}function Lx(n,e){if(ln(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(mr,(r,i)=>{R_(n,new Gn(r),i)}),Lx(n,e)}}if(n.children.size>0){const t=un(e);return e=or(e),n.children.has(t)&&Lx(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Fx(n,e,t){null!==n.value?t(e,n.value):function JF(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Fx(i,new Gn(e.toString()+"/"+r),t)})}class XF{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Qi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class n2{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new XF(e);const r=1e4+2e4*Math.random();k0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Qi(e,(i,a)=>{a>0&&(0,B.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),k0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var wu=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(wu||(wu={})),wu))();function Bx(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class ED{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=wu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(ln(this.path)){if(null!=this.affectedTree.value)return(0,B.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Gn(e));return new ED(Rn(),t,this.revert)}}return(0,B.hu)(un(this.path)===e,"operationForChild called for unrelated child."),new ED(or(this.path),this.affectedTree,this.revert)}}class j0{constructor(e,t){this.source=e,this.path=t,this.type=wu.LISTEN_COMPLETE}operationForChild(e){return ln(this.path)?new j0(this.source,Rn()):new j0(this.source,or(this.path))}}class Hg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=wu.OVERWRITE}operationForChild(e){return ln(this.path)?new Hg(this.source,Rn(),this.snap.getImmediateChild(e)):new Hg(this.source,or(this.path),this.snap)}}class M_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=wu.MERGE}operationForChild(e){if(ln(this.path)){const t=this.children.subtree(new Gn(e));return t.isEmpty()?null:t.value?new Hg(this.source,Rn(),t.value):new M_(this.source,Rn(),t)}return(0,B.hu)(un(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new M_(this.source,or(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Lf{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ln(e))return this.isFullyInitialized()&&!this.filtered_;const t=un(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class r2{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function $0(n,e,t,r,i,a){const l=r.filter(h=>h.type===t);l.sort((h,y)=>function o2(n,e,t){if(null==e.childName||null==t.childName)throw(0,B.g5)("Should only compare child_ events.");const r=new dn(e.childName,e.snapshotNode),i=new dn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,y)),l.forEach(h=>{const y=function s2(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(w=>{w.respondsTo(h.type)&&e.push(w.createEvent(y,n.query_))})})}function ID(n,e){return{eventCache:n,serverCache:e}}function H0(n,e,t,r){return ID(new Lf(e,t,r),n.serverCache)}function kk(n,e,t,r){return ID(n.eventCache,new Lf(e,t,r))}function bD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Gg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let jx;class yr{constructor(e,t=(()=>(jx||(jx=new jo(WL)),jx))()){this.value=e,this.children=t}static fromObject(e){let t=new yr(null);return Qi(e,(r,i)=>{t=t.set(new Gn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Rn(),value:this.value};if(ln(e))return null;{const r=un(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(or(e),t);return null!=a?{path:Nr(new Gn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ln(e))return this;{const t=un(e),r=this.children.get(t);return null!==r?r.subtree(or(e)):new yr(null)}}set(e,t){if(ln(e))return new yr(t,this.children);{const r=un(e),a=(this.children.get(r)||new yr(null)).set(or(e),t),l=this.children.insert(r,a);return new yr(this.value,l)}}remove(e){if(ln(e))return this.children.isEmpty()?new yr(null):new yr(null,this.children);{const t=un(e),r=this.children.get(t);if(r){const i=r.remove(or(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new yr(null):new yr(this.value,a)}return this}}get(e){if(ln(e))return this.value;{const t=un(e),r=this.children.get(t);return r?r.get(or(e)):null}}setTree(e,t){if(ln(e))return t;{const r=un(e),a=(this.children.get(r)||new yr(null)).setTree(or(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new yr(this.value,l)}}fold(e){return this.fold_(Rn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Nr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Rn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(ln(e))return null;{const a=un(e),l=this.children.get(a);return l?l.findOnPath_(or(e),Nr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Rn(),t)}foreachOnPath_(e,t,r){if(ln(e))return this;{this.value&&r(t,this.value);const i=un(e),a=this.children.get(i);return a?a.foreachOnPath_(or(e),Nr(t,i),r):new yr(null)}}foreach(e){this.foreach_(Rn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Nr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Ml{constructor(e){this.writeTree_=e}static empty(){return new Ml(new yr(null))}}function G0(n,e,t){if(ln(e))return new Ml(new yr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=uo(i,e);return a=a.updateChild(l,t),new Ml(n.writeTree_.set(i,a))}{const i=new yr(t),a=n.writeTree_.setTree(e,i);return new Ml(a)}}}function $x(n,e,t){let r=n;return Qi(t,(i,a)=>{r=G0(r,Nr(e,i),a)}),r}function Nk(n,e){if(ln(e))return Ml.empty();{const t=n.writeTree_.setTree(e,new yr(null));return new Ml(t)}}function Hx(n,e){return null!=Wg(n,e)}function Wg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(uo(t.path,e)):null}function Pk(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(mr,(r,i)=>{e.push(new dn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new dn(r,i.value))}),e}function Ff(n,e){if(ln(e))return n;{const t=Wg(n,e);return new Ml(null!=t?new yr(t):n.writeTree_.subtree(e))}}function Gx(n){return n.writeTree_.isEmpty()}function k_(n,e){return Ok(Rn(),n.writeTree_,e)}function Ok(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,B.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=Ok(Nr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Nr(n,".priority"),r)),t}}function CD(n,e){return Bk(e,n)}function h2(n,e){if(n.snap)return vu(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&vu(Nr(n.path,t),e))return!0;return!1}function p2(n){return n.visible}function Lk(n,e,t){let r=Ml.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let h;if(a.snap)vu(t,l)?(h=uo(t,l),r=G0(r,h,a.snap)):vu(l,t)&&(h=uo(l,t),r=G0(r,Rn(),a.snap.getChild(h)));else{if(!a.children)throw(0,B.g5)("WriteRecord should have .snap or .children");if(vu(t,l))h=uo(t,l),r=$x(r,h,a.children);else if(vu(l,t))if(h=uo(l,t),ln(h))r=$x(r,Rn(),a.children);else{const y=(0,B.DV)(a.children,un(h));if(y){const w=y.getChild(or(h));r=G0(r,Rn(),w)}}}}}return r}function Fk(n,e,t,r,i){if(r||i){const a=Ff(n.visibleWrites,e);return!i&&Gx(a)?t:i||null!=t||Hx(a,Rn())?k_(Lk(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(vu(w.path,e)||vu(e,w.path))},e),t||Qt.EMPTY_NODE):null}{const a=Wg(n.visibleWrites,e);if(null!=a)return a;{const l=Ff(n.visibleWrites,e);return Gx(l)?t:null!=t||Hx(l,Rn())?k_(l,t||Qt.EMPTY_NODE):null}}}function DD(n,e,t,r){return Fk(n.writeTree,n.treePath,e,t,r)}function Wx(n,e){return function g2(n,e,t){let r=Qt.EMPTY_NODE;const i=Wg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(mr,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=Ff(n.visibleWrites,e);return t.forEachChild(mr,(l,h)=>{const y=k_(Ff(a,new Gn(l)),h);r=r.updateImmediateChild(l,y)}),Pk(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return Pk(Ff(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function Uk(n,e,t,r){return function m2(n,e,t,r,i){(0,B.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Nr(e,t);if(Hx(n.visibleWrites,a))return null;{const l=Ff(n.visibleWrites,a);return Gx(l)?i.getChild(t):k_(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function TD(n,e){return function _2(n,e){return Wg(n.visibleWrites,e)}(n.writeTree,Nr(n.treePath,e))}function zx(n,e,t){return function y2(n,e,t,r){const i=Nr(e,t),a=Wg(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?k_(Ff(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function Vk(n,e){return Bk(Nr(n.treePath,e),n.writeTree)}function Bk(n,e){return{treePath:n,writeTree:e}}class I2{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,B.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,B.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,V0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,U0(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,x_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,B.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,V0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const jk=new class b2{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class qx{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Lf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return zx(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Gg(this.viewCache_),a=function E2(n,e,t,r,i,a){return function v2(n,e,t,r,i,a,l){let h;const y=Ff(n.visibleWrites,e),w=Wg(y,Rn());if(null!=w)h=w;else{if(null==t)return[];h=k_(y,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const S=[],R=l.getCompare(),L=a?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let G=L.getNext();for(;G&&S.length<i;)0!==R(G,r)&&S.push(G),G=L.getNext();return S}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function $k(n,e,t,r,i,a){const l=e.eventCache;if(null!=TD(r,t))return e;{let h,y;if(ln(t))if((0,B.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=Gg(e),R=Wx(r,w instanceof Qt?w:Qt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),R,a)}else{const w=DD(r,Gg(e));h=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=un(t);if(".priority"===w){(0,B.hu)(1===Of(t),"Can't have a priority with additional path components");const S=l.getNode();y=e.serverCache.getNode();const R=Uk(r,t,S,y);h=null!=R?n.filter.updatePriority(S,R):l.getNode()}else{const S=or(t);let R;if(l.isCompleteForChild(w)){y=e.serverCache.getNode();const L=Uk(r,t,l.getNode(),y);R=null!=L?l.getNode().getImmediateChild(w).updateChild(S,L):l.getNode().getImmediateChild(w)}else R=zx(r,w,e.serverCache);h=null!=R?n.filter.updateChild(l.getNode(),w,R,S,i,a):l.getNode()}}return H0(e,h,l.isFullyInitialized()||ln(t),n.filter.filtersNodes())}}function SD(n,e,t,r,i,a,l,h){const y=e.serverCache;let w;const S=l?n.filter:n.filter.getIndexedFilter();if(ln(t))w=S.updateFullNode(y.getNode(),r,null);else if(S.filtersNodes()&&!y.isFiltered()){const G=y.getNode().updateChild(t,r);w=S.updateFullNode(y.getNode(),G,null)}else{const G=un(t);if(!y.isCompleteForPath(t)&&Of(t)>1)return e;const J=or(t),Fe=y.getNode().getImmediateChild(G).updateChild(J,r);w=".priority"===G?S.updatePriority(y.getNode(),Fe):S.updateChild(y.getNode(),G,Fe,J,jk,null)}const R=kk(e,w,y.isFullyInitialized()||ln(t),S.filtersNodes());return $k(n,R,t,i,new qx(i,R,a),h)}function Kx(n,e,t,r,i,a,l){const h=e.eventCache;let y,w;const S=new qx(i,e,a);if(ln(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,l),y=H0(e,w,!0,n.filter.filtersNodes());else{const R=un(t);if(".priority"===R)w=n.filter.updatePriority(e.eventCache.getNode(),r),y=H0(e,w,h.isFullyInitialized(),h.isFiltered());else{const L=or(t),G=h.getNode().getImmediateChild(R);let J;if(ln(L))J=r;else{const Ie=S.getCompleteChild(R);J=null!=Ie?".priority"===Cx(L)&&Ie.getChild(pk(L)).isEmpty()?Ie:Ie.updateChild(L,r):Qt.EMPTY_NODE}y=G.equals(J)?e:H0(e,n.filter.updateChild(h.getNode(),R,J,L,S,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return y}function Hk(n,e){return n.eventCache.isCompleteForChild(e)}function Gk(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Zx(n,e,t,r,i,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,y=e;w=ln(t)?r:new yr(null).setTree(t,r);const S=e.serverCache.getNode();return w.children.inorderTraversal((R,L)=>{if(S.hasChild(R)){const J=Gk(0,e.serverCache.getNode().getImmediateChild(R),L);y=SD(n,y,new Gn(R),J,i,a,l,h)}}),w.children.inorderTraversal((R,L)=>{const G=!e.serverCache.isCompleteForChild(R)&&null===L.value;if(!S.hasChild(R)&&!G){const Ie=Gk(0,e.serverCache.getNode().getImmediateChild(R),L);y=SD(n,y,new Gn(R),Ie,i,a,l,h)}}),y}class k2{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Nx(r.getIndex()),a=function zF(n){return n.loadsAllData()?new Nx(n.getIndex()):n.hasLimit()?new WF(n):new B0(n)}(r);this.processor_=function C2(n){return{filter:n}}(a);const l=t.serverCache,h=t.eventCache,y=i.updateFullNode(Qt.EMPTY_NODE,l.getNode(),null),w=a.updateFullNode(Qt.EMPTY_NODE,h.getNode(),null),S=new Lf(y,l.isFullyInitialized(),i.filtersNodes()),R=new Lf(w,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=ID(R,S),this.eventGenerator_=new r2(this.query_)}get query(){return this.query_}}function O2(n,e){const t=Gg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!ln(e)&&!t.getImmediateChild(un(e)).isEmpty())?t.getChild(e):null}function Wk(n){return 0===n.eventRegistrations_.length}function zk(n,e,t){const r=[];if(t){(0,B.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function qk(n,e,t,r){e.type===wu.MERGE&&null!==e.source.queryId&&((0,B.hu)(Gg(n.viewCache_),"We should always have a full cache before handling merges"),(0,B.hu)(bD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function T2(n,e,t,r,i){const a=new I2;let l,h;if(t.type===wu.OVERWRITE){const w=t;w.source.fromUser?l=Kx(n,e,w.path,w.snap,r,i,a):((0,B.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered()&&!ln(w.path),l=SD(n,e,w.path,w.snap,r,i,h,a))}else if(t.type===wu.MERGE){const w=t;w.source.fromUser?l=function A2(n,e,t,r,i,a,l){let h=e;return r.foreach((y,w)=>{const S=Nr(t,y);Hk(e,un(S))&&(h=Kx(n,h,S,w,i,a,l))}),r.foreach((y,w)=>{const S=Nr(t,y);Hk(e,un(S))||(h=Kx(n,h,S,w,i,a,l))}),h}(n,e,w.path,w.children,r,i,a):((0,B.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered(),l=Zx(n,e,w.path,w.children,r,i,h,a))}else if(t.type===wu.ACK_USER_WRITE){const w=t;l=w.revert?function M2(n,e,t,r,i,a){let l;if(null!=TD(r,t))return e;{const h=new qx(r,e,i),y=e.eventCache.getNode();let w;if(ln(t)||".priority"===un(t)){let S;if(e.serverCache.isFullyInitialized())S=DD(r,Gg(e));else{const R=e.serverCache.getNode();(0,B.hu)(R instanceof Qt,"serverChildren would be complete if leaf node"),S=Wx(r,R)}w=n.filter.updateFullNode(y,S,a)}else{const S=un(t);let R=zx(r,S,e.serverCache);null==R&&e.serverCache.isCompleteForChild(S)&&(R=y.getImmediateChild(S)),w=null!=R?n.filter.updateChild(y,S,R,or(t),h,a):e.eventCache.getNode().hasChild(S)?n.filter.updateChild(y,S,Qt.EMPTY_NODE,or(t),h,a):y,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=DD(r,Gg(e)),l.isLeafNode()&&(w=n.filter.updateFullNode(w,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=TD(r,Rn()),H0(e,w,l,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function x2(n,e,t,r,i,a,l){if(null!=TD(i,t))return e;const h=e.serverCache.isFiltered(),y=e.serverCache;if(null!=r.value){if(ln(t)&&y.isFullyInitialized()||y.isCompleteForPath(t))return SD(n,e,t,y.getNode().getChild(t),i,a,h,l);if(ln(t)){let w=new yr(null);return y.getNode().forEachChild(Uc,(S,R)=>{w=w.set(new Gn(S),R)}),Zx(n,e,t,w,i,a,h,l)}return e}{let w=new yr(null);return r.foreach((S,R)=>{const L=Nr(t,S);y.isCompleteForPath(L)&&(w=w.set(S,y.getNode().getChild(L)))}),Zx(n,e,t,w,i,a,h,l)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==wu.LISTEN_COMPLETE)throw(0,B.g5)("Unknown operation type: "+t.type);l=function R2(n,e,t,r,i){const a=e.serverCache;return $k(n,kk(e,a.getNode(),a.isFullyInitialized()||ln(t),a.isFiltered()),t,r,jk,i)}(n,e,t.path,r,a)}const y=a.getChanges();return function S2(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=bD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(Ak(bD(e)))}}(e,l,y),{viewCache:l,changes:y}}(n.processor_,i,e,t,r);return function D2(n,e){(0,B.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,B.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,B.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,Kk(n,a.changes,a.viewCache.eventCache.getNode(),null)}function Kk(n,e,t,r){return function i2(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function GF(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),$0(n,i,"child_removed",e,r,t),$0(n,i,"child_added",e,r,t),$0(n,i,"child_moved",a,r,t),$0(n,i,"child_changed",e,r,t),$0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let AD,RD;class Zk{constructor(){this.views=new Map}}function Yx(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,B.hu)(null!=a,"SyncTree gave us an op for an invalid query."),qk(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(qk(l,e,t,r));return a}}function Yk(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=DD(t,i?r:null),y=!1;h?y=!0:r instanceof Qt?(h=Wx(t,r),y=!1):(h=Qt.EMPTY_NODE,y=!1);const w=ID(new Lf(h,y,!1),new Lf(r,i,!1));return new k2(e,w)}return l}function Qk(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Uf(n,e){let t=null;for(const r of n.views.values())t=t||O2(r,e);return t}function Jk(n,e){return e._queryParams.loadsAllData()?xD(n):n.views.get(e._queryIdentifier)}function Xk(n,e){return null!=Jk(n,e)}function Vf(n){return null!=xD(n)}function xD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let W2=1;class eN{constructor(e){this.listenProvider_=e,this.syncPointTree_=new yr(null),this.pendingWriteTree_=function w2(){return{visibleWrites:Ml.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Qx(n,e,t,r,i){return function u2(n,e,t,r,i){(0,B.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=G0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?N_(n,new Hg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Bf(n,e,t=!1){const r=function c2(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function d2(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,B.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&h2(h,r.path)?i=!1:vu(r.path,h.path)&&(a=!0)),l--}return!!i&&(a?(function f2(n){n.visibleWrites=Lk(n.allWrites,p2,Rn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=Nk(n.visibleWrites,r.path):Qi(r.children,y=>{n.visibleWrites=Nk(n.visibleWrites,Nr(r.path,y))}),!0))}(n.pendingWriteTree_,e)){let a=new yr(null);return null!=r.snap?a=a.set(Rn(),!0):Qi(r.children,l=>{a=a.set(new Gn(l),!0)}),N_(n,new ED(r.path,a,t))}return[]}function W0(n,e,t){return N_(n,new Hg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function MD(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let h=[];if(l&&("default"===e._queryIdentifier||Xk(l,e))){const y=function $2(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const h=Vf(n);if("default"===i)for(const[y,w]of n.views.entries())l=l.concat(zk(w,t,r)),Wk(w)&&(n.views.delete(y),w.query._queryParams.loadsAllData()||a.push(w.query));else{const y=n.views.get(i);y&&(l=l.concat(zk(y,t,r)),Wk(y)&&(n.views.delete(i),y.query._queryParams.loadsAllData()||a.push(y.query)))}return h&&!Vf(n)&&a.push(new(function V2(){return(0,B.hu)(AD,"Reference.ts has not been loaded"),AD}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function B2(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const w=y.removed;if(h=y.events,!i){const S=-1!==w.findIndex(L=>L._queryParams.loadsAllData()),R=n.syncPointTree_.findOnPath(a,(L,G)=>Vf(G));if(S&&!R){const L=n.syncPointTree_.subtree(a);if(!L.isEmpty()){const G=function J2(n){return n.fold((e,t,r)=>{if(t&&Vf(t))return[xD(t)];{let i=[];return t&&(i=Qk(t)),Qi(r,(a,l)=>{i=i.concat(l)}),i}})}(L);for(let J=0;J<G.length;++J){const Ie=G[J],Fe=Ie.query,It=iN(n,Ie);n.listenProvider_.startListening(q0(Fe),z0(n,Fe),It.hashFn,It.onComplete)}}}!R&&w.length>0&&!r&&(S?n.listenProvider_.stopListening(q0(e),null):w.forEach(L=>{const G=n.queryToTagMap.get(ND(L));n.listenProvider_.stopListening(q0(L),G)}))}!function X2(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=ND(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,w)}return h}function tN(n,e,t,r){const i=Xx(n,r);if(null!=i){const a=eR(i),l=a.path,h=a.queryId,y=uo(l,e);return tR(n,l,new Hg(Bx(h),y,t))}return[]}function Jx(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(L,G)=>{const J=uo(L,i);a=a||Uf(G,J),l=l||Vf(G)});let y,h=n.syncPointTree_.get(i);h?(l=l||Vf(h),a=a||Uf(h,Rn())):(h=new Zk,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=a?y=!0:(y=!1,a=Qt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((G,J)=>{const Ie=Uf(J,Rn());Ie&&(a=a.updateImmediateChild(G,Ie))}));const w=Xk(h,e);if(!w&&!e._queryParams.loadsAllData()){const L=ND(e);(0,B.hu)(!n.queryToTagMap.has(L),"View does not exist, but we have a tag");const G=function eU(){return W2++}();n.queryToTagMap.set(L,G),n.tagToQueryMap.set(G,L)}let R=function j2(n,e,t,r,i,a){const l=Yk(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function L2(n,e){n.eventRegistrations_.push(e)}(l,t),function F2(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(mr,(a,l)=>{r.push(x_(a,l))}),t.isFullyInitialized()&&r.push(Ak(t.getNode())),Kk(n,r,t.getNode(),e)}(l,t)}(h,e,t,CD(n.pendingWriteTree_,i),a,y);if(!w&&!l&&!r){const L=Jk(h,e);R=R.concat(function tU(n,e,t){const r=e._path,i=z0(n,e),a=iN(n,t),l=n.listenProvider_.startListening(q0(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,B.hu)(!Vf(h.value),"If we're adding a query, it shouldn't be shadowed");else{const y=h.fold((w,S,R)=>{if(!ln(w)&&S&&Vf(S))return[xD(S).query];{let L=[];return S&&(L=L.concat(Qk(S).map(G=>G.query))),Qi(R,(G,J)=>{L=L.concat(J)}),L}});for(let w=0;w<y.length;++w){const S=y[w];n.listenProvider_.stopListening(q0(S),z0(n,S))}}return l}(n,e,L))}return R}function kD(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const w=Uf(h,uo(l,e));if(w)return w});return Fk(i,e,a,t,!0)}function N_(n,e){return nN(e,n.syncPointTree_,null,CD(n.pendingWriteTree_,Rn()))}function nN(n,e,t,r){if(ln(n.path))return rN(n,e,t,r);{const i=e.get(Rn());null==t&&null!=i&&(t=Uf(i,Rn()));let a=[];const l=un(n.path),h=n.operationForChild(l),y=e.children.get(l);if(y&&h){const w=t?t.getImmediateChild(l):null,S=Vk(r,l);a=a.concat(nN(h,y,w,S))}return i&&(a=a.concat(Yx(i,n,r,t))),a}}function rN(n,e,t,r){const i=e.get(Rn());null==t&&null!=i&&(t=Uf(i,Rn()));let a=[];return e.children.inorderTraversal((l,h)=>{const y=t?t.getImmediateChild(l):null,w=Vk(r,l),S=n.operationForChild(l);S&&(a=a.concat(rN(S,h,y,w)))}),i&&(a=a.concat(Yx(i,n,r,t))),a}function iN(n,e){const t=e.query,r=z0(n,t);return{hashFn:()=>(function N2(n){return n.viewCache_.serverCache.getNode()}(e)||Qt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function Z2(n,e,t){const r=Xx(n,t);if(r){const i=eR(r),a=i.path,l=i.queryId,h=uo(a,e);return tR(n,a,new j0(Bx(l),h))}return[]}(n,t._path,r):function K2(n,e){return N_(n,new j0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function KL(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return MD(n,t,null,a)}}}}function z0(n,e){const t=ND(e);return n.queryToTagMap.get(t)}function ND(n){return n._path.toString()+"$"+n._queryIdentifier}function Xx(n,e){return n.tagToQueryMap.get(e)}function eR(n){const e=n.indexOf("$");return(0,B.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Gn(n.substr(0,e))}}function tR(n,e,t){const r=n.syncPointTree_.get(e);return(0,B.hu)(r,"Missing sync point for query tag that we're tracking"),Yx(r,t,CD(n.pendingWriteTree_,e),null)}function q0(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function G2(){return(0,B.hu)(RD,"Reference.ts has not been loaded"),RD}())(n._repo,n._path):n}class nR{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new nR(t)}node(){return this.node_}}class rR{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Nr(this.path_,e);return new rR(this.syncTree_,t)}node(){return kD(this.syncTree_,this.path_)}}const sN=function(n,e,t){return n&&"object"==typeof n?((0,B.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?rU(n[".sv"],e,t):"object"==typeof n[".sv"]?iU(n[".sv"],e):void(0,B.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},rU=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,B.hu)(!1,"Unexpected server value: "+n)},iU=function(n,e,t){n.hasOwnProperty("increment")||(0,B.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,B.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,B.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},oN=function(n,e,t,r){return sR(e,new rR(t,n),r)},iR=function(n,e,t){return sR(n,new nR(e),t)};function sR(n,e,t){const r=n.getPriority().val(),i=sN(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=sN(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new T_(h,$r(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new T_(i))),l.forEachChild(mr,(h,y)=>{const w=sR(y,e.getImmediateChild(h),t);w!==y&&(a=a.updateImmediateChild(h,w))}),a}}class oR{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function PD(n,e){let t=e instanceof Gn?e:new Gn(e),r=n,i=un(t);for(;null!==i;){const a=(0,B.DV)(r.node.children,i)||{children:{},childCount:0};r=new oR(i,r,a),t=or(t),i=un(t)}return r}function zg(n){return n.node.value}function aR(n,e){n.node.value=e,uR(n)}function aN(n){return n.node.childCount>0}function OD(n,e){Qi(n.node.children,(t,r)=>{e(new oR(t,n,r))})}function uN(n,e,t,r){t&&!r&&e(n),OD(n,i=>{uN(i,e,!0,r)}),t&&r&&e(n)}function K0(n){return new Gn(null===n.parent?n.name:K0(n.parent)+"/"+n.name)}function uR(n){null!==n.parent&&function aU(n,e,t){const r=function sU(n){return void 0===zg(n)&&!aN(n)}(t),i=(0,B.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,uR(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,uR(n))}(n.parent,n.name,n)}const uU=/[\[\].#$\/\u0000-\u001F\u007F]/,lU=/[\[\].#$\u0000-\u001F\u007F]/,lR=10485760,LD=function(n){return"string"==typeof n&&0!==n.length&&!uU.test(n)},lN=function(n){return"string"==typeof n&&0!==n.length&&!lU.test(n)},Z0=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!uD(n)||n&&"object"==typeof n&&(0,B.r3)(n,".sv")},Vc=function(n,e,t,r){r&&void 0===e||Y0((0,B.gK)(n,"value"),e,t)},Y0=function(n,e,t){const r=t instanceof Gn?new DF(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+jg(r));if("function"==typeof e)throw new Error(n+"contains a function "+jg(r)+" with contents = "+e.toString());if(uD(e))throw new Error(n+"contains "+e.toString()+" "+jg(r));if("string"==typeof e&&e.length>lR/3&&(0,B.ug)(e)>lR)throw new Error(n+"contains a string greater than "+lR+" utf8 bytes "+jg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Qi(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!LD(l)))throw new Error(n+" contains an invalid key ("+l+") "+jg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function TF(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,B.ug)(e),gk(n)})(r,l),Y0(n,h,r),function SF(n){const e=n.parts_.pop();n.byteLength_-=(0,B.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+jg(r)+" in addition to actual children.")}},cN=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,B.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Qi(e,(l,h)=>{const y=new Gn(l);if(Y0(i,h,Nr(t,y)),".priority"===Cx(y)&&!Z0(h))throw new Error(i+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(y)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=P0(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!LD(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(CF);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&vu(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},cR=function(n,e,t){if(!t||void 0!==e){if(uD(e))throw new Error((0,B.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Z0(e))throw new Error((0,B.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Q0=function(n,e,t,r){if(!(r&&void 0===t||LD(t)))throw new Error((0,B.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},J0=function(n,e,t,r){if(!(r&&void 0===t||lN(t)))throw new Error((0,B.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Eu=function(n,e){if(".info"===un(e))throw new Error(n+" failed = Can't modify data under /.info/")},dN=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!LD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),lN(n)}(t))throw new Error((0,B.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class fU{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function FD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!Dx(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function hN(n,e,t){FD(n,t),fN(n,r=>Dx(r,e))}function Ia(n,e,t){FD(n,t),fN(n,r=>vu(r,e)||vu(e,r))}function fN(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(pU(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function pU(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Vg&&Yi("event: "+t.toString()),C_(r)}}}const pN="repo_interrupt";class mU{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new fU,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=wD(),this.transactionQueueTree_=new oR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function gN(n){const t=n.infoData_.getNode(new Gn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function X0(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:gN(n)})}function mN(n,e,t,r,i){n.dataUpdateCount++;const a=new Gn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const y=(0,B.UI)(t,w=>$r(w));l=function Y2(n,e,t,r){const i=Xx(n,r);if(i){const a=eR(i),l=a.path,h=a.queryId,y=uo(l,e),w=yr.fromObject(t);return tR(n,l,new M_(Bx(h),y,w))}return[]}(n.serverSyncTree_,a,y,i)}else{const y=$r(t);l=tN(n.serverSyncTree_,a,y,i)}else if(r){const y=(0,B.UI)(t,w=>$r(w));l=function q2(n,e,t){const r=yr.fromObject(t);return N_(n,new M_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,y)}else{const y=$r(t);l=W0(n.serverSyncTree_,a,y)}let h=a;l.length>0&&(h=O_(n,a)),Ia(n.eventQueue_,h,l)}function yN(n,e){dR(n,"connected",e),!1===e&&function EU(n){P_(n,"onDisconnectEvents");const e=X0(n),t=wD();Fx(n.onDisconnect_,Rn(),(i,a)=>{const l=oN(i,a,n.serverSyncTree_,e);R_(t,i,l)});let r=[];Fx(t,Rn(),(i,a)=>{r=r.concat(W0(n.serverSyncTree_,i,a));const l=gR(n,i);O_(n,l)}),n.onDisconnect_=wD(),Ia(n.eventQueue_,Rn(),r)}(n)}function dR(n,e,t){const r=new Gn("/.info/"+e),i=$r(t);n.infoData_.updateSnapshot(r,i);const a=W0(n.infoSyncTree_,r,i);Ia(n.eventQueue_,r,a)}function UD(n){return n.nextWriteId_++}function hR(n,e,t,r,i){P_(n,"set",{path:e.toString(),value:t,priority:r});const a=X0(n),l=$r(t,r),h=kD(n.serverSyncTree_,e),y=iR(l,h,a),w=UD(n),S=Qx(n.serverSyncTree_,e,y,w,!0);FD(n.eventQueue_,S),n.server_.put(e.toString(),l.val(!0),(L,G)=>{const J="ok"===L;J||Bs("set at "+e+" failed: "+L);const Ie=Bf(n.serverSyncTree_,w,!J);Ia(n.eventQueue_,e,Ie),jf(0,i,L,G)});const R=gR(n,e);O_(n,R),Ia(n.eventQueue_,R,[])}function IU(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Lx(n.onDisconnect_,e),jf(0,t,r,i)})}function _N(n,e,t,r){const i=$r(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&R_(n.onDisconnect_,e,i),jf(0,r,a,l)})}function fR(n,e,t){let r;r=".info"===un(e._path)?MD(n.infoSyncTree_,e,t):MD(n.serverSyncTree_,e,t),hN(n.eventQueue_,e._path,r)}function vN(n){n.persistentConnection_&&n.persistentConnection_.interrupt(pN)}function P_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Yi(t,...e)}function jf(n,e,t,r){e&&C_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function pR(n,e,t){return kD(n.serverSyncTree_,e,t)||Qt.EMPTY_NODE}function VD(n,e=n.transactionQueueTree_){if(e||BD(n,e),zg(e)){const t=EN(n,e);(0,B.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function AU(n,e,t){const r=t.map(w=>w.currentWriteId),i=pR(n,e,r);let a=i;const l=i.hash();for(let w=0;w<t.length;w++){const S=t[w];(0,B.hu)(0===S.status,"tryToSendTransactionQueue_: items in queue should all be run."),S.status=1,S.retryCount++;const R=uo(e,S.path);a=a.updateChild(R,S.currentOutputSnapshotRaw)}const h=a.val(!0),y=e;n.server_.put(y.toString(),h,w=>{P_(n,"transaction put response",{path:y.toString(),status:w});let S=[];if("ok"===w){const R=[];for(let L=0;L<t.length;L++)t[L].status=2,S=S.concat(Bf(n.serverSyncTree_,t[L].currentWriteId)),t[L].onComplete&&R.push(()=>t[L].onComplete(null,!0,t[L].currentOutputSnapshotResolved)),t[L].unwatcher();BD(n,PD(n.transactionQueueTree_,e)),VD(n,n.transactionQueueTree_),Ia(n.eventQueue_,e,S);for(let L=0;L<R.length;L++)C_(R[L])}else{if("datastale"===w)for(let R=0;R<t.length;R++)t[R].status=3===t[R].status?4:0;else{Bs("transaction at "+y.toString()+" failed: "+w);for(let R=0;R<t.length;R++)t[R].status=4,t[R].abortReason=w}O_(n,e)}},l)}(n,K0(e),t)}else aN(e)&&OD(e,t=>{VD(n,t)})}function O_(n,e){const t=wN(n,e),r=K0(t);return function xU(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const y=e[h],w=uo(t,y.path);let R,S=!1;if((0,B.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===y.status)S=!0,R=y.abortReason,i=i.concat(Bf(n.serverSyncTree_,y.currentWriteId,!0));else if(0===y.status)if(y.retryCount>=25)S=!0,R="maxretry",i=i.concat(Bf(n.serverSyncTree_,y.currentWriteId,!0));else{const L=pR(n,y.path,l);y.currentInputSnapshot=L;const G=e[h].update(L.val());if(void 0!==G){Y0("transaction failed: Data returned ",G,y.path);let J=$r(G);"object"==typeof G&&null!=G&&(0,B.r3)(G,".priority")||(J=J.updatePriority(L.getPriority()));const Fe=y.currentWriteId,It=X0(n),Dt=iR(J,L,It);y.currentOutputSnapshotRaw=J,y.currentOutputSnapshotResolved=Dt,y.currentWriteId=UD(n),l.splice(l.indexOf(Fe),1),i=i.concat(Qx(n.serverSyncTree_,y.path,Dt,y.currentWriteId,y.applyLocally)),i=i.concat(Bf(n.serverSyncTree_,Fe,!0))}else S=!0,R="nodata",i=i.concat(Bf(n.serverSyncTree_,y.currentWriteId,!0))}Ia(n.eventQueue_,t,i),i=[],S&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===R?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(R),!1,null)))}BD(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)C_(r[h]);VD(n,n.transactionQueueTree_)}(n,EN(n,t),r),r}function wN(n,e){let t,r=n.transactionQueueTree_;for(t=un(e);null!==t&&void 0===zg(r);)r=PD(r,t),t=un(e=or(e));return r}function EN(n,e){const t=[];return IN(n,e,t),t.sort((r,i)=>r.order-i.order),t}function IN(n,e,t){const r=zg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);OD(e,i=>{IN(n,i,t)})}function BD(n,e){const t=zg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,aR(e,t.length>0?t:void 0)}OD(e,r=>{BD(n,r)})}function gR(n,e){const t=K0(wN(n,e)),r=PD(n.transactionQueueTree_,e);return function oU(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{mR(n,i)}),mR(n,r),uN(r,i=>{mR(n,i)}),t}function mR(n,e){const t=zg(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,B.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,B.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Bf(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?aR(e,void 0):t.length=a+1,Ia(n.eventQueue_,K0(e),i);for(let l=0;l<r.length;l++)C_(r[l])}}const yR=function(n,e){const t=kU(n),r=t.namespace;return"firebase.com"===t.domain&&Lc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Lc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Bs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new _x(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Gn(t.pathString)}},kU=function(n){let e="",t="",r="",i="",a="",l=!0,h="https",y=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(h=n.substring(0,w-1),n=n.substring(w+2));let S=n.indexOf("/");-1===S&&(S=n.length);let R=n.indexOf("?");-1===R&&(R=n.length),e=n.substring(0,Math.min(S,R)),S<R&&(i=function RU(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(S,R)));const L=function MU(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Bs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,R)));w=e.indexOf(":"),w>=0?(l="https"===h||"wss"===h,y=parseInt(e.substring(w+1),10)):w=e.length;const G=e.slice(0,w);if("localhost"===G.toLowerCase())t="localhost";else if(G.split(".").length<=2)t=G;else{const J=e.indexOf(".");r=e.substring(0,J).toLowerCase(),t=e.substring(J+1),a=r}"ns"in L&&(a=L.ns)}return{host:e,port:y,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:a}};class bN{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,B.Wl)(this.snapshot.exportVal())}}class CN{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class _R{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,B.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class DN{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new B.BH;return IU(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Eu("OnDisconnect.remove",this._path);const e=new B.BH;return _N(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Eu("OnDisconnect.set",this._path),Vc("OnDisconnect.set",e,this._path,!1);const t=new B.BH;return _N(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Eu("OnDisconnect.setWithPriority",this._path),Vc("OnDisconnect.setWithPriority",e,this._path,!1),cR("OnDisconnect.setWithPriority",t,!1);const r=new B.BH;return function bU(n,e,t,r,i){const a=$r(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,h)=>{"ok"===l&&R_(n.onDisconnect_,e,a),jf(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Eu("OnDisconnect.update",this._path),cN("OnDisconnect.update",e,this._path,!1);const t=new B.BH;return function CU(n,e,t,r){if((0,B.xb)(t))return Yi("onDisconnect().update() called with empty data.  Don't do anything."),void jf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Qi(t,(l,h)=>{const y=$r(h);R_(n.onDisconnect_,Nr(e,l),y)}),jf(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class $o{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return ln(this._path)?null:Cx(this._path)}get ref(){return new Iu(this._repo,this._path)}get _queryIdentifier(){const e=Rk(this._queryParams),t=gx(e);return"{}"===t?"default":t}get _queryObject(){return Rk(this._queryParams)}isEqual(e){if(!((e=(0,B.m9)(e))instanceof $o))return!1;const t=this._repo===e._repo,r=Dx(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function bF(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function jD(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function $f(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Uc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Kd)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Fc)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===mr){if(null!=e&&!Z0(e)||null!=t&&!Z0(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,B.hu)(n.getIndex()instanceof Rx||n.getIndex()===Mx,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function $D(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Iu extends $o{constructor(e,t){super(e,t,new yD,!1)}get parent(){const e=pk(this._path);return null===e?null:new Iu(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class qg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Gn(e),r=Kg(this.ref,e);return new qg(this._node.getChild(t),r,mr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new qg(i,Kg(this.ref,r),mr)))}hasChild(e){const t=new Gn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function TN(n,e){return(n=(0,B.m9)(n))._checkNotDeleted("ref"),void 0!==e?Kg(n._root,e):n._root}function SN(n,e){(n=(0,B.m9)(n))._checkNotDeleted("refFromURL");const t=yR(e,n._repo.repoInfo_.nodeAdmin);dN("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Lc("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),TN(n,t.path.toString())}function Kg(n,e){return null===un((n=(0,B.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),J0("child","path",t,!1)):J0("child","path",e,!1),new Iu(n._repo,Nr(n._path,e));var t}function vR(n,e){n=(0,B.m9)(n),Eu("set",n._path),Vc("set",e,n._path,!1);const t=new B.BH;return hR(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function FU(n,e){cN("update",e,n._path,!1);const t=new B.BH;return function wU(n,e,t,r){P_(n,"update",{path:e.toString(),value:t});let i=!0;const a=X0(n),l={};if(Qi(t,(h,y)=>{i=!1,l[h]=oN(Nr(e,h),$r(y),n.serverSyncTree_,a)}),i)Yi("update() called with empty data.  Don't do anything."),jf(0,r,"ok",void 0);else{const h=UD(n),y=function z2(n,e,t,r){!function l2(n,e,t,r){(0,B.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=$x(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=yr.fromObject(t);return N_(n,new M_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);FD(n.eventQueue_,y),n.server_.merge(e.toString(),t,(w,S)=>{const R="ok"===w;R||Bs("update at "+e+" failed: "+w);const L=Bf(n.serverSyncTree_,h,!R),G=L.length>0?O_(n,e):e;Ia(n.eventQueue_,G,L),jf(0,r,w,S)}),Qi(t,w=>{const S=gR(n,Nr(e,w));O_(n,S)}),Ia(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function UU(n){n=(0,B.m9)(n);const e=new _R(()=>{}),t=new eE(e);return function vU(n,e,t){const r=function Q2(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,S)=>{const R=uo(w,t);r=r||Uf(S,R)});let i=n.syncPointTree_.get(t);i?r=r||Uf(i,Rn()):(i=new Zk,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new Lf(r,!0,!1):null;return function P2(n){return bD(n.viewCache_)}(Yk(i,e,CD(n.pendingWriteTree_,e._path),a?l.getNode():Qt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=$r(i).withIndex(e._queryParams.getIndex());let l;if(Jx(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=W0(n.serverSyncTree_,e._path,a);else{const h=z0(n.serverSyncTree_,e);l=tN(n.serverSyncTree_,e._path,a,h)}return Ia(n.eventQueue_,e._path,l),MD(n.serverSyncTree_,e,t,null,!0),a},i=>(P_(n,"get for query "+(0,B.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new qg(r,new Iu(n._repo,n._path),n._queryParams.getIndex()))}class eE{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new bN("value",this,new qg(e.snapshotNode,new Iu(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new CN(this,e,t):null}matches(e){return e instanceof eE&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class HD{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new CN(this,e,t):null}createEvent(e,t){(0,B.hu)(null!=e.childName,"Child events should have a childName.");const r=Kg(new Iu(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new bN(e.type,this,new qg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof HD&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function tE(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const y=t,w=(S,R)=>{fR(n._repo,n,h),y(S,R)};w.userCallback=t.userCallback,w.context=t.context,t=w}const l=new _R(t,a||void 0),h="value"===e?new eE(l):new HD(e,l);return function DU(n,e,t){let r;r=".info"===un(e._path)?Jx(n.infoSyncTree_,e,t):Jx(n.serverSyncTree_,e,t),hN(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>fR(n._repo,n,h)}function wR(n,e,t,r){return tE(n,"value",e,t,r)}function AN(n,e,t,r){return tE(n,"child_added",e,t,r)}function xN(n,e,t,r){return tE(n,"child_changed",e,t,r)}function RN(n,e,t,r){return tE(n,"child_moved",e,t,r)}function MN(n,e,t,r){return tE(n,"child_removed",e,t,r)}function kN(n,e,t){let r=null;const i=t?new _R(t):null;"value"===e?r=new eE(i):e&&(r=new HD(e,i)),fR(n._repo,n,r)}class kl{}class NN extends kl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Vc("endAt",this._value,e._path,!0);const t=Ox(e._queryParams,this._value,this._key);if($D(t),$f(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new $o(e._repo,e._path,t,e._orderByCalled)}}class BU extends kl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Vc("endBefore",this._value,e._path,!1);const t=function YF(n,e,t){let r,i;return n.index_===Uc?("string"==typeof e&&(e=Sk(e)),i=Ox(n,e,t)):(r=null==t?Kd:Sk(t),i=Ox(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if($D(t),$f(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new $o(e._repo,e._path,t,e._orderByCalled)}}class PN extends kl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Vc("startAt",this._value,e._path,!0);const t=Px(e._queryParams,this._value,this._key);if($D(t),$f(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new $o(e._repo,e._path,t,e._orderByCalled)}}class HU extends kl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Vc("startAfter",this._value,e._path,!1);const t=function ZF(n,e,t){let r;if(n.index_===Uc)"string"==typeof e&&(e=Tk(e)),r=Px(n,e,t);else{let i;i=null==t?Fc:Tk(t),r=Px(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if($D(t),$f(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new $o(e._repo,e._path,t,e._orderByCalled)}}class WU extends kl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new $o(e._repo,e._path,function qF(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class qU extends kl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new $o(e._repo,e._path,function KF(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class ZU extends kl{constructor(e){super(),this._path=e}_apply(e){jD(e,"orderByChild");const t=new Gn(this._path);if(ln(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Rx(t),i=_D(e._queryParams,r);return $f(i),new $o(e._repo,e._path,i,!0)}}class QU extends kl{_apply(e){jD(e,"orderByKey");const t=_D(e._queryParams,Uc);return $f(t),new $o(e._repo,e._path,t,!0)}}class XU extends kl{_apply(e){jD(e,"orderByPriority");const t=_D(e._queryParams,mr);return $f(t),new $o(e._repo,e._path,t,!0)}}class tV extends kl{_apply(e){jD(e,"orderByValue");const t=_D(e._queryParams,Mx);return $f(t),new $o(e._repo,e._path,t,!0)}}class rV extends kl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Vc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new NN(this._value,this._key)._apply(new PN(this._value,this._key)._apply(e))}}function Nl(n,...e){let t=(0,B.m9)(n);for(const r of e)t=r._apply(t);return t}(function U2(n){(0,B.hu)(!AD,"__referenceConstructor has already been defined"),AD=n})(Iu),function H2(n){(0,B.hu)(!RD,"__referenceConstructor has already been defined"),RD=n}(Iu);const ER={};function LN(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Lc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Yi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let y,w,l=yR(a,i),h=l.repoInfo;typeof process<"u"&&process.env&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(y=!0,a=`http://${w}?ns=${h.namespace}`,l=yR(a,i),h=l.repoInfo):y=!l.repoInfo.secure;const S=i&&y?new N0(N0.OWNER):new JL(n.name,n.options,e);dN("Invalid Firebase Database URL",l),ln(l.path)||Lc("Database URL must point to the root of a Firebase Database (not including a child path).");const R=function uV(n,e,t,r){let i=ER[e.name];i||(i={},ER[e.name]=i);let a=i[n.toURLString()];return a&&Lc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new mU(n,false,t,r),i[n.toURLString()]=a,a}(h,n,S,new QL(n.name,t));return new cV(R,n)}class cV{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function yU(n,e,t){if(n.stats_=Ex(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new vD(n.repoInfo_,(r,i,a,l)=>{mN(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>yN(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,B.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new $g(n.repoInfo_,e,(r,i,a,l)=>{mN(n,r,i,a,l)},r=>{yN(n,r)},r=>{!function _U(n,e){Qi(e,(t,r)=>{dR(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function tF(n,e){const t=n.toString();return wx[t]||(wx[t]=e()),wx[t]}(n.repoInfo_,()=>new n2(n.stats_,n.server_)),n.infoData_=new QF,n.infoSyncTree_=new eN({startListening:(r,i,a,l)=>{let h=[];const y=n.infoData_.getNode(r._path);return y.isEmpty()||(h=W0(n.infoSyncTree_,r._path,y),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),dR(n,"connected",!1),n.serverSyncTree_=new eN({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(h,y)=>{const w=l(h,y);Ia(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Iu(this._repo,Rn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function aV(n,e){const t=ER[e];(!t||t[n.key]!==n)&&Lc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),vN(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Lc("Cannot call "+e+" on a deleted database.")}}function FN(){nk.IS_TRANSPORT_INITIALIZED&&Bs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function dV(){FN(),Pf.forceDisallow()}function hV(){FN(),D_.forceDisallow(),Pf.forceAllow()}function gV(n,e){L1(n,e)}const yV={".sv":"timestamp"};class wV{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}$g.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},$g.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function mV(n){M1(eo.SDK_VERSION),(0,eo._registerComponent)(new ha.wA("database",(e,{instanceIdentifier:t})=>LN(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,eo.registerVersion)(x1,"0.13.7",n),(0,eo.registerVersion)(x1,"0.13.7","esm2017")}();const CV=new fa.Yd("@firebase/database-compat"),VN=function(n){CV.warn("FIREBASE WARNING: "+n)};class SV{constructor(e){this._delegate=e}cancel(e){(0,B.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,B.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,B.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,B.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,B.Dv)("OnDisconnect.set",1,2,arguments.length),(0,B.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,B.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,B.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,B.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,VN("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,B.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class AV{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,B.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Hf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,B.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,B.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,B.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,B.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,B.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),J0("DataSnapshot.child","path",e,!1),new Hf(this._database,this._delegate.child(e))}hasChild(e){return(0,B.Dv)("DataSnapshot.hasChild",1,1,arguments.length),J0("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,B.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,B.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,B.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Hf(this._database,t)))}hasChildren(){return(0,B.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,B.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,B.Dv)("DataSnapshot.ref",0,0,arguments.length),new ba(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ms{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,B.Dv)("Query.on",2,4,arguments.length),(0,B.Wj)("Query.on","callback",t,!1);const l=ms.getCancelAndContextArgs_("Query.on",r,i),h=(w,S)=>{t.call(l.context,new Hf(this.database,w),S)};h.userCallback=t,h.context=l.context;const y=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return wR(this._delegate,h,y),t;case"child_added":return AN(this._delegate,h,y),t;case"child_removed":return MN(this._delegate,h,y),t;case"child_changed":return xN(this._delegate,h,y),t;case"child_moved":return RN(this._delegate,h,y),t;default:throw new Error((0,B.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,B.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,B.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,B.Wj)("Query.off","callback",t,!0),(0,B.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,kN(this._delegate,e,i)}else kN(this._delegate,e)}get(){return UU(this._delegate).then(e=>new Hf(this.database,e))}once(e,t,r,i){(0,B.Dv)("Query.once",1,4,arguments.length),(0,B.Wj)("Query.once","callback",t,!0);const a=ms.getCancelAndContextArgs_("Query.once",r,i),l=new B.BH,h=(w,S)=>{const R=new Hf(this.database,w);t&&t.call(a.context,R,S),l.resolve(R)};h.userCallback=t,h.context=a.context;const y=w=>{a.cancel&&a.cancel.call(a.context,w),l.reject(w)};switch(e){case"value":wR(this._delegate,h,y,{onlyOnce:!0});break;case"child_added":AN(this._delegate,h,y,{onlyOnce:!0});break;case"child_removed":MN(this._delegate,h,y,{onlyOnce:!0});break;case"child_changed":xN(this._delegate,h,y,{onlyOnce:!0});break;case"child_moved":RN(this._delegate,h,y,{onlyOnce:!0});break;default:throw new Error((0,B.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,B.Dv)("Query.limitToFirst",1,1,arguments.length),new ms(this.database,Nl(this._delegate,function zU(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new WU(n)}(e)))}limitToLast(e){return(0,B.Dv)("Query.limitToLast",1,1,arguments.length),new ms(this.database,Nl(this._delegate,function KU(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new qU(n)}(e)))}orderByChild(e){return(0,B.Dv)("Query.orderByChild",1,1,arguments.length),new ms(this.database,Nl(this._delegate,function YU(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return J0("orderByChild","path",n,!1),new ZU(n)}(e)))}orderByKey(){return(0,B.Dv)("Query.orderByKey",0,0,arguments.length),new ms(this.database,Nl(this._delegate,function JU(){return new QU}()))}orderByPriority(){return(0,B.Dv)("Query.orderByPriority",0,0,arguments.length),new ms(this.database,Nl(this._delegate,function eV(){return new XU}()))}orderByValue(){return(0,B.Dv)("Query.orderByValue",0,0,arguments.length),new ms(this.database,Nl(this._delegate,function nV(){return new tV}()))}startAt(e=null,t){return(0,B.Dv)("Query.startAt",0,2,arguments.length),new ms(this.database,Nl(this._delegate,function $U(n=null,e){return Q0("startAt","key",e,!0),new PN(n,e)}(e,t)))}startAfter(e=null,t){return(0,B.Dv)("Query.startAfter",0,2,arguments.length),new ms(this.database,Nl(this._delegate,function GU(n,e){return Q0("startAfter","key",e,!0),new HU(n,e)}(e,t)))}endAt(e=null,t){return(0,B.Dv)("Query.endAt",0,2,arguments.length),new ms(this.database,Nl(this._delegate,function VU(n,e){return Q0("endAt","key",e,!0),new NN(n,e)}(e,t)))}endBefore(e=null,t){return(0,B.Dv)("Query.endBefore",0,2,arguments.length),new ms(this.database,Nl(this._delegate,function jU(n,e){return Q0("endBefore","key",e,!0),new BU(n,e)}(e,t)))}equalTo(e,t){return(0,B.Dv)("Query.equalTo",1,2,arguments.length),new ms(this.database,Nl(this._delegate,function iV(n,e){return Q0("equalTo","key",e,!0),new rV(n,e)}(e,t)))}toString(){return(0,B.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,B.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,B.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ms))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,B.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,B.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,B.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new ba(this.database,new Iu(this._delegate._repo,this._delegate._path))}}class ba extends ms{constructor(e,t){super(e,new $o(t._repo,t._path,new yD,!1)),this.database=e,this._delegate=t}getKey(){return(0,B.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,B.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ba(this.database,Kg(this._delegate,e))}getParent(){(0,B.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ba(this.database,e):null}getRoot(){return(0,B.Dv)("Reference.root",0,0,arguments.length),new ba(this.database,this._delegate.root)}set(e,t){(0,B.Dv)("Reference.set",1,2,arguments.length),(0,B.Wj)("Reference.set","onComplete",t,!0);const r=vR(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,B.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,VN("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Eu("Reference.update",this._delegate._path),(0,B.Wj)("Reference.update","onComplete",t,!0);const r=FU(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,B.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,B.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function LU(n,e,t){if(Eu("setWithPriority",n._path),Vc("setWithPriority",e,n._path,!1),cR("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new B.BH;return hR(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,B.Dv)("Reference.remove",0,1,arguments.length),(0,B.Wj)("Reference.remove","onComplete",e,!0);const t=function PU(n){return Eu("remove",n._path),vR(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,B.Dv)("Reference.transaction",1,3,arguments.length),(0,B.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,B.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,B.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function EV(n,e,t){var r;if(n=(0,B.m9)(n),Eu("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new B.BH,h=wR(n,()=>{});return function SU(n,e,t,r,i,a){P_(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:N1(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=pR(n,e,void 0);l.currentInputSnapshot=h;const y=l.update(h.val());if(void 0===y)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{Y0("transaction failed: Data returned ",y,l.path),l.status=0;const w=PD(n.transactionQueueTree_,e),S=zg(w)||[];let R;S.push(l),aR(w,S),"object"==typeof y&&null!==y&&(0,B.r3)(y,".priority")?(R=(0,B.DV)(y,".priority"),(0,B.hu)(Z0(R),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):R=(kD(n.serverSyncTree_,e)||Qt.EMPTY_NODE).getPriority().val();const L=X0(n),G=$r(y,R),J=iR(G,h,L);l.currentOutputSnapshotRaw=G,l.currentOutputSnapshotResolved=J,l.currentWriteId=UD(n);const Ie=Qx(n.serverSyncTree_,e,J,l.currentWriteId,l.applyLocally);Ia(n.eventQueue_,e,Ie),VD(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(y,w,S)=>{let R=null;y?a.reject(y):(R=new qg(S,new Iu(n._repo,n._path),mr),a.resolve(new wV(w,R)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new AV(a.committed,new Hf(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,B.Dv)("Reference.setPriority",1,2,arguments.length),(0,B.Wj)("Reference.setPriority","onComplete",t,!0);const r=function OU(n,e){n=(0,B.m9)(n),Eu("setPriority",n._path),cR("setPriority",e,!1);const t=new B.BH;return hR(n._repo,Nr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,B.Dv)("Reference.push",0,2,arguments.length),(0,B.Wj)("Reference.push","onComplete",t,!0);const r=function NU(n,e){n=(0,B.m9)(n),Eu("push",n._path),Vc("push",e,n._path,!0);const t=gN(n._repo),r=HF(t),i=Kg(n,r),a=Kg(n,r);let l;return l=null!=e?vR(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new ba(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new ba(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Eu("Reference.onDisconnect",this._delegate._path),new SV(new DN(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class nE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:dV,forceLongPolling:hV}}useEmulator(e,t,r={}){!function UN(n,e,t,r={}){(n=(0,B.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Lc("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Lc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new N0(N0.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,B.Sg)(r.mockUserToken,n.app.options.projectId);a=new N0(l)}!function oV(n,e,t,r){n.repoInfo_=new _x(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,B.Dv)("database.ref",0,1,arguments.length),e instanceof ba){const t=SN(this._delegate,e.toString());return new ba(this,t)}{const t=TN(this._delegate,e);return new ba(this,t)}}refFromURL(e){(0,B.Dv)("database.refFromURL",1,1,arguments.length);const r=SN(this._delegate,e);return new ba(this,r)}goOffline(){return(0,B.Dv)("database.goOffline",0,0,arguments.length),function fV(n){(n=(0,B.m9)(n))._checkNotDeleted("goOffline"),vN(n._repo)}(this._delegate)}goOnline(){return(0,B.Dv)("database.goOnline",0,0,arguments.length),function pV(n){(n=(0,B.m9)(n))._checkNotDeleted("goOnline"),function TU(n){n.persistentConnection_&&n.persistentConnection_.resume(pN)}(n._repo)}(this._delegate)}}nE.ServerValue={TIMESTAMP:function _V(){return yV}(),increment:n=>function vV(n){return{".sv":{increment:n}}}(n)};var RV=Object.freeze({__proto__:null,initStandalone:function xV({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){M1(t);const l=new ha.zt("auth-internal",new ha.H0("database-standalone"));return l.setComponent(new ha.wA("auth-internal",()=>r,"PRIVATE")),{instance:new nE(LN(n,l,void 0,e,a),n),namespace:i}}});const MV=nE.ServerValue;function BN(n){return null==n}function jN(n){return"function"==typeof n.set}function $N(n,e){return jN(e)?e:n.ref(e)}function HN(n,e){if(function NV(n){return"string"==typeof n}(n))return e.stringCase();if(jN(n))return e.firebaseCase();if(function PV(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function rE(n,e,t="on",r=vv.z){return new ni.y(i=>{let a=null;return a=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,ut.U)(i=>{const{snapshot:a,prevKey:l}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:l,key:h}}),(0,YM.B)())}function GN(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function FV(n,e){const{payload:t,prevKey:r,key:i}=e,a=GN(n,i),l=function LV(n,e){if(BN(e))return 0;{const t=GN(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(y=>{const w={payload:y,type:"value",prevKey:h,key:y.key};return h=y.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(y=>y.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function WN(n){return(BN(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function zN(n,e,t){return function OV(n,e,t){return rE(n,"value","once",t).pipe(fr(r=>{const i=[mt(r)];return e.forEach(a=>i.push(rE(n,a,"on",t))),(0,LA.T)(...i).pipe(Nt(FV,[]))}),WE())}(n,e=WN(e),t)}function qN(n,e,t){const r=(e=WN(e)).map(i=>rE(n,i,"on",t));return(0,LA.T)(...r)}function KN(n,e){return function(r,i){return HN(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function jV(n){return function(t){return t?HN(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function ZN(n,e){return function(){return rE(n,"value","on",e)}}!function kV(n){n.INTERNAL.registerComponent(new ha.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new nE(i,r)},"PUBLIC").setServiceProps({Reference:ba,Query:ms,Database:nE,DataSnapshot:Hf,enableLogging:gV,INTERNAL:RV,ServerValue:MV}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.7")}(dc.Z);const GV=new m.OlP("angularfire2.realtimeDatabaseURL"),WV=new m.OlP("angularfire2.database.use-emulator");let YN=(()=>{class n{constructor(t,r,i,a,l,h,y,w,S,R,L,G,J,Ie,Fe){this.schedulers=h;const It=y,Dt=(0,Wi.on)(t,l,r);w&&ux(Dt,l,S,L,G,J,R,Ie),this.database=(0,Wi.cc)(`${Dt.name}.database.${i}`,"AngularFireDatabase",Dt.name,()=>{const Ut=l.runOutsideAngular(()=>Dt.database(i||void 0));return It&&Ut.useEmulator(...It),Ut},[It])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>$N(this.database,t));let a=i;return r&&(a=r(i)),function $V(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:KN(r,"update"),set:KN(r,"set"),push:i=>r.push(i),remove:jV(r),snapshotChanges:i=>zN(n,i,t).pipe(ir.iC),stateChanges:i=>qN(n,i,t).pipe(ir.iC),auditTrail:i=>function UV(n,e,t){return function BV(n,e,t){return function VV(n,e){return rE(n,"value","on",e).pipe((0,ut.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function VL(...n){const e=(0,ls.jO)(n);return(0,Vr.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),h=!1;for(let y=0;y<i;y++)(0,So.Xf)(n[y]).subscribe((0,hr.x)(r,w=>{a[y]=w,!h&&!l[y]&&(l[y]=!0,(h=l.every(Ys.y))&&(l=null))},UL.Z));t.subscribe((0,hr.x)(r,y=>{if(h){const w=[y,...a];r.next(e?e(...w):w)}}))})}(e),(0,ut.U)(([i,a])=>{const l=i.lastKeyToLoad,h=a.map(y=>y.key);return{actions:a,lastKeyToLoad:l,loadedKeys:h}}),function BL(n){return(0,Vr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,hr.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,ut.U)(i=>i.actions))}(n,qN(n,e).pipe(Nt((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(ir.iC),valueChanges:(i,a)=>zN(n,i,t).pipe((0,ut.U)(h=>h.map(y=>a&&a.idField?Object.assign(Object.assign({},y.payload.val()),{[a.idField]:y.key}):y.payload.val())),ir.iC)}}(a,this)}object(t){return function HV(n,e){return{query:n,snapshotChanges:()=>ZN(n,e.schedulers.outsideAngular)().pipe(ir.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>ZN(n,e.schedulers.outsideAngular)().pipe(ir.iC,(0,ut.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>$N(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Wi.Dh),m.LFG(Wi.xv,8),m.LFG(GV,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(ir.HU),m.LFG(WV,8),m.LFG(lx,8),m.LFG(nx,8),m.LFG(rx,8),m.LFG(ix,8),m.LFG(sx,8),m.LFG(ox,8),m.LFG(ax,8),m.LFG(oD,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),zV=(()=>{class n{constructor(){pL.Z.registerVersion("angularfire",ir.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[YN]}),n})(),qV=(()=>{class n{constructor(t){this._afs=t,this.tablerosEasy=[{id:1,solved:["781429653","642853971","935176824","167985342","329741568","854632197","496317285","518294736","273568419"],unsolved:["-8-4-9653","6428--97-","------8--","--7--5-42","---7-1---","85-6--1--","--6------","-1---4736","2735-8-1-"]},{id:2,solved:["635298714","274351689","189764532","748936251","952187463","361542978","493875126","817629345","526413897"],unsolved:["63-2-8-1-","2---5--89","1-9-6--3-","--8--6-5-","---187---","-6-5--9--","-9--7-1-6","81--2---5","-2-4-3-97"]},{id:3,solved:["826193745","195478326","347526189","482917563","639852417","571634298","268345971","954761832","713289654"],unsolved:["---1---4-","195--8---","34--2-1-9","---91-5--","6-98-24-7","--1-34---","2-8-4--71","---7--832","-1---9---"]},{id:4,solved:["927154863","834672951","516839472","143725689","769481235","258396147","658217394","471963528","392548716"],unsolved:["--7----63","8-467-9--","-1--39--2","--37--6--","7--4-1--5","--8--61--","6--21--9-","--1-635-8","39----7--"]},{id:5,solved:["981463752","327195486","654782931","745621398","296538147","813947625","478356219","569214873","132879564"],unsolved:["981---7--","3-719--8-","--4-82---","7--6--39-","2-------7","-13--7--5","---35-2--","-6--148-3","--2---564"]}],this.tablerosMedium=[{id:1,solved:["137849652","952367184","468125379","283751496","695234718","714698523","576983241","821476935","349512867"],unsolved:["13-8--6--","--2--7---","---12--79","28-------","-9--3--1-","-------23","57--83---","---4--9--","--9--2-67"]},{id:2,solved:["635298714","274351689","189764532","748936251","952187463","361542978","493875126","817629345","526413897"],unsolved:["63-2-8-1-","2---5--89","1-9-6--3-","--8--6-5-","---187---","-6-5--9--","-9--7-1-6","81--2---5","-2-4-3-97"]},{id:3,solved:["314659278","526178349","897234516","631987425","275463981","948512637","763845192","459721863","182396754"],unsolved:["3------78","-----834-","8--2-45--","-3--8-42-","2---6---1","-48-1--3-","--38-5--2","-597-----","18------4"]},{id:4,solved:["179625384","685493127","432781695","317542869","824169573","596378241","758234916","961857432","243916758"],unsolved:["1--62---4","---4---2-","-----1-95","-1-5-28--","--4---5--","--63-8-4-","75-2-----","-6---7---","2---16--8"]},{id:5,solved:["542138967","786529134","139674258","961385742","423967815","857412693","618743529","375291486","294856371"],unsolved:["54-1--9--","---5---3-","--96--2-8","9--38----","---967---","----12--3","6-8--35--","-7---1---","--4--6-71"]}],this.tablerosHard=[{id:1,solved:["749152683","231869547","685473219","452916738","196738452","378245961","513697824","924581376","867324195"],unsolved:["7-9--26--","2-18-9-47","-8547321-","4-2916738","-96-3-45-","378245961","-1369782-","92-5-13-6","--73--1-5"]}]}getTablero(t){switch(t){case"facil":let r=this.tablerosEasy.length;return this.tablerosEasy[Math.floor(Math.random()*r)];case"intermedio":let a=this.tablerosMedium.length;return this.tablerosMedium[Math.floor(Math.random()*a)];case"avanzado":let h=this.tablerosHard.length;return this.tablerosHard[Math.floor(Math.random()*h)];default:return null}}getTableros(){return this._afs.list("tableros").valueChanges()}saveTablero(t){return this._afs.list("tableros").push(t)}dropTablero(){return this._afs.list("tableros").remove()}getWinners(){return this._afs.list("winners").valueChanges()}saveWinner(t){return this._afs.list("winners").push(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(YN))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function KV(n,e){if(1&n&&(m.TgZ(0,"div",3)(1,"div",4)(2,"h2"),m._uU(3),m.qZA()(),m.TgZ(4,"div",4),m._uU(5," Temporizador: "),m.TgZ(6,"pre"),m._uU(7),m.ALo(8,"json"),m.qZA()()()),2&n){const t=m.oxw();m.xp6(3),m.hij("Nivel ",t.dificultad,""),m.xp6(4),m.Oqu(m.lcZ(8,2,t.clock))}}function ZV(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"td")(1,"input",14),m.NdJ("input",function(i){const l=m.CHM(t).index,h=m.oxw().index,y=m.oxw(2);return m.KtG(y.setValue(h,l,i))}),m.qZA()()}if(2&n){const t=e.$implicit;m.xp6(1),m.s9C("value","-"!=t?t:null),m.Q6J("disabled","-"!==t)}}function YV(n,e){if(1&n&&(m.TgZ(0,"tr",12),m.YNc(1,ZV,2,2,"td",13),m.qZA()),2&n){const t=e.$implicit;m.xp6(1),m.Q6J("ngForOf",t.split(""))}}function QV(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",5)(1,"div",6)(2,"table",7)(3,"tbody"),m.YNc(4,YV,2,1,"tr",8),m.qZA(),m._UZ(5,"br"),m.qZA()(),m.TgZ(6,"div",9)(7,"div",5)(8,"button",10),m.NdJ("click",function(){m.CHM(t);const i=m.oxw();return m.KtG(i.cambiarPantalla("menu"))}),m._uU(9,"Regresar"),m.qZA()(),m.TgZ(10,"div",5)(11,"button",11),m.NdJ("click",function(){m.CHM(t);const i=m.oxw();return m.KtG(i.printValue())}),m._uU(12,"Volver a empezar"),m.qZA()()()()}if(2&n){const t=m.oxw();m.xp6(4),m.Q6J("ngForOf",t.currentTablero.unsolved)}}function JV(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",15)(1,"div",16)(2,"div",17)(3,"button",18),m.NdJ("click",function(){m.CHM(t);const i=m.oxw();return m.KtG(i.cambiarPantalla("facil"))}),m._uU(4,"F\xe1cil"),m.qZA(),m.TgZ(5,"button",19),m.NdJ("click",function(){m.CHM(t);const i=m.oxw();return m.KtG(i.cambiarPantalla("intermedio"))}),m._uU(6,"Intermedio"),m.qZA(),m.TgZ(7,"button",20),m.NdJ("click",function(){m.CHM(t);const i=m.oxw();return m.KtG(i.cambiarPantalla("avanzado"))}),m._uU(8,"Avanzado"),m.qZA()()()()}}let XV=(()=>{class n{constructor(t){this._sudokuService=t,this.isJuegoSelected=!1,this.juegofacil=!1,this.juegointermedio=!1,this.juegoavanzado=!1,this.pantallamenu=!0,this.source=function FL(n=0,e,t=vv.P){let r=-1;return null!=e&&((0,OL.K)(e)?t=e:r=e),new ni.y(i=>{let a=function LL(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let l=0;return t.schedule(function(){i.closed||(i.next(l++),0<=r?this.schedule(void 0,r):i.complete())},a)})}(0,1e3),this.segundos=0,this.minutos=0,this.tablero=[],this.dificultad="",this.numSelected=null,this.tiledSelected=null,this.currentTablero={id:0,solved:[],unsolved:[]},this.tableroResuelto=[],this.tableroView=[]}ngOnInit(){this.source.subscribe(t=>{this.clock=this.cronometro()})}cambiarPantalla(t){this.juegofacil=!1,this.juegointermedio=!1,this.juegoavanzado=!1,this.isJuegoSelected=!1,this.pantallamenu=!1,"menu"==t?(this.dificultad="",this.pantallamenu=!0,this.isJuegoSelected=!1):(this.dificultad=t,this.isJuegoSelected=!0,this.getTablero(t))}cronometro(){return 60==this.segundos&&(this.minutos++,this.segundos=0),this.segundos++,"Tiempo: "+this.minutos+":"+this.segundos}getTablero(t){console.log(t);let r=this._sudokuService.getTablero(t);console.log("Que pedo con el tablero",r),r&&(this.currentTablero=r);for(let i=0;i<r.solved.length;i++){this.tableroResuelto[i]=new Array(9);for(let a=0;a<r.solved[i].length;a++)this.tableroResuelto[i][a]=r.solved[i][a]}for(let i=0;i<r.unsolved.length;i++){this.tableroView[i]=new Array(9);for(let a=0;a<r.unsolved[i].length;a++)this.tableroView[i][a]=r.unsolved[i][a]}console.log(this.tableroResuelto),console.log(this.tableroView)}setValue(t,r,i){console.log("oiasoidb",t,r,i);let a=[];a.push(new Promise((l,h)=>{this.tableroView[t][r]=i.target.value,l(!0)})),Promise.all(a).then(l=>{this.isWinner()})}printValue(){console.log("Hola perra",this.tableroView)}compareTableros(){let t=this.tableroResuelto,r=this.tableroView;for(let i=0;i<t.length;i++)for(let a=0;a<t[i].length;a++)if(t[i][a]!=r[i][a])return!1;return!0}limpiarTablero(){this.tableroView=[],this.tableroResuelto=[],this.currentTablero={id:0,solved:[],unsolved:[]},this.segundos=0,this.minutos=0}isWinner(){this.compareTableros()?(alert("Ganaste"),this.limpiarTablero(),this.saveWinner()):console.log("No ganaste")}saveWinner(){this._sudokuService.saveWinner({tiempo:this.clock,dificultad:this.dificultad})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(qV))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-sudoku"]],decls:3,vars:3,consts:[["class","row justify-content-around",4,"ngIf"],["class","row",4,"ngIf"],["class","container-fluid mt-2 btns",4,"ngIf"],[1,"row","justify-content-around"],[1,"col-md-4"],[1,"row"],[1,"col-md-8","sudokugrid"],[1,"table","table-bordered","text-center","tablesudoku"],["class","border-top border-3",4,"ngFor","ngForOf"],[1,"col-md-2"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary","ms-2",3,"click"],[1,"border-top","border-3"],[4,"ngFor","ngForOf"],["type","text","oninput","this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*?)\\..*/g, '$1');",3,"value","disabled","input"],[1,"container-fluid","mt-2","btns"],[1,"container-fluid"],[1,"d-grid","gap-2"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-warning",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,r){1&t&&(m.YNc(0,KV,9,4,"div",0),m.YNc(1,QV,13,1,"div",1),m.YNc(2,JV,9,0,"div",2)),2&t&&(m.Q6J("ngIf",r.isJuegoSelected),m.xp6(1),m.Q6J("ngIf",r.isJuegoSelected),m.xp6(1),m.Q6J("ngIf",r.pantallamenu&&!r.isJuegoSelected))},dependencies:[Xi,ur,Aa],styles:[".btns[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;align-content:center;text-align:center;height:630px}.tablesudoku[_ngcontent-%COMP%]{width:500px;margin-left:8%;margin-top:10%}.tablesudoku[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{height:50px}.tablesudoku[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0!important;position:relative}.tablesudoku[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;inset:0;width:100%;outline:none;border:0px;text-align:center}.btnsalida[_ngcontent-%COMP%]{position:absolute;bottom:45px}"]}),n})();const eB=function(n){return[n]};function tB(n,e){if(1&n&&(m.TgZ(0,"div")(1,"a",2),m._UZ(2,"img",3),m.qZA()()),2&n){const t=e.$implicit;m.xp6(1),m.Q6J("routerLink",m.VKq(2,eB,t.path)),m.xp6(1),m.s9C("src",t.img,m.LSH)}}const nB=[{path:"",component:(()=>{class n{constructor(){this.arraygames=[{name:"Guess The Number",img:"../assets/guessthenumber.png",genero:"Aventura",path:"/games/guessthenumber"},{name:"Minecraft",img:"../assets/juego2.jpg",genero:"Aventura"},{name:"Diccionario Perdido",img:"../assets/juego3.jpg",genero:"Estrategia"},{name:"Cr\xf3nicas de Narnia",img:"",genero:"Acci\xf3n"},{name:"Super Mario Bross",img:"../assets/mario1.jpg",genero:"Aventura"},{name:"Minecraft",img:"../assets/juego2.jpg",genero:"Aventura"},{name:"Diccionario Perdido",img:"../assets/juego7.webp",genero:"Estrategia"},{name:"Cr\xf3nicas de Narnia",img:"",genero:"Acci\xf3n"},{name:"Peleas Otakus",img:"../assets/juego6.jpg",genero:"Estrategia"},{name:"Gumball",img:"../assets/juego4.webp",genero:"Estrategia"},{name:"Gumball",img:"../assets/juego5.webp",genero:"Estrategia"},{name:"Super Mario Bross",img:"../assets/mario1.jpg",genero:"Aventura"},{name:"Minecraft",img:"../assets/juego7.webp",genero:"Aventura"},{name:"Diccionario Perdido",img:"../assets/juego3.jpg",genero:"Estrategia"},{name:"Cr\xf3nicas de Narnia",img:"",genero:"Acci\xf3n"},{name:"Super Mario Bross",img:"../assets/juego10.jpg",genero:"Aventura"},{name:"Minecraft",img:"../assets/juego2.jpg",genero:"Aventura"},{name:"Diccionario Perdido",img:"../assets/juego3.jpg",genero:"Estrategia"},{name:"Cr\xf3nicas de Narnia",img:"",genero:"Acci\xf3n"},{name:"Peleas Otakus",img:"../assets/juego6.jpg",genero:"Estrategia"},{name:"Gumball",img:"../assets/juego4.webp",genero:"Estrategia"},{name:"Gumball",img:"../assets/juego5.webp",genero:"Estrategia"},{name:"Super Mario Bross",img:"../assets/juego10.jpg",genero:"Aventura"},{name:"Minecraft",img:"../assets/juego2.jpg",genero:"Aventura"},{name:"Diccionario Perdido",img:"../assets/juego3.jpg",genero:"Estrategia"},{name:"Cr\xf3nicas de Narnia",img:"",genero:"Acci\xf3n"},{name:"Super Mario Bross",img:"../assets/mario1.jpg",genero:"Aventura"},{name:"Minecraft",img:"../assets/juego10.jpg",genero:"Aventura"},{name:"Diccionario Perdido",img:"../assets/juego8.webp",genero:"Estrategia"},{name:"Cr\xf3nicas de Narnia",img:"",genero:"Acci\xf3n"},{name:"Peleas Otakus",img:"../assets/juego6.jpg",genero:"Estrategia"},{name:"Gumball",img:"../assets/juego7.webp",genero:"Estrategia"},{name:"Gumball",img:"../assets/juego9.avif",genero:"Estrategia"}],this.games=[]}ngOnInit(){this.getGames()}getGames(){this.arraygames.forEach(t=>{(""==t.img||null==t.img)&&(t.img="../assets/coming.jpg"),this.games.push(t)})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-main"]],decls:2,vars:1,consts:[[1,"container-fluid"],[4,"ngFor","ngForOf"],["href","#",1,"card",3,"routerLink"],[1,"imagecard",3,"src"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0),m.YNc(1,tB,3,4,"div",1),m.qZA()),2&t&&(m.xp6(1),m.Q6J("ngForOf",r.games))},dependencies:[Xi,hp],styles:[".card[_ngcontent-%COMP%]{width:12.2%;margin:1%;height:185px;background-color:transparent;float:left;border-radius:5px!important}.imagecard[_ngcontent-%COMP%]{height:100%;border-radius:5px!important}"]}),n})()},{path:"games",component:TL,children:[{path:"guessthenumber",component:PL},{path:"sudoku",component:XV}]}];let QN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[Fm.forRoot(nB),Fm]}),n})(),rB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[ql,Fm,QN,$s]}),n})();const JN_firebase={apiKey:"AIzaSyAHgjrbFPz8in9mEOFKZQ0hjgaimZvZQSg",authDomain:"app-gestion-966f6.firebaseapp.com",projectId:"app-gestion-966f6",storageBucket:"app-gestion-966f6.appspot.com",messagingSenderId:"658055244415",appId:"1:658055244415:web:3b6b09b1f4811fe906ad4a"};let iB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[GE]}),n.\u0275inj=m.cJS({imports:[ql,Fm,QN,rB,Wi.hO.initializeApp(JN_firebase),zV]}),n})();(0,m.G48)(),zl().bootstrapModule(iB).catch(n=>console.error(n))},5867:(lt,oe,F)=>{"use strict";F.d(oe,{C6:()=>m.getApps,Mq:()=>m.getApp});var m=F(9681);(0,m.registerVersion)("firebase","9.11.0","app")},127:(lt,oe,F)=>{"use strict";F.d(oe,{Z:()=>m.Z});var m=F(3942);m.Z.registerVersion("firebase","9.11.0","app-compat")},3704:(lt,oe,F)=>{"use strict";F.r(oe);var m=F(5861),U=F(3942),V=F(2090),ce=F(9681),de=F(1877),_e=F(655),he=F(4859);const Ae=function Ge(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},at=function Pe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xe=new de.Yd("@firebase/auth");function Ke(_,...f){Xe.logLevel<=de.in.ERROR&&Xe.error(`Auth (${ce.SDK_VERSION}): ${_}`,...f)}function Me(_,...f){throw Je(_,...f)}function Te(_,...f){return Je(_,...f)}function xe(_,f,g){const E=Object.assign(Object.assign({},at()),{[f]:g});return new V.LL("auth","Firebase",E).create(f,{appName:_.name})}function Qe(_,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Me(_,"argument-error"),xe(_,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Je(_,...f){if("string"!=typeof _){const g=f[0],E=[...f.slice(1)];return E[0]&&(E[0].appName=_.name),_._errorFactory.create(g,...E)}return ge.create(_,...f)}function q(_,f,...g){if(!_)throw Je(f,...g)}function ye(_){const f="INTERNAL ASSERTION FAILED: "+_;throw Ke(f),new Error(f)}function Q(_,f){_||ye(f)}const re=new Map;function ae(_){Q(_ instanceof Function,"Expected a class definition");let f=re.get(_);return f?(Q(f instanceof _,"Instance stored in cache mismatched with class"),f):(f=new _,re.set(_,f),f)}function Be(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function pt(){return"http:"===Jt()||"https:"===Jt()}function Jt(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class tn{constructor(f,g){this.shortDelay=f,this.longDelay=g,Q(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function zt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(pt()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Cn(_,f){Q(_.emulator,"Emulator should always be set here");const{url:g}=_.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class rn{static initialize(f,g,E){this.fetchImpl=f,g&&(this.headersImpl=g),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ye("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ye("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ye("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Kt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},fn=new tn(3e4,6e4);function Tt(_,f){return _.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:_.tenantId}):f}function sn(_,f,g,E){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,m.Z)(function*(_,f,g,E,M={}){return Qr(_,M,(0,m.Z)(function*(){let O={},X={};E&&("GET"===f?X=E:O={body:JSON.stringify(E)});const me=(0,V.xO)(Object.assign({key:_.config.apiKey},X)).slice(1),Ye=yield _._getAdditionalHeaders();return Ye["Content-Type"]="application/json",_.languageCode&&(Ye["X-Firebase-Locale"]=_.languageCode),rn.fetch()(Qn(_,_.config.apiHost,g,me),Object.assign({method:f,headers:Ye,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function Qr(_,f,g){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,m.Z)(function*(_,f,g){_._canInitEmulator=!1;const E=Object.assign(Object.assign({},Kt),f);try{const M=new Jn(_),O=yield Promise.race([g(),M.promise]);M.clearNetworkTimeout();const X=yield O.json();if("needConfirmation"in X)throw _r(_,"account-exists-with-different-credential",X);if(O.ok&&!("errorMessage"in X))return X;{const me=O.ok?X.errorMessage:X.error.message,[Ye,st]=me.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ye)throw _r(_,"credential-already-in-use",X);if("EMAIL_EXISTS"===Ye)throw _r(_,"email-already-in-use",X);if("USER_DISABLED"===Ye)throw _r(_,"user-disabled",X);const Ct=E[Ye]||Ye.toLowerCase().replace(/[_\s]+/g,"-");if(st)throw xe(_,Ct,st);Me(_,Ct)}}catch(M){if(M instanceof V.ZR)throw M;Me(_,"network-request-failed")}})).apply(this,arguments)}function Pr(_,f,g,E){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,m.Z)(function*(_,f,g,E,M={}){const O=yield sn(_,f,g,E,M);return"mfaPendingCredential"in O&&Me(_,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Qn(_,f,g,E){const M=`${f}${g}?${E}`;return _.config.emulator?Cn(_.config,M):`${_.config.apiScheme}://${M}`}class Jn{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,E)=>{this.timer=setTimeout(()=>E(Te(this.auth,"network-request-failed")),fn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _r(_,f,g){const E={appName:_.name};g.email&&(E.email=g.email),g.phoneNumber&&(E.phoneNumber=g.phoneNumber);const M=Te(_,f,E);return M.customData._tokenResponse=g,M}function Ze(){return(Ze=(0,m.Z)(function*(_,f){return sn(_,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Hr(_,f){return ui.apply(this,arguments)}function ui(){return(ui=(0,m.Z)(function*(_,f){return sn(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function cn(_,f){return li.apply(this,arguments)}function li(){return(li=(0,m.Z)(function*(_,f){return sn(_,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function wi(_){if(_)try{const f=new Date(Number(_));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function An(){return(An=(0,m.Z)(function*(_,f=!1){const g=(0,V.m9)(_),E=yield g.getIdToken(f),M=Ve(E);q(M&&M.exp&&M.auth_time&&M.iat,g.auth,"internal-error");const O="object"==typeof M.firebase?M.firebase:void 0,X=O?.sign_in_provider;return{claims:M,token:E,authTime:wi(yt(M.auth_time)),issuedAtTime:wi(yt(M.iat)),expirationTime:wi(yt(M.exp)),signInProvider:X||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function yt(_){return 1e3*Number(_)}function Ve(_){var f;const[g,E,M]=_.split(".");if(void 0===g||void 0===E||void 0===M)return Ke("JWT malformed, contained fewer than 3 sections"),null;try{const O=(0,V.tV)(E);return O?JSON.parse(O):(Ke("Failed to decode base64 JWT payload"),null)}catch(O){return Ke("Caught error parsing JWT payload as JSON",null===(f=O)||void 0===f?void 0:f.toString()),null}}function Xn(_,f){return vr.apply(this,arguments)}function vr(){return(vr=(0,m.Z)(function*(_,f,g=!1){if(g)return f;try{return yield f}catch(E){throw E instanceof V.ZR&&Gr(E)&&_.auth.currentUser===_&&(yield _.auth.signOut()),E}})).apply(this,arguments)}function Gr({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class Mt{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const M=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const E=this.getInterval(f);this.timerId=setTimeout((0,m.Z)(function*(){yield g.iteration()}),E)}iteration(){var f=this;return(0,m.Z)(function*(){var g;try{yield f.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(g=E)||void 0===g?void 0:g.code)&&f.schedule(!0))}f.schedule()})()}}class Or{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=wi(this.lastLoginAt),this.creationTime=wi(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function on(_){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,m.Z)(function*(_){var f;const g=_.auth,E=yield _.getIdToken(),M=yield Xn(_,cn(g,{idToken:E}));q(M?.users.length,g,"internal-error");const O=M.users[0];_._notifyReloadListener(O);const X=null!==(f=O.providerUserInfo)&&void 0!==f&&f.length?it(O.providerUserInfo):[],me=Wr(_.providerData,X),Ct=!!_.isAnonymous&&!(_.email&&O.passwordHash||me?.length),wt={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:me,metadata:new Or(O.createdAt,O.lastLoginAt),isAnonymous:Ct};Object.assign(_,wt)})).apply(this,arguments)}function ar(){return(ar=(0,m.Z)(function*(_){const f=(0,V.m9)(_);yield on(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Wr(_,f){return[..._.filter(E=>!f.some(M=>M.providerId===E.providerId)),...f]}function it(_){return _.map(f=>{var{providerId:g}=f,E=(0,_e._T)(f,["providerId"]);return{providerId:g,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function ot(){return(ot=(0,m.Z)(function*(_,f){const g=yield Qr(_,{},(0,m.Z)(function*(){const E=(0,V.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:M,apiKey:O}=_.config,X=Qn(_,M,"/v1/token",`key=${O}`),me=yield _._getAdditionalHeaders();return me["Content-Type"]="application/x-www-form-urlencoded",rn.fetch()(X,{method:"POST",headers:me,body:E})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class _t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){q(f.idToken,"internal-error"),q(typeof f.idToken<"u","internal-error"),q(typeof f.refreshToken<"u","internal-error");const g="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function vn(_){const f=Ve(_);return q(f,"internal-error"),q(typeof f.exp<"u","internal-error"),q(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var E=this;return(0,m.Z)(function*(){return q(!E.accessToken||E.refreshToken,f,"user-token-expired"),g||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(f,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var E=this;return(0,m.Z)(function*(){const{accessToken:M,refreshToken:O,expiresIn:X}=yield function ke(_,f){return ot.apply(this,arguments)}(f,g);E.updateTokensAndExpiration(M,O,Number(X))})()}updateTokensAndExpiration(f,g,E){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(f,g){const{refreshToken:E,accessToken:M,expirationTime:O}=g,X=new _t;return E&&(q("string"==typeof E,"internal-error",{appName:f}),X.refreshToken=E),M&&(q("string"==typeof M,"internal-error",{appName:f}),X.accessToken=M),O&&(q("number"==typeof O,"internal-error",{appName:f}),X.expirationTime=O),X}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new _t,this.toJSON())}_performRefresh(){return ye("not implemented")}}function bt(_,f){q("string"==typeof _||typeof _>"u","internal-error",{appName:f})}class W{constructor(f){var{uid:g,auth:E,stsTokenManager:M}=f,O=(0,_e._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=E,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Or(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,m.Z)(function*(){const E=yield Xn(g,g.stsTokenManager.getToken(g.auth,f));return q(E,g.auth,"internal-error"),g.accessToken!==E&&(g.accessToken=E,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),E})()}getIdTokenResult(f){return function Wn(_){return An.apply(this,arguments)}(this,f)}reload(){return function an(_){return ar.apply(this,arguments)}(this)}_assign(f){this!==f&&(q(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new W(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var E=this;return(0,m.Z)(function*(){let M=!1;f.idToken&&f.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(f),M=!0),g&&(yield on(E)),yield E.auth._persistUserIfCurrent(E),M&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var f=this;return(0,m.Z)(function*(){const g=yield f.getIdToken();return yield Xn(f,function Mn(_,f){return Ze.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var E,M,O,X,me,Ye,st,Ct;const wt=null!==(E=g.displayName)&&void 0!==E?E:void 0,bn=null!==(M=g.email)&&void 0!==M?M:void 0,Hi=null!==(O=g.phoneNumber)&&void 0!==O?O:void 0,hl=null!==(X=g.photoURL)&&void 0!==X?X:void 0,Q_=null!==(me=g.tenantId)&&void 0!==me?me:void 0,ud=null!==(Ye=g._redirectEventId)&&void 0!==Ye?Ye:void 0,Em=null!==(st=g.createdAt)&&void 0!==st?st:void 0,Dh=null!==(Ct=g.lastLoginAt)&&void 0!==Ct?Ct:void 0,{uid:Im,emailVerified:J_,isAnonymous:uc,providerData:fl,stsTokenManager:sp}=g;q(Im&&sp,f,"internal-error");const op=_t.fromJSON(this.name,sp);q("string"==typeof Im,f,"internal-error"),bt(wt,f.name),bt(bn,f.name),q("boolean"==typeof J_,f,"internal-error"),q("boolean"==typeof uc,f,"internal-error"),bt(Hi,f.name),bt(hl,f.name),bt(Q_,f.name),bt(ud,f.name),bt(Em,f.name),bt(Dh,f.name);const ou=new W({uid:Im,auth:f,email:bn,emailVerified:J_,displayName:wt,isAnonymous:uc,photoURL:hl,phoneNumber:Hi,tenantId:Q_,stsTokenManager:op,createdAt:Em,lastLoginAt:Dh});return fl&&Array.isArray(fl)&&(ou.providerData=fl.map(lc=>Object.assign({},lc))),ud&&(ou._redirectEventId=ud),ou}static _fromIdTokenResponse(f,g,E=!1){return(0,m.Z)(function*(){const M=new _t;M.updateFromServerResponse(g);const O=new W({uid:g.localId,auth:f,stsTokenManager:M,isAnonymous:E});return yield on(O),O})()}}const ee=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(g,E){var M=this;return(0,m.Z)(function*(){M.storage[g]=E})()}_get(g){var E=this;return(0,m.Z)(function*(){const M=E.storage[g];return void 0===M?null:M})()}_remove(g){var E=this;return(0,m.Z)(function*(){delete E.storage[g]})()}_addListener(g,E){}_removeListener(g,E){}}return _.type="NONE",_})();function De(_,f,g){return`firebase:${_}:${f}:${g}`}class ue{constructor(f,g,E){this.persistence=f,this.auth=g,this.userKey=E;const{config:M,name:O}=this.auth;this.fullUserKey=De(this.userKey,M.apiKey,O),this.fullPersistenceKey=De("persistence",M.apiKey,O),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,m.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?W._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,m.Z)(function*(){if(g.persistence===f)return;const E=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,E?g.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,E="authUser"){return(0,m.Z)(function*(){if(!g.length)return new ue(ae(ee),f,E);const M=(yield Promise.all(g.map(function(){var st=(0,m.Z)(function*(Ct){if(yield Ct._isAvailable())return Ct});return function(Ct){return st.apply(this,arguments)}}()))).filter(st=>st);let O=M[0]||ae(ee);const X=De(E,f.config.apiKey,f.name);let me=null;for(const st of g)try{const Ct=yield st._get(X);if(Ct){const wt=W._fromJSON(f,Ct);st!==O&&(me=wt),O=st;break}}catch{}const Ye=M.filter(st=>st._shouldAllowMigration);return O._shouldAllowMigration&&Ye.length?(O=Ye[0],me&&(yield O._set(X,me.toJSON())),yield Promise.all(g.map(function(){var st=(0,m.Z)(function*(Ct){if(Ct!==O)try{yield Ct._remove(X)}catch{}});return function(Ct){return st.apply(this,arguments)}}())),new ue(O,f,E)):new ue(O,f,E)})()}}function We(_){const f=_.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(gn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(gt(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Oe(f))return"Blackberry";if(dt(f))return"Webos";if($t(f))return"Safari";if((f.includes("chrome/")||Un(f))&&!f.includes("edge/"))return"Chrome";if(mn(f))return"Android";{const E=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function gt(_=(0,V.z$)()){return/firefox\//i.test(_)}function $t(_=(0,V.z$)()){const f=_.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Un(_=(0,V.z$)()){return/crios\//i.test(_)}function gn(_=(0,V.z$)()){return/iemobile/i.test(_)}function mn(_=(0,V.z$)()){return/android/i.test(_)}function Oe(_=(0,V.z$)()){return/blackberry/i.test(_)}function dt(_=(0,V.z$)()){return/webos/i.test(_)}function Xt(_=(0,V.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function ys(_=(0,V.z$)()){return Xt(_)||mn(_)||dt(_)||Oe(_)||/windows phone/i.test(_)||gn(_)}function zn(_,f=[]){let g;switch(_){case"Browser":g=We((0,V.z$)());break;case"Worker":g=`${We((0,V.z$)())}-${_}`;break;default:g=_}const E=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${ce.SDK_VERSION}/${E}`}class lo{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const E=O=>new Promise((X,me)=>{try{X(f(O))}catch(Ye){me(Ye)}});E.onAbort=g,this.queue.push(E);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,m.Z)(function*(){var E;if(g.auth.currentUser===f)return;const M=[];try{for(const O of g.queue)yield O(f),O.onAbort&&M.push(O.onAbort)}catch(O){M.reverse();for(const X of M)try{X()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=O)||void 0===E?void 0:E.message})}})()}}class Vt{constructor(f,g,E){this.app=f,this.heartbeatServiceProvider=g,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _s(this),this.idTokenSubscription=new _s(this),this.beforeStateQueue=new lo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(f,g){var E=this;return g&&(this._popupRedirectResolver=ae(g)),this._initializationPromise=this.queue((0,m.Z)(function*(){var M,O;if(!E._deleted&&(E.persistenceManager=yield ue.create(E,f),!E._deleted)){if(null!==(M=E._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(g),E.lastNotifiedUid=(null===(O=E.currentUser)||void 0===O?void 0:O.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,m.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,m.Z)(function*(){var E;const M=yield g.assertedPersistence.getCurrentUser();let O=M,X=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const me=null===(E=g.redirectUser)||void 0===E?void 0:E._redirectEventId,Ye=O?._redirectEventId,st=yield g.tryRedirectSignIn(f);(!me||me===Ye)&&st?.user&&(O=st.user,X=!0)}if(!O)return g.directlySetCurrentUser(null);if(!O._redirectEventId){if(X)try{yield g.beforeStateQueue.runMiddleware(O)}catch(me){O=M,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(me))}return O?g.reloadAndSetCurrentUserOrClear(O):g.directlySetCurrentUser(null)}return q(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===O._redirectEventId?g.directlySetCurrentUser(O):g.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(f){var g=this;return(0,m.Z)(function*(){let E=null;try{E=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch{yield g._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,m.Z)(function*(){var E;try{yield on(f)}catch(M){if("auth/network-request-failed"!==(null===(E=M)||void 0===E?void 0:E.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function nt(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var f=this;return(0,m.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,m.Z)(function*(){const E=f?(0,V.m9)(f):null;return E&&q(E.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(E&&E._clone(g))})()}_updateCurrentUser(f,g=!1){var E=this;return(0,m.Z)(function*(){if(!E._deleted)return f&&q(E.tenantId===f.tenantId,E,"tenant-id-mismatch"),g||(yield E.beforeStateQueue.runMiddleware(f)),E.queue((0,m.Z)(function*(){yield E.directlySetCurrentUser(f),E.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,m.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,m.Z)(function*(){yield g.assertedPersistence.setPersistence(ae(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new V.LL("auth","Firebase",f())}onAuthStateChanged(f,g,E){return this.registerStateListener(this.authStateSubscription,f,g,E)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,E){return this.registerStateListener(this.idTokenSubscription,f,g,E)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var E=this;return(0,m.Z)(function*(){const M=yield E.getOrInitRedirectPersistenceManager(g);return null===f?M.removeCurrentUser():M.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,m.Z)(function*(){if(!g.redirectPersistenceManager){const E=f&&ae(f)||g._popupRedirectResolver;q(E,g,"argument-error"),g.redirectPersistenceManager=yield ue.create(g,[ae(E._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,m.Z)(function*(){var E,M;return g._isInitialized&&(yield g.queue((0,m.Z)(function*(){}))),(null===(E=g._currentUser)||void 0===E?void 0:E._redirectEventId)===f?g._currentUser:(null===(M=g.redirectUser)||void 0===M?void 0:M._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,m.Z)(function*(){if(f===g.currentUser)return g.queue((0,m.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,E,M){if(this._deleted)return()=>{};const O="function"==typeof g?g:g.next.bind(g),X=this._isInitialized?Promise.resolve():this._initializationPromise;return q(X,this,"internal-error"),X.then(()=>O(this.currentUser)),"function"==typeof g?f.addObserver(g,E,M):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,m.Z)(function*(){g.currentUser&&g.currentUser!==f&&g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh(),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=zn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,m.Z)(function*(){var g;const E={"X-Client-Version":f.clientVersion};f.app.options.appId&&(E["X-Firebase-gmpid"]=f.app.options.appId);const M=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return M&&(E["X-Firebase-Client"]=M),E})()}}function kn(_){return(0,V.m9)(_)}class _s{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,V.ne)(g=>this.observer=g)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Oi(_){const f=_.indexOf(":");return f<0?"":_.substr(0,f+1)}function Ji(_){if(!_)return null;const f=Number(_);return isNaN(f)?null:f}class wr{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return ye("not implemented")}_getIdTokenResponse(f){return ye("not implemented")}_linkToIdToken(f,g){return ye("not implemented")}_getReauthenticationResolver(f){return ye("not implemented")}}function rr(_,f){return Da.apply(this,arguments)}function Da(){return(Da=(0,m.Z)(function*(_,f){return sn(_,"POST","/v1/accounts:resetPassword",Tt(_,f))})).apply(this,arguments)}function En(_,f){return bu.apply(this,arguments)}function bu(){return(bu=(0,m.Z)(function*(_,f){return sn(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Cu(_,f){return js.apply(this,arguments)}function js(){return(js=(0,m.Z)(function*(_,f){return sn(_,"POST","/v1/accounts:update",Tt(_,f))})).apply(this,arguments)}function Xi(){return(Xi=(0,m.Z)(function*(_,f){return Pr(_,"POST","/v1/accounts:signInWithPassword",Tt(_,f))})).apply(this,arguments)}function es(_,f){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,m.Z)(function*(_,f){return sn(_,"POST","/v1/accounts:sendOobCode",Tt(_,f))})).apply(this,arguments)}function ur(_,f){return Du.apply(this,arguments)}function Du(){return(Du=(0,m.Z)(function*(_,f){return es(_,f)})).apply(this,arguments)}function lr(_,f){return qr.apply(this,arguments)}function qr(){return(qr=(0,m.Z)(function*(_,f){return es(_,f)})).apply(this,arguments)}function Ta(_,f){return Li.apply(this,arguments)}function Li(){return(Li=(0,m.Z)(function*(_,f){return es(_,f)})).apply(this,arguments)}function Sa(_,f){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,m.Z)(function*(_,f){return es(_,f)})).apply(this,arguments)}function Su(){return(Su=(0,m.Z)(function*(_,f){return Pr(_,"POST","/v1/accounts:signInWithEmailLink",Tt(_,f))})).apply(this,arguments)}function Au(){return(Au=(0,m.Z)(function*(_,f){return Pr(_,"POST","/v1/accounts:signInWithEmailLink",Tt(_,f))})).apply(this,arguments)}class xu extends wr{constructor(f,g,E,M=null){super("password",E),this._email=f,this._password=g,this._tenantId=M}static _fromEmailAndPassword(f,g){return new xu(f,g,"password")}static _fromEmailAndCode(f,g,E=null){return new xu(f,g,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,m.Z)(function*(){switch(g.signInMethod){case"password":return function Ho(_,f){return Xi.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Tu(_,f){return Su.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Me(f,"internal-error")}})()}_linkToIdToken(f,g){var E=this;return(0,m.Z)(function*(){switch(E.signInMethod){case"password":return En(f,{idToken:g,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Bc(_,f){return Au.apply(this,arguments)}(f,{idToken:g,email:E._email,oobCode:E._password});default:Me(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function cr(_,f){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,m.Z)(function*(_,f){return Pr(_,"POST","/v1/accounts:signInWithIdp",Tt(_,f))})).apply(this,arguments)}class Xr extends wr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new Xr(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Me("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:M}=g,O=(0,_e._T)(g,["providerId","signInMethod"]);if(!E||!M)return null;const X=new Xr(E,M);return X.idToken=O.idToken||void 0,X.accessToken=O.accessToken||void 0,X.secret=O.secret,X.nonce=O.nonce,X.pendingToken=O.pendingToken||null,X}_getIdTokenResponse(f){return cr(f,this.buildRequest())}_linkToIdToken(f,g){const E=this.buildRequest();return E.idToken=g,cr(f,E)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,cr(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,V.xO)(g)}return f}}function Qd(_,f){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,m.Z)(function*(_,f){return sn(_,"POST","/v1/accounts:sendVerificationCode",Tt(_,f))})).apply(this,arguments)}function ws(){return(ws=(0,m.Z)(function*(_,f){return Pr(_,"POST","/v1/accounts:signInWithPhoneNumber",Tt(_,f))})).apply(this,arguments)}function Ol(){return(Ol=(0,m.Z)(function*(_,f){const g=yield Pr(_,"POST","/v1/accounts:signInWithPhoneNumber",Tt(_,f));if(g.temporaryProof)throw _r(_,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Xd={USER_NOT_FOUND:"user-not-found"};function Ll(){return(Ll=(0,m.Z)(function*(_,f){return Pr(_,"POST","/v1/accounts:signInWithPhoneNumber",Tt(_,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Xd)})).apply(this,arguments)}class Es extends wr{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Es({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Es({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function Mu(_,f){return ws.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function Jd(_,f){return Ol.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function eh(_,f){return Ll.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:E,verificationCode:M}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:E,code:M}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:E,phoneNumber:M,temporaryProof:O}=f;return E||g||M||O?new Es({verificationId:g,verificationCode:E,phoneNumber:M,temporaryProof:O}):null}}class xa{constructor(f){var g,E,M,O,X,me;const Ye=(0,V.zd)((0,V.pd)(f)),st=null!==(g=Ye.apiKey)&&void 0!==g?g:null,Ct=null!==(E=Ye.oobCode)&&void 0!==E?E:null,wt=function Fl(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Ye.mode)&&void 0!==M?M:null);q(st&&Ct&&wt,"argument-error"),this.apiKey=st,this.operation=wt,this.code=Ct,this.continueUrl=null!==(O=Ye.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(X=Ye.languageCode)&&void 0!==X?X:null,this.tenantId=null!==(me=Ye.tenantId)&&void 0!==me?me:null}static parseLink(f){const g=function Aa(_){const f=(0,V.zd)((0,V.pd)(_)).link,g=f?(0,V.zd)((0,V.pd)(f)).deep_link_id:null,E=(0,V.zd)((0,V.pd)(_)).deep_link_id;return(E?(0,V.zd)((0,V.pd)(E)).link:null)||E||g||f||_}(f);try{return new xa(g)}catch{return null}}}let Fi=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(g,E){return xu._fromEmailAndPassword(g,E)}static credentialWithLink(g,E){const M=xa.parseLink(E);return q(M,"argument-error"),xu._fromEmailAndCode(g,M.code,M.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class ts{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class ns extends ts{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Ii extends ns{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return q("providerId"in g&&"signInMethod"in g,"argument-error"),Xr._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return q(f.idToken||f.accessToken,"argument-error"),Xr._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Ii.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Ii.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:E,oauthTokenSecret:M,pendingToken:O,nonce:X,providerId:me}=f;if(!E&&!M&&!g&&!O||!me)return null;try{return new Ii(me)._credential({idToken:g,accessToken:E,nonce:X,pendingToken:O})}catch{return null}}}let Go=(()=>{class _ extends ns{constructor(){super("facebook.com")}static credential(g){return Xr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Ma=(()=>{class _ extends ns{constructor(){super("google.com"),this.addScope("profile")}static credential(g,E){return Xr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:E})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:E,oauthAccessToken:M}=g;if(!E&&!M)return null;try{return _.credential(E,M)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),ku=(()=>{class _ extends ns{constructor(){super("github.com")}static credential(g){return Xr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class $s extends wr{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return cr(f,this.buildRequest())}_linkToIdToken(f,g){const E=this.buildRequest();return E.idToken=g,cr(f,E)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,cr(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:M,pendingToken:O}=g;return E&&M&&O&&E===M?new $s(E,O):null}static _create(f,g){return new $s(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ci extends ts{constructor(f){q(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return ci.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return ci.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=$s.fromJSON(f);return q(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:E}=f;if(!g||!E)return null;try{return $s._create(E,g)}catch{return null}}}let ei=(()=>{class _ extends ns{constructor(){super("twitter.com")}static credential(g,E){return Xr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:E})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:E,oauthTokenSecret:M}=g;if(!E||!M)return null;try{return _.credential(E,M)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function co(_,f){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,m.Z)(function*(_,f){return Pr(_,"POST","/v1/accounts:signUp",Tt(_,f))})).apply(this,arguments)}class Sr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,E,M=!1){return(0,m.Z)(function*(){const O=yield W._fromIdTokenResponse(f,E,M),X=jc(E);return new Sr({user:O,providerId:X,_tokenResponse:E,operationType:g})})()}static _forOperation(f,g,E){return(0,m.Z)(function*(){yield f._updateTokensIfNecessary(E,!0);const M=jc(E);return new Sr({user:f,providerId:M,_tokenResponse:E,operationType:g})})()}}function jc(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function In(){return(In=(0,m.Z)(function*(_){var f;const g=kn(_);if(yield g._initializationPromise,null!==(f=g.currentUser)&&void 0!==f&&f.isAnonymous)return new Sr({user:g.currentUser,providerId:null,operationType:"signIn"});const E=yield co(g,{returnSecureToken:!0}),M=yield Sr._fromIdTokenResponse(g,"signIn",E,!0);return yield g._updateCurrentUser(M.user),M})).apply(this,arguments)}class ka extends V.ZR{constructor(f,g,E,M){var O;super(g.code,g.message),this.operationType=E,this.user=M,Object.setPrototypeOf(this,ka.prototype),this.customData={appName:f.name,tenantId:null!==(O=f.tenantId)&&void 0!==O?O:void 0,_serverResponse:g.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(f,g,E,M){return new ka(f,g,E,M)}}function Hc(_,f,g,E){return("reauthenticate"===f?g._getReauthenticationResolver(_):g._getIdTokenResponse(_)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?ka._fromErrorAndOperation(_,O,f,E):O})}function di(_){return new Set(_.map(({providerId:f})=>f).filter(f=>!!f))}function Wo(){return(Wo=(0,m.Z)(function*(_,f){const g=(0,V.m9)(_);yield nn(!0,g,f);const{providerUserInfo:E}=yield Hr(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),M=di(E||[]);return g.providerData=g.providerData.filter(O=>M.has(O.providerId)),M.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Is(_,f){return rs.apply(this,arguments)}function rs(){return(rs=(0,m.Z)(function*(_,f,g=!1){const E=yield Xn(_,f._linkToIdToken(_.auth,yield _.getIdToken()),g);return Sr._forOperation(_,"link",E)})).apply(this,arguments)}function nn(_,f,g){return Na.apply(this,arguments)}function Na(){return(Na=(0,m.Z)(function*(_,f,g){yield on(f);const M=!1===_?"provider-already-linked":"no-such-provider";q(di(f.providerData).has(g)===_,f.auth,M)})).apply(this,arguments)}function Hs(_,f){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,m.Z)(function*(_,f,g=!1){var E;const{auth:M}=_,O="reauthenticate";try{const X=yield Xn(_,Hc(M,O,f,_),g);q(X.idToken,M,"internal-error");const me=Ve(X.idToken);q(me,M,"internal-error");const{sub:Ye}=me;return q(_.uid===Ye,M,"user-mismatch"),Sr._forOperation(_,O,X)}catch(X){throw"auth/user-not-found"===(null===(E=X)||void 0===E?void 0:E.code)&&Me(M,"user-mismatch"),X}})).apply(this,arguments)}function bi(_,f){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,m.Z)(function*(_,f,g=!1){const E="signIn",M=yield Hc(_,E,f),O=yield Sr._fromIdTokenResponse(_,E,M);return g||(yield _._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Bn(_,f){return At.apply(this,arguments)}function At(){return(At=(0,m.Z)(function*(_,f){return bi(kn(_),f)})).apply(this,arguments)}function ho(_,f){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,m.Z)(function*(_,f){const g=(0,V.m9)(_);return yield nn(!1,g,f.providerId),Is(g,f)})).apply(this,arguments)}function is(_,f){return La.apply(this,arguments)}function La(){return(La=(0,m.Z)(function*(_,f){return Hs((0,V.m9)(_),f)})).apply(this,arguments)}function Nu(_,f){return ss.apply(this,arguments)}function ss(){return(ss=(0,m.Z)(function*(_,f){return Pr(_,"POST","/v1/accounts:signInWithCustomToken",Tt(_,f))})).apply(this,arguments)}function zo(){return(zo=(0,m.Z)(function*(_,f){const g=kn(_),E=yield Nu(g,{token:f,returnSecureToken:!0}),M=yield Sr._fromIdTokenResponse(g,"signIn",E);return yield g._updateCurrentUser(M.user),M})).apply(this,arguments)}class Ne{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?Zt._fromServerResponse(f,g):Me(f,"internal-error")}}class Zt extends Ne{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new Zt(g)}}function Fa(_,f,g){var E;q((null===(E=g.url)||void 0===E?void 0:E.length)>0,_,"invalid-continue-uri"),q(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(q(g.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(q(g.android.packageName.length>0,_,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function Nn(){return(Nn=(0,m.Z)(function*(_,f,g){const E=(0,V.m9)(_),M={requestType:"PASSWORD_RESET",email:f};g&&Fa(E,M,g),yield lr(E,M)})).apply(this,arguments)}function fo(){return(fo=(0,m.Z)(function*(_,f,g){yield rr((0,V.m9)(_),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Ko(){return(Ko=(0,m.Z)(function*(_,f){yield Cu((0,V.m9)(_),{oobCode:f})})).apply(this,arguments)}function po(_,f){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,m.Z)(function*(_,f){const g=(0,V.m9)(_),E=yield rr(g,{oobCode:f}),M=E.requestType;switch(q(M,g,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":q(E.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":q(E.mfaInfo,g,"internal-error");default:q(E.email,g,"internal-error")}let O=null;return E.mfaInfo&&(O=Ne._fromServerResponse(kn(g),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:O},operation:M}})).apply(this,arguments)}function Lu(){return(Lu=(0,m.Z)(function*(_,f){const{data:g}=yield po((0,V.m9)(_),f);return g.email})).apply(this,arguments)}function Pn(){return(Pn=(0,m.Z)(function*(_,f,g){const E=kn(_),M=yield co(E,{returnSecureToken:!0,email:f,password:g}),O=yield Sr._fromIdTokenResponse(E,"signIn",M);return yield E._updateCurrentUser(O.user),O})).apply(this,arguments)}function Gs(){return(Gs=(0,m.Z)(function*(_,f,g){const E=(0,V.m9)(_),M={requestType:"EMAIL_SIGNIN",email:f};q(g.handleCodeInApp,E,"argument-error"),g&&Fa(E,M,g),yield Ta(E,M)})).apply(this,arguments)}function Yo(){return(Yo=(0,m.Z)(function*(_,f,g){const E=(0,V.m9)(_),M=Fi.credentialWithLink(f,g||Be());return q(M._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Bn(E,M)})).apply(this,arguments)}function nh(_,f){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,m.Z)(function*(_,f){return sn(_,"POST","/v1/accounts:createAuthUri",Tt(_,f))})).apply(this,arguments)}function Jo(){return(Jo=(0,m.Z)(function*(_,f){const E={identifier:f,continueUri:pt()?Be():"http://localhost"},{signinMethods:M}=yield nh((0,V.m9)(_),E);return M||[]})).apply(this,arguments)}function Xo(){return(Xo=(0,m.Z)(function*(_,f){const g=(0,V.m9)(_),M={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};f&&Fa(g.auth,M,f);const{email:O}=yield ur(g.auth,M);O!==_.email&&(yield _.reload())})).apply(this,arguments)}function ea(){return(ea=(0,m.Z)(function*(_,f,g){const E=(0,V.m9)(_),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:f};g&&Fa(E.auth,O,g);const{email:X}=yield Sa(E.auth,O);X!==_.email&&(yield _.reload())})).apply(this,arguments)}function ta(_,f){return ju.apply(this,arguments)}function ju(){return(ju=(0,m.Z)(function*(_,f){return sn(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Hu(){return(Hu=(0,m.Z)(function*(_,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const E=(0,V.m9)(_),O={idToken:yield E.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},X=yield Xn(E,ta(E.auth,O));E.displayName=X.displayName||null,E.photoURL=X.photoUrl||null;const me=E.providerData.find(({providerId:Ye})=>"password"===Ye);me&&(me.displayName=E.displayName,me.photoURL=E.photoURL),yield E._updateTokensIfNecessary(X)})).apply(this,arguments)}function Ws(_,f,g){return Va.apply(this,arguments)}function Va(){return(Va=(0,m.Z)(function*(_,f,g){const{auth:E}=_,O={idToken:yield _.getIdToken(),returnSecureToken:!0};f&&(O.email=f),g&&(O.password=g);const X=yield Xn(_,En(E,O));yield _._updateTokensIfNecessary(X,!0)})).apply(this,arguments)}class ti{constructor(f,g,E={}){this.isNewUser=f,this.providerId=g,this.profile=E}}class Dn extends ti{constructor(f,g,E,M){super(f,g,E),this.username=M}}class jl extends ti{constructor(f,g){super(f,"facebook.com",g)}}class Wu extends Dn{constructor(f,g){super(f,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class Gc extends ti{constructor(f,g){super(f,"google.com",g)}}class zu extends Dn{constructor(f,g,E){super(f,"twitter.com",g,E)}}function Ba(_){const{user:f,_tokenResponse:g}=_;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function dr(_){var f,g;if(!_)return null;const{providerId:E}=_,M=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},O=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!E&&_?.idToken){const X=null===(g=null===(f=Ve(_.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(X)return new ti(O,"anonymous"!==X&&"custom"!==X?X:null)}if(!E)return null;switch(E){case"facebook.com":return new jl(O,M);case"github.com":return new Wu(O,M);case"google.com":return new Gc(O,M);case"twitter.com":return new zu(O,M,_.screenName||null);case"custom":case"anonymous":return new ti(O,null);default:return new ti(O,E,M)}}(g)}class qs{constructor(f,g,E){this.type=f,this.credential=g,this.auth=E}static _fromIdtoken(f,g){return new qs("enroll",f,g)}static _fromMfaPendingCredential(f){return new qs("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,E;if(f?.multiFactorSession){if(null!==(g=f.multiFactorSession)&&void 0!==g&&g.pendingCredential)return qs._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(E=f.multiFactorSession)&&void 0!==E&&E.idToken)return qs._fromIdtoken(f.multiFactorSession.idToken)}return null}}class na{constructor(f,g,E){this.session=f,this.hints=g,this.signInResolver=E}static _fromError(f,g){const E=kn(f),M=g.customData._serverResponse,O=(M.mfaInfo||[]).map(me=>Ne._fromServerResponse(E,me));q(M.mfaPendingCredential,E,"internal-error");const X=qs._fromMfaPendingCredential(M.mfaPendingCredential);return new na(X,O,function(){var me=(0,m.Z)(function*(Ye){const st=yield Ye._process(E,X);delete M.mfaInfo,delete M.mfaPendingCredential;const Ct=Object.assign(Object.assign({},M),{idToken:st.idToken,refreshToken:st.refreshToken});switch(g.operationType){case"signIn":const wt=yield Sr._fromIdTokenResponse(E,g.operationType,Ct);return yield E._updateCurrentUser(wt.user),wt;case"reauthenticate":return q(g.user,E,"internal-error"),Sr._forOperation(g.user,g.operationType,Ct);default:Me(E,"internal-error")}});return function(Ye){return me.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,m.Z)(function*(){return g.signInResolver(f)})()}}function $a(_,f){return sn(_,"POST","/v2/accounts/mfaEnrollment:start",Tt(_,f))}class yo{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(E=>Ne._fromServerResponse(f.auth,E)))})}static _fromUser(f){return new yo(f)}getSession(){var f=this;return(0,m.Z)(function*(){return qs._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,g){var E=this;return(0,m.Z)(function*(){const M=f,O=yield E.getSession(),X=yield Xn(E.user,M._process(E.user.auth,O,g));return yield E.user._updateTokensIfNecessary(X),E.user.reload()})()}unenroll(f){var g=this;return(0,m.Z)(function*(){var E;const M="string"==typeof f?f:f.uid,O=yield g.user.getIdToken(),X=yield Xn(g.user,function Ci(_,f){return sn(_,"POST","/v2/accounts/mfaEnrollment:withdraw",Tt(_,f))}(g.user.auth,{idToken:O,mfaEnrollmentId:M}));g.enrolledFactors=g.enrolledFactors.filter(({uid:me})=>me!==M),yield g.user._updateTokensIfNecessary(X);try{yield g.user.reload()}catch(me){if("auth/user-token-expired"!==(null===(E=me)||void 0===E?void 0:E.code))throw me}})()}}const _o=new WeakMap,Ks="__sak";class Ga{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Ks,"1"),this.storage.removeItem(Ks),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const b=(()=>{class _ extends Ga{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,E)=>this.onStorageEvent(g,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ra(){const _=(0,V.z$)();return $t(_)||Xt(_)}()&&function wn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ys(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const E of Object.keys(this.listeners)){const M=this.storage.getItem(E),O=this.localCache[E];M!==O&&g(E,O,M)}}onStorageEvent(g,E=!1){if(!g.key)return void this.forAllChangedKeys((me,Ye,st)=>{this.notifyListeners(me,st)});const M=g.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const me=this.storage.getItem(M);if(g.newValue!==me)null!==g.newValue?this.storage.setItem(M,g.newValue):this.storage.removeItem(M);else if(this.localCache[M]===g.newValue&&!E)return}const O=()=>{const me=this.storage.getItem(M);!E&&this.localCache[M]===me||this.notifyListeners(M,me)},X=this.storage.getItem(M);!function Vn(){return(0,V.w1)()&&10===document.documentMode}()||X===g.newValue||g.newValue===g.oldValue?O():setTimeout(O,10)}notifyListeners(g,E){this.localCache[g]=E;const M=this.listeners[g];if(M)for(const O of Array.from(M))O(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,E,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:E,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,E){var M=()=>super._set,O=this;return(0,m.Z)(function*(){yield M().call(O,g,E),O.localCache[g]=JSON.stringify(E)})()}_get(g){var E=()=>super._get,M=this;return(0,m.Z)(function*(){const O=yield E().call(M,g);return M.localCache[g]=JSON.stringify(O),O})()}_remove(g){var E=()=>super._remove,M=this;return(0,m.Z)(function*(){yield E().call(M,g),delete M.localCache[g]})()}}return _.type="LOCAL",_})(),k=(()=>{class _ extends Ga{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,E){}_removeListener(g,E){}}return _.type="SESSION",_})();let be=(()=>{class _{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const E=this.receivers.find(O=>O.isListeningto(g));if(E)return E;const M=new _(g);return this.receivers.push(M),M}isListeningto(g){return this.eventTarget===g}handleEvent(g){var E=this;return(0,m.Z)(function*(){const M=g,{eventId:O,eventType:X,data:me}=M.data,Ye=E.handlersMap[X];if(!Ye?.size)return;M.ports[0].postMessage({status:"ack",eventId:O,eventType:X});const st=Array.from(Ye).map(function(){var wt=(0,m.Z)(function*(bn){return bn(M.origin,me)});return function(bn){return wt.apply(this,arguments)}}()),Ct=yield function H(_){return Promise.all(_.map(function(){var f=(0,m.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(E){return{fulfilled:!1,reason:E}}});return function(g){return f.apply(this,arguments)}}()))}(st);M.ports[0].postMessage({status:"done",eventId:O,eventType:X,response:Ct})})()}_subscribe(g,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(E)}_unsubscribe(g,E){this.handlersMap[g]&&E&&this.handlersMap[g].delete(E),(!E||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function rt(_="",f=10){let g="";for(let E=0;E<f;E++)g+=Math.floor(10*Math.random());return _+g}class On{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,E=50){var M=this;return(0,m.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let X,me;return new Promise((Ye,st)=>{const Ct=rt("",20);O.port1.start();const wt=setTimeout(()=>{st(new Error("unsupported_event"))},E);me={messageChannel:O,onMessage(bn){const Hi=bn;if(Hi.data.eventId===Ct)switch(Hi.data.status){case"ack":clearTimeout(wt),X=setTimeout(()=>{st(new Error("timeout"))},3e3);break;case"done":clearTimeout(X),Ye(Hi.data.response);break;default:clearTimeout(wt),clearTimeout(X),st(new Error("invalid_response"))}}},M.handlers.add(me),O.port1.addEventListener("message",me.onMessage),M.target.postMessage({eventType:f,eventId:Ct,data:g},[O.port2])}).finally(()=>{me&&M.removeMessageHandler(me)})})()}}function pn(){return window}function as(){return typeof pn().WorkerGlobalScope<"u"&&"function"==typeof pn().importScripts}function Zu(){return(Zu=(0,m.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const wo="firebaseLocalStorageDb",Eo="firebaseLocalStorage",ql="fbase_key";class ia{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Yu(_,f){return _.transaction([Eo],f?"readwrite":"readonly").objectStore(Eo)}function Wa(){const _=indexedDB.open(wo,1);return new Promise((f,g)=>{_.addEventListener("error",()=>{g(_.error)}),_.addEventListener("upgradeneeded",()=>{const E=_.result;try{E.createObjectStore(Eo,{keyPath:ql})}catch(M){g(M)}}),_.addEventListener("success",(0,m.Z)(function*(){const E=_.result;E.objectStoreNames.contains(Eo)?f(E):(E.close(),yield function ih(){const _=indexedDB.deleteDatabase(wo);return new ia(_).toPromise()}(),f(yield Wa()))}))})}function Zs(_,f,g){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,m.Z)(function*(_,f,g){const E=Yu(_,!0).put({[ql]:f,value:g});return new ia(E).toPromise()})).apply(this,arguments)}function Qu(){return(Qu=(0,m.Z)(function*(_,f){const g=Yu(_,!1).get(f),E=yield new ia(g).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function sa(_,f){const g=Yu(_,!0).delete(f);return new ia(g).toPromise()}const za=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,m.Z)(function*(){return g.db||(g.db=yield Wa()),g.db})()}_withRetries(g){var E=this;return(0,m.Z)(function*(){let M=0;for(;;)try{const O=yield E._openDb();return yield g(O)}catch(O){if(M++>3)throw O;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,m.Z)(function*(){return as()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,m.Z)(function*(){g.receiver=be._getInstance(function zl(){return as()?self:null}()),g.receiver._subscribe("keyChanged",function(){var E=(0,m.Z)(function*(M,O){return{keyProcessed:(yield g._poll()).includes(O.key)}});return function(M,O){return E.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var E=(0,m.Z)(function*(M,O){return["keyChanged"]});return function(M,O){return E.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,m.Z)(function*(){var E,M;if(g.activeServiceWorker=yield function us(){return Zu.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new On(g.activeServiceWorker);const O=yield g.sender._send("ping",{},800);!O||(null===(E=O[0])||void 0===E?void 0:E.fulfilled)&&(null===(M=O[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var E=this;return(0,m.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Wl(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:g},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Wa();return yield Zs(g,Ks,"1"),yield sa(g,Ks),!0}catch{}return!1})()}_withPendingWrite(g){var E=this;return(0,m.Z)(function*(){E.pendingWrites++;try{yield g()}finally{E.pendingWrites--}})()}_set(g,E){var M=this;return(0,m.Z)(function*(){return M._withPendingWrite((0,m.Z)(function*(){return yield M._withRetries(O=>Zs(O,g,E)),M.localCache[g]=E,M.notifyServiceWorker(g)}))})()}_get(g){var E=this;return(0,m.Z)(function*(){const M=yield E._withRetries(O=>function Kl(_,f){return Qu.apply(this,arguments)}(O,g));return E.localCache[g]=M,M})()}_remove(g){var E=this;return(0,m.Z)(function*(){return E._withPendingWrite((0,m.Z)(function*(){return yield E._withRetries(M=>sa(M,g)),delete E.localCache[g],E.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,m.Z)(function*(){const E=yield g._withRetries(X=>{const me=Yu(X,!1).getAll();return new ia(me).toPromise()});if(!E)return[];if(0!==g.pendingWrites)return[];const M=[],O=new Set;for(const{fbase_key:X,value:me}of E)O.add(X),JSON.stringify(g.localCache[X])!==JSON.stringify(me)&&(g.notifyListeners(X,me),M.push(X));for(const X of Object.keys(g.localCache))g.localCache[X]&&!O.has(X)&&(g.notifyListeners(X,null),M.push(X));return M})()}notifyListeners(g,E){this.localCache[g]=E;const M=this.listeners[g];if(M)for(const O of Array.from(M))O(E)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function qa(_,f){return sn(_,"POST","/v2/accounts/mfaSignIn:start",Tt(_,f))}function bo(){return(bo=(0,m.Z)(function*(_){return(yield sn(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Za(_){return new Promise((f,g)=>{const E=document.createElement("script");E.setAttribute("src",_),E.onload=f,E.onerror=M=>{const O=Te("internal-error");O.customData=M,g(O)},E.type="text/javascript",E.charset="UTF-8",function Ka(){var _,f;return null!==(f=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==f?f:document}().appendChild(E)})}function Ql(_){return`__${_}${Math.floor(1e6*Math.random())}`}const Ju=1e12;class Ln{constructor(f){this.auth=f,this.counter=Ju,this._widgets=new Map}render(f,g){const E=this.counter;return this._widgets.set(E,new Zg(f,this.auth.name,g||{})),this.counter++,E}reset(f){var g;const E=f||Ju;null===(g=this._widgets.get(E))||void 0===g||g.delete(),this._widgets.delete(E)}getResponse(f){var g;return(null===(g=this._widgets.get(f||Ju))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,m.Z)(function*(){var E;return null===(E=g._widgets.get(f||Ju))||void 0===E||E.execute(),""})()}}class Zg{constructor(f,g,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof f?document.getElementById(f):f;q(M,"argument-error",{appName:g}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function L_(_){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<_;E++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Yg=Ql("rcb"),F_=new tn(3e4,6e4);class Gf{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=pn().grecaptcha)||void 0===f||!f.render)}load(f,g=""){return q(function sE(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(pn().grecaptcha):new Promise((E,M)=>{const O=pn().setTimeout(()=>{M(Te(f,"network-request-failed"))},F_.get());pn()[Yg]=()=>{pn().clearTimeout(O),delete pn()[Yg];const me=pn().grecaptcha;if(!me)return void M(Te(f,"internal-error"));const Ye=me.render;me.render=(st,Ct)=>{const wt=Ye(st,Ct);return this.counter++,wt},this.hostLanguage=g,E(me)},Za(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:Yg,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(O),M(Te(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var g;return!(null===(g=pn().grecaptcha)||void 0===g||!g.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class qc{load(f){return(0,m.Z)(function*(){return new Ln(f)})()}clearedOneInstance(){}}const V_="recaptcha",B_={theme:"light",type:"image"};class Ur{constructor(f,g=Object.assign({},B_),E){this.parameters=g,this.type=V_,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=kn(E),this.isInvisible="invisible"===this.parameters.size,q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof f?document.getElementById(f):f;q(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new qc:new Gf,this.validateStartingState()}verify(){var f=this;return(0,m.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),E=f.getAssertedRecaptcha();return E.getResponse(g)||new Promise(O=>{const X=me=>{!me||(f.tokenChangeListeners.delete(X),O(me))};f.tokenChangeListeners.add(X),f.isInvisible&&E.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){q(!this.parameters.sitekey,this.auth,"argument-error"),q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(E=>E(g)),"function"==typeof f)f(g);else if("string"==typeof f){const E=pn()[f];"function"==typeof E&&E(g)}}}assertNotDestroyed(){q(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,m.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const E=document.createElement("div");g.appendChild(E),g=E}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,m.Z)(function*(){q(pt()&&!as(),f.auth,"internal-error"),yield function xn(){let _=null;return new Promise(f=>{"complete"!==document.readyState?(_=()=>f(),window.addEventListener("load",_)):f()}).catch(f=>{throw _&&window.removeEventListener("load",_),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function Di(_){return bo.apply(this,arguments)}(f.auth);q(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ls{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Es._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function Bi(){return(Bi=(0,m.Z)(function*(_,f,g){const E=kn(_),M=yield Co(E,f,(0,V.m9)(g));return new ls(M,O=>Bn(E,O))})).apply(this,arguments)}function cs(){return(cs=(0,m.Z)(function*(_,f,g){const E=(0,V.m9)(_);yield nn(!1,E,"phone");const M=yield Co(E.auth,f,(0,V.m9)(g));return new ls(M,O=>ho(E,O))})).apply(this,arguments)}function ni(){return(ni=(0,m.Z)(function*(_,f,g){const E=(0,V.m9)(_),M=yield Co(E.auth,f,(0,V.m9)(g));return new ls(M,O=>is(E,O))})).apply(this,arguments)}function Co(_,f,g){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,m.Z)(function*(_,f,g){var E;const M=yield g.verify();try{let O;if(q("string"==typeof M,_,"argument-error"),q(g.type===V_,_,"argument-error"),O="string"==typeof f?{phoneNumber:f}:f,"session"in O){const X=O.session;if("phoneNumber"in O)return q("enroll"===X.type,_,"internal-error"),(yield $a(_,{idToken:X.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{q("signin"===X.type,_,"internal-error");const me=(null===(E=O.multiFactorHint)||void 0===E?void 0:E.uid)||O.multiFactorUid;return q(me,_,"missing-multi-factor-info"),(yield qa(_,{mfaPendingCredential:X.credential,mfaEnrollmentId:me,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:X}=yield Qd(_,{phoneNumber:O.phoneNumber,recaptchaToken:M});return X}}finally{g._reset()}})).apply(this,arguments)}function Kc(){return(Kc=(0,m.Z)(function*(_,f){yield Is((0,V.m9)(_),f)})).apply(this,arguments)}let Xl=(()=>{class _{constructor(g){this.providerId=_.PROVIDER_ID,this.auth=kn(g)}verifyPhoneNumber(g,E){return Co(this.auth,g,(0,V.m9)(E))}static credential(g,E){return Es._fromVerification(g,E)}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:E,temporaryProof:M}=g;return E&&M?Es._fromTokenResponse(E,M):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function Qa(_,f){return f?ae(f):(q(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Ys extends wr{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return cr(f,this._buildIdpRequest())}_linkToIdToken(f,g){return cr(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return cr(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function ut(_){return bi(_.auth,new Ys(_),_.bypassAuthState)}function el(_){const{auth:f,user:g}=_;return q(g,f,"internal-error"),Hs(g,new Ys(_),_.bypassAuthState)}function Do(_){return ec.apply(this,arguments)}function ec(){return(ec=(0,m.Z)(function*(_){const{auth:f,user:g}=_;return q(g,f,"internal-error"),Is(g,new Ys(_),_.bypassAuthState)})).apply(this,arguments)}class tl{constructor(f,g,E,M,O=!1){this.auth=f,this.resolver=E,this.user=M,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,m.Z)(function*(E,M){f.pendingPromise={resolve:E,reject:M};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(O){f.reject(O)}});return function(E,M){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,m.Z)(function*(){const{urlResponse:E,sessionId:M,postBody:O,tenantId:X,error:me,type:Ye}=f;if(me)return void g.reject(me);const st={auth:g.auth,requestUri:E,sessionId:M,tenantId:X||void 0,postBody:O||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Ye)(st))}catch(Ct){g.reject(Ct)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return ut;case"linkViaPopup":case"linkViaRedirect":return Do;case"reauthViaPopup":case"reauthViaRedirect":return el;default:Me(this.auth,"internal-error")}}resolve(f){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const hr=new tn(2e3,1e4);function Ja(){return(Ja=(0,m.Z)(function*(_,f,g){const E=kn(_);Qe(_,f,ts);const M=Qa(E,g);return new To(E,"signInViaPopup",f,M).executeNotNull()})).apply(this,arguments)}function Yc(){return(Yc=(0,m.Z)(function*(_,f,g){const E=(0,V.m9)(_);Qe(E.auth,f,ts);const M=Qa(E.auth,g);return new To(E.auth,"reauthViaPopup",f,M,E).executeNotNull()})).apply(this,arguments)}function nl(){return(nl=(0,m.Z)(function*(_,f,g){const E=(0,V.m9)(_);Qe(E.auth,f,ts);const M=Qa(E.auth,g);return new To(E.auth,"linkViaPopup",f,M,E).executeNotNull()})).apply(this,arguments)}let To=(()=>{class _ extends tl{constructor(g,E,M,O,X){super(g,E,O,X),this.provider=M,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var g=this;return(0,m.Z)(function*(){const E=yield g.execute();return q(E,g.auth,"internal-error"),E})()}onExecution(){var g=this;return(0,m.Z)(function*(){Q(1===g.filter.length,"Popup operations only handle one event");const E=rt();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],E),g.authWindow.associatedEvent=E,g.resolver._originValidation(g.auth).catch(M=>{g.reject(M)}),g.resolver._isIframeWebStorageSupported(g.auth,M=>{M||g.reject(Te(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Te(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const g=()=>{var E,M;this.pollId=null!==(M=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Te(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,hr.get())};g()}}return _.currentPopupAction=null,_})();const ds=new Map;class Qc extends tl{constructor(f,g,E=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,E),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,m.Z)(function*(){let E=ds.get(g.auth._key());if(!E){try{const O=(yield function Xa(_,f){return Ti.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;E=()=>Promise.resolve(O)}catch(M){E=()=>Promise.reject(M)}ds.set(g.auth._key(),E)}return g.bypassAuthState||ds.set(g.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,E=this;return(0,m.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(E,f);if("unknown"!==f.type){if(f.eventId){const M=yield E.auth._redirectUserForId(f.eventId);if(M)return E.user=M,g().call(E,f);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function Ti(){return(Ti=(0,m.Z)(function*(_,f){const g=fr(f),E=Js(_);if(!(yield E._isAvailable()))return!1;const M="true"===(yield E._get(g));return yield E._remove(g),M})).apply(this,arguments)}function Qs(_,f){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,m.Z)(function*(_,f){return Js(_)._set(fr(f),"true")})).apply(this,arguments)}function Ao(_,f){ds.set(_._key(),f)}function Js(_){return ae(_._redirectPersistence)}function fr(_){return De("pendingRedirect",_.config.apiKey,_.name)}function T(){return(T=(0,m.Z)(function*(_,f,g){const E=kn(_);Qe(_,f,ts);const M=Qa(E,g);return yield Qs(M,E),M._openRedirect(E,f,"signInViaRedirect")})).apply(this,arguments)}function $(){return($=(0,m.Z)(function*(_,f,g){const E=(0,V.m9)(_);Qe(E.auth,f,ts);const M=Qa(E.auth,g);yield Qs(M,E.auth);const O=yield vt(E);return M._openRedirect(E.auth,f,"reauthViaRedirect",O)})).apply(this,arguments)}function Re(){return(Re=(0,m.Z)(function*(_,f,g){const E=(0,V.m9)(_);Qe(E.auth,f,ts);const M=Qa(E.auth,g);yield nn(!1,E,f.providerId),yield Qs(M,E.auth);const O=yield vt(E);return M._openRedirect(E.auth,f,"linkViaRedirect",O)})).apply(this,arguments)}function ht(){return(ht=(0,m.Z)(function*(_,f){return yield kn(_)._initializationPromise,xt(_,f,!1)})).apply(this,arguments)}function xt(_,f){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,m.Z)(function*(_,f,g=!1){const E=kn(_),M=Qa(E,f),X=yield new Qc(E,M,g).execute();return X&&!g&&(delete X.user._redirectEventId,yield E._persistUserIfCurrent(X.user),yield E._setRedirectUser(null,f)),X})).apply(this,arguments)}function vt(_){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,m.Z)(function*(_){const f=rt(`${_.uid}:::`);return _._redirectEventId=f,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),f})).apply(this,arguments)}class eu{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(f,E)&&(g=!0,this.sendToConsumer(f,E),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Ts(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lt(_);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var E;if(f.error&&!Lt(f)){const M=(null===(E=f.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";g.onError(Te(this.auth,M))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const E=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&E}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(xo(f))}saveEventToCache(f){this.cachedEventUids.add(xo(f)),this.lastProcessedEventTime=Date.now()}}function xo(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(f=>f).join("-")}function Lt({type:_,error:f}){return"unknown"===_&&"auth/no-auth-event"===f?.code}function Ro(_){return ji.apply(this,arguments)}function ji(){return(ji=(0,m.Z)(function*(_,f={}){return sn(_,"GET","/v1/projects",f)})).apply(this,arguments)}const tu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aa=/^https?/;function Wf(){return(Wf=(0,m.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:f}=yield Ro(_);for(const g of f)try{if(Xg(g))return}catch{}Me(_,"unauthorized-domain")})).apply(this,arguments)}function Xg(_){const f=Be(),{protocol:g,hostname:E}=new URL(f);if(_.startsWith("chrome-extension://")){const X=new URL(_);return""===X.hostname&&""===E?"chrome-extension:"===g&&_.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&X.hostname===E}if(!aa.test(g))return!1;if(tu.test(_))return E===_;const M=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(E)}const em=new tn(3e4,6e4);function j_(){const _=pn().___jsl;if(_?.H)for(const f of Object.keys(_.H))if(_.H[f].r=_.H[f].r||[],_.H[f].L=_.H[f].L||[],_.H[f].r=[..._.H[f].L],_.CP)for(let g=0;g<_.CP.length;g++)_.CP[g]=null}let Ss=null;function zf(_){return Ss=Ss||function Ar(_){return new Promise((f,g)=>{var E,M,O;function X(){j_(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{j_(),g(Te(_,"network-request-failed"))},timeout:em.get()})}if(null!==(M=null===(E=pn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==M&&M.Iframe)f(gapi.iframes.getContext());else{if(null===(O=pn().gapi)||void 0===O||!O.load){const me=Ql("iframefcb");return pn()[me]=()=>{gapi.load?X():g(Te(_,"network-request-failed"))},Za(`https://apis.google.com/js/api.js?onload=${me}`).catch(Ye=>g(Ye))}X()}}).catch(f=>{throw Ss=null,f})}(_),Ss}const tm=new tn(5e3,15e3),$_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Kf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nm(_){const f=_.config;q(f.authDomain,_,"auth-domain-config-required");const g=f.emulator?Cn(f,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,E={apiKey:f.apiKey,appName:_.name,v:ce.SDK_VERSION},M=Kf.get(_.config.apiHost);M&&(E.eid=M);const O=_._getFrameworks();return O.length&&(E.fw=O.join(",")),`${g}?${(0,V.xO)(E).slice(1)}`}function rl(){return rl=(0,m.Z)(function*(_){const f=yield zf(_),g=pn().gapi;return q(g,_,"internal-error"),f.open({where:document.body,url:nm(_),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$_,dontclear:!0},E=>new Promise(function(){var M=(0,m.Z)(function*(O,X){yield E.restyle({setHideOnLeave:!1});const me=Te(_,"network-request-failed"),Ye=pn().setTimeout(()=>{X(me)},tm.get());function st(){pn().clearTimeout(Ye),O(E)}E.ping(st).then(st,()=>{X(me)})});return function(O,X){return M.apply(this,arguments)}}()))}),rl.apply(this,arguments)}const sh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Jc{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uh(_,f,g,E,M,O){q(_.config.authDomain,_,"auth-domain-config-required"),q(_.config.apiKey,_,"invalid-api-key");const X={apiKey:_.config.apiKey,appName:_.name,authType:g,redirectUrl:E,v:ce.SDK_VERSION,eventId:M};if(f instanceof ts){f.setDefaultLanguage(_.languageCode),X.providerId=f.providerId||"",(0,V.xb)(f.getCustomParameters())||(X.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Ye,st]of Object.entries(O||{}))X[Ye]=st}if(f instanceof ns){const Ye=f.getScopes().filter(st=>""!==st);Ye.length>0&&(X.scopes=Ye.join(","))}_.tenantId&&(X.tid=_.tenantId);const me=X;for(const Ye of Object.keys(me))void 0===me[Ye]&&delete me[Ye];return`${function lh({config:_}){return _.emulator?Cn(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,V.xO)(me).slice(1)}`}const sl="webStorageSupport";class As extends class H_{constructor(f){this.factorId=f}_process(f,g,E){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,E);case"signin":return this._finalizeSignIn(f,g.credential);default:return ye("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new As(f)}_finalizeEnroll(f,g,E){return function Ha(_,f){return sn(_,"POST","/v2/accounts/mfaEnrollment:finalize",Tt(_,f))}(f,{idToken:g,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function Yl(_,f){return sn(_,"POST","/v2/accounts/mfaSignIn:finalize",Tt(_,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let nu=(()=>{class _{constructor(){}static assertion(g){return As._fromCredential(g)}}return _.FACTOR_ID="phone",_})();var Yf="@firebase/auth";class aE{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,m.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(E=>{var M;f((null===(M=E)||void 0===M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ol(){return window}function al(){return(al=(0,m.Z)(function*(_,f,g){var E;const{BuildInfo:M}=ol();Q(f.sessionId,"AuthEvent did not contain a session ID");const O=yield ul(f.sessionId),X={};return Xt()?X.ibi=M.packageName:mn()?X.apn=M.packageName:Me(_,"operation-not-supported-in-this-environment"),M.displayName&&(X.appDisplayName=M.displayName),X.sessionId=O,uh(_,g,f.type,void 0,null!==(E=f.eventId)&&void 0!==E?E:void 0,X)})).apply(this,arguments)}function rc(){return(rc=(0,m.Z)(function*(_){const{BuildInfo:f}=ol(),g={};Xt()?g.iosBundleId=f.packageName:mn()?g.androidPackageName=f.packageName:Me(_,"operation-not-supported-in-this-environment"),yield Ro(_,g)})).apply(this,arguments)}function lm(){return(lm=(0,m.Z)(function*(_,f,g){const{cordova:E}=ol();let M=()=>{};try{yield new Promise((O,X)=>{let me=null;function Ye(){var wt;O();const bn=null===(wt=E.plugins.browsertab)||void 0===wt?void 0:wt.close;"function"==typeof bn&&bn(),"function"==typeof g?.close&&g.close()}function st(){me||(me=window.setTimeout(()=>{X(Te(_,"redirect-cancelled-by-user"))},2e3))}function Ct(){"visible"===document?.visibilityState&&st()}f.addPassiveListener(Ye),document.addEventListener("resume",st,!1),mn()&&document.addEventListener("visibilitychange",Ct,!1),M=()=>{f.removePassiveListener(Ye),document.removeEventListener("resume",st,!1),document.removeEventListener("visibilitychange",Ct,!1),me&&window.clearTimeout(me)}})}finally{M()}})).apply(this,arguments)}function ul(_){return ca.apply(this,arguments)}function ca(){return(ca=(0,m.Z)(function*(_){const f=td(_),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(M=>M.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function td(_){if(Q(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(_);const f=new ArrayBuffer(_.length),g=new Uint8Array(f);for(let E=0;E<_.length;E++)g[E]=_.charCodeAt(E);return g}(0,V.Pz)("authIdTokenMaxAge"),function lE(_){(0,ce._registerComponent)(new he.wA("auth",(f,{options:g})=>{const E=f.getProvider("app").getImmediate(),M=f.getProvider("heartbeat"),{apiKey:O,authDomain:X}=E.options;return((me,Ye)=>{q(O&&!O.includes(":"),"invalid-api-key",{appName:me.name}),q(!X?.includes(":"),"argument-error",{appName:me.name});const st={apiKey:O,authDomain:X,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zn(_)},Ct=new Vt(me,Ye,st);return function je(_,f){const g=f?.persistence||[],E=(Array.isArray(g)?g:[g]).map(ae);f?.errorMap&&_._updateErrorMap(f.errorMap),_._initializeWithPersistence(E,f?.popupRedirectResolver)}(Ct,g),Ct})(E,M)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,E)=>{f.getProvider("auth-internal").initialize()})),(0,ce._registerComponent)(new he.wA("auth-internal",f=>{const g=kn(f.getProvider("auth").getImmediate());return new aE(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ce.registerVersion)(Yf,"0.20.8",function uE(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,ce.registerVersion)(Yf,"0.20.8","esm2017")}("Browser");class Jf extends eu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,m.Z)(function*(){yield f.initPromise})()}}function dm(_){return Xf.apply(this,arguments)}function Xf(){return(Xf=(0,m.Z)(function*(_){const f=yield nd()._get(da(_));return f&&(yield nd()._remove(da(_))),f})).apply(this,arguments)}function ch(){const _=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const E=Math.floor(Math.random()*f.length);_.push(f.charAt(E))}return _.join("")}function nd(){return ae(b)}function da(_){return De("authEvent",_.config.apiKey,_.name)}function dh(_){if(!_?.includes("?"))return{};const[f,...g]=_.split("?");return(0,V.zd)(g.join("?"))}function fh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Te("no-auth-event")}}function gh(){var _;return(null===(_=self?.location)||void 0===_?void 0:_.protocol)||null}function sc(_=(0,V.z$)()){return!("file:"!==gh()&&"ionic:"!==gh()&&"capacitor:"!==gh()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function ym(){try{const _=self.localStorage,f=rt();if(_)return _.setItem(f,"1"),_.removeItem(f),!function mm(_=(0,V.z$)()){return function pm(){return(0,V.w1)()&&11===document?.documentMode}()||function gm(_=(0,V.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,V.hl)()}catch{return mh()&&(0,V.hl)()}return!1}function mh(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function yh(){return(function fE(){return"http:"===gh()||"https:"===gh()}()||(0,V.ru)()||sc())&&!function tp(){return(0,V.b$)()||(0,V.UG)()}()&&ym()&&!mh()}function rd(){return sc()&&typeof document<"u"}function _h(){return(_h=(0,m.Z)(function*(){return!!rd()&&new Promise(_=>{const f=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),_(!0)})})})).apply(this,arguments)}const gi={LOCAL:"local",NONE:"none",SESSION:"session"},$i=q,fs="persistence";function oc(_){return ac.apply(this,arguments)}function ac(){return(ac=(0,m.Z)(function*(_){yield _._initializationPromise;const f=sd(),g=De(fs,_.config.apiKey,_.name);f&&f.setItem(g,_._getPersistence())})).apply(this,arguments)}function sd(){var _;try{return(null===(_=function id(){return typeof window<"u"?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch{return null}}const vh=q;class ri{constructor(){this.browserResolver=ae(class sm{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=k,this._completeRedirectFn=xt,this._overrideRedirectResult=Ao}_openPopup(f,g,E,M){var O=this;return(0,m.Z)(function*(){var X;Q(null===(X=O.eventManagers[f._key()])||void 0===X?void 0:X.manager,"_initialize() not called before _openPopup()");const me=uh(f,g,E,Be(),M);return function la(_,f,g,E=500,M=600){const O=Math.max((window.screen.availHeight-M)/2,0).toString(),X=Math.max((window.screen.availWidth-E)/2,0).toString();let me="";const Ye=Object.assign(Object.assign({},sh),{width:E.toString(),height:M.toString(),top:O,left:X}),st=(0,V.z$)().toLowerCase();g&&(me=Un(st)?"_blank":g),gt(st)&&(f=f||"http://localhost",Ye.scrollbars="yes");const Ct=Object.entries(Ye).reduce((bn,[Hi,hl])=>`${bn}${Hi}=${hl},`,"");if(function Jr(_=(0,V.z$)()){var f;return Xt(_)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(st)&&"_self"!==me)return function im(_,f){const g=document.createElement("a");g.href=_,g.target=f;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(E)}(f||"",me),new Jc(null);const wt=window.open(f||"",me,Ct);q(wt,_,"popup-blocked");try{wt.focus()}catch{}return new Jc(wt)}(f,me,rt())})()}_openRedirect(f,g,E,M){var O=this;return(0,m.Z)(function*(){return yield O._originValidation(f),function Tn(_){pn().location.href=_}(uh(f,g,E,Be(),M)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:M,promise:O}=this.eventManagers[g];return M?Promise.resolve(M):(Q(O,"If manager is not set, promise should be"),O)}const E=this.initAndGetManager(f);return this.eventManagers[g]={promise:E},E.catch(()=>{delete this.eventManagers[g]}),E}initAndGetManager(f){var g=this;return(0,m.Z)(function*(){const E=yield function rm(_){return rl.apply(this,arguments)}(f),M=new eu(f);return E.register("authEvent",O=>(q(O?.authEvent,f,"invalid-auth-event"),{status:M.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:M},g.iframes[f._key()]=E,M})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(sl,{type:sl},M=>{var O;const X=null===(O=M?.[0])||void 0===O?void 0:O[sl];void 0!==X&&g(!!X),Me(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function hs(_){return Wf.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return ys()||$t()||Xt()}}),this.cordovaResolver=ae(class hh{constructor(){this._redirectPersistence=k,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=xt,this._overrideRedirectResult=Ao}_initialize(f){var g=this;return(0,m.Z)(function*(){const E=f._key();let M=g.eventManagers.get(E);return M||(M=new Jf(f),g.eventManagers.set(E,M),g.attachCallbackListeners(f,M)),M})()}_openPopup(f){Me(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,E,M){var O=this;return(0,m.Z)(function*(){!function hE(_){var f,g,E,M,O,X,me,Ye,st,Ct;const wt=ol();q("function"==typeof(null===(f=wt?.universalLinks)||void 0===f?void 0:f.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),q(typeof(null===(g=wt?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),q("function"==typeof(null===(O=null===(M=null===(E=wt?.cordova)||void 0===E?void 0:E.plugins)||void 0===M?void 0:M.browsertab)||void 0===O?void 0:O.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q("function"==typeof(null===(Ye=null===(me=null===(X=wt?.cordova)||void 0===X?void 0:X.plugins)||void 0===me?void 0:me.browsertab)||void 0===Ye?void 0:Ye.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q("function"==typeof(null===(Ct=null===(st=wt?.cordova)||void 0===st?void 0:st.InAppBrowser)||void 0===Ct?void 0:Ct.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const X=yield O._initialize(f);yield X.initialized(),X.resetRedirect(),function Vr(){ds.clear()}(),yield O._originValidation(f);const me=function cm(_,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:ch(),postBody:null,tenantId:_.tenantId,error:Te(_,"no-auth-event")}}(f,E,M);yield function ic(_,f){return nd()._set(da(_),f)}(f,me);const Ye=yield function xs(_,f,g){return al.apply(this,arguments)}(f,me,g),st=yield function W_(_){const{cordova:f}=ol();return new Promise(g=>{f.plugins.browsertab.isAvailable(E=>{let M=null;E?f.plugins.browsertab.openUrl(_):M=f.InAppBrowser.open(_,function zr(_=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),g(M)})})}(Ye);return function dE(_,f,g){return lm.apply(this,arguments)}(f,X,st)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ru(_){return rc.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:E,handleOpenURL:M,BuildInfo:O}=ol(),X=setTimeout((0,m.Z)(function*(){yield dm(f),g.onEvent(fh())}),500),me=function(){var Ct=(0,m.Z)(function*(wt){clearTimeout(X);const bn=yield dm(f);let Hi=null;bn&&wt?.url&&(Hi=function ep(_,f){var g,E;const M=function pr(_){const f=dh(_),g=f.link?decodeURIComponent(f.link):void 0,E=dh(g).link,M=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return dh(M).link||M||E||g||_}(f);if(M.includes("/__/auth/callback")){const O=dh(M),X=O.firebaseError?function q_(_){try{return JSON.parse(_)}catch{return null}}(decodeURIComponent(O.firebaseError)):null,me=null===(E=null===(g=X?.code)||void 0===g?void 0:g.split("auth/"))||void 0===E?void 0:E[1],Ye=me?Te(me):null;return Ye?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Ye,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:M,postBody:null}}return null}(bn,wt.url)),g.onEvent(Hi||fh())});return function(bn){return Ct.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,me);const Ye=M,st=`${O.packageName.toLowerCase()}://`;ol().handleOpenURL=function(){var Ct=(0,m.Z)(function*(wt){if(wt.toLowerCase().startsWith(st)&&me({url:wt}),"function"==typeof Ye)try{Ye(wt)}catch(bn){console.error(bn)}});return function(wt){return Ct.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=k,this._completeRedirectFn=xt,this._overrideRedirectResult=Ao}_initialize(f){var g=this;return(0,m.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,E,M){var O=this;return(0,m.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(f,g,E,M)})()}_openRedirect(f,g,E,M){var O=this;return(0,m.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(f,g,E,M)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return rd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return vh(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,m.Z)(function*(){if(f.underlyingResolver)return;const g=yield function pE(){return _h.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function wh(_){return _.unwrap()}function vm(_){return ad(_)}function ad(_){const{_tokenResponse:f}=_ instanceof V.ZR?_.customData:_;if(!f)return null;if(!(_ instanceof V.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Xl.credentialFromResult(_);const g=f.providerId;if(!g||"password"===g)return null;let E;switch(g){case"google.com":E=Ma;break;case"facebook.com":E=Go;break;case"github.com":E=ku;break;case"twitter.com":E=ei;break;default:const{oauthIdToken:M,oauthAccessToken:O,oauthTokenSecret:X,pendingToken:me,nonce:Ye}=f;return O||X||M||me?me?g.startsWith("saml.")?$s._create(g,me):Xr._fromParams({providerId:g,signInMethod:g,pendingToken:me,idToken:M,accessToken:O}):new Ii(g).credential({idToken:M,accessToken:O,rawNonce:Ye}):null}return _ instanceof V.ZR?E.credentialFromError(_):E.credentialFromResult(_)}function Br(_,f){return f.catch(g=>{throw g instanceof V.ZR&&function np(_,f){var g,E;const M=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===(null===(E=f)||void 0===E?void 0:E.code))f.resolver=new Z_(_,function qn(_,f){var g;const E=(0,V.m9)(_),M=f;return q(f.customData.operationType,E,"argument-error"),q(null===(g=M.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,E,"argument-error"),na._fromError(E,M)}(_,f));else if(M){const O=ad(f),X=f;O&&(X.credential=O,X.tenantId=M.tenantId||void 0,X.email=M.email||void 0,X.phoneNumber=M.phoneNumber||void 0)}}(_,g),g}).then(g=>{const M=g.user;return{operationType:g.operationType,credential:vm(g),additionalUserInfo:Ba(g),user:Xs.getOrCreate(M)}})}function dl(_,f){return rp.apply(this,arguments)}function rp(){return(rp=(0,m.Z)(function*(_,f){const g=yield f;return{verificationId:g.verificationId,confirm:E=>Br(_,g.confirm(E))}})).apply(this,arguments)}class Z_{constructor(f,g){this.resolver=g,this.auth=function od(_){return _.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Br(wh(this.auth),this.resolver.resolveSignIn(f))}}class Xs{constructor(f){this._delegate=f,this.multiFactor=function vo(_){const f=(0,V.m9)(_);return _o.has(f)||_o.set(f,yo._fromUser(f)),_o.get(f)}(f)}static getOrCreate(f){return Xs.USER_MAP.has(f)||Xs.USER_MAP.set(f,new Xs(f)),Xs.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,m.Z)(function*(){return Br(g.auth,ho(g._delegate,f))})()}linkWithPhoneNumber(f,g){var E=this;return(0,m.Z)(function*(){return dl(E.auth,function Kn(_,f,g){return cs.apply(this,arguments)}(E._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,m.Z)(function*(){return Br(g.auth,function tc(_,f,g){return nl.apply(this,arguments)}(g._delegate,f,ri))})()}linkWithRedirect(f){var g=this;return(0,m.Z)(function*(){return yield oc(kn(g.auth)),function ne(_,f,g){return function le(_,f,g){return Re.apply(this,arguments)}(_,f,g)}(g._delegate,f,ri)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,m.Z)(function*(){return Br(g.auth,is(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return dl(this.auth,function Xu(_,f,g){return ni.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return Br(this.auth,function Jg(_,f,g){return Yc.apply(this,arguments)}(this._delegate,f,ri))}reauthenticateWithRedirect(f){var g=this;return(0,m.Z)(function*(){return yield oc(kn(g.auth)),function A(_,f,g){return function N(_,f,g){return $.apply(this,arguments)}(_,f,g)}(g._delegate,f,ri)})()}sendEmailVerification(f){return function Vu(_,f){return Xo.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,m.Z)(function*(){return yield function Fr(_,f){return Wo.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function Gu(_,f){return Ws((0,V.m9)(_),f,null)}(this._delegate,f)}updatePassword(f){return function os(_,f){return Ws((0,V.m9)(_),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Qg(_,f){return Kc.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function $u(_,f){return Hu.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function Bu(_,f,g){return ea.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Xs.USER_MAP=new WeakMap;const iu=q;let ip=(()=>{class _{constructor(g,E){if(this.app=g,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:M}=g.options;iu(M,"invalid-api-key",{appName:g.name}),iu(M,"invalid-api-key",{appName:g.name});const O=typeof window<"u"?ri:void 0;this._delegate=E.initialize({options:{persistence:wm(M,g.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(Ae),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Xs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,E){!function Ca(_,f,g){const E=kn(_);q(E._canInitEmulator,E,"emulator-config-failed"),q(/^https?:\/\//.test(f),E,"invalid-emulator-scheme");const M=!!g?.disableWarnings,O=Oi(f),{host:X,port:me}=function nr(_){const f=Oi(_),g=/(\/\/)?([^?#/]+)/.exec(_.substr(f.length));if(!g)return{host:"",port:null};const E=g[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(E);if(M){const O=M[1];return{host:O,port:Ji(E.substr(O.length+1))}}{const[O,X]=E.split(":");return{host:O,port:Ji(X)}}}(f);E.config.emulator={url:`${O}//${X}${null===me?"":`:${me}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:X,port:me,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function vs(){function _(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,g,E)}applyActionCode(g){return function hi(_,f){return Ko.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return po(this._delegate,g)}confirmPasswordReset(g,E){return function qo(_,f,g){return fo.apply(this,arguments)}(this._delegate,g,E)}createUserWithEmailAndPassword(g,E){var M=this;return(0,m.Z)(function*(){return Br(M._delegate,function go(_,f,g){return Pn.apply(this,arguments)}(M._delegate,g,E))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Qo(_,f){return Jo.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function fi(_,f){return"EMAIL_SIGNIN"===xa.parseLink(f)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,m.Z)(function*(){iu(yh(),g._delegate,"operation-not-supported-in-this-environment");const E=yield function $e(_,f){return ht.apply(this,arguments)}(g._delegate,ri);return E?Br(g._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function ll(_,f){kn(_)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,E,M){const{next:O,error:X,complete:me}=Eh(g,E,M);return this._delegate.onAuthStateChanged(O,X,me)}onIdTokenChanged(g,E,M){const{next:O,error:X,complete:me}=Eh(g,E,M);return this._delegate.onIdTokenChanged(O,X,me)}sendSignInLinkToEmail(g,E){return function Fu(_,f,g){return Gs.apply(this,arguments)}(this._delegate,g,E)}sendPasswordResetEmail(g,E){return function Ua(_,f,g){return Nn.apply(this,arguments)}(this._delegate,g,E||void 0)}setPersistence(g){var E=this;return(0,m.Z)(function*(){let M;switch(function _m(_,f){$i(Object.values(gi).includes(f),_,"invalid-persistence-type"),(0,V.b$)()?$i(f!==gi.SESSION,_,"unsupported-persistence-type"):(0,V.UG)()?$i(f===gi.NONE,_,"unsupported-persistence-type"):mh()?$i(f===gi.NONE||f===gi.LOCAL&&(0,V.hl)(),_,"unsupported-persistence-type"):$i(f===gi.NONE||ym(),_,"unsupported-persistence-type")}(E._delegate,g),g){case gi.SESSION:M=k;break;case gi.LOCAL:M=(yield ae(za)._isAvailable())?za:b;break;case gi.NONE:M=ee;break;default:return Me("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(M)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Br(this._delegate,function $c(_){return In.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Br(this._delegate,Bn(this._delegate,g))}signInWithCustomToken(g){return Br(this._delegate,function Pu(_,f){return zo.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,E){return Br(this._delegate,function Vi(_,f,g){return Bn((0,V.m9)(_),Fi.credential(f,g))}(this._delegate,g,E))}signInWithEmailLink(g,E){return Br(this._delegate,function th(_,f,g){return Yo.apply(this,arguments)}(this._delegate,g,E))}signInWithPhoneNumber(g,E){return dl(this._delegate,function mt(_,f,g){return Bi.apply(this,arguments)}(this._delegate,g,E))}signInWithPopup(g){var E=this;return(0,m.Z)(function*(){return iu(yh(),E._delegate,"operation-not-supported-in-this-environment"),Br(E._delegate,function Zc(_,f,g){return Ja.apply(this,arguments)}(E._delegate,g,ri))})()}signInWithRedirect(g){var E=this;return(0,m.Z)(function*(){return iu(yh(),E._delegate,"operation-not-supported-in-this-environment"),yield oc(E._delegate),function jn(_,f,g){return function nc(_,f,g){return T.apply(this,arguments)}(_,f,g)}(E._delegate,g,ri)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Zo(_,f){return Lu.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=gi,_})();function Eh(_,f,g){let E=_;"function"!=typeof _&&({next:E,error:f,complete:g}=_);const M=E;return{next:X=>M(X&&Xs.getOrCreate(X)),error:f,complete:g}}function wm(_,f){const g=function cl(_,f){const g=sd();if(!g)return[];const E=De(fs,_,f);switch(g.getItem(E)){case gi.NONE:return[ee];case gi.LOCAL:return[za,k];case gi.SESSION:return[k];default:return[]}}(_,f);if(typeof self<"u"&&!g.includes(za)&&g.push(za),typeof window<"u")for(const E of[b,k])g.includes(E)||g.push(E);return g.includes(ee)||g.push(ee),g}class Ih{constructor(){this.providerId="phone",this._delegate=new Xl(wh(U.Z.auth()))}static credential(f,g){return Xl.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Ih.PHONE_SIGN_IN_METHOD=Xl.PHONE_SIGN_IN_METHOD,Ih.PROVIDER_ID=Xl.PROVIDER_ID;const bh=q;class Ch{constructor(f,g,E=U.Z.app()){var M;bh(null===(M=E.options)||void 0===M?void 0:M.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Ur(f,g,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Y_(_){_.INTERNAL.registerComponent(new he.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),E=f.getProvider("auth");return new ip(g,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Fi,FacebookAuthProvider:Go,GithubAuthProvider:ku,GoogleAuthProvider:Ma,OAuthProvider:Ii,SAMLAuthProvider:ci,PhoneAuthProvider:Ih,PhoneMultiFactorGenerator:nu,RecaptchaVerifier:Ch,TwitterAuthProvider:ei,Auth:ip,AuthCredential:wr,Error:V.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.21")}(U.Z)},9751:(lt,oe,F)=>{"use strict";F.d(oe,{y:()=>pe});var m=F(930),U=F(727),V=F(8822),ce=F(9635),de=F(2416),_e=F(576),he=F(2806);let pe=(()=>{class te{constructor(Pe){Pe&&(this._subscribe=Pe)}lift(Pe){const Ae=new te;return Ae.source=this,Ae.operator=Pe,Ae}subscribe(Pe,Ae,at){const ge=function Z(te){return te&&te instanceof m.Lv||function K(te){return te&&(0,_e.m)(te.next)&&(0,_e.m)(te.error)&&(0,_e.m)(te.complete)}(te)&&(0,U.Nn)(te)}(Pe)?Pe:new m.Hp(Pe,Ae,at);return(0,he.x)(()=>{const{operator:ve,source:Xe}=this;ge.add(ve?ve.call(ge,Xe):Xe?this._subscribe(ge):this._trySubscribe(ge))}),ge}_trySubscribe(Pe){try{return this._subscribe(Pe)}catch(Ae){Pe.error(Ae)}}forEach(Pe,Ae){return new(Ae=Ee(Ae))((at,ge)=>{const ve=new m.Hp({next:Xe=>{try{Pe(Xe)}catch(Ke){ge(Ke),ve.unsubscribe()}},error:ge,complete:at});this.subscribe(ve)})}_subscribe(Pe){var Ae;return null===(Ae=this.source)||void 0===Ae?void 0:Ae.subscribe(Pe)}[V.L](){return this}pipe(...Pe){return(0,ce.U)(Pe)(this)}toPromise(Pe){return new(Pe=Ee(Pe))((Ae,at)=>{let ge;this.subscribe(ve=>ge=ve,ve=>at(ve),()=>Ae(ge))})}}return te.create=Ge=>new te(Ge),te})();function Ee(te){var Ge;return null!==(Ge=te??de.v.Promise)&&void 0!==Ge?Ge:Promise}},7579:(lt,oe,F)=>{"use strict";F.d(oe,{x:()=>he});var m=F(9751),U=F(727);const ce=(0,F(3888).d)(Ee=>function(){Ee(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=F(8737),_e=F(2806);let he=(()=>{class Ee extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Z){const te=new pe(this,this);return te.operator=Z,te}_throwIfClosed(){if(this.closed)throw new ce}next(Z){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const te of this.currentObservers)te.next(Z)}})}error(Z){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Z;const{observers:te}=this;for(;te.length;)te.shift().error(Z)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Z}=this;for(;Z.length;)Z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Z;return(null===(Z=this.observers)||void 0===Z?void 0:Z.length)>0}_trySubscribe(Z){return this._throwIfClosed(),super._trySubscribe(Z)}_subscribe(Z){return this._throwIfClosed(),this._checkFinalizedStatuses(Z),this._innerSubscribe(Z)}_innerSubscribe(Z){const{hasError:te,isStopped:Ge,observers:Pe}=this;return te||Ge?U.Lc:(this.currentObservers=null,Pe.push(Z),new U.w0(()=>{this.currentObservers=null,(0,de.P)(Pe,Z)}))}_checkFinalizedStatuses(Z){const{hasError:te,thrownError:Ge,isStopped:Pe}=this;te?Z.error(Ge):Pe&&Z.complete()}asObservable(){const Z=new m.y;return Z.source=this,Z}}return Ee.create=(K,Z)=>new pe(K,Z),Ee})();class pe extends he{constructor(K,Z){super(),this.destination=K,this.source=Z}next(K){var Z,te;null===(te=null===(Z=this.destination)||void 0===Z?void 0:Z.next)||void 0===te||te.call(Z,K)}error(K){var Z,te;null===(te=null===(Z=this.destination)||void 0===Z?void 0:Z.error)||void 0===te||te.call(Z,K)}complete(){var K,Z;null===(Z=null===(K=this.destination)||void 0===K?void 0:K.complete)||void 0===Z||Z.call(K)}_subscribe(K){var Z,te;return null!==(te=null===(Z=this.source)||void 0===Z?void 0:Z.subscribe(K))&&void 0!==te?te:U.Lc}}},930:(lt,oe,F)=>{"use strict";F.d(oe,{Hp:()=>at,Lv:()=>te});var m=F(576),U=F(727),V=F(2416),ce=F(7849),de=F(5032);const _e=Ee("C",void 0,void 0);function Ee(Me,Te,xe){return{kind:Me,value:Te,error:xe}}var K=F(3410),Z=F(2806);class te extends U.w0{constructor(Te){super(),this.isStopped=!1,Te?(this.destination=Te,(0,U.Nn)(Te)&&Te.add(this)):this.destination=Ke}static create(Te,xe,Qe){return new at(Te,xe,Qe)}next(Te){this.isStopped?Xe(function pe(Me){return Ee("N",Me,void 0)}(Te),this):this._next(Te)}error(Te){this.isStopped?Xe(function he(Me){return Ee("E",void 0,Me)}(Te),this):(this.isStopped=!0,this._error(Te))}complete(){this.isStopped?Xe(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Te){this.destination.next(Te)}_error(Te){try{this.destination.error(Te)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Pe(Me,Te){return Ge.call(Me,Te)}class Ae{constructor(Te){this.partialObserver=Te}next(Te){const{partialObserver:xe}=this;if(xe.next)try{xe.next(Te)}catch(Qe){ge(Qe)}}error(Te){const{partialObserver:xe}=this;if(xe.error)try{xe.error(Te)}catch(Qe){ge(Qe)}else ge(Te)}complete(){const{partialObserver:Te}=this;if(Te.complete)try{Te.complete()}catch(xe){ge(xe)}}}class at extends te{constructor(Te,xe,Qe){let Je;if(super(),(0,m.m)(Te)||!Te)Je={next:Te??void 0,error:xe??void 0,complete:Qe??void 0};else{let q;this&&V.v.useDeprecatedNextContext?(q=Object.create(Te),q.unsubscribe=()=>this.unsubscribe(),Je={next:Te.next&&Pe(Te.next,q),error:Te.error&&Pe(Te.error,q),complete:Te.complete&&Pe(Te.complete,q)}):Je=Te}this.destination=new Ae(Je)}}function ge(Me){V.v.useDeprecatedSynchronousErrorHandling?(0,Z.O)(Me):(0,ce.h)(Me)}function Xe(Me,Te){const{onStoppedNotification:xe}=V.v;xe&&K.z.setTimeout(()=>xe(Me,Te))}const Ke={closed:!0,next:de.Z,error:function ve(Me){throw Me},complete:de.Z}},727:(lt,oe,F)=>{"use strict";F.d(oe,{Lc:()=>_e,w0:()=>de,Nn:()=>he});var m=F(576);const V=(0,F(3888).d)(Ee=>function(Z){Ee(this),this.message=Z?`${Z.length} errors occurred during unsubscription:\n${Z.map((te,Ge)=>`${Ge+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Z});var ce=F(8737);class de{constructor(K){this.initialTeardown=K,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let K;if(!this.closed){this.closed=!0;const{_parentage:Z}=this;if(Z)if(this._parentage=null,Array.isArray(Z))for(const Pe of Z)Pe.remove(this);else Z.remove(this);const{initialTeardown:te}=this;if((0,m.m)(te))try{te()}catch(Pe){K=Pe instanceof V?Pe.errors:[Pe]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Pe of Ge)try{pe(Pe)}catch(Ae){K=K??[],Ae instanceof V?K=[...K,...Ae.errors]:K.push(Ae)}}if(K)throw new V(K)}}add(K){var Z;if(K&&K!==this)if(this.closed)pe(K);else{if(K instanceof de){if(K.closed||K._hasParent(this))return;K._addParent(this)}(this._finalizers=null!==(Z=this._finalizers)&&void 0!==Z?Z:[]).push(K)}}_hasParent(K){const{_parentage:Z}=this;return Z===K||Array.isArray(Z)&&Z.includes(K)}_addParent(K){const{_parentage:Z}=this;this._parentage=Array.isArray(Z)?(Z.push(K),Z):Z?[Z,K]:K}_removeParent(K){const{_parentage:Z}=this;Z===K?this._parentage=null:Array.isArray(Z)&&(0,ce.P)(Z,K)}remove(K){const{_finalizers:Z}=this;Z&&(0,ce.P)(Z,K),K instanceof de&&K._removeParent(this)}}de.EMPTY=(()=>{const Ee=new de;return Ee.closed=!0,Ee})();const _e=de.EMPTY;function he(Ee){return Ee instanceof de||Ee&&"closed"in Ee&&(0,m.m)(Ee.remove)&&(0,m.m)(Ee.add)&&(0,m.m)(Ee.unsubscribe)}function pe(Ee){(0,m.m)(Ee)?Ee():Ee.unsubscribe()}},2416:(lt,oe,F)=>{"use strict";F.d(oe,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(lt,oe,F)=>{"use strict";F.d(oe,{E:()=>U});const U=new(F(9751).y)(de=>de.complete())},8996:(lt,oe,F)=>{"use strict";F.d(oe,{D:()=>Te});var m=F(8421),U=F(5363),V=F(9468),_e=F(9751),pe=F(2202),Ee=F(576),K=F(9672);function te(xe,Qe){if(!xe)throw new Error("Iterable cannot be null");return new _e.y(Je=>{(0,K.f)(Je,Qe,()=>{const q=xe[Symbol.asyncIterator]();(0,K.f)(Je,Qe,()=>{q.next().then(ye=>{ye.done?Je.complete():Je.next(ye.value)})},0,!0)})})}var Ge=F(3670),Pe=F(8239),Ae=F(1144),at=F(6495),ge=F(2206),ve=F(4532),Xe=F(3260);function Te(xe,Qe){return Qe?function Me(xe,Qe){if(null!=xe){if((0,Ge.c)(xe))return function ce(xe,Qe){return(0,m.Xf)(xe).pipe((0,V.R)(Qe),(0,U.Q)(Qe))}(xe,Qe);if((0,Ae.z)(xe))return function he(xe,Qe){return new _e.y(Je=>{let q=0;return Qe.schedule(function(){q===xe.length?Je.complete():(Je.next(xe[q++]),Je.closed||this.schedule())})})}(xe,Qe);if((0,Pe.t)(xe))return function de(xe,Qe){return(0,m.Xf)(xe).pipe((0,V.R)(Qe),(0,U.Q)(Qe))}(xe,Qe);if((0,ge.D)(xe))return te(xe,Qe);if((0,at.T)(xe))return function Z(xe,Qe){return new _e.y(Je=>{let q;return(0,K.f)(Je,Qe,()=>{q=xe[pe.h](),(0,K.f)(Je,Qe,()=>{let ye,Q;try{({value:ye,done:Q}=q.next())}catch(re){return void Je.error(re)}Q?Je.complete():Je.next(ye)},0,!0)}),()=>(0,Ee.m)(q?.return)&&q.return()})}(xe,Qe);if((0,Xe.L)(xe))return function Ke(xe,Qe){return te((0,Xe.Q)(xe),Qe)}(xe,Qe)}throw(0,ve.z)(xe)}(xe,Qe):(0,m.Xf)(xe)}},8421:(lt,oe,F)=>{"use strict";F.d(oe,{Xf:()=>Ge});var m=F(655),U=F(1144),V=F(8239),ce=F(9751),de=F(3670),_e=F(2206),he=F(4532),pe=F(6495),Ee=F(3260),K=F(576),Z=F(7849),te=F(8822);function Ge(Me){if(Me instanceof ce.y)return Me;if(null!=Me){if((0,de.c)(Me))return function Pe(Me){return new ce.y(Te=>{const xe=Me[te.L]();if((0,K.m)(xe.subscribe))return xe.subscribe(Te);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Me);if((0,U.z)(Me))return function Ae(Me){return new ce.y(Te=>{for(let xe=0;xe<Me.length&&!Te.closed;xe++)Te.next(Me[xe]);Te.complete()})}(Me);if((0,V.t)(Me))return function at(Me){return new ce.y(Te=>{Me.then(xe=>{Te.closed||(Te.next(xe),Te.complete())},xe=>Te.error(xe)).then(null,Z.h)})}(Me);if((0,_e.D)(Me))return ve(Me);if((0,pe.T)(Me))return function ge(Me){return new ce.y(Te=>{for(const xe of Me)if(Te.next(xe),Te.closed)return;Te.complete()})}(Me);if((0,Ee.L)(Me))return function Xe(Me){return ve((0,Ee.Q)(Me))}(Me)}throw(0,he.z)(Me)}function ve(Me){return new ce.y(Te=>{(function Ke(Me,Te){var xe,Qe,Je,q;return(0,m.mG)(this,void 0,void 0,function*(){try{for(xe=(0,m.KL)(Me);!(Qe=yield xe.next()).done;)if(Te.next(Qe.value),Te.closed)return}catch(ye){Je={error:ye}}finally{try{Qe&&!Qe.done&&(q=xe.return)&&(yield q.call(xe))}finally{if(Je)throw Je.error}}Te.complete()})})(Me,Te).catch(xe=>Te.error(xe))})}},6451:(lt,oe,F)=>{"use strict";F.d(oe,{T:()=>_e});var m=F(8189),U=F(8421),V=F(515),ce=F(3269),de=F(8996);function _e(...he){const pe=(0,ce.yG)(he),Ee=(0,ce._6)(he,1/0),K=he;return K.length?1===K.length?(0,U.Xf)(K[0]):(0,m.J)(Ee)((0,de.D)(K,pe)):V.E}},5403:(lt,oe,F)=>{"use strict";F.d(oe,{x:()=>U});var m=F(930);function U(ce,de,_e,he,pe){return new V(ce,de,_e,he,pe)}class V extends m.Lv{constructor(de,_e,he,pe,Ee,K){super(de),this.onFinalize=Ee,this.shouldUnsubscribe=K,this._next=_e?function(Z){try{_e(Z)}catch(te){de.error(te)}}:super._next,this._error=pe?function(Z){try{pe(Z)}catch(te){de.error(te)}finally{this.unsubscribe()}}:super._error,this._complete=he?function(){try{he()}catch(Z){de.error(Z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var de;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(de=this.onFinalize)||void 0===de||de.call(this))}}}},4004:(lt,oe,F)=>{"use strict";F.d(oe,{U:()=>V});var m=F(4482),U=F(5403);function V(ce,de){return(0,m.e)((_e,he)=>{let pe=0;_e.subscribe((0,U.x)(he,Ee=>{he.next(ce.call(de,Ee,pe++))}))})}},8189:(lt,oe,F)=>{"use strict";F.d(oe,{J:()=>V});var m=F(5577),U=F(4671);function V(ce=1/0){return(0,m.z)(U.y,ce)}},5577:(lt,oe,F)=>{"use strict";F.d(oe,{z:()=>pe});var m=F(4004),U=F(8421),V=F(4482),ce=F(9672),de=F(5403),he=F(576);function pe(Ee,K,Z=1/0){return(0,he.m)(K)?pe((te,Ge)=>(0,m.U)((Pe,Ae)=>K(te,Pe,Ge,Ae))((0,U.Xf)(Ee(te,Ge))),Z):("number"==typeof K&&(Z=K),(0,V.e)((te,Ge)=>function _e(Ee,K,Z,te,Ge,Pe,Ae,at){const ge=[];let ve=0,Xe=0,Ke=!1;const Me=()=>{Ke&&!ge.length&&!ve&&K.complete()},Te=Qe=>ve<te?xe(Qe):ge.push(Qe),xe=Qe=>{Pe&&K.next(Qe),ve++;let Je=!1;(0,U.Xf)(Z(Qe,Xe++)).subscribe((0,de.x)(K,q=>{Ge?.(q),Pe?Te(q):K.next(q)},()=>{Je=!0},void 0,()=>{if(Je)try{for(ve--;ge.length&&ve<te;){const q=ge.shift();Ae?(0,ce.f)(K,Ae,()=>xe(q)):xe(q)}Me()}catch(q){K.error(q)}}))};return Ee.subscribe((0,de.x)(K,Te,()=>{Ke=!0,Me()})),()=>{at?.()}}(te,Ge,Ee,Z)))}},5363:(lt,oe,F)=>{"use strict";F.d(oe,{Q:()=>ce});var m=F(9672),U=F(4482),V=F(5403);function ce(de,_e=0){return(0,U.e)((he,pe)=>{he.subscribe((0,V.x)(pe,Ee=>(0,m.f)(pe,de,()=>pe.next(Ee),_e),()=>(0,m.f)(pe,de,()=>pe.complete(),_e),Ee=>(0,m.f)(pe,de,()=>pe.error(Ee),_e)))})}},3099:(lt,oe,F)=>{"use strict";F.d(oe,{B:()=>de});var m=F(8421),U=F(7579),V=F(930),ce=F(4482);function de(he={}){const{connector:pe=(()=>new U.x),resetOnError:Ee=!0,resetOnComplete:K=!0,resetOnRefCountZero:Z=!0}=he;return te=>{let Ge,Pe,Ae,at=0,ge=!1,ve=!1;const Xe=()=>{Pe?.unsubscribe(),Pe=void 0},Ke=()=>{Xe(),Ge=Ae=void 0,ge=ve=!1},Me=()=>{const Te=Ge;Ke(),Te?.unsubscribe()};return(0,ce.e)((Te,xe)=>{at++,!ve&&!ge&&Xe();const Qe=Ae=Ae??pe();xe.add(()=>{at--,0===at&&!ve&&!ge&&(Pe=_e(Me,Z))}),Qe.subscribe(xe),!Ge&&at>0&&(Ge=new V.Hp({next:Je=>Qe.next(Je),error:Je=>{ve=!0,Xe(),Pe=_e(Ke,Ee,Je),Qe.error(Je)},complete:()=>{ge=!0,Xe(),Pe=_e(Ke,K),Qe.complete()}}),(0,m.Xf)(Te).subscribe(Ge))})(te)}}function _e(he,pe,...Ee){if(!0===pe)return void he();if(!1===pe)return;const K=new V.Hp({next:()=>{K.unsubscribe(),he()}});return pe(...Ee).subscribe(K)}},9468:(lt,oe,F)=>{"use strict";F.d(oe,{R:()=>U});var m=F(4482);function U(V,ce=0){return(0,m.e)((de,_e)=>{_e.add(V.schedule(()=>de.subscribe(_e),ce))})}},8505:(lt,oe,F)=>{"use strict";F.d(oe,{b:()=>de});var m=F(576),U=F(4482),V=F(5403),ce=F(4671);function de(_e,he,pe){const Ee=(0,m.m)(_e)||he||pe?{next:_e,error:he,complete:pe}:_e;return Ee?(0,U.e)((K,Z)=>{var te;null===(te=Ee.subscribe)||void 0===te||te.call(Ee);let Ge=!0;K.subscribe((0,V.x)(Z,Pe=>{var Ae;null===(Ae=Ee.next)||void 0===Ae||Ae.call(Ee,Pe),Z.next(Pe)},()=>{var Pe;Ge=!1,null===(Pe=Ee.complete)||void 0===Pe||Pe.call(Ee),Z.complete()},Pe=>{var Ae;Ge=!1,null===(Ae=Ee.error)||void 0===Ae||Ae.call(Ee,Pe),Z.error(Pe)},()=>{var Pe,Ae;Ge&&(null===(Pe=Ee.unsubscribe)||void 0===Pe||Pe.call(Ee)),null===(Ae=Ee.finalize)||void 0===Ae||Ae.call(Ee)}))}):ce.y}},4408:(lt,oe,F)=>{"use strict";F.d(oe,{o:()=>de});var m=F(727);class U extends m.w0{constructor(he,pe){super()}schedule(he,pe=0){return this}}const V={setInterval(_e,he,...pe){const{delegate:Ee}=V;return Ee?.setInterval?Ee.setInterval(_e,he,...pe):setInterval(_e,he,...pe)},clearInterval(_e){const{delegate:he}=V;return(he?.clearInterval||clearInterval)(_e)},delegate:void 0};var ce=F(8737);class de extends U{constructor(he,pe){super(he,pe),this.scheduler=he,this.work=pe,this.pending=!1}schedule(he,pe=0){var Ee;if(this.closed)return this;this.state=he;const K=this.id,Z=this.scheduler;return null!=K&&(this.id=this.recycleAsyncId(Z,K,pe)),this.pending=!0,this.delay=pe,this.id=null!==(Ee=this.id)&&void 0!==Ee?Ee:this.requestAsyncId(Z,this.id,pe),this}requestAsyncId(he,pe,Ee=0){return V.setInterval(he.flush.bind(he,this),Ee)}recycleAsyncId(he,pe,Ee=0){if(null!=Ee&&this.delay===Ee&&!1===this.pending)return pe;null!=pe&&V.clearInterval(pe)}execute(he,pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ee=this._execute(he,pe);if(Ee)return Ee;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(he,pe){let K,Ee=!1;try{this.work(he)}catch(Z){Ee=!0,K=Z||new Error("Scheduled action threw falsy error")}if(Ee)return this.unsubscribe(),K}unsubscribe(){if(!this.closed){const{id:he,scheduler:pe}=this,{actions:Ee}=pe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ce.P)(Ee,this),null!=he&&(this.id=this.recycleAsyncId(pe,he,null)),this.delay=null,super.unsubscribe()}}}},7565:(lt,oe,F)=>{"use strict";F.d(oe,{v:()=>V});var m=F(6063);class U{constructor(de,_e=U.now){this.schedulerActionCtor=de,this.now=_e}schedule(de,_e=0,he){return new this.schedulerActionCtor(this,de).schedule(he,_e)}}U.now=m.l.now;class V extends U{constructor(de,_e=U.now){super(de,_e),this.actions=[],this._active=!1}flush(de){const{actions:_e}=this;if(this._active)return void _e.push(de);let he;this._active=!0;do{if(he=de.execute(de.state,de.delay))break}while(de=_e.shift());if(this._active=!1,he){for(;de=_e.shift();)de.unsubscribe();throw he}}}},4986:(lt,oe,F)=>{"use strict";F.d(oe,{P:()=>ce,z:()=>V});var m=F(4408);const V=new(F(7565).v)(m.o),ce=V},6063:(lt,oe,F)=>{"use strict";F.d(oe,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(lt,oe,F)=>{"use strict";F.d(oe,{z:()=>m});const m={setTimeout(U,V,...ce){const{delegate:de}=m;return de?.setTimeout?de.setTimeout(U,V,...ce):setTimeout(U,V,...ce)},clearTimeout(U){const{delegate:V}=m;return(V?.clearTimeout||clearTimeout)(U)},delegate:void 0}},2202:(lt,oe,F)=>{"use strict";F.d(oe,{h:()=>U});const U=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(lt,oe,F)=>{"use strict";F.d(oe,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(lt,oe,F)=>{"use strict";F.d(oe,{_6:()=>_e,jO:()=>ce,yG:()=>de});var m=F(576),U=F(3532);function V(he){return he[he.length-1]}function ce(he){return(0,m.m)(V(he))?he.pop():void 0}function de(he){return(0,U.K)(V(he))?he.pop():void 0}function _e(he,pe){return"number"==typeof V(he)?he.pop():pe}},8737:(lt,oe,F)=>{"use strict";function m(U,V){if(U){const ce=U.indexOf(V);0<=ce&&U.splice(ce,1)}}F.d(oe,{P:()=>m})},3888:(lt,oe,F)=>{"use strict";function m(U){const ce=U(de=>{Error.call(de),de.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}F.d(oe,{d:()=>m})},2806:(lt,oe,F)=>{"use strict";F.d(oe,{O:()=>ce,x:()=>V});var m=F(2416);let U=null;function V(de){if(m.v.useDeprecatedSynchronousErrorHandling){const _e=!U;if(_e&&(U={errorThrown:!1,error:null}),de(),_e){const{errorThrown:he,error:pe}=U;if(U=null,he)throw pe}}else de()}function ce(de){m.v.useDeprecatedSynchronousErrorHandling&&U&&(U.errorThrown=!0,U.error=de)}},9672:(lt,oe,F)=>{"use strict";function m(U,V,ce,de=0,_e=!1){const he=V.schedule(function(){ce(),_e?U.add(this.schedule(null,de)):this.unsubscribe()},de);if(U.add(he),!_e)return he}F.d(oe,{f:()=>m})},4671:(lt,oe,F)=>{"use strict";function m(U){return U}F.d(oe,{y:()=>m})},1144:(lt,oe,F)=>{"use strict";F.d(oe,{z:()=>m});const m=U=>U&&"number"==typeof U.length&&"function"!=typeof U},2206:(lt,oe,F)=>{"use strict";F.d(oe,{D:()=>U});var m=F(576);function U(V){return Symbol.asyncIterator&&(0,m.m)(V?.[Symbol.asyncIterator])}},576:(lt,oe,F)=>{"use strict";function m(U){return"function"==typeof U}F.d(oe,{m:()=>m})},3670:(lt,oe,F)=>{"use strict";F.d(oe,{c:()=>V});var m=F(8822),U=F(576);function V(ce){return(0,U.m)(ce[m.L])}},6495:(lt,oe,F)=>{"use strict";F.d(oe,{T:()=>V});var m=F(2202),U=F(576);function V(ce){return(0,U.m)(ce?.[m.h])}},8239:(lt,oe,F)=>{"use strict";F.d(oe,{t:()=>U});var m=F(576);function U(V){return(0,m.m)(V?.then)}},3260:(lt,oe,F)=>{"use strict";F.d(oe,{L:()=>ce,Q:()=>V});var m=F(655),U=F(576);function V(de){return(0,m.FC)(this,arguments,function*(){const he=de.getReader();try{for(;;){const{value:pe,done:Ee}=yield(0,m.qq)(he.read());if(Ee)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(pe)}}finally{he.releaseLock()}})}function ce(de){return(0,U.m)(de?.getReader)}},3532:(lt,oe,F)=>{"use strict";F.d(oe,{K:()=>U});var m=F(576);function U(V){return V&&(0,m.m)(V.schedule)}},4482:(lt,oe,F)=>{"use strict";F.d(oe,{A:()=>U,e:()=>V});var m=F(576);function U(ce){return(0,m.m)(ce?.lift)}function V(ce){return de=>{if(U(de))return de.lift(function(_e){try{return ce(_e,this)}catch(he){this.error(he)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(lt,oe,F)=>{"use strict";function m(){}F.d(oe,{Z:()=>m})},9635:(lt,oe,F)=>{"use strict";F.d(oe,{U:()=>V,z:()=>U});var m=F(4671);function U(...ce){return V(ce)}function V(ce){return 0===ce.length?m.y:1===ce.length?ce[0]:function(_e){return ce.reduce((he,pe)=>pe(he),_e)}}},7849:(lt,oe,F)=>{"use strict";F.d(oe,{h:()=>V});var m=F(2416),U=F(3410);function V(ce){U.z.setTimeout(()=>{const{onUnhandledError:de}=m.v;if(!de)throw ce;de(ce)})}},4532:(lt,oe,F)=>{"use strict";function m(U){return new TypeError(`You provided ${null!==U&&"object"==typeof U?"an invalid object":`'${U}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(oe,{z:()=>m})},5226:function(lt){lt.exports=function(){"use strict";var oe={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const m=b=>{const C={};for(const k in b)C[b[k]]="swal2-"+b[k];return C},U=m(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","no-war"]),V=m(["success","warning","info","question","error"]),ce="SweetAlert2:",_e=b=>b.charAt(0).toUpperCase()+b.slice(1),he=b=>{console.warn("".concat(ce," ").concat("object"==typeof b?b.join(" "):b))},pe=b=>{console.error("".concat(ce," ").concat(b))},Ee=[],Z=(b,C)=>{(b=>{Ee.includes(b)||(Ee.push(b),he(b))})('"'.concat(b,'" is deprecated and will be removed in the next major release. Please use "').concat(C,'" instead.'))},te=b=>"function"==typeof b?b():b,Ge=b=>b&&"function"==typeof b.toPromise,Pe=b=>Ge(b)?b.toPromise():Promise.resolve(b),Ae=b=>b&&Promise.resolve(b)===b,ge=()=>document.body.querySelector(".".concat(U.container)),ve=b=>{const C=ge();return C?C.querySelector(b):null},Xe=b=>ve(".".concat(b)),Ke=()=>Xe(U.popup),Me=()=>Xe(U.icon),Te=()=>Xe(U.title),xe=()=>Xe(U["html-container"]),Qe=()=>Xe(U.image),Je=()=>Xe(U["progress-steps"]),q=()=>Xe(U["validation-message"]),ye=()=>ve(".".concat(U.actions," .").concat(U.confirm)),Q=()=>ve(".".concat(U.actions," .").concat(U.deny)),ae=()=>ve(".".concat(U.loader)),se=()=>ve(".".concat(U.actions," .").concat(U.cancel)),je=()=>Xe(U.actions),Be=()=>Xe(U.footer),pt=()=>Xe(U["timer-progress-bar"]),Jt=()=>Xe(U.close),nt=()=>{const b=Array.from(Ke().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((k,H)=>{const be=parseInt(k.getAttribute("tabindex")),rt=parseInt(H.getAttribute("tabindex"));return be>rt?1:be<rt?-1:0}),C=Array.from(Ke().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter(k=>"-1"!==k.getAttribute("tabindex"));return(b=>{const C=[];for(let k=0;k<b.length;k++)-1===C.indexOf(b[k])&&C.push(b[k]);return C})(b.concat(C)).filter(k=>cn(k))},tn=()=>Tt(document.body,U.shown)&&!Tt(document.body,U["toast-shown"])&&!Tt(document.body,U["no-backdrop"]),Cn=()=>Ke()&&Tt(Ke(),U.toast),Kt={previousBodyPadding:null},fn=(b,C)=>{if(b.textContent="",C){const H=(new DOMParser).parseFromString(C,"text/html");Array.from(H.querySelector("head").childNodes).forEach(be=>{b.appendChild(be)}),Array.from(H.querySelector("body").childNodes).forEach(be=>{be instanceof HTMLVideoElement||be instanceof HTMLAudioElement?b.appendChild(be.cloneNode(!0)):b.appendChild(be)})}},Tt=(b,C)=>{if(!C)return!1;const k=C.split(/\s+/);for(let H=0;H<k.length;H++)if(!b.classList.contains(k[H]))return!1;return!0},Dr=(b,C,k)=>{if(((b,C)=>{Array.from(b.classList).forEach(k=>{!Object.values(U).includes(k)&&!Object.values(V).includes(k)&&!Object.values(C.showClass).includes(k)&&b.classList.remove(k)})})(b,C),C.customClass&&C.customClass[k]){if("string"!=typeof C.customClass[k]&&!C.customClass[k].forEach)return he("Invalid type of customClass.".concat(k,'! Expected string or iterable object, got "').concat(typeof C.customClass[k],'"'));Ft(b,C.customClass[k])}},Qr=(b,C)=>{if(!C)return null;switch(C){case"select":case"textarea":case"file":return b.querySelector(".".concat(U.popup," > .").concat(U[C]));case"checkbox":return b.querySelector(".".concat(U.popup," > .").concat(U.checkbox," input"));case"radio":return b.querySelector(".".concat(U.popup," > .").concat(U.radio," input:checked"))||b.querySelector(".".concat(U.popup," > .").concat(U.radio," input:first-child"));case"range":return b.querySelector(".".concat(U.popup," > .").concat(U.range," input"));default:return b.querySelector(".".concat(U.popup," > .").concat(U.input))}},Tr=b=>{if(b.focus(),"file"!==b.type){const C=b.value;b.value="",b.value=C}},Pr=(b,C,k)=>{!b||!C||("string"==typeof C&&(C=C.split(/\s+/).filter(Boolean)),C.forEach(H=>{Array.isArray(b)?b.forEach(be=>{k?be.classList.add(H):be.classList.remove(H)}):k?b.classList.add(H):b.classList.remove(H)}))},Ft=(b,C)=>{Pr(b,C,!0)},Qn=(b,C)=>{Pr(b,C,!1)},Jn=(b,C)=>{const k=Array.from(b.children);for(let H=0;H<k.length;H++){const be=k[H];if(be instanceof HTMLElement&&Tt(be,C))return be}},_r=(b,C,k)=>{k==="".concat(parseInt(k))&&(k=parseInt(k)),k||0===parseInt(k)?b.style[C]="number"==typeof k?"".concat(k,"px"):k:b.style.removeProperty(C)},Mn=function(b){b.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex"},Ze=b=>{b.style.display="none"},Hr=(b,C,k,H)=>{const be=b.querySelector(C);be&&(be.style[k]=H)},ui=function(b,C){C?Mn(b,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):Ze(b)},cn=b=>!(!b||!(b.offsetWidth||b.offsetHeight||b.getClientRects().length)),wi=b=>b.scrollHeight>b.clientHeight,Fn=b=>{const C=window.getComputedStyle(b),k=parseFloat(C.getPropertyValue("animation-duration")||"0"),H=parseFloat(C.getPropertyValue("transition-duration")||"0");return k>0||H>0},Wn=function(b){let C=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const k=pt();cn(k)&&(C&&(k.style.transition="none",k.style.width="100%"),setTimeout(()=>{k.style.transition="width ".concat(b/1e3,"s linear"),k.style.width="0%"},10))},Ve={},Xn=b=>new Promise(C=>{if(!b)return C();const k=window.scrollX,H=window.scrollY;Ve.restoreFocusTimeout=setTimeout(()=>{Ve.previousActiveElement instanceof HTMLElement?(Ve.previousActiveElement.focus(),Ve.previousActiveElement=null):document.body&&document.body.focus(),C()},100),window.scrollTo(k,H)}),vr=()=>typeof window>"u"||typeof document>"u",Gr='\n <div aria-labelledby="'.concat(U.title,'" aria-describedby="').concat(U["html-container"],'" class="').concat(U.popup,'" tabindex="-1">\n   <button type="button" class="').concat(U.close,'"></button>\n   <ul class="').concat(U["progress-steps"],'"></ul>\n   <div class="').concat(U.icon,'"></div>\n   <img class="').concat(U.image,'" />\n   <h2 class="').concat(U.title,'" id="').concat(U.title,'"></h2>\n   <div class="').concat(U["html-container"],'" id="').concat(U["html-container"],'"></div>\n   <input class="').concat(U.input,'" />\n   <input type="file" class="').concat(U.file,'" />\n   <div class="').concat(U.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(U.select,'"></select>\n   <div class="').concat(U.radio,'"></div>\n   <label for="').concat(U.checkbox,'" class="').concat(U.checkbox,'">\n     <input type="checkbox" />\n     <span class="').concat(U.label,'"></span>\n   </label>\n   <textarea class="').concat(U.textarea,'"></textarea>\n   <div class="').concat(U["validation-message"],'" id="').concat(U["validation-message"],'"></div>\n   <div class="').concat(U.actions,'">\n     <div class="').concat(U.loader,'"></div>\n     <button type="button" class="').concat(U.confirm,'"></button>\n     <button type="button" class="').concat(U.deny,'"></button>\n     <button type="button" class="').concat(U.cancel,'"></button>\n   </div>\n   <div class="').concat(U.footer,'"></div>\n   <div class="').concat(U["timer-progress-bar-container"],'">\n     <div class="').concat(U["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),Or=()=>{Ve.currentInstance.resetValidationMessage()},Wr=b=>{const C=(()=>{const b=ge();return!!b&&(b.remove(),Qn([document.documentElement,document.body],[U["no-backdrop"],U["toast-shown"],U["has-column"]]),!0)})();if(vr())return void pe("SweetAlert2 requires document to initialize");const k=document.createElement("div");k.className=U.container,C&&Ft(k,U["no-transition"]),fn(k,Gr);const H=(b=>"string"==typeof b?document.querySelector(b):b)(b.target);H.appendChild(k),(b=>{const C=Ke();C.setAttribute("role",b.toast?"alert":"dialog"),C.setAttribute("aria-live",b.toast?"polite":"assertive"),b.toast||C.setAttribute("aria-modal","true")})(b),(b=>{"rtl"===window.getComputedStyle(b).direction&&Ft(ge(),U.rtl)})(H),(()=>{const b=Ke(),C=Jn(b,U.input),k=Jn(b,U.file),H=b.querySelector(".".concat(U.range," input")),be=b.querySelector(".".concat(U.range," output")),rt=Jn(b,U.select),On=b.querySelector(".".concat(U.checkbox," input")),pn=Jn(b,U.textarea);C.oninput=Or,k.onchange=Or,rt.onchange=Or,On.onchange=Or,pn.oninput=Or,H.oninput=()=>{Or(),be.value=H.value},H.onchange=()=>{Or(),be.value=H.value}})()},it=(b,C)=>{b instanceof HTMLElement?C.appendChild(b):"object"==typeof b?ke(b,C):b&&fn(C,b)},ke=(b,C)=>{b.jquery?ot(C,b):fn(C,b.toString())},ot=(b,C)=>{if(b.textContent="",0 in C)for(let k=0;k in C;k++)b.appendChild(C[k].cloneNode(!0));else b.appendChild(C.cloneNode(!0))},_t=(()=>{if(vr())return!1;const b=document.createElement("div"),C={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const k in C)if(Object.prototype.hasOwnProperty.call(C,k)&&typeof b.style[k]<"u")return C[k];return!1})(),W=(b,C)=>{const k=je(),H=ae();C.showConfirmButton||C.showDenyButton||C.showCancelButton?Mn(k):Ze(k),Dr(k,C,"actions"),function z(b,C,k){const H=ye(),be=Q(),rt=se();De(H,"confirm",k),De(be,"deny",k),De(rt,"cancel",k),function ee(b,C,k,H){H.buttonsStyling?(Ft([b,C,k],U.styled),H.confirmButtonColor&&(b.style.backgroundColor=H.confirmButtonColor,Ft(b,U["default-outline"])),H.denyButtonColor&&(C.style.backgroundColor=H.denyButtonColor,Ft(C,U["default-outline"])),H.cancelButtonColor&&(k.style.backgroundColor=H.cancelButtonColor,Ft(k,U["default-outline"]))):Qn([b,C,k],U.styled)}(H,be,rt,k),k.reverseButtons&&(k.toast?(b.insertBefore(rt,H),b.insertBefore(be,H)):(b.insertBefore(rt,C),b.insertBefore(be,C),b.insertBefore(H,C)))}(k,H,C),fn(H,C.loaderHtml),Dr(H,C,"loader")};function De(b,C,k){ui(b,k["show".concat(_e(C),"Button")],"inline-block"),fn(b,k["".concat(C,"ButtonText")]),b.setAttribute("aria-label",k["".concat(C,"ButtonAriaLabel")]),b.className=U[C],Dr(b,k,"".concat(C,"Button")),Ft(b,k["".concat(C,"ButtonClass")])}const We=(b,C)=>{const k=ge();!k||(function gt(b,C){"string"==typeof C?b.style.background=C:C||Ft([document.documentElement,document.body],U["no-backdrop"])}(k,C.backdrop),function $t(b,C){C in U?Ft(b,U[C]):(he('The "position" parameter is not valid, defaulting to "center"'),Ft(b,U.center))}(k,C.position),function Un(b,C){if(C&&"string"==typeof C){const k="grow-".concat(C);k in U&&Ft(b,U[k])}}(k,C.grow),Dr(k,C,"container"))};const gn=["input","file","range","select","radio","checkbox","textarea"],Oe=b=>{if(!zn[b.input])return void pe('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(b.input,'"'));const C=ys(b.input),k=zn[b.input](C,b);Mn(C),setTimeout(()=>{Tr(k)})},Xt=(b,C)=>{const k=Qr(Ke(),b);if(k){(b=>{for(let C=0;C<b.attributes.length;C++){const k=b.attributes[C].name;["type","value","style"].includes(k)||b.removeAttribute(k)}})(k);for(const H in C)k.setAttribute(H,C[H])}},zr=b=>{const C=ys(b.input);"object"==typeof b.customClass&&Ft(C,b.customClass.input)},Jr=(b,C)=>{(!b.placeholder||C.inputPlaceholder)&&(b.placeholder=C.inputPlaceholder)},Vn=(b,C,k)=>{if(k.inputLabel){b.id=U.input;const H=document.createElement("label"),be=U["input-label"];H.setAttribute("for",b.id),H.className=be,"object"==typeof k.customClass&&Ft(H,k.customClass.inputLabel),H.innerText=k.inputLabel,C.insertAdjacentElement("beforebegin",H)}},ys=b=>Jn(Ke(),U[b]||U.input),wn=(b,C)=>{["string","number"].includes(typeof C)?b.value="".concat(C):Ae(C)||he('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof C,'"'))},zn={};zn.text=zn.email=zn.password=zn.number=zn.tel=zn.url=(b,C)=>(wn(b,C.inputValue),Vn(b,b,C),Jr(b,C),b.type=C.input,b),zn.file=(b,C)=>(Vn(b,b,C),Jr(b,C),b),zn.range=(b,C)=>{const k=b.querySelector("input"),H=b.querySelector("output");return wn(k,C.inputValue),k.type=C.input,wn(H,C.inputValue),Vn(k,b,C),b},zn.select=(b,C)=>{if(b.textContent="",C.inputPlaceholder){const k=document.createElement("option");fn(k,C.inputPlaceholder),k.value="",k.disabled=!0,k.selected=!0,b.appendChild(k)}return Vn(b,b,C),b},zn.radio=b=>(b.textContent="",b),zn.checkbox=(b,C)=>{const k=Qr(Ke(),"checkbox");k.value="1",k.id=U.checkbox,k.checked=Boolean(C.inputValue);const H=b.querySelector("span");return fn(H,C.inputPlaceholder),k},zn.textarea=(b,C)=>{wn(b,C.inputValue),Jr(b,C),Vn(b,b,C);return setTimeout(()=>{if("MutationObserver"in window){const H=parseInt(window.getComputedStyle(Ke()).width);new MutationObserver(()=>{const rt=b.offsetWidth+(H=>parseInt(window.getComputedStyle(H).marginLeft)+parseInt(window.getComputedStyle(H).marginRight))(b);Ke().style.width=rt>H?"".concat(rt,"px"):null}).observe(b,{attributes:!0,attributeFilter:["style"]})}}),b};const lo=(b,C)=>{const k=xe();Dr(k,C,"htmlContainer"),C.html?(it(C.html,k),Mn(k,"block")):C.text?(k.textContent=C.text,Mn(k,"block")):Ze(k),((b,C)=>{const k=Ke(),H=oe.innerParams.get(b),be=!H||C.input!==H.input;gn.forEach(rt=>{const On=Jn(k,U[rt]);Xt(rt,C.inputAttributes),On.className=U[rt],be&&Ze(On)}),C.input&&(be&&Oe(C),zr(C))})(b,C)},_s=(b,C)=>{for(const k in V)C.icon!==k&&Qn(b,V[k]);Ft(b,V[C.icon]),vs(b,C),Ca(),Dr(b,C,"icon")},Ca=()=>{const b=Ke(),C=window.getComputedStyle(b).getPropertyValue("background-color"),k=b.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let H=0;H<k.length;H++)k[H].style.backgroundColor=C},Ji=(b,C)=>{let H,k=b.innerHTML;C.iconHtml?H=wr(C.iconHtml):"success"===C.icon?(H='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',k=k.replace(/ style=".*?"/g,"")):H="error"===C.icon?'\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':wr({question:"?",warning:"!",info:"i"}[C.icon]),k.trim()!==H.trim()&&fn(b,H)},vs=(b,C)=>{if(C.iconColor){b.style.color=C.iconColor,b.style.borderColor=C.iconColor;for(const k of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Hr(b,k,"backgroundColor",C.iconColor);Hr(b,".swal2-success-ring","borderColor",C.iconColor)}},wr=b=>'<div class="'.concat(U["icon-content"],'">').concat(b,"</div>"),En=(b,C)=>{b.className="".concat(U.popup," ").concat(cn(b)?C.showClass.popup:""),C.toast?(Ft([document.documentElement,document.body],U["toast-shown"]),Ft(b,U.toast)):Ft(b,U.modal),Dr(b,C,"popup"),"string"==typeof C.customClass&&Ft(b,C.customClass),C.icon&&Ft(b,U["icon-".concat(C.icon)])},Cu=b=>{const C=document.createElement("li");return Ft(C,U["progress-step"]),fn(C,b),C},js=b=>{const C=document.createElement("li");return Ft(C,U["progress-step-line"]),b.progressStepsDistance&&_r(C,"width",b.progressStepsDistance),C},Xi=(b,C)=>{((b,C)=>{const k=ge(),H=Ke();C.toast?(_r(k,"width",C.width),H.style.width="100%",H.insertBefore(ae(),Me())):_r(H,"width",C.width),_r(H,"padding",C.padding),C.color&&(H.style.color=C.color),C.background&&(H.style.background=C.background),Ze(q()),En(H,C)})(0,C),We(0,C),((b,C)=>{const k=Je();C.progressSteps&&0!==C.progressSteps.length?(Mn(k),k.textContent="",C.currentProgressStep>=C.progressSteps.length&&he("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),C.progressSteps.forEach((H,be)=>{const rt=Cu(H);if(k.appendChild(rt),be===C.currentProgressStep&&Ft(rt,U["active-progress-step"]),be!==C.progressSteps.length-1){const On=js(C);k.appendChild(On)}})):Ze(k)})(0,C),((b,C)=>{const k=oe.innerParams.get(b),H=Me();k&&C.icon===k.icon?(Ji(H,C),_s(H,C)):C.icon||C.iconHtml?C.icon&&-1===Object.keys(V).indexOf(C.icon)?(pe('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(C.icon,'"')),Ze(H)):(Mn(H),Ji(H,C),_s(H,C),Ft(H,C.showClass.icon)):Ze(H)})(b,C),((b,C)=>{const k=Qe();C.imageUrl?(Mn(k,""),k.setAttribute("src",C.imageUrl),k.setAttribute("alt",C.imageAlt),_r(k,"width",C.imageWidth),_r(k,"height",C.imageHeight),k.className=U.image,Dr(k,C,"image")):Ze(k)})(0,C),((b,C)=>{const k=Te();ui(k,C.title||C.titleText,"block"),C.title&&it(C.title,k),C.titleText&&(k.innerText=C.titleText),Dr(k,C,"title")})(0,C),((b,C)=>{const k=Jt();fn(k,C.closeButtonHtml),Dr(k,C,"closeButton"),ui(k,C.showCloseButton),k.setAttribute("aria-label",C.closeButtonAriaLabel)})(0,C),lo(b,C),W(0,C),((b,C)=>{const k=Be();ui(k,C.footer),C.footer&&it(C.footer,k),Dr(k,C,"footer")})(0,C),"function"==typeof C.didRender&&C.didRender(Ke())};function es(){const b=oe.innerParams.get(this);if(!b)return;const C=oe.domCache.get(this);Ze(C.loader),Cn()?b.icon&&Mn(Me()):Ei(C),Qn([C.popup,C.actions],U.loading),C.popup.removeAttribute("aria-busy"),C.popup.removeAttribute("data-loading"),C.confirmButton.disabled=!1,C.denyButton.disabled=!1,C.cancelButton.disabled=!1}const Ei=b=>{const C=b.popup.getElementsByClassName(b.loader.getAttribute("data-button-to-replace"));C.length?Mn(C[0],"inline-block"):!cn(ye())&&!cn(Q())&&!cn(se())&&Ze(b.actions)};const lr=()=>ye()&&ye().click(),Li=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Sa=b=>{b.keydownTarget&&b.keydownHandlerAdded&&(b.keydownTarget.removeEventListener("keydown",b.keydownHandler,{capture:b.keydownListenerCapture}),b.keydownHandlerAdded=!1)},Tu=(b,C,k)=>{const H=nt();if(H.length)return(C+=k)===H.length?C=0:-1===C&&(C=H.length-1),H[C].focus();Ke().focus()},Su=["ArrowRight","ArrowDown"],Bc=["ArrowLeft","ArrowUp"],Au=(b,C,k)=>{const H=oe.innerParams.get(b);!H||C.isComposing||229===C.keyCode||(H.stopKeydownPropagation&&C.stopPropagation(),"Enter"===C.key?xu(b,C,H):"Tab"===C.key?cr(C,H):[...Su,...Bc].includes(C.key)?Pl(C.key):"Escape"===C.key&&Yd(C,H,k))},xu=(b,C,k)=>{if(te(k.allowEnterKey)&&C.target&&b.getInput()&&C.target instanceof HTMLElement&&C.target.outerHTML===b.getInput().outerHTML){if(["textarea","file"].includes(k.input))return;lr(),C.preventDefault()}},cr=(b,C)=>{const k=b.target,H=nt();let be=-1;for(let rt=0;rt<H.length;rt++)if(k===H[rt]){be=rt;break}Tu(0,be,b.shiftKey?-1:1),b.stopPropagation(),b.preventDefault()},Pl=b=>{const C=ye(),k=Q(),H=se();if(document.activeElement instanceof HTMLElement&&![C,k,H].includes(document.activeElement))return;const be=Su.includes(b)?"nextElementSibling":"previousElementSibling";let rt=document.activeElement;for(let On=0;On<je().children.length;On++){if(rt=rt[be],!rt)return;if(rt instanceof HTMLButtonElement&&cn(rt))break}rt instanceof HTMLButtonElement&&rt.focus()},Yd=(b,C,k)=>{te(C.allowEscapeKey)&&(b.preventDefault(),k(Li.esc))};var Xr={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const Ru=()=>{Array.from(document.body.children).forEach(C=>{C.hasAttribute("data-previous-aria-hidden")?(C.setAttribute("aria-hidden",C.getAttribute("data-previous-aria-hidden")),C.removeAttribute("data-previous-aria-hidden")):C.removeAttribute("aria-hidden")})},ws=()=>{const b=navigator.userAgent,C=!!b.match(/iPad/i)||!!b.match(/iPhone/i),k=!!b.match(/WebKit/i);C&&k&&!b.match(/CriOS/i)&&Ke().scrollHeight>window.innerHeight-44&&(ge().style.paddingBottom="".concat(44,"px"))},Jd=()=>{const b=ge();let C;b.ontouchstart=k=>{C=Ol(k)},b.ontouchmove=k=>{C&&(k.preventDefault(),k.stopPropagation())}},Ol=b=>{const C=b.target,k=ge();return!Xd(b)&&!eh(b)&&(C===k||!wi(k)&&C instanceof HTMLElement&&"INPUT"!==C.tagName&&"TEXTAREA"!==C.tagName&&!(wi(xe())&&xe().contains(C)))},Xd=b=>b.touches&&b.touches.length&&"stylus"===b.touches[0].touchType,eh=b=>b.touches&&b.touches.length>1,Es=()=>{null===Kt.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(Kt.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(Kt.previousBodyPadding+(()=>{const b=document.createElement("div");b.className=U["scrollbar-measure"],document.body.appendChild(b);const C=b.getBoundingClientRect().width-b.clientWidth;return document.body.removeChild(b),C})(),"px"))};function Aa(b,C,k,H){Cn()?Ul(b,H):(Xn(k).then(()=>Ul(b,H)),Sa(Ve)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(C.setAttribute("style","display:none !important"),C.removeAttribute("class"),C.innerHTML=""):C.remove(),tn()&&(null!==Kt.previousBodyPadding&&(document.body.style.paddingRight="".concat(Kt.previousBodyPadding,"px"),Kt.previousBodyPadding=null),(()=>{if(Tt(document.body,U.iosfix)){const b=parseInt(document.body.style.top,10);Qn(document.body,U.iosfix),document.body.style.top="",document.body.scrollTop=-1*b}})(),Ru()),function xa(){Qn([document.documentElement,document.body],[U.shown,U["height-auto"],U["no-backdrop"],U["toast-shown"]])}()}function Ra(b){b=Go(b);const C=Xr.swalPromiseResolve.get(this),k=ts(this);this.isAwaitingPromise()?b.isDismissed||(Ii(this),C(b)):k&&C(b)}const ts=b=>{const C=Ke();if(!C)return!1;const k=oe.innerParams.get(b);if(!k||Tt(C,k.hideClass.popup))return!1;Qn(C,k.showClass.popup),Ft(C,k.hideClass.popup);const H=ge();return Qn(H,k.showClass.backdrop),Ft(H,k.hideClass.backdrop),Ma(b,C,k),!0};const Ii=b=>{b.isAwaitingPromise()&&(oe.awaitingPromise.delete(b),oe.innerParams.get(b)||b._destroy())},Go=b=>typeof b>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},b),Ma=(b,C,k)=>{const H=ge(),be=_t&&Fn(C);"function"==typeof k.willClose&&k.willClose(C),be?ku(b,C,H,k.returnFocus,k.didClose):Aa(b,H,k.returnFocus,k.didClose)},ku=(b,C,k,H,be)=>{Ve.swalCloseEventFinishedCallback=Aa.bind(null,b,k,H,be),C.addEventListener(_t,function(rt){rt.target===C&&(Ve.swalCloseEventFinishedCallback(),delete Ve.swalCloseEventFinishedCallback)})},Ul=(b,C)=>{setTimeout(()=>{"function"==typeof C&&C.bind(b.params)(),b._destroy()})};function $s(b,C,k){const H=oe.domCache.get(b);C.forEach(be=>{H[be].disabled=k})}function Ui(b,C){if(b)if("radio"===b.type){const H=b.parentNode.parentNode.querySelectorAll("input");for(let be=0;be<H.length;be++)H[be].disabled=C}else b.disabled=C}const In={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},ka=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Hc={},di=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Fr=b=>Object.prototype.hasOwnProperty.call(In,b),Wo=b=>-1!==ka.indexOf(b),Is=b=>Hc[b],rs=b=>{Fr(b)||he('Unknown parameter "'.concat(b,'"'))},nn=b=>{di.includes(b)&&he('The parameter "'.concat(b,'" is incompatible with toasts'))},Na=b=>{Is(b)&&Z(b,Is(b))};const bi=b=>{const C={};return Object.keys(b).forEach(k=>{Wo(k)?C[k]=b[k]:he("Invalid parameter to update: ".concat(k))}),C};const Bn=b=>{At(b),delete b.params,delete Ve.keydownHandler,delete Ve.keydownTarget,delete Ve.currentInstance},At=b=>{b.isAwaitingPromise()?(ho(oe,b),oe.awaitingPromise.set(b,!0)):(ho(Xr,b),ho(oe,b))},ho=(b,C)=>{for(const k in b)b[k].delete(C)};var Bl=Object.freeze({hideLoading:es,disableLoading:es,getInput:function ur(b){const C=oe.innerParams.get(b||this),k=oe.domCache.get(b||this);return k?Qr(k.popup,C.input):null},close:Ra,isAwaitingPromise:function Fi(){return!!oe.awaitingPromise.get(this)},rejectPromise:function ns(b){const C=Xr.swalPromiseReject.get(this);Ii(this),C&&C(b)},handleAwaitingPromise:Ii,closePopup:Ra,closeModal:Ra,closeToast:Ra,enableButtons:function ci(){$s(this,["confirmButton","denyButton","cancelButton"],!1)},disableButtons:function ei(){$s(this,["confirmButton","denyButton","cancelButton"],!0)},enableInput:function co(){Ui(this.getInput(),!1)},disableInput:function Vl(){Ui(this.getInput(),!0)},showValidationMessage:function Sr(b){const C=oe.domCache.get(this),k=oe.innerParams.get(this);fn(C.validationMessage,b),C.validationMessage.className=U["validation-message"],k.customClass&&k.customClass.validationMessage&&Ft(C.validationMessage,k.customClass.validationMessage),Mn(C.validationMessage);const H=this.getInput();H&&(H.setAttribute("aria-invalid",!0),H.setAttribute("aria-describedby",U["validation-message"]),Tr(H),Ft(H,U.inputerror))},resetValidationMessage:function jc(){const b=oe.domCache.get(this);b.validationMessage&&Ze(b.validationMessage);const C=this.getInput();C&&(C.removeAttribute("aria-invalid"),C.removeAttribute("aria-describedby"),Qn(C,U.inputerror))},getProgressSteps:function $c(){return oe.domCache.get(this).progressSteps},update:function Pa(b){const C=Ke(),k=oe.innerParams.get(this);if(!C||Tt(C,k.hideClass.popup))return he("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const H=bi(b),be=Object.assign({},k,H);Xi(this,be),oe.innerParams.set(this,be),Object.defineProperties(this,{params:{value:Object.assign({},this.params,b),writable:!1,enumerable:!0}})},_destroy:function Oa(){const b=oe.domCache.get(this),C=oe.innerParams.get(this);C?(b.popup&&Ve.swalCloseEventFinishedCallback&&(Ve.swalCloseEventFinishedCallback(),delete Ve.swalCloseEventFinishedCallback),"function"==typeof C.didDestroy&&C.didDestroy(),Bn(this)):At(this)}});const is=b=>{let C=Ke();C||new er,C=Ke();const k=ae();Cn()?Ze(Me()):La(C,b),Mn(k),C.setAttribute("data-loading","true"),C.setAttribute("aria-busy","true"),C.focus()},La=(b,C)=>{const k=je(),H=ae();!C&&cn(ye())&&(C=ye()),Mn(k),C&&(Ze(C),H.setAttribute("data-button-to-replace",C.className)),H.parentNode.insertBefore(H,C),Ft([b,k],U.loading)},Pu=b=>b.checked?1:0,zo=b=>b.checked?b.value:null,Ne=b=>b.files.length?null!==b.getAttribute("multiple")?b.files:b.files[0]:null,Zt=(b,C)=>{const k=Ke(),H=be=>{Ua[C.input](k,Nn(be),C)};Ge(C.inputOptions)||Ae(C.inputOptions)?(is(ye()),Pe(C.inputOptions).then(be=>{b.hideLoading(),H(be)})):"object"==typeof C.inputOptions?H(C.inputOptions):pe("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof C.inputOptions))},Fa=(b,C)=>{const k=b.getInput();Ze(k),Pe(C.inputValue).then(H=>{k.value="".concat("number"===C.input?parseFloat(H)||0:H),Mn(k),k.focus(),b.hideLoading()}).catch(H=>{pe("Error in inputValue promise: ".concat(H)),k.value="",Mn(k),k.focus(),b.hideLoading()})},Ua={select:(b,C,k)=>{const H=Jn(b,U.select),be=(rt,On,pn)=>{const Tn=document.createElement("option");Tn.value=pn,fn(Tn,On),Tn.selected=qo(pn,k.inputValue),rt.appendChild(Tn)};C.forEach(rt=>{const On=rt[0],pn=rt[1];if(Array.isArray(pn)){const Tn=document.createElement("optgroup");Tn.label=On,Tn.disabled=!1,H.appendChild(Tn),pn.forEach(as=>be(Tn,as[1],as[0]))}else be(H,pn,On)}),H.focus()},radio:(b,C,k)=>{const H=Jn(b,U.radio);C.forEach(rt=>{const On=rt[0],pn=rt[1],Tn=document.createElement("input"),as=document.createElement("label");Tn.type="radio",Tn.name=U.radio,Tn.value=On,qo(On,k.inputValue)&&(Tn.checked=!0);const us=document.createElement("span");fn(us,pn),us.className=U.label,as.appendChild(Tn),as.appendChild(us),H.appendChild(as)});const be=H.querySelectorAll("input");be.length&&be[0].focus()}},Nn=b=>{const C=[];return typeof Map<"u"&&b instanceof Map?b.forEach((k,H)=>{let be=k;"object"==typeof be&&(be=Nn(be)),C.push([H,be])}):Object.keys(b).forEach(k=>{let H=b[k];"object"==typeof H&&(H=Nn(H)),C.push([k,H])}),C},qo=(b,C)=>C&&C.toString()===b.toString(),po=(b,C)=>{const k=oe.innerParams.get(b);if(!k.input)return void pe('The "input" parameter is needed to be set when using returnInputValueOn'.concat(_e(C)));const H=((b,C)=>{const k=b.getInput();if(!k)return null;switch(C.input){case"checkbox":return Pu(k);case"radio":return zo(k);case"file":return Ne(k);default:return C.inputAutoTrim?k.value.trim():k.value}})(b,k);k.inputValidator?Ou(b,H,C):b.getInput().checkValidity()?"deny"===C?Zo(b,H):Pn(b,H):(b.enableButtons(),b.showValidationMessage(k.validationMessage))},Ou=(b,C,k)=>{const H=oe.innerParams.get(b);b.disableInput(),Promise.resolve().then(()=>Pe(H.inputValidator(C,H.validationMessage))).then(rt=>{b.enableButtons(),b.enableInput(),rt?b.showValidationMessage(rt):"deny"===k?Zo(b,C):Pn(b,C)})},Zo=(b,C)=>{const k=oe.innerParams.get(b||void 0);k.showLoaderOnDeny&&is(Q()),k.preDeny?(oe.awaitingPromise.set(b||void 0,!0),Promise.resolve().then(()=>Pe(k.preDeny(C,k.validationMessage))).then(be=>{!1===be?(b.hideLoading(),Ii(b)):b.close({isDenied:!0,value:typeof be>"u"?C:be})}).catch(be=>go(b||void 0,be))):b.close({isDenied:!0,value:C})},Lu=(b,C)=>{b.close({isConfirmed:!0,value:C})},go=(b,C)=>{b.rejectPromise(C)},Pn=(b,C)=>{const k=oe.innerParams.get(b||void 0);k.showLoaderOnConfirm&&is(),k.preConfirm?(b.resetValidationMessage(),oe.awaitingPromise.set(b||void 0,!0),Promise.resolve().then(()=>Pe(k.preConfirm(C,k.validationMessage))).then(be=>{cn(q())||!1===be?(b.hideLoading(),Ii(b)):Lu(b,typeof be>"u"?C:be)}).catch(be=>go(b||void 0,be))):Lu(b,C)},Fu=(b,C,k)=>{C.popup.onclick=()=>{const H=oe.innerParams.get(b);H&&(Gs(H)||H.timer||H.input)||k(Li.close)}},Gs=b=>b.showConfirmButton||b.showDenyButton||b.showCancelButton||b.showCloseButton;let fi=!1;const th=b=>{b.popup.onmousedown=()=>{b.container.onmouseup=function(C){b.container.onmouseup=void 0,C.target===b.container&&(fi=!0)}}},Yo=b=>{b.container.onmousedown=()=>{b.popup.onmouseup=function(C){b.popup.onmouseup=void 0,(C.target===b.popup||b.popup.contains(C.target))&&(fi=!0)}}},nh=(b,C,k)=>{C.container.onclick=H=>{const be=oe.innerParams.get(b);fi?fi=!1:H.target===C.container&&te(be.allowOutsideClick)&&k(Li.backdrop)}},Qo=b=>b instanceof Element||(b=>"object"==typeof b&&b.jquery)(b);const ea=()=>{if(Ve.timeout)return(()=>{const b=pt(),C=parseInt(window.getComputedStyle(b).width);b.style.removeProperty("transition"),b.style.width="100%";const H=C/parseInt(window.getComputedStyle(b).width)*100;b.style.removeProperty("transition"),b.style.width="".concat(H,"%")})(),Ve.timeout.stop()},ta=()=>{if(Ve.timeout){const b=Ve.timeout.start();return Wn(b),b}};let Gu=!1;const os={};const Va=b=>{for(let C=b.target;C&&C!==document;C=C.parentNode)for(const k in os){const H=C.getAttribute(k);if(H)return void os[k].fire({template:H})}};var dr=Object.freeze({isValidParameter:Fr,isUpdatableParameter:Wo,isDeprecatedParameter:Is,argsToParams:b=>{const C={};return"object"!=typeof b[0]||Qo(b[0])?["title","html","icon"].forEach((k,H)=>{const be=b[H];"string"==typeof be||Qo(be)?C[k]=be:void 0!==be&&pe("Unexpected type of ".concat(k,'! Expected "string" or "Element", got ').concat(typeof be))}):Object.assign(C,b[0]),C},isVisible:()=>cn(Ke()),clickConfirm:lr,clickDeny:()=>Q()&&Q().click(),clickCancel:()=>se()&&se().click(),getContainer:ge,getPopup:Ke,getTitle:Te,getHtmlContainer:xe,getImage:Qe,getIcon:Me,getInputLabel:()=>Xe(U["input-label"]),getCloseButton:Jt,getActions:je,getConfirmButton:ye,getDenyButton:Q,getCancelButton:se,getLoader:ae,getFooter:Be,getTimerProgressBar:pt,getFocusableElements:nt,getValidationMessage:q,isLoading:()=>Ke().hasAttribute("data-loading"),fire:function Vu(){const b=this;for(var C=arguments.length,k=new Array(C),H=0;H<C;H++)k[H]=arguments[H];return new b(...k)},mixin:function Xo(b){return class C extends(this){_main(H,be){return super._main(H,Object.assign({},b,be))}}},showLoading:is,enableLoading:is,getTimerLeft:()=>Ve.timeout&&Ve.timeout.getTimerLeft(),stopTimer:ea,resumeTimer:ta,toggleTimer:()=>{const b=Ve.timeout;return b&&(b.running?ea():ta())},increaseTimer:b=>{if(Ve.timeout){const C=Ve.timeout.increase(b);return Wn(C,!0),C}},isTimerRunning:()=>Ve.timeout&&Ve.timeout.isRunning(),bindClickHandler:function Ws(){os[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,Gu||(document.body.addEventListener("click",Va),Gu=!0)}});class ti{constructor(C,k){this.callback=C,this.remaining=k,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(C){const k=this.running;return k&&this.stop(),this.remaining+=C,k&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Dn=["swal-title","swal-html","swal-footer"],Wu=b=>{const C={};return Array.from(b.querySelectorAll("swal-param")).forEach(H=>{pi(H,["name","value"]);const be=H.getAttribute("name"),rt=H.getAttribute("value");C[be]="boolean"==typeof In[be]?"false"!==rt:"object"==typeof In[be]?JSON.parse(rt):rt}),C},Gc=b=>{const C={};return Array.from(b.querySelectorAll("swal-button")).forEach(H=>{pi(H,["type","color","aria-label"]);const be=H.getAttribute("type");C["".concat(be,"ButtonText")]=H.innerHTML,C["show".concat(_e(be),"Button")]=!0,H.hasAttribute("color")&&(C["".concat(be,"ButtonColor")]=H.getAttribute("color")),H.hasAttribute("aria-label")&&(C["".concat(be,"ButtonAriaLabel")]=H.getAttribute("aria-label"))}),C},zu=b=>{const C={},k=b.querySelector("swal-image");return k&&(pi(k,["src","width","height","alt"]),k.hasAttribute("src")&&(C.imageUrl=k.getAttribute("src")),k.hasAttribute("width")&&(C.imageWidth=k.getAttribute("width")),k.hasAttribute("height")&&(C.imageHeight=k.getAttribute("height")),k.hasAttribute("alt")&&(C.imageAlt=k.getAttribute("alt"))),C},Ba=b=>{const C={},k=b.querySelector("swal-icon");return k&&(pi(k,["type","color"]),k.hasAttribute("type")&&(C.icon=k.getAttribute("type")),k.hasAttribute("color")&&(C.iconColor=k.getAttribute("color")),C.iconHtml=k.innerHTML),C},$l=b=>{const C={},k=b.querySelector("swal-input");k&&(pi(k,["type","label","placeholder","value"]),C.input=k.getAttribute("type")||"text",k.hasAttribute("label")&&(C.inputLabel=k.getAttribute("label")),k.hasAttribute("placeholder")&&(C.inputPlaceholder=k.getAttribute("placeholder")),k.hasAttribute("value")&&(C.inputValue=k.getAttribute("value")));const H=Array.from(b.querySelectorAll("swal-input-option"));return H.length&&(C.inputOptions={},H.forEach(be=>{pi(be,["value"]);const rt=be.getAttribute("value");C.inputOptions[rt]=be.innerHTML})),C},ja=(b,C)=>{const k={};for(const H in C){const be=C[H],rt=b.querySelector(be);rt&&(pi(rt,[]),k[be.replace(/^swal-/,"")]=rt.innerHTML.trim())}return k},zs=b=>{const C=Dn.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(b.children).forEach(k=>{const H=k.tagName.toLowerCase();C.includes(H)||he("Unrecognized element <".concat(H,">"))})},pi=(b,C)=>{Array.from(b.attributes).forEach(k=>{-1===C.indexOf(k.name)&&he(['Unrecognized attribute "'.concat(k.name,'" on <').concat(b.tagName.toLowerCase(),">."),"".concat(C.length?"Allowed attributes are: ".concat(C.join(", ")):"To set the value, use HTML within the element.")])})},mo=b=>{const C=ge(),k=Ke();"function"==typeof b.willOpen&&b.willOpen(k);const be=window.getComputedStyle(document.body).overflowY;qs(C,k,b),setTimeout(()=>{bs(C,k)},10),tn()&&(Cs(C,b.scrollbarPadding,be),Array.from(document.body.children).forEach(C=>{C===ge()||C.contains(ge())||(C.hasAttribute("aria-hidden")&&C.setAttribute("data-previous-aria-hidden",C.getAttribute("aria-hidden")),C.setAttribute("aria-hidden","true"))})),!Cn()&&!Ve.previousActiveElement&&(Ve.previousActiveElement=document.activeElement),"function"==typeof b.didOpen&&setTimeout(()=>b.didOpen(k)),Qn(C,U["no-transition"])},Ku=b=>{const C=Ke();if(b.target!==C)return;const k=ge();C.removeEventListener(_t,Ku),k.style.overflowY="auto"},bs=(b,C)=>{_t&&Fn(C)?(b.style.overflowY="hidden",C.addEventListener(_t,Ku)):b.style.overflowY="auto"},Cs=(b,C,k)=>{(()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!Tt(document.body,U.iosfix)){const C=document.body.scrollTop;document.body.style.top="".concat(-1*C,"px"),Ft(document.body,U.iosfix),Jd(),ws()}})(),C&&"hidden"!==k&&Es(),setTimeout(()=>{b.scrollTop=0})},qs=(b,C,k)=>{Ft(b,k.showClass.backdrop),C.style.setProperty("opacity","0","important"),Mn(C,"grid"),setTimeout(()=>{Ft(C,k.showClass.popup),C.style.removeProperty("opacity")},10),Ft([document.documentElement,document.body],U.shown),k.heightAuto&&k.backdrop&&!k.toast&&Ft([document.documentElement,document.body],U["height-auto"])};var na={email:(b,C)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(b)?Promise.resolve():Promise.resolve(C||"Invalid email address"),url:(b,C)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(b)?Promise.resolve():Promise.resolve(C||"Invalid URL")};function Ha(b){(function qn(b){b.inputValidator||Object.keys(na).forEach(C=>{b.input===C&&(b.inputValidator=na[C])})})(b),b.showLoaderOnConfirm&&!b.preConfirm&&he("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function $a(b){(!b.target||"string"==typeof b.target&&!document.querySelector(b.target)||"string"!=typeof b.target&&!b.target.appendChild)&&(he('Target parameter is not valid, defaulting to "body"'),b.target="body")}(b),"string"==typeof b.title&&(b.title=b.title.split("\n").join("<br />")),Wr(b)}let Ci;class yo{constructor(){if(typeof window>"u")return;Ci=this;for(var C=arguments.length,k=new Array(C),H=0;H<C;H++)k[H]=arguments[H];const be=Object.freeze(this.constructor.argsToParams(k));Object.defineProperties(this,{params:{value:be,writable:!1,enumerable:!0,configurable:!0}});const rt=Ci._main(Ci.params);oe.promise.set(this,rt)}_main(C){let k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(b=>{!b.backdrop&&b.allowOutsideClick&&he('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const C in b)rs(C),b.toast&&nn(C),Na(C)})(Object.assign({},k,C)),Ve.currentInstance&&(Ve.currentInstance._destroy(),tn()&&Ru()),Ve.currentInstance=Ci;const H=vo(C,k);Ha(H),Object.freeze(H),Ve.timeout&&(Ve.timeout.stop(),delete Ve.timeout),clearTimeout(Ve.restoreFocusTimeout);const be=Ks(Ci);return Xi(Ci,H),oe.innerParams.set(Ci,H),_o(Ci,be,H)}then(C){return oe.promise.get(this).then(C)}finally(C){return oe.promise.get(this).finally(C)}}const _o=(b,C,k)=>new Promise((H,be)=>{const rt=On=>{b.close({isDismissed:!0,dismiss:On})};Xr.swalPromiseResolve.set(b,H),Xr.swalPromiseReject.set(b,be),C.confirmButton.onclick=()=>{(b=>{const C=oe.innerParams.get(b);b.disableButtons(),C.input?po(b,"confirm"):Pn(b,!0)})(b)},C.denyButton.onclick=()=>{(b=>{const C=oe.innerParams.get(b);b.disableButtons(),C.returnInputValueOnDeny?po(b,"deny"):Zo(b,!1)})(b)},C.cancelButton.onclick=()=>{((b,C)=>{b.disableButtons(),C(Li.cancel)})(b,rt)},C.closeButton.onclick=()=>{rt(Li.close)},((b,C,k)=>{oe.innerParams.get(b).toast?Fu(b,C,k):(th(C),Yo(C),nh(b,C,k))})(b,C,rt),((b,C,k,H)=>{Sa(C),k.toast||(C.keydownHandler=be=>Au(b,be,H),C.keydownTarget=k.keydownListenerCapture?window:Ke(),C.keydownListenerCapture=k.keydownListenerCapture,C.keydownTarget.addEventListener("keydown",C.keydownHandler,{capture:C.keydownListenerCapture}),C.keydownHandlerAdded=!0)})(b,Ve,k,rt),((b,C)=>{"select"===C.input||"radio"===C.input?Zt(b,C):["text","email","number","tel","textarea"].includes(C.input)&&(Ge(C.inputValue)||Ae(C.inputValue))&&(is(ye()),Fa(b,C))})(b,k),mo(k),Ga(Ve,k,rt),ra(C,k),setTimeout(()=>{C.container.scrollTop=0})}),vo=(b,C)=>{const k=(b=>{const C="string"==typeof b.template?document.querySelector(b.template):b.template;if(!C)return{};const k=C.content;return zs(k),Object.assign(Wu(k),Gc(k),zu(k),Ba(k),$l(k),ja(k,Dn))})(b),H=Object.assign({},In,C,k,b);return H.showClass=Object.assign({},In.showClass,H.showClass),H.hideClass=Object.assign({},In.hideClass,H.hideClass),H},Ks=b=>{const C={popup:Ke(),container:ge(),actions:je(),confirmButton:ye(),denyButton:Q(),cancelButton:se(),loader:ae(),closeButton:Jt(),validationMessage:q(),progressSteps:Je()};return oe.domCache.set(b,C),C},Ga=(b,C,k)=>{const H=pt();Ze(H),C.timer&&(b.timeout=new ti(()=>{k("timer"),delete b.timeout},C.timer),C.timerProgressBar&&(Mn(H),Dr(H,C,"timerProgressBar"),setTimeout(()=>{b.timeout&&b.timeout.running&&Wn(C.timer)})))},ra=(b,C)=>{if(!C.toast){if(!te(C.allowEnterKey))return void Gl();Hl(b,C)||Tu(0,-1,1)}},Hl=(b,C)=>C.focusDeny&&cn(b.denyButton)?(b.denyButton.focus(),!0):C.focusCancel&&cn(b.cancelButton)?(b.cancelButton.focus(),!0):!(!C.focusConfirm||!cn(b.confirmButton)||(b.confirmButton.focus(),0)),Gl=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|xn--p1ai)$/)&&Math.random()<.3){const b=document.createElement("div");b.className="save-yourself-from-war";const C=(b=>b[Math.floor(Math.random()*b.length)])([{text:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f \u0437\u0430\u0434\u0430\u0447\u0430 \u0441\u0435\u0439\u0447\u0430\u0441 - \u043d\u0435 \u043f\u043e\u043f\u0430\u0441\u0442\u044c \u043d\u0430 \u0432\u043e\u0439\u043d\u0443 \u0438 \u043f\u043e\u043c\u043e\u0447\u044c \u0441\u0432\u043e\u0438\u043c \u0431\u043b\u0438\u0436\u043d\u0438\u043c \u043d\u0435 \u0431\u044b\u0442\u044c \u043c\u043e\u0431\u0438\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u044b\u043c\u0438.",id:"X39ZkynPjpQ"}]);fn(b,"<div>".concat(C.text,'</div>\n      <iframe width="560" height="315" src="https://www.youtube.com/embed/').concat(C.id,'" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>\n      <div>\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u0435 \u0441\u0435\u0431\u044f \u0438 \u0441\u0432\u043e\u0438\u0445 \u0431\u043b\u0438\u0437\u043a\u0438\u0445!</div>\n      '));const k=document.createElement("button");k.innerHTML="&times;",k.onclick=()=>b.remove(),b.appendChild(k),window.addEventListener("load",()=>{setTimeout(()=>{document.body.appendChild(b)},1e3)})}Object.assign(yo.prototype,Bl),Object.assign(yo,dr),Object.keys(Bl).forEach(b=>{yo[b]=function(){if(Ci)return Ci[b](...arguments)}}),yo.DismissReason=Li,yo.version="11.4.38";const er=yo;return er.default=er,er}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(oe,F){var m=oe.createElement("style");if(oe.getElementsByTagName("head")[0].appendChild(m),m.styleSheet)m.styleSheet.disabled||(m.styleSheet.cssText=F);else try{m.innerHTML=F}catch{m.innerText=F}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4!important;grid-row:1/4!important;grid-template-columns:1fr 99fr 1fr;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px hsla(0deg,0%,0%,.075),0 1px 2px hsla(0deg,0%,0%,.075),1px 2px 4px hsla(0deg,0%,0%,.075),1px 3px 8px hsla(0deg,0%,0%,.075),2px 4px 16px hsla(0deg,0%,0%,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:700}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.8em;left:-.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content,auto) minmax(min-content,auto) minmax(min-content,auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:0 0!important}.swal2-container.swal2-bottom-start,.swal2-container.swal2-center-start,.swal2-container.swal2-top-start{grid-template-columns:minmax(0,1fr) auto auto}.swal2-container.swal2-bottom,.swal2-container.swal2-center,.swal2-container.swal2-top{grid-template-columns:auto minmax(0,1fr) auto}.swal2-container.swal2-bottom-end,.swal2-container.swal2-center-end,.swal2-container.swal2-top-end{grid-template-columns:auto auto minmax(0,1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-left>.swal2-popup,.swal2-container.swal2-center-start>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-left>.swal2-popup,.swal2-container.swal2-bottom-start>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-fullscreen>.swal2-popup,.swal2-container.swal2-grow-row>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none!important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0,100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:0}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 transparent #2778c4 transparent}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px transparent;font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:0}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto!important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:0 0;color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:0 0;color:#f27474}.swal2-close:focus{outline:0;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:400;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-checkbox,.swal2-file,.swal2-input,.swal2-radio,.swal2-select,.swal2-textarea{margin:1em 2em 3px}.swal2-file,.swal2-input,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:0 0;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px transparent;color:inherit;font-size:1.125em}.swal2-file.swal2-inputerror,.swal2-input.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474!important;box-shadow:0 0 2px #f27474!important}.swal2-file:focus,.swal2-input:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-file::-moz-placeholder,.swal2-input::-moz-placeholder,.swal2-textarea::-moz-placeholder{color:#ccc}.swal2-file::placeholder,.swal2-input::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:0 0;font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:0 0;color:inherit;font-size:1.125em}.swal2-checkbox,.swal2-radio{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-checkbox label,.swal2-radio label{margin:0 .6em;font-size:1.125em}.swal2-checkbox input,.swal2-radio input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid transparent;border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-.25em;left:-.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:0 0;font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:transparent}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.save-yourself-from-war{display:flex;position:fixed;z-index:1939;top:0;right:0;bottom:0;left:0;flex-direction:column;align-items:center;justify-content:center;padding:25px 0 20px;background:#20232a;color:#fff;text-align:center}.save-yourself-from-war div{max-width:560px;margin:10px;line-height:146%}.save-yourself-from-war iframe{max-width:100%;max-height:55.5555555556vmin;margin:16px auto}.save-yourself-from-war strong{border-bottom:2px dashed #fff}.save-yourself-from-war button{display:flex;position:fixed;z-index:1940;top:0;right:0;align-items:center;justify-content:center;width:48px;height:48px;margin-right:10px;margin-bottom:-10px;border:none;background:0 0;color:#aaa;font-size:48px;font-weight:700;cursor:pointer}.save-yourself-from-war button:hover{color:#fff}@keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto!important}body.swal2-no-backdrop .swal2-container{background-color:transparent!important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll!important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static!important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:transparent;pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-left,body.swal2-toast-shown .swal2-container.swal2-top-start{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-left,body.swal2-toast-shown .swal2-container.swal2-center-start{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%,-50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-left,body.swal2-toast-shown .swal2-container.swal2-bottom-start{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')},9163:lt=>{function oe(F){var m=new Error("Cannot find module '"+F+"'");throw m.code="MODULE_NOT_FOUND",m}oe.keys=()=>[],oe.resolve=oe,oe.id=9163,lt.exports=oe},655:(lt,oe,F)=>{"use strict";function ce(Q,re){var ae={};for(var se in Q)Object.prototype.hasOwnProperty.call(Q,se)&&re.indexOf(se)<0&&(ae[se]=Q[se]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var je=0;for(se=Object.getOwnPropertySymbols(Q);je<se.length;je++)re.indexOf(se[je])<0&&Object.prototype.propertyIsEnumerable.call(Q,se[je])&&(ae[se[je]]=Q[se[je]])}return ae}function pe(Q,re,ae,se){return new(ae||(ae=Promise))(function(Be,pt){function Jt(tn){try{nt(se.next(tn))}catch(Cn){pt(Cn)}}function zt(tn){try{nt(se.throw(tn))}catch(Cn){pt(Cn)}}function nt(tn){tn.done?Be(tn.value):function je(Be){return Be instanceof ae?Be:new ae(function(pt){pt(Be)})}(tn.value).then(Jt,zt)}nt((se=se.apply(Q,re||[])).next())})}function ge(Q){return this instanceof ge?(this.v=Q,this):new ge(Q)}function ve(Q,re,ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var je,se=ae.apply(Q,re||[]),Be=[];return je={},pt("next"),pt("throw"),pt("return"),je[Symbol.asyncIterator]=function(){return this},je;function pt(rn){se[rn]&&(je[rn]=function(Kt){return new Promise(function(fn,Tt){Be.push([rn,Kt,fn,Tt])>1||Jt(rn,Kt)})})}function Jt(rn,Kt){try{!function zt(rn){rn.value instanceof ge?Promise.resolve(rn.value.v).then(nt,tn):Cn(Be[0][2],rn)}(se[rn](Kt))}catch(fn){Cn(Be[0][3],fn)}}function nt(rn){Jt("next",rn)}function tn(rn){Jt("throw",rn)}function Cn(rn,Kt){rn(Kt),Be.shift(),Be.length&&Jt(Be[0][0],Be[0][1])}}function Ke(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ae,re=Q[Symbol.asyncIterator];return re?re.call(Q):(Q=function te(Q){var re="function"==typeof Symbol&&Symbol.iterator,ae=re&&Q[re],se=0;if(ae)return ae.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&se>=Q.length&&(Q=void 0),{value:Q&&Q[se++],done:!Q}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),ae={},se("next"),se("throw"),se("return"),ae[Symbol.asyncIterator]=function(){return this},ae);function se(Be){ae[Be]=Q[Be]&&function(pt){return new Promise(function(Jt,zt){!function je(Be,pt,Jt,zt){Promise.resolve(zt).then(function(nt){Be({value:nt,done:Jt})},pt)}(Jt,zt,(pt=Q[Be](pt)).done,pt.value)})}}}F.d(oe,{FC:()=>ve,KL:()=>Ke,_T:()=>ce,mG:()=>pe,qq:()=>ge})},4650:(lt,oe,F)=>{"use strict";F.d(oe,{$8M:()=>Yl,$Z:()=>mp,AFp:()=>cg,ALo:()=>Nb,AaK:()=>pe,CHM:()=>Fa,CRH:()=>jw,CZH:()=>t_,CqO:()=>ks,D6c:()=>aA,EJc:()=>lC,EpF:()=>nw,F4k:()=>Op,FYo:()=>M,FiY:()=>$e,G48:()=>a0,GfV:()=>Ye,JOm:()=>au,KtG:()=>Ua,LFG:()=>jn,LSH:()=>hh,Lbi:()=>hg,Lck:()=>Zp,MMx:()=>jy,NdJ:()=>vy,OlP:()=>Ln,Oqu:()=>fe,PXZ:()=>GS,Q6J:()=>gy,QGY:()=>_y,QP$:()=>Un,Qsj:()=>O,R0b:()=>Vo,RDi:()=>nm,Rgc:()=>Xp,SBq:()=>f,Sil:()=>dC,Suo:()=>gf,TTD:()=>ns,TgZ:()=>Pp,VKq:()=>Tb,X6Q:()=>KS,XFs:()=>Ze,Xpm:()=>ke,Xts:()=>tp,Y36:()=>pc,YKP:()=>Kp,YNc:()=>Xv,Yjl:()=>ue,Yz7:()=>Kt,Z0I:()=>Dr,ZZ4:()=>Tg,_UZ:()=>my,_Vd:()=>su,_c5:()=>sA,_uU:()=>Cy,aQg:()=>p0,c2e:()=>uC,cJS:()=>Tt,cg1:()=>Dc,dDg:()=>pC,dqk:()=>vn,eFA:()=>IC,eoX:()=>gC,f3M:()=>T,g9A:()=>n_,h0i:()=>hf,hGG:()=>oA,hij:()=>Ad,iGM:()=>Rc,ifc:()=>Ve,ip1:()=>Jw,jDz:()=>Nw,kL8:()=>Tc,lG2:()=>De,lcZ:()=>Ob,lqb:()=>ri,lri:()=>s_,oAB:()=>W,oxw:()=>kI,q4F:()=>st,qLn:()=>ap,qZA:()=>Cd,rWj:()=>o_,s9C:()=>zh,sBO:()=>u0,sIi:()=>xp,s_b:()=>qy,soG:()=>pg,tb:()=>fg,tp0:()=>xt,uIk:()=>xr,vHH:()=>Ae,vpe:()=>gu,wAp:()=>Rt,xp6:()=>$E,z2F:()=>Df,zSh:()=>oc,zs3:()=>dc});var m=F(7579),U=F(727),V=F(9751),ce=F(6451),de=F(3099);function _e(s){for(let o in s)if(s[o]===_e)return o;throw Error("Could not find renamed property on target object.")}function pe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(pe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function Ee(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const K=_e({__forward_ref__:_e});function Z(s){return s.__forward_ref__=Z,s.toString=function(){return pe(this())},s}function te(s){return function Ge(s){return"function"==typeof s&&s.hasOwnProperty(K)&&s.__forward_ref__===Z}(s)?s():s}class Ae extends Error{constructor(o,u){super(function at(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,u)),this.code=o}}function ge(s){return"string"==typeof s?s:null==s?"":String(s)}function Te(s,o){throw new Ae(-201,!1)}function zt(s,o){null==s&&function nt(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Kt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Tt(s){return{providers:s.providers||[],imports:s.imports||[]}}function sn(s){return Qr(s,Qn)||Qr(s,_r)}function Dr(s){return null!==sn(s)}function Qr(s,o){return s.hasOwnProperty(o)?s[o]:null}function Ft(s){return s&&(s.hasOwnProperty(Jn)||s.hasOwnProperty(Mn))?s[Jn]:null}const Qn=_e({\u0275prov:_e}),Jn=_e({\u0275inj:_e}),_r=_e({ngInjectableDef:_e}),Mn=_e({ngInjectorDef:_e});var Ze=(()=>((Ze=Ze||{})[Ze.Default=0]="Default",Ze[Ze.Host=1]="Host",Ze[Ze.Self=2]="Self",Ze[Ze.SkipSelf=4]="SkipSelf",Ze[Ze.Optional=8]="Optional",Ze))();let Hr;function cn(s){const o=Hr;return Hr=s,o}function li(s,o,u){const c=sn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&Ze.Optional?null:void 0!==o?o:void Te(pe(s))}function Fn(s){return{toString:s}.toString()}var Wn=(()=>((Wn=Wn||{})[Wn.OnPush=0]="OnPush",Wn[Wn.Default=1]="Default",Wn))(),Ve=(()=>{return(s=Ve||(Ve={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Ve;var s})();const vn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Gr={},Mt=[],Or=_e({\u0275cmp:_e}),on=_e({\u0275dir:_e}),Pi=_e({\u0275pipe:_e}),an=_e({\u0275mod:_e}),ar=_e({\u0275fac:_e}),Wr=_e({__NG_ELEMENT_ID__:_e});let it=0;function ke(s){return Fn(()=>{const u=!0===s.standalone,c={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Wn.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Mt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Ve.Emulated,id:"c"+it++,styles:s.styles||Mt,_:null,setInput:null,schemas:s.schemas||null,tView:null},p=s.dependencies,v=s.features;return d.inputs=ee(s.inputs,c),d.outputs=ee(s.outputs),v&&v.forEach(I=>I(d)),d.directiveDefs=p?()=>("function"==typeof p?p():p).map(_t).filter(bt):null,d.pipeDefs=p?()=>("function"==typeof p?p():p).map($t).filter(bt):null,d})}function _t(s){return We(s)||gt(s)}function bt(s){return null!==s}function W(s){return Fn(()=>({type:s.type,bootstrap:s.bootstrap||Mt,declarations:s.declarations||Mt,imports:s.imports||Mt,exports:s.exports||Mt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function ee(s,o){if(null==s)return Gr;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),u[d]=c,o&&(o[d]=p)}return u}const De=ke;function ue(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function We(s){return s[Or]||null}function gt(s){return s[on]||null}function $t(s){return s[Pi]||null}function Un(s){const o=We(s)||gt(s)||$t(s);return null!==o&&o.standalone}function gn(s,o){const u=s[an]||null;if(!u&&!0===o)throw new Error(`Type ${pe(s)} does not have '\u0275mod' property.`);return u}function lr(s){return Array.isArray(s)&&"object"==typeof s[1]}function qr(s){return Array.isArray(s)&&!0===s[1]}function Ta(s){return 0!=(8&s.flags)}function Li(s){return 2==(2&s.flags)}function Sa(s){return 1==(1&s.flags)}function Lr(s){return null!==s.template}function Tu(s){return 0!=(256&s[2])}function Fi(s,o){return s.hasOwnProperty(ar)?s[ar]:null}class ts{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function ns(){return Ii}function Ii(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ma),Go}function Go(){const s=Ul(this),o=s?.current;if(o){const u=s.previous;if(u===Gr)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Ma(s,o,u,c){const d=Ul(s)||function $s(s,o){return s[ku]=o}(s,{previous:Gr,current:null}),p=d.current||(d.current={}),v=d.previous,I=this.declaredInputs[u],D=v[I];p[I]=new ts(D&&D.currentValue,o,v===Gr),s[c]=o}ns.ngInherit=!0;const ku="__ngSimpleChanges__";function Ul(s){return s[ku]||null}function In(s){for(;Array.isArray(s);)s=s[0];return s}function Fr(s,o){return In(o[s.index])}function Is(s,o){return s.data[o]}function nn(s,o){const u=o[s];return lr(u)?u:u[0]}function Hs(s){return 64==(64&s[2])}function bi(s,o){return null==o?null:s[o]}function Oa(s){s[18]=0}function Bn(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const At={lFrame:$u(null),bindingsEnabled:!0};function ss(){return At.bindingsEnabled}function Ne(){return At.lFrame.lView}function Zt(){return At.lFrame.tView}function Fa(s){return At.lFrame.contextLView=s,s[8]}function Ua(s){return At.lFrame.contextLView=null,s}function Nn(){let s=qo();for(;null!==s&&64===s.type;)s=s.parent;return s}function qo(){return At.lFrame.currentTNode}function hi(s,o){const u=At.lFrame;u.currentTNode=s,u.isParent=o}function Ko(){return At.lFrame.isParent}function Pn(){const s=At.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Gs(){return At.lFrame.bindingIndex++}function nh(s,o){const u=At.lFrame;u.bindingIndex=u.bindingRootIndex=s,Qo(o)}function Qo(s){At.lFrame.currentDirectiveIndex=s}function Vu(){return At.lFrame.currentQueryIndex}function Xo(s){At.lFrame.currentQueryIndex=s}function Bu(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function ea(s,o,u){if(u&Ze.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||u&Ze.Host||(d=Bu(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,s=p}const c=At.lFrame=ju();return c.currentTNode=o,c.lView=s,!0}function ta(s){const o=ju(),u=s[1];At.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function ju(){const s=At.lFrame,o=null===s?null:s.child;return null===o?$u(s):o}function $u(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Hu(){const s=At.lFrame;return At.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Gu=Hu;function os(){const s=Hu();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function dr(){return At.lFrame.selectedIndex}function ti(s){At.lFrame.selectedIndex=s}function Dn(){const s=At.lFrame;return Is(s.tView,s.selectedIndex)}function ja(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:D,ngAfterViewChecked:x,ngOnDestroy:P}=p;v&&(s.contentHooks||(s.contentHooks=[])).push(-u,v),I&&((s.contentHooks||(s.contentHooks=[])).push(u,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,I)),D&&(s.viewHooks||(s.viewHooks=[])).push(-u,D),x&&((s.viewHooks||(s.viewHooks=[])).push(u,x),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,x)),null!=P&&(s.destroyHooks||(s.destroyHooks=[])).push(u,P)}}function zs(s,o,u){mo(s,o,3,u)}function pi(s,o,u,c){(3&s[2])===u&&mo(s,o,u,c)}function qu(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function mo(s,o,u,c){const p=c??-1,v=o.length-1;let I=0;for(let D=void 0!==c?65535&s[18]:0;D<v;D++)if("number"==typeof o[D+1]){if(I=o[D],null!=c&&I>=c)break}else o[D]<0&&(s[18]+=65536),(I<p||-1==p)&&(Ku(s,u,o,D),s[18]=(4294901760&s[18])+D+2),D++}function Ku(s,o,u,c){const d=u[c]<0,p=u[c+1],I=s[d?-u[c]:u[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(I)}finally{}}}else try{p.call(I)}finally{}}class Cs{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function vo(s,o,u){let c=0;for(;c<u.length;){const d=u[c];if("number"==typeof d){if(0!==d)break;c++;const p=u[c++],v=u[c++],I=u[c++];s.setAttribute(o,v,I,p)}else{const p=d,v=u[++c];Ga(p)?s.setProperty(o,p,v):s.setAttribute(o,p,v),c++}}return c}function Ks(s){return 3===s||4===s||6===s}function Ga(s){return 64===s.charCodeAt(0)}function ra(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||Hl(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function Hl(s,o,u,c,d){let p=0,v=s.length;if(-1===o)v=-1;else for(;p<s.length;){const I=s[p++];if("number"==typeof I){if(I===o){v=-1;break}if(I>o){v=p-1;break}}}for(;p<s.length;){const I=s[p];if("number"==typeof I)break;if(I===u){if(null===c)return void(null!==d&&(s[p+1]=d));if(c===s[p+1])return void(s[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==v&&(s.splice(v,0,o),p=v+1),s.splice(p++,0,u),null!==c&&s.splice(p++,0,c),null!==d&&s.splice(p++,0,d)}function Gl(s){return-1!==s}function er(s){return 32767&s}function C(s,o){let u=function b(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let k=!0;function H(s){const o=k;return k=s,o}let pn=0;const Tn={};function us(s,o){const u=Wl(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Zu(c.data,s),Zu(o,null),Zu(c.blueprint,null));const d=zl(s,o),p=s.injectorIndex;if(Gl(d)){const v=er(d),I=C(d,o),D=I[1].data;for(let x=0;x<8;x++)o[p+x]=I[v+x]|D[v+x]}return o[p+8]=d,p}function Zu(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Wl(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function zl(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){if(c=qa(d),null===c)return-1;if(u++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function wo(s,o,u){!function as(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Wr)&&(c=u[Wr]),null==c&&(c=u[Wr]=pn++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function Eo(s,o,u){if(u&Ze.Optional||void 0!==s)return s;Te()}function ql(s,o,u,c){if(u&Ze.Optional&&void 0===c&&(c=null),0==(u&(Ze.Self|Ze.Host))){const d=s[9],p=cn(void 0);try{return d?d.get(o,c,u&Ze.Optional):li(o,c,u&Ze.Optional)}finally{cn(p)}}return Eo(c,0,u)}function ia(s,o,u,c=Ze.Default,d){if(null!==s){if(1024&o[2]){const v=function za(s,o,u,c,d){let p=s,v=o;for(;null!==p&&null!==v&&1024&v[2]&&!(256&v[2]);){const I=Yu(p,v,u,c|Ze.Self,Tn);if(I!==Tn)return I;let D=p.parent;if(!D){const x=v[21];if(x){const P=x.get(u,Tn,c);if(P!==Tn)return P}D=qa(v),v=v[15]}p=D}return d}(s,o,u,c,Tn);if(v!==Tn)return v}const p=Yu(s,o,u,c,Tn);if(p!==Tn)return p}return ql(o,u,c,d)}function Yu(s,o,u,c,d){const p=function Wc(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Wr)?s[Wr]:void 0;return"number"==typeof o?o>=0?255&o:zc:o}(u);if("function"==typeof p){if(!ea(o,s,c))return c&Ze.Host?Eo(d,0,c):ql(o,u,c,d);try{const v=p(c);if(null!=v||c&Ze.Optional)return v;Te()}finally{Gu()}}else if("number"==typeof p){let v=null,I=Wl(s,o),D=-1,x=c&Ze.Host?o[16][6]:null;for((-1===I||c&Ze.SkipSelf)&&(D=-1===I?zl(s,o):o[I+8],-1!==D&&Qu(c,!1)?(v=o[1],I=er(D),o=C(D,o)):I=-1);-1!==I;){const P=o[1];if(Kl(p,I,P.data)){const j=ih(I,o,u,v,c,x);if(j!==Tn)return j}D=o[I+8],-1!==D&&Qu(c,o[1].data[I+8]===x)&&Kl(p,I,o)?(v=P,I=er(D),o=C(D,o)):I=-1}}return d}function ih(s,o,u,c,d,p){const v=o[1],I=v.data[s+8],P=Wa(I,v,u,null==c?Li(I)&&k:c!=v&&0!=(3&I.type),d&Ze.Host&&p===I);return null!==P?Zs(o,v,P,I):Tn}function Wa(s,o,u,c,d){const p=s.providerIndexes,v=o.data,I=1048575&p,D=s.directiveStart,P=p>>20,Y=d?I+P:s.directiveEnd;for(let ie=c?I:I+P;ie<Y;ie++){const Ce=v[ie];if(ie<D&&u===Ce||ie>=D&&Ce.type===u)return ie}if(d){const ie=v[D];if(ie&&Lr(ie)&&ie.type===u)return D}return null}function Zs(s,o,u,c){let d=s[u];const p=o.data;if(function qs(s){return s instanceof Cs}(d)){const v=d;v.resolving&&function Xe(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ae(-200,`Circular dependency in DI detected for ${s}${u}`)}(function ve(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ge(s)}(p[u]));const I=H(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?cn(v.injectImpl):null;ea(s,c,Ze.Default);try{d=s[u]=v.factory(void 0,p,s,c),o.firstCreatePass&&u>=c.directiveStart&&function $l(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(c){const v=Ii(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,v)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),p&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,p),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,p))}(u,p[u],o)}finally{null!==D&&cn(D),H(I),v.resolving=!1,Gu()}}return d}function Kl(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Qu(s,o){return!(s&Ze.Self||s&Ze.Host&&o)}class sa{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return ia(this._tNode,this._lView,o,c,u)}}function zc(){return new sa(Nn(),Ne())}function qa(s){const o=s[1],u=o.type;return 2===u?o.declTNode:1===u?s[6]:null}function Yl(s){return function rh(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const p=u[d];if(Ks(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(p===o)return u[d+1];d+=2}}}return null}(Nn(),s)}const bo="__parameters__";function Ya(s,o,u){return Fn(()=>{const c=function Ql(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...p){if(this instanceof d)return c.apply(this,p),this;const v=new d(...p);return I.annotation=v,I;function I(D,x,P){const j=D.hasOwnProperty(bo)?D[bo]:Object.defineProperty(D,bo,{value:[]})[bo];for(;j.length<=P;)j.push(null);return(j[P]=j[P]||[]).push(v),D}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class Ln{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Kt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Kn(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),Kn(c,o)):o!==s&&o.push(c)}return o}function cs(s,o){s.forEach(u=>Array.isArray(u)?cs(u,o):o(u))}function Xu(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function ni(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}const ds={},Qc="__NG_DI_FLAG__",Xa="ngTempTokenPath",Qs=/\n/gm,Vr="__source";let Ao;function Js(s){const o=Ao;return Ao=s,o}function fr(s,o=Ze.Default){if(void 0===Ao)throw new Ae(-203,!1);return null===Ao?li(s,void 0,o):Ao.get(s,o&Ze.Optional?null:void 0,o)}function jn(s,o=Ze.Default){return(function ui(){return Hr}()||fr)(te(s),o)}function T(s,o=Ze.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),jn(s,o)}function A(s){const o=[];for(let u=0;u<s.length;u++){const c=te(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Ae(900,!1);let d,p=Ze.Default;for(let v=0;v<c.length;v++){const I=c[v],D=$(I);"number"==typeof D?-1===D?d=I.token:p|=D:d=I}o.push(jn(d,p))}else o.push(jn(c))}return o}function N(s,o){return s[Qc]=o,s.prototype[Qc]=o,s}function $(s){return s[Qc]}const $e=N(Ya("Optional"),8),xt=N(Ya("SkipSelf"),4);let Kf;function nm(s){Kf=s}class uh{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const ol=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var pr=(()=>((pr=pr||{})[pr.NONE=0]="NONE",pr[pr.HTML=1]="HTML",pr[pr.STYLE=2]="STYLE",pr[pr.SCRIPT=3]="SCRIPT",pr[pr.URL=4]="URL",pr[pr.RESOURCE_URL=5]="RESOURCE_URL",pr))();function hh(s){const o=function sc(){const s=Ne();return s&&s[12]}();return o?o.sanitize(pr.URL,s)||"":function nu(s,o){const u=function Yf(s){return s instanceof uh&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?function As(s){return s instanceof uh?s.changingThisBreaksApplicationSecurity:s}(s):function ed(s){return(s=String(s)).match(ol)?s:"unsafe:"+s}(ge(s))}const tp=new Ln("ENVIRONMENT_INITIALIZER"),pm=new Ln("INJECTOR",-1),gm=new Ln("INJECTOR_DEF_TYPES");class mm{get(o,u=ds){if(u===ds){const c=new Error(`NullInjectorError: No provider for ${pe(o)}!`);throw c.name="NullInjectorError",c}return u}}function ym(...s){return{\u0275providers:mh(0,s)}}function mh(s,...o){const u=[],c=new Set;let d;return cs(o,p=>{const v=p;rd(v,u,[],c)&&(d||(d=[]),d.push(v))}),void 0!==d&&yh(d,u),u}function yh(s,o){for(let u=0;u<s.length;u++){const{providers:d}=s[u];cs(d,p=>{o.push(p)})}}function rd(s,o,u,c){if(!(s=te(s)))return!1;let d=null,p=Ft(s);const v=!p&&We(s);if(p||v){if(v&&!v.standalone)return!1;d=s}else{const D=s.ngModule;if(p=Ft(D),!p)return!1;d=D}const I=c.has(d);if(v){if(I)return!1;if(c.add(d),v.dependencies){const D="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const x of D)rd(x,o,u,c)}}else{if(!p)return!1;{if(null!=p.imports&&!I){let x;c.add(d);try{cs(p.imports,P=>{rd(P,o,u,c)&&(x||(x=[]),x.push(P))})}finally{}void 0!==x&&yh(x,o)}if(!I){const x=Fi(d)||(()=>new d);o.push({provide:d,useFactory:x,deps:Mt},{provide:gm,useValue:d,multi:!0},{provide:tp,useValue:()=>jn(d),multi:!0})}const D=p.providers;null==D||I||cs(D,P=>{o.push(P)})}}return d!==s&&void 0!==s.providers}const _h=_e({provide:String,useValue:_e});function id(s){return null!==s&&"object"==typeof s&&_h in s}function fs(s){return"function"==typeof s}const oc=new Ln("Set Injector scope."),ac={},cl={};let sd;function vh(){return void 0===sd&&(sd=new mm),sd}class ri{}class wh extends ri{constructor(o,u,c,d){super(),this.parent=u,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,iu(o,v=>this.processProvider(v)),this.records.set(pm,Br(void 0,this)),d.has("environment")&&this.records.set(ri,Br(void 0,this));const p=this.records.get(oc);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(gm.multi,Mt,Ze.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=Js(this),c=cn(void 0);try{return o()}finally{Js(u),cn(c)}}get(o,u=ds,c=Ze.Default){this.assertNotDestroyed();const d=Js(this),p=cn(void 0);try{if(!(c&Ze.SkipSelf)){let I=this.records.get(o);if(void 0===I){const D=function Z_(s){return"function"==typeof s||"object"==typeof s&&s instanceof Ln}(o)&&sn(o);I=D&&this.injectableDefInScope(D)?Br(od(o),ac):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(c&Ze.Self?vh():this.parent).get(o,u=c&Ze.Optional&&u===ds?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[Xa]=v[Xa]||[]).unshift(pe(o)),d)throw v;return function ne(s,o,u,c){const d=s[Xa];throw o[Vr]&&d.unshift(o[Vr]),s.message=function le(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=pe(o);if(Array.isArray(o))d=o.map(pe).join(" -> ");else if("object"==typeof o){let p=[];for(let v in o)if(o.hasOwnProperty(v)){let I=o[v];p.push(v+":"+("string"==typeof I?JSON.stringify(I):pe(I)))}d=`{${p.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(Qs,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[Xa]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{cn(p),Js(d)}}resolveInjectorInitializers(){const o=Js(this),u=cn(void 0);try{const c=this.get(tp.multi,Mt,Ze.Self);for(const d of c)d()}finally{Js(o),cn(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(pe(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ae(205,!1)}processProvider(o){let u=fs(o=te(o))?o:te(o&&o.provide);const c=function np(s){return id(s)?Br(void 0,s.useValue):Br(function ad(s,o,u){let c;if(fs(s)){const d=te(s);return Fi(d)||od(d)}if(id(s))c=()=>te(s.useValue);else if(function $i(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...A(s.deps||[]));else if(function gi(s){return!(!s||!s.useExisting)}(s))c=()=>jn(te(s.useExisting));else{const d=te(s&&(s.useClass||s.provide));if(!function dl(s){return!!s.deps}(s))return Fi(d)||od(d);c=()=>new d(...A(s.deps))}return c}(s),ac)}(o);if(fs(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=Br(void 0,ac,!0),d.factory=()=>A(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===ac&&(u.value=cl,u.value=u.factory()),"object"==typeof u.value&&u.value&&function rp(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=te(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function od(s){const o=sn(s),u=null!==o?o.factory:Fi(s);if(null!==u)return u;if(s instanceof Ln)throw new Ae(204,!1);if(s instanceof Function)return function vm(s){const o=s.length;if(o>0)throw function Co(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new Ae(204,!1);const u=function Tr(s){const o=s&&(s[Qn]||s[_r]);if(o){const u=function Pr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Ae(204,!1)}function Br(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function Xs(s){return!!s.\u0275providers}function iu(s,o){for(const u of s)Array.isArray(u)?iu(u,o):Xs(u)?iu(u.\u0275providers,o):o(u)}class Eh{}class Ch{resolveComponentFactory(o){throw function wm(s){const o=Error(`No component factory found for ${pe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let su=(()=>{class s{}return s.NULL=new Ch,s})();function Y_(){return _(Nn(),Ne())}function _(s,o){return new f(Fr(s,o))}let f=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=Y_,s})();function g(s){return s instanceof f?s.nativeElement:s}class M{}let O=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function X(){const s=Ne(),u=nn(Nn().index,s);return(lr(u)?u:s)[11]}(),s})(),me=(()=>{class s{}return s.\u0275prov=Kt({token:s,providedIn:"root",factory:()=>null}),s})();class Ye{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const st=new Ye("14.2.4"),Ct={};function ev(s){return s.ngOriginalError}class ap{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&ev(o);for(;u&&ev(u);)u=ev(u);return u||null}}const tv=new Map;let ZD=0;const Tm="__ngContext__";function mi(s,o){lr(o)?(s[Tm]=o[20],function QD(s){tv.set(s[20],s)}(o)):s[Tm]=o}function pl(s){return s instanceof Function?s():s}var au=(()=>((au=au||{})[au.Important=1]="Important",au[au.DashCase=2]="DashCase",au))();function ov(s,o){return undefined(s,o)}function Ah(s){const o=s[3];return qr(o)?o[3]:o}function xm(s){return DE(s[13])}function Rm(s){return DE(s[4])}function DE(s){for(;null!==s&&!qr(s);)s=s[4];return s}function xh(s,o,u,c,d){if(null!=c){let p,v=!1;qr(c)?p=c:lr(c)&&(v=!0,c=c[0]);const I=In(c);0===s&&null!==u?null==d?kE(o,u,I):uu(o,u,I,d||null,!0):1===s&&null!==u?uu(o,u,I,d||null,!0):2===s?function dT(s,o,u){const c=Nm(s,o);c&&function cT(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,I,v):3===s&&o.destroyNode(I),null!=p&&function AR(s,o,u,c,d){const p=u[7];p!==In(u)&&xh(o,s,c,p,d);for(let I=10;I<u.length;I++){const D=u[I];ld(D[1],D,s,o,c,p)}}(o,s,p,u,d)}}function Mm(s,o,u){return s.createElement(o,u)}function xE(s,o){const u=s[9],c=u.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,Bn(d,-1)),u.splice(c,1)}function cv(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const d=c[17];null!==d&&d!==s&&xE(d,c),o>0&&(s[u-1][4]=c[4]);const p=ni(s,10+o);!function lv(s,o){ld(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=p[19];null!==v&&v.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function cp(s,o){if(!(128&o[2])){const u=o[11];u.destroyNode&&ld(s,o,u,3,null,null),function TR(s){let o=s[13];if(!o)return km(s[1],s);for(;o;){let u=null;if(lr(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)lr(o)&&km(o[1],o),o=o[3];null===o&&(o=s),lr(o)&&km(o[1],o),u=o&&o[4]}o=u}}(o)}}function km(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function hv(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof Cs)){const p=u[c+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const I=d[p[v]],D=p[v+1];try{D.call(I)}finally{}}else try{p.call(d)}finally{}}}}(s,o),function dv(s,o){const u=s.cleanup,c=o[7];let d=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const v=u[p+1],I="function"==typeof v?v(o):In(o[v]),D=c[d=u[p+2]],x=u[p+3];"boolean"==typeof x?I.removeEventListener(u[p],D,x):x>=0?c[d=x]():c[d=-x].unsubscribe(),p+=2}else{const v=c[d=u[p+1]];u[p].call(v)}if(null!==c){for(let p=d+1;p<c.length;p++)(0,c[p])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const u=o[17];if(null!==u&&qr(o[3])){u!==o[3]&&xE(u,o);const c=o[19];null!==c&&c.detachView(s)}!function JD(s){tv.delete(s[20])}(o)}}function RE(s,o,u){return function ME(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===Ve.None||d===Ve.Emulated)return null}return Fr(c,u)}(s,o.parent,u)}function uu(s,o,u,c,d){s.insertBefore(o,u,c,d)}function kE(s,o,u){s.appendChild(o,u)}function NE(s,o,u,c,d){null!==c?uu(s,o,u,c,d):kE(s,o,u)}function Nm(s,o){return s.parentNode(o)}let fv=function OE(s,o,u){return 40&s.type?Fr(s,u):null};function Pm(s,o,u,c){const d=RE(s,c,o),p=o[11],I=function yi(s,o,u){return fv(s,o,u)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(u))for(let D=0;D<u.length;D++)NE(p,d,u[D],I,!1);else NE(p,d,u,I,!1)}function Om(s,o){if(null!==o){const u=o.type;if(3&u)return Fr(o,s);if(4&u)return LE(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return Om(s,c);{const d=s[o.index];return qr(d)?LE(-1,d):In(d)}}if(32&u)return ov(o,s)()||In(s[o.index]);{const c=pv(s,o);return null!==c?Array.isArray(c)?c[0]:Om(Ah(s[16]),c):Om(s,o.next)}}return null}function pv(s,o){return null!==o?s[16][6].projection[o.projection]:null}function LE(s,o){const u=10+s+1;if(u<o.length){const c=o[u],d=c[1].firstChild;if(null!==d)return Om(c,d)}return o[7]}function gv(s,o,u,c,d,p,v){for(;null!=u;){const I=c[u.index],D=u.type;if(v&&0===o&&(I&&mi(In(I),c),u.flags|=4),64!=(64&u.flags))if(8&D)gv(s,o,u.child,c,d,p,!1),xh(o,s,d,I,p);else if(32&D){const x=ov(u,c);let P;for(;P=x();)xh(o,s,d,P,p);xh(o,s,d,I,p)}else 16&D?fp(s,o,c,u,d,p):xh(o,s,d,I,p);u=v?u.projectionNext:u.next}}function ld(s,o,u,c,d,p){gv(u,c,s.firstChild,o,d,p,!1)}function fp(s,o,u,c,d,p){const v=u[16],D=v[6].projection[c.projection];if(Array.isArray(D))for(let x=0;x<D.length;x++)xh(o,s,d,D[x],p);else gv(s,o,D,v[3],d,p,!0)}function cd(s,o,u){s.setAttribute(o,"style",u)}function pp(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function hT(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===c||s.charCodeAt(d+p)<=32)return d}u=d+1}}const mv="ng-template";function yv(s,o,u){let c=0;for(;c<s.length;){let d=s[c++];if(u&&"class"===d){if(d=s[c],-1!==hT(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function VE(s){return 4===s.type&&s.value!==mv}function pT(s,o,u){return o===(4!==s.type||u?s.value:mv)}function gT(s,o,u){let c=4;const d=s.attrs||[],p=function xR(s){for(let o=0;o<s.length;o++)if(Ks(s[o]))return o;return s.length}(d);let v=!1;for(let I=0;I<o.length;I++){const D=o[I];if("number"!=typeof D){if(!v)if(4&c){if(c=2|1&c,""!==D&&!pT(s,D,u)||""===D&&1===o.length){if(ko(c))return!1;v=!0}}else{const x=8&c?D:o[++I];if(8&c&&null!==s.attrs){if(!yv(s.attrs,x,u)){if(ko(c))return!1;v=!0}continue}const j=mT(8&c?"class":D,d,VE(s),u);if(-1===j){if(ko(c))return!1;v=!0;continue}if(""!==x){let Y;Y=j>p?"":d[j+1].toLowerCase();const ie=8&c?Y:null;if(ie&&-1!==hT(ie,x,0)||2&c&&x!==Y){if(ko(c))return!1;v=!0}}}}else{if(!v&&!ko(c)&&!ko(D))return!1;if(v&&ko(D))continue;v=!1,c=D|1&c}}return ko(c)||v}function ko(s){return 0==(1&s)}function mT(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let p=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)p=!0;else{if(1===v||2===v){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=p?1:2}return-1}return function BE(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function yT(s,o,u=!1){for(let c=0;c<o.length;c++)if(gT(s,o[c],u))return!0;return!1}function jE(s,o){return s?":not("+o.trim()+")":o}function Fm(s){let o=s[0],u=1,c=2,d="",p=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&c){const I=s[++u];d+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!ko(v)&&(o+=jE(p,d),d=""),c=v,p=p||!ko(c);u++}return""!==d&&(o+=jE(p,d)),o}const Ht={};function $E(s){HE(Zt(),Ne(),dr()+s,!1)}function HE(s,o,u,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&zs(o,p,u)}else{const p=s.preOrderHooks;null!==p&&pi(o,p,0,u)}ti(u)}function Wi(s,o=null,u=null,c){const d=IT(s,o,u,c);return d.resolveInjectorInitializers(),d}function IT(s,o=null,u=null,c,d=new Set){const p=[u||Mt,ym(s)];return c=c||("object"==typeof s?void 0:pe(s)),new wh(p,o||vh(),c||null,d)}let dc=(()=>{class s{static create(u,c){if(Array.isArray(u))return Wi({name:""},c,u,"");{const d=u.name??"";return Wi({name:d},u.parent,u.providers,d)}}}return s.THROW_IF_NOT_FOUND=ds,s.NULL=new mm,s.\u0275prov=Kt({token:s,providedIn:"any",factory:()=>jn(pm)}),s.__NG_ELEMENT_ID__=-1,s})();function pc(s,o=Ze.Default){const u=Ne();return null===u?jn(s,o):ia(Nn(),u,te(s),o)}function mp(){throw new Error("invalid")}function sI(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const d=u[c],p=u[c+1];if(-1!==p){const v=s.data[p];Xo(d),v.contentQueries(2,o[p],p)}}}function Jm(s,o,u,c,d,p,v,I,D,x,P){const j=o.blueprint.slice();return j[0]=d,j[2]=76|c,(null!==P||s&&1024&s[2])&&(j[2]|=1024),Oa(j),j[3]=j[15]=s,j[8]=u,j[10]=v||s&&s[10],j[11]=I||s&&s[11],j[12]=D||s&&s[12]||null,j[9]=x||s&&s[9]||null,j[6]=p,j[20]=function YD(){return ZD++}(),j[21]=P,j[16]=2==o.type?s[16]:j,j}function yc(s,o,u,c,d){let p=s.data[o];if(null===p)p=function Xm(s,o,u,c,d){const p=qo(),v=Ko(),D=s.data[o]=function Uh(s,o,u,c,d,p){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=D),null!==p&&(v?null==p.child&&null!==D.parent&&(p.child=D):null===p.next&&(p.next=D)),D}(s,o,u,c,d),function th(){return At.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=u,p.value=c,p.attrs=d;const v=function fo(){const s=At.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return hi(p,!0),p}function Oh(s,o,u,c){if(0===u)return-1;const d=o.length;for(let p=0;p<u;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function Lh(s,o,u){ta(o);try{const c=s.viewQuery;null!==c&&$v(1,c,u);const d=s.template;null!==d&&ey(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&sI(s,o),s.staticViewQueries&&$v(2,s.viewQuery,u);const p=s.components;null!==p&&function Mv(s,o){for(let u=0;u<o.length;u++)Dp(s,o[u])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,os()}}function Fh(s,o,u,c){const d=o[2];if(128!=(128&d)){ta(o);try{Oa(o),function Fu(s){return At.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&ey(s,o,u,2,c);const v=3==(3&d);if(v){const x=s.preOrderCheckHooks;null!==x&&zs(o,x,null)}else{const x=s.preOrderHooks;null!==x&&pi(o,x,0,null),qu(o,0)}if(function mI(s){for(let o=xm(s);null!==o;o=Rm(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const d=u[c],p=d[3];0==(512&d[2])&&Bn(p,1),d[2]|=512}}}(o),function gI(s){for(let o=xm(s);null!==o;o=Rm(o))for(let u=10;u<o.length;u++){const c=o[u],d=c[1];Hs(c)&&Fh(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&sI(s,o),v){const x=s.contentCheckHooks;null!==x&&zs(o,x)}else{const x=s.contentHooks;null!==x&&pi(o,x,1),qu(o,1)}!function OT(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)ti(~d);else{const p=d,v=u[++c],I=u[++c];nh(v,p),I(2,o[p])}}}finally{ti(-1)}}(s,o);const I=s.components;null!==I&&function oI(s,o){for(let u=0;u<o.length;u++)yI(s,o[u])}(o,I);const D=s.viewQuery;if(null!==D&&$v(2,D,c),v){const x=s.viewCheckHooks;null!==x&&zs(o,x)}else{const x=s.viewHooks;null!==x&&pi(o,x,2),qu(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Bn(o[3],-1))}finally{os()}}}function ey(s,o,u,c,d){const p=dr(),v=2&c;try{ti(-1),v&&o.length>22&&HE(s,o,22,!1),u(c,d)}finally{ti(p)}}function Nv(s,o,u){!ss()||(function ry(s,o,u,c){const d=u.directiveStart,p=u.directiveEnd;s.firstCreatePass||us(u,o),mi(c,o);const v=u.initialInputs;for(let I=d;I<p;I++){const D=s.data[I],x=Lr(D);x&&ay(o,u,D);const P=Zs(o,s,I,u);mi(P,o),null!==v&&FT(0,I-d,P,D,0,v),x&&(nn(u.index,o)[8]=P)}}(s,o,u,Fr(u,o)),128==(128&u.flags)&&function fI(s,o,u){const c=u.directiveStart,d=u.directiveEnd,p=u.index,v=function Uu(){return At.lFrame.currentDirectiveIndex}();try{ti(p);for(let I=c;I<d;I++){const D=s.data[I],x=o[I];Qo(I),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&iy(D,x)}}finally{ti(-1),Qo(v)}}(s,o,u))}function dd(s,o,u=Fr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let p=0;p<c.length;p+=2){const v=c[p+1],I=-1===v?u(o,s):s[v];s[d++]=I}}}function Pv(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=ty(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function ty(s,o,u,c,d,p,v,I,D,x){const P=22+c,j=P+d,Y=function aI(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Ht);return u}(P,j),ie="function"==typeof x?x():x;return Y[1]={type:s,blueprint:Y,template:u,queries:null,viewQuery:I,declTNode:o,data:Y.slice().fill(null,P),bindingStartIndex:P,expandoStartIndex:j,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:ie,incompleteFirstPass:!1}}function uI(s,o,u,c){const d=Hv(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&Gv(s).push(c,d.length-1))}function lI(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,d):u[c]=[o,d]}return u}function cI(s,o){const c=o.directiveEnd,d=s.data,p=o.attrs,v=[];let I=null,D=null;for(let x=o.directiveStart;x<c;x++){const P=d[x],j=P.inputs,Y=null===p||VE(o)?null:Vv(j,p);v.push(Y),I=lI(j,x,I),D=lI(P.outputs,x,D)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=16),I.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=I,o.outputs=D}function Rs(s,o,u,c,d,p,v,I){const D=Fr(o,u);let P,x=o.inputs;!I&&null!=x&&(P=x[c])?(ya(s,u,P,c,d),Li(o)&&Ip(u,o.index)):3&o.type&&(c=function hd(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=v?v(d,o.value||"",c):d,p.setProperty(D,c,d))}function Ip(s,o){const u=nn(o,s);16&u[2]||(u[2]|=32)}function Ai(s,o,u,c){let d=!1;if(ss()){const p=function pI(s,o,u){const c=s.directiveRegistry;let d=null;if(c)for(let p=0;p<c.length;p++){const v=c[p];yT(u,v.selectors,!1)&&(d||(d=[]),wo(us(u,o),s,v.type),Lr(v)?(Fv(s,u),d.unshift(v)):d.push(v))}return d}(s,o,u),v=null===c?null:{"":-1};if(null!==p){d=!0,sy(u,s.data.length,p.length);for(let P=0;P<p.length;P++){const j=p[P];j.providersResolver&&j.providersResolver(j)}let I=!1,D=!1,x=Oh(s,o,p.length,null);for(let P=0;P<p.length;P++){const j=p[P];u.mergedAttrs=ra(u.mergedAttrs,j.hostAttrs),oy(s,u,o,x,j),Uv(x,j,v),null!==j.contentQueries&&(u.flags|=8),(null!==j.hostBindings||null!==j.hostAttrs||0!==j.hostVars)&&(u.flags|=128);const Y=j.type.prototype;!I&&(Y.ngOnChanges||Y.ngOnInit||Y.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),I=!0),!D&&(Y.ngOnChanges||Y.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),D=!0),x++}cI(s,u)}v&&function Cp(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=u[o[d+1]];if(null==p)throw new Ae(-301,!1);c.push(o[d],p)}}}(u,c,v)}return u.mergedAttrs=ra(u.mergedAttrs,u.attrs),d}function Lv(s,o,u,c,d,p){const v=p.hostBindings;if(v){let I=s.hostBindingOpCodes;null===I&&(I=s.hostBindingOpCodes=[]);const D=~o.index;(function bp(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(I)!=D&&I.push(D),I.push(c,d,v)}}function iy(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Fv(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function Uv(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;Lr(o)&&(u[""]=s)}}function sy(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function oy(s,o,u,c,d){s.data[c]=d;const p=d.factory||(d.factory=Fi(d.type)),v=new Cs(p,Lr(d),pc);s.blueprint[c]=v,u[c]=v,Lv(s,o,0,c,Oh(s,u,d.hostVars,Ht),d)}function ay(s,o,u){const c=Fr(o,s),d=Pv(u),p=s[10],v=fd(s,Jm(s,d,null,u.onPush?32:16,c,o,p,p.createRenderer(c,u),null,null,null));s[o.index]=v}function Ms(s,o,u,c,d,p){const v=Fr(s,o);!function uy(s,o,u,c,d,p,v){if(null==p)s.removeAttribute(o,d,u);else{const I=null==v?ge(p):v(p,c||"",d);s.setAttribute(o,d,I,u)}}(o[11],v,p,s.value,u,c,d)}function FT(s,o,u,c,d,p){const v=p[o];if(null!==v){const I=c.setInput;for(let D=0;D<v.length;){const x=v[D++],P=v[D++],j=v[D++];null!==I?c.setInput(u,j,x,P):u[P]=j}}}function Vv(s,o){let u=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return u}function ly(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function yI(s,o){const u=nn(o,s);if(Hs(u)){const c=u[1];48&u[2]?Fh(c,u,c.template,u[8]):u[5]>0&&jv(u)}}function jv(s){for(let c=xm(s);null!==c;c=Rm(c))for(let d=10;d<c.length;d++){const p=c[d];if(Hs(p))if(512&p[2]){const v=p[1];Fh(v,p,v.template,p[8])}else p[5]>0&&jv(p)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const d=nn(u[c],s);Hs(d)&&d[5]>0&&jv(d)}}function Dp(s,o){const u=nn(o,s),c=u[1];(function _I(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),Lh(c,u,u[8])}function fd(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function pd(s){for(;s;){s[2]|=32;const o=Ah(s);if(Tu(s)&&!o)return s;s=o}return null}function lu(s,o,u,c=!0){const d=o[10];d.begin&&d.begin();try{Fh(s,o,s.template,u)}catch(v){throw c&&_c(o,v),v}finally{d.end&&d.end()}}function $v(s,o,u){Xo(0),o(s,u)}function Hv(s){return s[7]||(s[7]=[])}function Gv(s){return s.cleanup||(s.cleanup=[])}function _c(s,o){const u=s[9],c=u?u.get(ap,null):null;c&&c.handleError(o)}function ya(s,o,u,c,d){for(let p=0;p<u.length;){const v=u[p++],I=u[p++],D=o[v],x=s.data[v];null!==x.setInput?x.setInput(D,d,c,I):D[I]=d}}function No(s,o,u){const c=function di(s,o){return In(o[s])}(o,s);!function TE(s,o,u){s.setValue(o,u)}(s[11],c,u)}function gd(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,p=0;if(null!==o)for(let v=0;v<o.length;v++){const I=o[v];"number"==typeof I?p=I:1==p?d=Ee(d,I):2==p&&(c=Ee(c,I+": "+o[++v]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}function Tp(s,o,u,c,d=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&c.push(In(p)),qr(p))for(let I=10;I<p.length;I++){const D=p[I],x=D[1].firstChild;null!==x&&Tp(D[1],D,x,c)}const v=u.type;if(8&v)Tp(s,o,u.child,c);else if(32&v){const I=ov(u,o);let D;for(;D=I();)c.push(D)}else if(16&v){const I=pv(o,u);if(Array.isArray(I))c.push(...I);else{const D=Ah(o[16]);Tp(D[1],D,I,c,!0)}}u=d?u.projectionNext:u.next}return c}class $n{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Tp(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(qr(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(cv(o,c),ni(u,c))}this._attachedToViewContainer=!1}cp(this._lView[1],this._lView)}onDestroy(o){uI(this._lView[1],this._lView,null,o)}markForCheck(){pd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){lu(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ae(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function AE(s,o){ld(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ae(902,!1);this._appRef=o}}class cy extends $n{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;lu(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class md extends su{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=We(o);return new Sp(u,this.ngModule)}}function Vh(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class EI{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){const d=this.injector.get(o,Ct,c);return d!==Ct||u===Ct?d:this.parentInjector.get(o,u,c)}}class Sp extends Eh{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function vT(s){return s.map(Fm).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return Vh(this.componentDef.inputs)}get outputs(){return Vh(this.componentDef.outputs)}create(o,u,c,d){let p=(d=d||this.ngModule)instanceof ri?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const v=p?new EI(o,p):o,I=v.get(M,null);if(null===I)throw new Ae(407,!1);const D=v.get(me,null),x=I.createRenderer(null,this.componentDef),P=this.componentDef.selectors[0][0]||"div",j=c?function LT(s,o,u){return s.selectRootElement(o,u===Ve.ShadowDom)}(x,c,this.componentDef.encapsulation):Mm(I.createRenderer(null,this.componentDef),P,function UT(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(P)),Y=this.componentDef.onPush?288:272,ie=ty(0,null,null,1,0,null,null,null,null,null),Ce=Jm(null,ie,null,Y,null,null,I,x,D,v,null);let qe,tt;ta(Ce);try{const ct=function vc(s,o,u,c,d,p){const v=u[1];u[22]=s;const D=yc(v,22,2,"#host",null),x=D.mergedAttrs=o.hostAttrs;null!==x&&(gd(D,x,!0),null!==s&&(vo(d,s,x),null!==D.classes&&pp(d,s,D.classes),null!==D.styles&&cd(d,s,D.styles)));const P=c.createRenderer(s,o),j=Jm(u,Pv(o),null,o.onPush?32:16,u[22],D,c,P,p||null,null,null);return v.firstCreatePass&&(wo(us(D,u),v,o.type),Fv(v,D),sy(D,u.length,1)),fd(u,j),u[22]=j}(j,this.componentDef,Ce,I,x);if(j)if(c)vo(x,j,["ng-version",st.full]);else{const{attrs:St,classes:Le}=function wT(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++c]):8===d&&u.push(p);else{if(!ko(d))break;d=p}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);St&&vo(x,j,St),Le&&Le.length>0&&pp(x,j,Le.join(" "))}if(tt=Is(ie,22),void 0!==u){const St=tt.projection=[];for(let Le=0;Le<this.ngContentSelectors.length;Le++){const kt=u[Le];St.push(null!=kt?Array.from(kt):null)}}qe=function II(s,o,u,c){const d=u[1],p=function hI(s,o,u){const c=Nn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),oy(s,c,o,Oh(s,o,1,null),u),cI(s,c));const d=Zs(o,s,c.directiveStart,c);mi(d,o);const p=Fr(c,o);return p&&mi(p,o),d}(d,u,o);if(s[8]=u[8]=p,null!==c)for(const I of c)I(p,o);if(o.contentQueries){const I=Nn();o.contentQueries(1,p,I.directiveStart)}const v=Nn();return!d.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(ti(v.index),Lv(u[1],v,0,v.directiveStart,v.directiveEnd,o),iy(o,p)),p}(ct,this.componentDef,Ce,[bI]),Lh(ie,Ce,null)}finally{os()}return new BT(this.componentType,qe,_(tt,Ce),Ce,tt)}}class BT extends class ip{}{constructor(o,u,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new cy(d),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const p=this._rootLView;ya(p[1],p,d,o,u),Ip(p,this._tNode.index)}}get injector(){return new sa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function bI(){const s=Nn();ja(Ne()[1],s)}let Ap=null;function wc(){if(!Ap){const s=vn.Symbol;if(s&&s.iterator)Ap=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Ap=c)}}}return Ap}function xp(s){return!!Bh(s)&&(Array.isArray(s)||!(s instanceof Map)&&wc()in s)}function Bh(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function xi(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function xr(s,o,u,c){const d=Ne();return xi(d,Gs(),o)&&(Zt(),Ms(Dn(),d,s,o,u,c)),xr}function jh(s,o,u,c){return xi(s,Gs(),u)?o+ge(u)+c:Ht}function Xv(s,o,u,c,d,p,v,I){const D=Ne(),x=Zt(),P=s+22,j=x.firstCreatePass?function WT(s,o,u,c,d,p,v,I,D){const x=o.consts,P=yc(o,s,4,v||null,bi(x,I));Ai(o,u,P,bi(x,D)),ja(o,P);const j=P.tViews=ty(2,P,c,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,x);return null!==o.queries&&(o.queries.template(o,P),j.queries=o.queries.embeddedTView(P)),P}(P,x,D,o,u,c,d,p,v):x.data[P];hi(j,!1);const Y=D[11].createComment("");Pm(x,D,Y,j),mi(Y,D),fd(D,D[P]=ly(Y,D,Y,j)),Sa(j)&&Nv(x,D,j),null!=v&&dd(D,j,I)}function gy(s,o,u){const c=Ne();return xi(c,Gs(),o)&&Rs(Zt(),Dn(),c,s,o,c[11],u,!1),gy}function Np(s,o,u,c,d){const v=d?"class":"style";ya(s,u,o.inputs[v],v,c)}function Pp(s,o,u,c){const d=Ne(),p=Zt(),v=22+s,I=d[11],D=d[v]=Mm(I,o,function Ba(){return At.lFrame.currentNamespace}()),x=p.firstCreatePass?function ew(s,o,u,c,d,p,v){const I=o.consts,x=yc(o,s,2,d,bi(I,p));return Ai(o,u,x,bi(I,v)),null!==x.attrs&&gd(x,x.attrs,!1),null!==x.mergedAttrs&&gd(x,x.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,x),x}(v,p,d,0,o,u,c):p.data[v];hi(x,!0);const P=x.mergedAttrs;null!==P&&vo(I,D,P);const j=x.classes;null!==j&&pp(I,D,j);const Y=x.styles;return null!==Y&&cd(I,D,Y),64!=(64&x.flags)&&Pm(p,d,D,x),0===function is(){return At.lFrame.elementDepthCount}()&&mi(D,d),function La(){At.lFrame.elementDepthCount++}(),Sa(x)&&(Nv(p,d,x),function kv(s,o,u){if(Ta(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const v=s.data[p];v.contentQueries&&v.contentQueries(1,u[p],p)}}}(p,x,d)),null!==c&&dd(d,x),Pp}function Cd(){let s=Nn();Ko()?function po(){At.lFrame.isParent=!1}():(s=s.parent,hi(s,!1));const o=s;!function Nu(){At.lFrame.elementDepthCount--}();const u=Zt();return u.firstCreatePass&&(ja(u,s),Ta(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Ha(s){return 0!=(16&s.flags)}(o)&&Np(u,o,Ne(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Ci(s){return 0!=(32&s.flags)}(o)&&Np(u,o,Ne(),o.stylesWithoutHost,!1),Cd}function my(s,o,u,c){return Pp(s,o,u,c),Cd(),my}function nw(){return Ne()}function _y(s){return!!s&&"function"==typeof s.then}function Op(s){return!!s&&"function"==typeof s.subscribe}const ks=Op;function vy(s,o,u,c){const d=Ne(),p=Zt(),v=Nn();return function RI(s,o,u,c,d,p,v,I){const D=Sa(c),P=s.firstCreatePass&&Gv(s),j=o[8],Y=Hv(o);let ie=!0;if(3&c.type||I){const tt=Fr(c,o),ct=I?I(tt):tt,St=Y.length,Le=I?Sn=>I(In(Sn[c.index])):c.index;let kt=null;if(!I&&D&&(kt=function Wh(s,o,u,c){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const v=d[p];if(v===u&&d[p+1]===c){const I=o[7],D=d[p+2];return I.length>D?I[D]:null}"string"==typeof v&&(p+=2)}return null}(s,o,d,c.index)),null!==kt)(kt.__ngLastListenerFn__||kt).__ngNextListenerFn__=p,kt.__ngLastListenerFn__=p,ie=!1;else{p=wy(c,o,j,p,!1);const Sn=u.listen(ct,d,p);Y.push(p,Sn),P&&P.push(d,Le,St,St+1)}}else p=wy(c,o,j,p,!1);const Ce=c.outputs;let qe;if(ie&&null!==Ce&&(qe=Ce[d])){const tt=qe.length;if(tt)for(let ct=0;ct<tt;ct+=2){const tr=o[qe[ct]][qe[ct+1]].subscribe(p),Wd=Y.length;Y.push(p,tr),P&&P.push(d,c.index,Wd,-(Wd+1))}}}(p,d,d[11],v,s,o,0,c),vy}function MI(s,o,u,c){try{return!1!==u(c)}catch(d){return _c(s,d),!1}}function wy(s,o,u,c,d){return function p(v){if(v===Function)return c;pd(2&s.flags?nn(s.index,o):o);let D=MI(o,0,c,v),x=p.__ngNextListenerFn__;for(;x;)D=MI(o,0,x,v)&&D,x=x.__ngNextListenerFn__;return d&&!1===D&&(v.preventDefault(),v.returnValue=!1),D}}function kI(s=1){return function Ws(s){return(At.lFrame.contextLView=function Va(s,o){for(;s>0;)o=o[15],s--;return o}(s,At.lFrame.contextLView))[8]}(s)}function zh(s,o,u){return iw(s,"",o,"",u),zh}function iw(s,o,u,c,d){const p=Ne(),v=jh(p,o,u,c);return v!==Ht&&Rs(Zt(),Dn(),p,s,v,p[11],d,!1),iw}function Cy(s,o=""){const u=Ne(),c=Zt(),d=s+22,p=c.firstCreatePass?yc(c,d,1,o,null):c.data[d],v=u[d]=function uv(s,o){return s.createText(o)}(u[11],o);Pm(c,u,v,p),hi(p,!1)}function fe(s){return Ad("",s,""),fe}function Ad(s,o,u){const c=Ne(),d=jh(c,s,o,u);return d!==Ht&&No(c,dr(),d),Ad}const ro=void 0;var Bp=["en",[["a","p"],["AM","PM"],ro],[["AM","PM"],ro,ro],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ro,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ro,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ro,"{1} 'at' {0}",ro],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function du(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let io={};function Dc(s){const o=function ZI(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=Ay(o);if(u)return u;const c=o.split("-")[0];if(u=Ay(c),u)return u;if("en"===c)return Bp;throw new Ae(701,!1)}function Tc(s){return Dc(s)[Rt.PluralCase]}function Ay(s){return s in io||(io[s]=vn.ng&&vn.ng.common&&vn.ng.common.locales&&vn.ng.common.locales[s]),io[s]}var Rt=(()=>((Rt=Rt||{})[Rt.LocaleId=0]="LocaleId",Rt[Rt.DayPeriodsFormat=1]="DayPeriodsFormat",Rt[Rt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Rt[Rt.DaysFormat=3]="DaysFormat",Rt[Rt.DaysStandalone=4]="DaysStandalone",Rt[Rt.MonthsFormat=5]="MonthsFormat",Rt[Rt.MonthsStandalone=6]="MonthsStandalone",Rt[Rt.Eras=7]="Eras",Rt[Rt.FirstDayOfWeek=8]="FirstDayOfWeek",Rt[Rt.WeekendRange=9]="WeekendRange",Rt[Rt.DateFormat=10]="DateFormat",Rt[Rt.TimeFormat=11]="TimeFormat",Rt[Rt.DateTimeFormat=12]="DateTimeFormat",Rt[Rt.NumberSymbols=13]="NumberSymbols",Rt[Rt.NumberFormats=14]="NumberFormats",Rt[Rt.CurrencyCode=15]="CurrencyCode",Rt[Rt.CurrencySymbol=16]="CurrencySymbol",Rt[Rt.CurrencyName=17]="CurrencyName",Rt[Rt.Currencies=18]="Currencies",Rt[Rt.Directionality=19]="Directionality",Rt[Rt.PluralCase=20]="PluralCase",Rt[Rt.ExtraData=21]="ExtraData",Rt))();const Rd="en-US";let fw=Rd;class hf{}class Kp{}function Zp(s,o){return new Yp(s,o??null)}class Yp extends hf{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new md(this);const c=gn(o);this._bootstrapComponents=pl(c.bootstrap),this._r3Injector=IT(o,u,[{provide:hf,useValue:this},{provide:su,useValue:this.componentFactoryResolver}],pe(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class By extends Kp{constructor(o){super(),this.moduleType=o}create(o){return new Yp(this.moduleType,o)}}class _b extends hf{constructor(o,u,c){super(),this.componentFactoryResolver=new md(this),this.instance=null;const d=new wh([...o,{provide:hf,useValue:this},{provide:su,useValue:this.componentFactoryResolver}],u||vh(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function jy(s,o,u=null){return new _b(s,o,u).injector}let gS=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=mh(0,u.type),d=c.length>0?jy([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,d)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Kt({token:s,providedIn:"environment",factory:()=>new s(jn(ri))}),s})();function Nw(s){s.getStandaloneInjector=o=>o.get(gS).getOrCreateStandaloneInjector(s)}function Tb(s,o,u,c){return Rb(Ne(),Pn(),s,o,u,c)}function Rb(s,o,u,c,d,p){const v=o+u;return xi(s,v,d)?function to(s,o,u){return s[o]=u}(s,v+1,p?c.call(p,d):c(d)):function Jp(s,o){const u=s[o];return u===Ht?void 0:u}(s,v+1)}function Nb(s,o){const u=Zt();let c;const d=s+22;u.firstCreatePass?(c=function Pb(s,o){if(o)for(let u=o.length-1;u>=0;u--){const c=o[u];if(s===c.name)return c}}(o,u.pipeRegistry),u.data[d]=c,c.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(d,c.onDestroy)):c=u.data[d];const p=c.factory||(c.factory=Fi(c.type)),v=cn(pc);try{const I=H(!1),D=p();return H(I),function kp(s,o,u,c){u>=s.data.length&&(s.data[u]=null,s.blueprint[u]=null),o[u]=c}(u,Ne(),d,D),D}finally{cn(v)}}function Ob(s,o,u){const c=s+22,d=Ne(),p=function rs(s,o){return s[o]}(d,c);return function pf(s,o){return s[1].data[o].pure}(d,c)?Rb(d,Pn(),o,p.transform,u,p):p.transform(u)}function Vw(s){return o=>{setTimeout(s,void 0,o)}}const gu=class ES extends m.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let d=o,p=u||(()=>null),v=c;if(o&&"object"==typeof o){const D=o;d=D.next?.bind(D),p=D.error?.bind(D),v=D.complete?.bind(D)}this.__isAsync&&(p=Vw(p),d&&(d=Vw(d)),v&&(v=Vw(v)));const I=super.subscribe({next:d,error:p,complete:v});return o instanceof U.w0&&o.add(I),I}};function IS(){return this._results[wc()]()}class Bw{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=wc(),c=Bw.prototype;c[u]||(c[u]=IS)}get changes(){return this._changes||(this._changes=new gu)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=Kn(o);(this._changesDetected=!function Bi(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],p=o[c];if(u&&(d=u(d),p=u(p)),p!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Xp=(()=>{class s{}return s.__NG_ELEMENT_ID__=DS,s})();const bS=Xp,CS=class extends bS{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o,u){const c=this._declarationTContainer.tViews,d=Jm(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,u||null);d[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(d[19]=v.createEmbeddedView(c)),Lh(c,d,o),new $n(d)}};function DS(){return zy(Nn(),Ne())}function zy(s,o){return 4&s.type?new CS(o,s,_(s,o)):null}let qy=(()=>{class s{}return s.__NG_ELEMENT_ID__=TS,s})();function TS(){return Bb(Nn(),Ne())}const SS=qy,Ub=class extends SS{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return _(this._hostTNode,this._hostLView)}get injector(){return new sa(this._hostTNode,this._hostLView)}get parentInjector(){const o=zl(this._hostTNode,this._hostLView);if(Gl(o)){const u=C(o,this._hostLView),c=er(o);return new sa(u[1].data[c+8],u)}return new sa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=Vb(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){let d,p;"number"==typeof c?d=c:null!=c&&(d=c.index,p=c.injector);const v=o.createEmbeddedView(u||{},p);return this.insert(v,d),v}createComponent(o,u,c,d,p){const v=o&&!function ls(s){return"function"==typeof s}(o);let I;if(v)I=u;else{const j=u||{};I=j.index,c=j.injector,d=j.projectableNodes,p=j.environmentInjector||j.ngModuleRef}const D=v?o:new Sp(We(o)),x=c||this.parentInjector;if(!p&&null==D.ngModule){const Y=(v?x:this.parentInjector).get(ri,null);Y&&(p=Y)}const P=D.create(x,d,void 0,p);return this.insert(P.hostView,I),P}insert(o,u){const c=o._lView,d=c[1];if(function Pa(s){return qr(s[3])}(c)){const P=this.indexOf(o);if(-1!==P)this.detach(P);else{const j=c[3],Y=new Ub(j,j[6],j[3]);Y.detach(Y.indexOf(o))}}const p=this._adjustIndex(u),v=this._lContainer;!function uT(s,o,u,c){const d=10+c,p=u.length;c>0&&(u[d-1][4]=o),c<p-10?(o[4]=u[d],Xu(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const v=o[17];null!==v&&u!==v&&function lT(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(v,o);const I=o[19];null!==I&&I.insertView(s),o[2]|=64}(d,c,v,p);const I=LE(p,v),D=c[11],x=Nm(D,v[7]);return null!==x&&function SE(s,o,u,c,d,p){c[0]=d,c[6]=o,ld(s,c,u,1,d,p)}(d,v[6],D,c,x,I),o.attachToViewContainerRef(),Xu(Ky(v),p,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=Vb(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=cv(this._lContainer,u);c&&(ni(Ky(this._lContainer),u),cp(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=cv(this._lContainer,u);return c&&null!=ni(Ky(this._lContainer),u)?new $n(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function Vb(s){return s[8]}function Ky(s){return s[8]||(s[8]=[])}function Bb(s,o){let u;const c=o[s.index];if(qr(c))u=c;else{let d;if(8&s.type)d=In(c);else{const p=o[11];d=p.createComment("");const v=Fr(s,o);uu(p,Nm(p,v),d,function PE(s,o){return s.nextSibling(o)}(p,v),!1)}o[s.index]=u=ly(c,o,d,s),fd(o,u)}return new Ub(u,s,o)}class eg{constructor(o){this.queryList=o,this.matches=null}clone(){return new eg(this.queryList)}setDirty(){this.queryList.setDirty()}}class Yr{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let p=0;p<c;p++){const v=u.getByIndex(p);d.push(this.queries[v.indexInDeclarationView].clone())}return new Yr(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==zb(o,u).matches&&this.queries[u].setDirty()}}class Zy{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class tg{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,p=this.getByIndex(c).embeddedTView(o,d);p&&(p.indexInDeclarationView=c,null!==u?u.push(p):u=[p])}return null!==u?new tg(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class ng{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new ng(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(o,u,xc(u,p)),this.matchTNodeWithReadOption(o,u,Wa(u,o,p,!1,!1))}else c===Xp?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Wa(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===f||d===qy||d===Xp&&4&u.type)this.addMatch(u.index,-2);else{const p=Wa(u,o,d,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function xc(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function AS(s,o,u,c){return-1===u?function Hb(s,o){return 11&s.type?_(s,o):4&s.type?zy(s,o):null}(o,s):-2===u?function Gb(s,o,u){return u===f?_(o,s):u===Xp?zy(o,s):u===qy?Bb(o,s):void 0}(s,o,c):Zs(s,s[1],u,o)}function rg(s,o,u,c){const d=o[19].queries[c];if(null===d.matches){const p=s.data,v=u.matches,I=[];for(let D=0;D<v.length;D+=2){const x=v[D];I.push(x<0?null:AS(o,p[x],v[D+1],u.metadata.read))}d.matches=I}return d.matches}function Cl(s,o,u,c){const d=s.queries.getByIndex(u),p=d.matches;if(null!==p){const v=rg(s,o,d,u);for(let I=0;I<p.length;I+=2){const D=p[I];if(D>0)c.push(v[I/2]);else{const x=p[I+1],P=o[-D];for(let j=10;j<P.length;j++){const Y=P[j];Y[17]===Y[3]&&Cl(Y[1],Y,x,c)}if(null!==P[9]){const j=P[9];for(let Y=0;Y<j.length;Y++){const ie=j[Y];Cl(ie[1],ie,x,c)}}}}}return c}function Rc(s){const o=Ne(),u=Zt(),c=Vu();Xo(c+1);const d=zb(u,c);if(s.dirty&&function Na(s){return 4==(4&s[2])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?Cl(u,o,c,[]):rg(u,o,d,c);s.reset(p,g),s.notifyOnChanges()}return!0}return!1}function gf(s,o,u,c){const d=Zt();if(d.firstCreatePass){const p=Nn();(function Hw(s,o,u){null===s.queries&&(s.queries=new tg),s.queries.track(new ng(o,u))})(d,new Zy(o,u,c),p.index),function Wb(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function Yy(s,o,u){const c=new Bw(4==(4&u));uI(s,o,c,c.destroy),null===o[19]&&(o[19]=new Yr),o[19].queries.push(new eg(c))}(d,Ne(),u)}function jw(){return function $w(s,o){return s[19].queries[o].queryList}(Ne(),Vu())}function zb(s,o){return s.queries.getByIndex(o)}function e_(...s){}const Jw=new Ln("Application Initializer");let t_=(()=>{class s{constructor(u){this.appInits=u,this.resolve=e_,this.reject=e_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(_y(p))u.push(p);else if(ks(p)){const v=new Promise((I,D)=>{p.subscribe({complete:I,error:D})});u.push(v)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(jn(Jw,8))},s.\u0275prov=Kt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const cg=new Ln("AppId",{providedIn:"root",factory:function sC(){return`${dg()}${dg()}${dg()}`}});function dg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const n_=new Ln("Platform Initializer"),hg=new Ln("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),fg=new Ln("appBootstrapListener");let uC=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Kt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const pg=new Ln("LocaleId",{providedIn:"root",factory:()=>T(pg,Ze.Optional|Ze.SkipSelf)||function VS(){return typeof $localize<"u"&&$localize.locale||Rd}()}),lC=new Ln("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class jS{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let dC=(()=>{class s{compileModuleSync(u){return new By(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),p=pl(gn(u).declarations).reduce((v,I)=>{const D=We(I);return D&&v.push(new Sp(D)),v},[]);return new jS(c,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Kt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const hC=(()=>Promise.resolve(0))();function Xw(s){typeof Zone>"u"?hC.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Vo{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new gu(!1),this.onMicrotaskEmpty=new gu(!1),this.onStable=new gu(!1),this.onError=new gu(!1),typeof Zone>"u")throw new Ae(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const p=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new p("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function e0(){let s=vn.requestAnimationFrame,o=vn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function n0(s){const o=()=>{!function fC(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(vn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Ef(s),s.isCheckStableRunning=!0,i_(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Ef(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,p,v,I)=>{try{return If(s),u.invokeTask(d,p,v,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),yg(s)}},onInvoke:(u,c,d,p,v,I,D)=>{try{return If(s),u.invoke(d,p,v,I,D)}finally{s.shouldCoalesceRunChangeDetection&&o(),yg(s)}},onHasTask:(u,c,d,p)=>{u.hasTask(d,p),c===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,Ef(s),i_(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,c,d,p)=>(u.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vo.isInAngularZone())throw new Ae(909,!1)}static assertNotInAngularZone(){if(Vo.isInAngularZone())throw new Ae(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+d,o,t0,e_,e_);try{return p.runTask(v,u,c)}finally{p.cancelTask(v)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const t0={};function i_(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Ef(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function If(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function yg(s){s._nesting--,i_(s)}class r0{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new gu,this.onMicrotaskEmpty=new gu,this.onStable=new gu,this.onError=new gu}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}const s_=new Ln(""),o_=new Ln("");let s0,pC=(()=>{class s{constructor(u,c,d){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,s0||(function mC(s){s0=s}(d),d.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vo.assertNotInAngularZone(),Xw(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Xw(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(jn(Vo),jn(gC),jn(o_))},s.\u0275prov=Kt({token:s,factory:s.\u0275fac}),s})(),gC=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return s0?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Kt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),kc=null;const yC=new Ln("AllowMultipleToken"),a_=new Ln("PlatformDestroyListeners");class GS{constructor(o,u){this.name=o,this.token=u}}function IC(s,o,u=[]){const c=`Platform: ${o}`,d=new Ln(c);return(p=[])=>{let v=Nc();if(!v||v.injector.get(yC,!1)){const I=[...u,...p,{provide:d,useValue:!0}];s?s(I):function WS(s){if(kc&&!kc.get(yC,!1))throw new Ae(400,!1);kc=s;const o=s.get(u_);(function wC(s){const o=s.get(n_,null);o&&o.forEach(u=>u())})(s)}(function bf(s=[],o){return dc.create({name:o,providers:[{provide:oc,useValue:"platform"},{provide:a_,useValue:new Set([()=>kc=null])},...s]})}(I,c))}return function qS(s){const o=Nc();if(!o)throw new Ae(401,!1);return o}()}}function Nc(){return kc?.get(u_)??null}let u_=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const d=function Cf(s,o){let u;return u="noop"===s?new r0:("zone.js"===s?void 0:s)||new Vo(o),u}(c?.ngZone,function vg(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),p=[{provide:Vo,useValue:d}];return d.run(()=>{const v=dc.create({providers:p,parent:this.injector,name:u.moduleType.name}),I=u.create(v),D=I.injector.get(ap,null);if(!D)throw new Ae(402,!1);return d.runOutsideAngular(()=>{const x=d.onError.subscribe({next:P=>{D.handleError(P)}});I.onDestroy(()=>{Tf(this._modules,I),x.unsubscribe()})}),function l_(s,o,u){try{const c=u();return _y(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(D,d,()=>{const x=I.injector.get(t_);return x.runInitializers(),x.donePromise.then(()=>(function Yn(s){zt(s,"Expected localeId to be defined"),"string"==typeof s&&(fw=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(pg,Rd)||Rd),this._moduleDoBootstrap(I),I))})})}bootstrapModule(u,c=[]){const d=o0({},c);return function _g(s,o,u){const c=new By(u);return Promise.resolve(c)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(u){const c=u.injector.get(Df);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new Ae(403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ae(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(a_,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(jn(dc))},s.\u0275prov=Kt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function o0(s,o){return Array.isArray(o)?o.reduce(o0,s):{...s,...o}}let Df=(()=>{class s{constructor(u,c,d){this._zone=u,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new V.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new V.y(I=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{Vo.assertNotInAngularZone(),Xw(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{Vo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{D.unsubscribe(),x.unsubscribe()}});this.isStable=(0,ce.T)(p,v.pipe((0,de.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,c){const d=u instanceof Eh;if(!this._injector.get(t_).done)throw!d&&Un(u),new Ae(405,false);let v;v=d?u:this._injector.get(su).resolveComponentFactory(u),this.componentTypes.push(v.componentType);const I=function vC(s){return s.isBoundToModule}(v)?void 0:this._injector.get(hf),x=v.create(dc.NULL,[],c||v.selector,I),P=x.location.nativeElement,j=x.injector.get(s_,null);return j?.registerApplication(P),x.onDestroy(()=>{this.detachView(x.hostView),Tf(this.components,x),j?.unregisterApplication(P)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new Ae(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;Tf(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(fg,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Tf(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Ae(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(jn(Vo),jn(ri),jn(ap))},s.\u0275prov=Kt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Tf(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let DC=!0,c_=!1;function KS(){return c_=!0,DC}function a0(){if(c_)throw new Error("Cannot enable prod mode after platform setup.");DC=!1}let u0=(()=>{class s{}return s.__NG_ELEMENT_ID__=SC,s})();function SC(s){return function Sf(s,o,u){if(Li(s)&&!u){const c=nn(s.index,o);return new $n(c,c)}return 47&s.type?new $n(o[16],o):null}(Nn(),Ne(),16==(16&s))}class d0{constructor(){}supports(o){return xp(o)}create(o){return new XS(o)}}const xf=(s,o)=>o;class XS{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||xf}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,p=null;for(;u||c;){const v=!c||u&&u.currentIndex<f_(c,d,p)?u:c,I=f_(v,d,p),D=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(u=u._next,null==v.previousIndex)d++;else{p||(p=[]);const x=I-d,P=D-d;if(x!=P){for(let Y=0;Y<x;Y++){const ie=Y<p.length?p[Y]:p[Y]=0,Ce=ie+Y;P<=Ce&&Ce<x&&(p[Y]=ie+1)}p[v.previousIndex]=P-x}}I!==D&&o(v,I,D)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!xp(o))throw new Ae(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,v,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)p=o[I],v=this._trackByFn(I,p),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,p,v,I)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,v,I),c=!0),u=u._next}else d=0,function GT(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[wc()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,I=>{v=this._trackByFn(d,I),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,I,v,d)),Object.is(u.item,I)||this._addIdentityChange(u,I)):(u=this._mismatch(u,I,v,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,d)):o=this._addAfter(new eA(u,c),p,d),o}_verifyReinsertion(o,u,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new h_),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new h_),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class eA{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class h0{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class h_{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new h0,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function f_(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class p_{constructor(){}supports(o){return o instanceof Map||Bh(o)}create(){return new tA}}class tA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Bh(o)))throw new Ae(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const p=d._prev,v=d._next;return p&&(p._next=v),v&&(v._prev=p),d._next=null,d._prev=null,d}const c=new nA(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class nA{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function g_(){return new Tg([new d0])}let Tg=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||g_()),deps:[[s,new xt,new $e]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new Ae(901,!1)}}return s.\u0275prov=Kt({token:s,providedIn:"root",factory:g_}),s})();function f0(){return new p0([new p_])}let p0=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||f0()),deps:[[s,new xt,new $e]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(c)return c;throw new Ae(901,!1)}}return s.\u0275prov=Kt({token:s,providedIn:"root",factory:f0}),s})();const sA=IC(null,"core",[]);let oA=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(jn(Df))},s.\u0275mod=W({type:s}),s.\u0275inj=Tt({}),s})();function aA(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(lt,oe,F)=>{"use strict";F.d(oe,{Z:()=>Ae});var m=F(2090),U=F(4859),V=F(9681),ce=F(1877);class de{constructor(ge,ve){this._delegate=ge,this.firebase=ve,(0,V._addComponent)(ge,new U.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,V.deleteApp)(this._delegate)))}_getService(ge,ve=V._DEFAULT_ENTRY_NAME){var Xe;this._delegate.checkDestroyed();const Ke=this._delegate.container.getProvider(ge);return!Ke.isInitialized()&&"EXPLICIT"===(null===(Xe=Ke.getComponent())||void 0===Xe?void 0:Xe.instantiationMode)&&Ke.initialize(),Ke.getImmediate({identifier:ve})}_removeServiceInstance(ge,ve=V._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(ve)}_addComponent(ge){(0,V._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,V._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const he=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function Ee(){const at=function pe(at){const ge={},ve={__esModule:!0,initializeApp:function Me(Je,q={}){const ye=V.initializeApp(Je,q);if((0,m.r3)(ge,ye.name))return ge[ye.name];const Q=new at(ye,ve);return ge[ye.name]=Q,Q},app:Ke,registerVersion:V.registerVersion,setLogLevel:V.setLogLevel,onLog:V.onLog,apps:null,SDK_VERSION:V.SDK_VERSION,INTERNAL:{registerComponent:function xe(Je){const q=Je.name,ye=q.replace("-compat","");if(V._registerComponent(Je)&&"PUBLIC"===Je.type){const Q=(re=Ke())=>{if("function"!=typeof re[ye])throw he.create("invalid-app-argument",{appName:q});return re[ye]()};void 0!==Je.serviceProps&&(0,m.ZB)(Q,Je.serviceProps),ve[ye]=Q,at.prototype[ye]=function(...re){return this._getService.bind(this,q).apply(this,Je.multipleInstances?re:[])}}return"PUBLIC"===Je.type?ve[ye]:null},removeApp:function Xe(Je){delete ge[Je]},useAsService:function Qe(Je,q){return"serverAuth"===q?null:q},modularAPIs:V}};function Ke(Je){if(!(0,m.r3)(ge,Je=Je||V._DEFAULT_ENTRY_NAME))throw he.create("no-app",{appName:Je});return ge[Je]}return ve.default=ve,Object.defineProperty(ve,"apps",{get:function Te(){return Object.keys(ge).map(Je=>ge[Je])}}),Ke.App=at,ve}(de);return at.INTERNAL=Object.assign(Object.assign({},at.INTERNAL),{createFirebaseNamespace:Ee,extendNamespace:function ge(ve){(0,m.ZB)(at,ve)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),at}(),Z=new ce.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){Z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const at=self.firebase.SDK_VERSION;at&&at.indexOf("LITE")>=0&&Z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ae=K;!function Pe(at){(0,V.registerVersion)("@firebase/app-compat","0.1.35",at)}()},9681:(lt,oe,F)=>{"use strict";F.r(oe),F.d(oe,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>Ft,_DEFAULT_ENTRY_NAME:()=>zt,_addComponent:()=>rn,_addOrOverwriteComponent:()=>Kt,_apps:()=>tn,_clearComponents:()=>Dr,_components:()=>Cn,_getProvider:()=>Tt,_registerComponent:()=>fn,_removeServiceInstance:()=>sn,deleteApp:()=>Mn,getApp:()=>Jn,getApps:()=>_r,initializeApp:()=>Qn,onLog:()=>ui,registerVersion:()=>Hr,setLogLevel:()=>cn});var m=F(5861),U=F(4859),V=F(1877),ce=F(2090),de=F(8766);class _e{constructor(ke){this.container=ke}getPlatformInfoString(){return this.container.getProviders().map(ot=>{if(function he(it){return"VERSION"===it.getComponent()?.type}(ot)){const _t=ot.getImmediate();return`${_t.library}/${_t.version}`}return null}).filter(ot=>ot).join(" ")}}const pe="@firebase/app",K=new V.Yd("@firebase/app"),zt="[DEFAULT]",nt={[pe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},tn=new Map,Cn=new Map;function rn(it,ke){try{it.container.addComponent(ke)}catch(ot){K.debug(`Component ${ke.name} failed to register with FirebaseApp ${it.name}`,ot)}}function Kt(it,ke){it.container.addOrOverwriteComponent(ke)}function fn(it){const ke=it.name;if(Cn.has(ke))return K.debug(`There were multiple attempts to register component ${ke}.`),!1;Cn.set(ke,it);for(const ot of tn.values())rn(ot,it);return!0}function Tt(it,ke){const ot=it.container.getProvider("heartbeat").getImmediate({optional:!0});return ot&&ot.triggerHeartbeat(),it.container.getProvider(ke)}function sn(it,ke,ot=zt){Tt(it,ke).clearInstance(ot)}function Dr(){Cn.clear()}const Tr=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Pr{constructor(ke,ot,_t){this._isDeleted=!1,this._options=Object.assign({},ke),this._config=Object.assign({},ot),this._name=ot.name,this._automaticDataCollectionEnabled=ot.automaticDataCollectionEnabled,this._container=_t,this.container.addComponent(new U.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ke){this.checkDestroyed(),this._automaticDataCollectionEnabled=ke}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ke){this._isDeleted=ke}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}}const Ft="9.11.0";function Qn(it,ke={}){let ot=it;"object"!=typeof ke&&(ke={name:ke});const _t=Object.assign({name:zt,automaticDataCollectionEnabled:!1},ke),bt=_t.name;if("string"!=typeof bt||!bt)throw Tr.create("bad-app-name",{appName:String(bt)});if(ot||(ot=(0,ce.aH)()),!ot)throw Tr.create("no-options");const W=tn.get(bt);if(W){if((0,ce.vZ)(ot,W.options)&&(0,ce.vZ)(_t,W.config))return W;throw Tr.create("duplicate-app",{appName:bt})}const z=new U.H0(bt);for(const De of Cn.values())z.addComponent(De);const ee=new Pr(ot,_t,z);return tn.set(bt,ee),ee}function Jn(it=zt){const ke=tn.get(it);if(!ke&&it===zt)return Qn();if(!ke)throw Tr.create("no-app",{appName:it});return ke}function _r(){return Array.from(tn.values())}function Mn(it){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,m.Z)(function*(it){const ke=it.name;tn.has(ke)&&(tn.delete(ke),yield Promise.all(it.container.getProviders().map(ot=>ot.delete())),it.isDeleted=!0)})).apply(this,arguments)}function Hr(it,ke,ot){var _t;let bt=null!==(_t=nt[it])&&void 0!==_t?_t:it;ot&&(bt+=`-${ot}`);const W=bt.match(/\s|\//),z=ke.match(/\s|\//);if(W||z){const ee=[`Unable to register library "${bt}" with version "${ke}":`];return W&&ee.push(`library name "${bt}" contains illegal characters (whitespace or "/")`),W&&z&&ee.push("and"),z&&ee.push(`version name "${ke}" contains illegal characters (whitespace or "/")`),void K.warn(ee.join(" "))}fn(new U.wA(`${bt}-version`,()=>({library:bt,version:ke}),"VERSION"))}function ui(it,ke){if(null!==it&&"function"!=typeof it)throw Tr.create("invalid-log-argument");(0,V.Am)(it,ke)}function cn(it){(0,V.Ub)(it)}const Fn="firebase-heartbeat-store";let Wn=null;function An(){return Wn||(Wn=(0,de.X3)("firebase-heartbeat-database",1,{upgrade:(it,ke)=>{0===ke&&it.createObjectStore(Fn)}}).catch(it=>{throw Tr.create("idb-open",{originalErrorMessage:it.message})})),Wn}function Ve(){return(Ve=(0,m.Z)(function*(it){var ke;try{return(yield An()).transaction(Fn).objectStore(Fn).get(vr(it))}catch(ot){if(ot instanceof ce.ZR)K.warn(ot.message);else{const _t=Tr.create("idb-get",{originalErrorMessage:null===(ke=ot)||void 0===ke?void 0:ke.message});K.warn(_t.message)}}})).apply(this,arguments)}function vn(it,ke){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,m.Z)(function*(it,ke){var ot;try{const bt=(yield An()).transaction(Fn,"readwrite");return yield bt.objectStore(Fn).put(ke,vr(it)),bt.done}catch(_t){if(_t instanceof ce.ZR)K.warn(_t.message);else{const bt=Tr.create("idb-set",{originalErrorMessage:null===(ot=_t)||void 0===ot?void 0:ot.message});K.warn(bt.message)}}})).apply(this,arguments)}function vr(it){return`${it.name}!${it.options.appId}`}class Or{constructor(ke){this.container=ke,this._heartbeatsCache=null;const ot=this.container.getProvider("app").getImmediate();this._storage=new an(ot),this._heartbeatsCachePromise=this._storage.read().then(_t=>(this._heartbeatsCache=_t,_t))}triggerHeartbeat(){var ke=this;return(0,m.Z)(function*(){const _t=ke.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),bt=on();if(null===ke._heartbeatsCache&&(ke._heartbeatsCache=yield ke._heartbeatsCachePromise),ke._heartbeatsCache.lastSentHeartbeatDate!==bt&&!ke._heartbeatsCache.heartbeats.some(W=>W.date===bt))return ke._heartbeatsCache.heartbeats.push({date:bt,agent:_t}),ke._heartbeatsCache.heartbeats=ke._heartbeatsCache.heartbeats.filter(W=>{const z=new Date(W.date).valueOf();return Date.now()-z<=2592e6}),ke._storage.overwrite(ke._heartbeatsCache)})()}getHeartbeatsHeader(){var ke=this;return(0,m.Z)(function*(){if(null===ke._heartbeatsCache&&(yield ke._heartbeatsCachePromise),null===ke._heartbeatsCache||0===ke._heartbeatsCache.heartbeats.length)return"";const ot=on(),{heartbeatsToSend:_t,unsentEntries:bt}=function Pi(it,ke=1024){const ot=[];let _t=it.slice();for(const bt of it){const W=ot.find(z=>z.agent===bt.agent);if(W){if(W.dates.push(bt.date),ar(ot)>ke){W.dates.pop();break}}else if(ot.push({agent:bt.agent,dates:[bt.date]}),ar(ot)>ke){ot.pop();break}_t=_t.slice(1)}return{heartbeatsToSend:ot,unsentEntries:_t}}(ke._heartbeatsCache.heartbeats),W=(0,ce.L)(JSON.stringify({version:2,heartbeats:_t}));return ke._heartbeatsCache.lastSentHeartbeatDate=ot,bt.length>0?(ke._heartbeatsCache.heartbeats=bt,yield ke._storage.overwrite(ke._heartbeatsCache)):(ke._heartbeatsCache.heartbeats=[],ke._storage.overwrite(ke._heartbeatsCache)),W})()}}function on(){return(new Date).toISOString().substring(0,10)}class an{constructor(ke){this.app=ke,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,ce.hl)()&&(0,ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ke=this;return(0,m.Z)(function*(){return(yield ke._canUseIndexedDBPromise)&&(yield function yt(it){return Ve.apply(this,arguments)}(ke.app))||{heartbeats:[]}})()}overwrite(ke){var ot=this;return(0,m.Z)(function*(){var _t;if(yield ot._canUseIndexedDBPromise){const W=yield ot.read();return vn(ot.app,{lastSentHeartbeatDate:null!==(_t=ke.lastSentHeartbeatDate)&&void 0!==_t?_t:W.lastSentHeartbeatDate,heartbeats:ke.heartbeats})}})()}add(ke){var ot=this;return(0,m.Z)(function*(){var _t;if(yield ot._canUseIndexedDBPromise){const W=yield ot.read();return vn(ot.app,{lastSentHeartbeatDate:null!==(_t=ke.lastSentHeartbeatDate)&&void 0!==_t?_t:W.lastSentHeartbeatDate,heartbeats:[...W.heartbeats,...ke.heartbeats]})}})()}}function ar(it){return(0,ce.L)(JSON.stringify({version:2,heartbeats:it})).length}!function Wr(it){fn(new U.wA("platform-logger",ke=>new _e(ke),"PRIVATE")),fn(new U.wA("heartbeat",ke=>new Or(ke),"PRIVATE")),Hr(pe,"0.8.0",it),Hr(pe,"0.8.0","esm2017"),Hr("fire-js","")}("")},4859:(lt,oe,F)=>{"use strict";F.d(oe,{H0:()=>pe,wA:()=>V,zt:()=>de});var m=F(5861),U=F(2090);class V{constructor(K,Z,te){this.name=K,this.instanceFactory=Z,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(K){return this.instantiationMode=K,this}setMultipleInstances(K){return this.multipleInstances=K,this}setServiceProps(K){return this.serviceProps=K,this}setInstanceCreatedCallback(K){return this.onInstanceCreated=K,this}}const ce="[DEFAULT]";class de{constructor(K,Z){this.name=K,this.container=Z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(K){const Z=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(Z)){const te=new U.BH;if(this.instancesDeferred.set(Z,te),this.isInitialized(Z)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:Z});Ge&&te.resolve(Ge)}catch{}}return this.instancesDeferred.get(Z).promise}getImmediate(K){var Z;const te=this.normalizeInstanceIdentifier(K?.identifier),Ge=null!==(Z=K?.optional)&&void 0!==Z&&Z;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(Pe){if(Ge)return null;throw Pe}}getComponent(){return this.component}setComponent(K){if(K.name!==this.name)throw Error(`Mismatching Component ${K.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=K,this.shouldAutoInitialize()){if(function he(Ee){return"EAGER"===Ee.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:ce})}catch{}for(const[Z,te]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(Z);try{const Pe=this.getOrInitializeService({instanceIdentifier:Ge});te.resolve(Pe)}catch{}}}}clearInstance(K=ce){this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)}delete(){var K=this;return(0,m.Z)(function*(){const Z=Array.from(K.instances.values());yield Promise.all([...Z.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...Z.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(K=ce){return this.instances.has(K)}getOptions(K=ce){return this.instancesOptions.get(K)||{}}initialize(K={}){const{options:Z={}}=K,te=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:te,options:Z});for(const[Pe,Ae]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(Pe)&&Ae.resolve(Ge);return Ge}onInit(K,Z){var te;const Ge=this.normalizeInstanceIdentifier(Z),Pe=null!==(te=this.onInitCallbacks.get(Ge))&&void 0!==te?te:new Set;Pe.add(K),this.onInitCallbacks.set(Ge,Pe);const Ae=this.instances.get(Ge);return Ae&&K(Ae,Ge),()=>{Pe.delete(K)}}invokeOnInitCallbacks(K,Z){const te=this.onInitCallbacks.get(Z);if(te)for(const Ge of te)try{Ge(K,Z)}catch{}}getOrInitializeService({instanceIdentifier:K,options:Z={}}){let te=this.instances.get(K);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(Ee=K,Ee===ce?void 0:Ee),options:Z}),this.instances.set(K,te),this.instancesOptions.set(K,Z),this.invokeOnInitCallbacks(te,K),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,K,te)}catch{}var Ee;return te||null}normalizeInstanceIdentifier(K=ce){return this.component?this.component.multipleInstances?K:ce:K}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class pe{constructor(K){this.name=K,this.providers=new Map}addComponent(K){const Z=this.getProvider(K.name);if(Z.isComponentSet())throw new Error(`Component ${K.name} has already been registered with ${this.name}`);Z.setComponent(K)}addOrOverwriteComponent(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)}getProvider(K){if(this.providers.has(K))return this.providers.get(K);const Z=new de(K,this);return this.providers.set(K,Z),Z}getProviders(){return Array.from(this.providers.values())}}},1877:(lt,oe,F)=>{"use strict";F.d(oe,{Am:()=>Ee,Ub:()=>pe,Yd:()=>he,in:()=>U});const m=[];var U=(()=>{return(K=U||(U={}))[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT",U;var K})();const V={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},ce=U.INFO,de={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},_e=(K,Z,...te)=>{if(Z<K.logLevel)return;const Ge=(new Date).toISOString(),Pe=de[Z];if(!Pe)throw new Error(`Attempted to log a message with an invalid logType (value: ${Z})`);console[Pe](`[${Ge}]  ${K.name}:`,...te)};class he{constructor(Z){this.name=Z,this._logLevel=ce,this._logHandler=_e,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(Z){if(!(Z in U))throw new TypeError(`Invalid value "${Z}" assigned to \`logLevel\``);this._logLevel=Z}setLogLevel(Z){this._logLevel="string"==typeof Z?V[Z]:Z}get logHandler(){return this._logHandler}set logHandler(Z){if("function"!=typeof Z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Z}get userLogHandler(){return this._userLogHandler}set userLogHandler(Z){this._userLogHandler=Z}debug(...Z){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...Z),this._logHandler(this,U.DEBUG,...Z)}log(...Z){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...Z),this._logHandler(this,U.VERBOSE,...Z)}info(...Z){this._userLogHandler&&this._userLogHandler(this,U.INFO,...Z),this._logHandler(this,U.INFO,...Z)}warn(...Z){this._userLogHandler&&this._userLogHandler(this,U.WARN,...Z),this._logHandler(this,U.WARN,...Z)}error(...Z){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...Z),this._logHandler(this,U.ERROR,...Z)}}function pe(K){m.forEach(Z=>{Z.setLogLevel(K)})}function Ee(K,Z){for(const te of m){let Ge=null;Z&&Z.level&&(Ge=V[Z.level]),te.userLogHandler=null===K?null:(Pe,Ae,...at)=>{const ge=at.map(ve=>{if(null==ve)return null;if("string"==typeof ve)return ve;if("number"==typeof ve||"boolean"==typeof ve)return ve.toString();if(ve instanceof Error)return ve.message;try{return JSON.stringify(ve)}catch{return null}}).filter(ve=>ve).join(" ");Ae>=(Ge??Pe.logLevel)&&K({level:U[Ae].toLowerCase(),message:ge,args:at,type:Pe.name})}}}},8766:(lt,oe,F)=>{"use strict";F.d(oe,{Lj:()=>Me,X3:()=>Ke});var m=F(5861);let V,ce;const he=new WeakMap,pe=new WeakMap,Ee=new WeakMap,K=new WeakMap,Z=new WeakMap;let Pe={get(q,ye,Q){if(q instanceof IDBTransaction){if("done"===ye)return pe.get(q);if("objectStoreNames"===ye)return q.objectStoreNames||Ee.get(q);if("store"===ye)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return ve(q[ye])},set:(q,ye,Q)=>(q[ye]=Q,!0),has:(q,ye)=>q instanceof IDBTransaction&&("done"===ye||"store"===ye)||ye in q};function ge(q){return"function"==typeof q?function at(q){return q!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _e(){return ce||(ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(q)?function(...ye){return q.apply(Xe(this),ye),ve(he.get(this))}:function(...ye){return ve(q.apply(Xe(this),ye))}:function(ye,...Q){const re=q.call(Xe(this),ye,...Q);return Ee.set(re,ye.sort?ye.sort():[ye]),ve(re)}}(q):(q instanceof IDBTransaction&&function Ge(q){if(pe.has(q))return;const ye=new Promise((Q,re)=>{const ae=()=>{q.removeEventListener("complete",se),q.removeEventListener("error",je),q.removeEventListener("abort",je)},se=()=>{Q(),ae()},je=()=>{re(q.error||new DOMException("AbortError","AbortError")),ae()};q.addEventListener("complete",se),q.addEventListener("error",je),q.addEventListener("abort",je)});pe.set(q,ye)}(q),((q,ye)=>ye.some(Q=>q instanceof Q))(q,function de(){return V||(V=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(q,Pe):q)}function ve(q){if(q instanceof IDBRequest)return function te(q){const ye=new Promise((Q,re)=>{const ae=()=>{q.removeEventListener("success",se),q.removeEventListener("error",je)},se=()=>{Q(ve(q.result)),ae()},je=()=>{re(q.error),ae()};q.addEventListener("success",se),q.addEventListener("error",je)});return ye.then(Q=>{Q instanceof IDBCursor&&he.set(Q,q)}).catch(()=>{}),Z.set(ye,q),ye}(q);if(K.has(q))return K.get(q);const ye=ge(q);return ye!==q&&(K.set(q,ye),Z.set(ye,q)),ye}const Xe=q=>Z.get(q);function Ke(q,ye,{blocked:Q,upgrade:re,blocking:ae,terminated:se}={}){const je=indexedDB.open(q,ye),Be=ve(je);return re&&je.addEventListener("upgradeneeded",pt=>{re(ve(je.result),pt.oldVersion,pt.newVersion,ve(je.transaction))}),Q&&je.addEventListener("blocked",()=>Q()),Be.then(pt=>{se&&pt.addEventListener("close",()=>se()),ae&&pt.addEventListener("versionchange",()=>ae())}).catch(()=>{}),Be}function Me(q,{blocked:ye}={}){const Q=indexedDB.deleteDatabase(q);return ye&&Q.addEventListener("blocked",()=>ye()),ve(Q).then(()=>{})}const Te=["get","getKey","getAll","getAllKeys","count"],xe=["put","add","delete","clear"],Qe=new Map;function Je(q,ye){if(!(q instanceof IDBDatabase)||ye in q||"string"!=typeof ye)return;if(Qe.get(ye))return Qe.get(ye);const Q=ye.replace(/FromIndex$/,""),re=ye!==Q,ae=xe.includes(Q);if(!(Q in(re?IDBIndex:IDBObjectStore).prototype)||!ae&&!Te.includes(Q))return;const se=function(){var je=(0,m.Z)(function*(Be,...pt){const Jt=this.transaction(Be,ae?"readwrite":"readonly");let zt=Jt.store;return re&&(zt=zt.index(pt.shift())),(yield Promise.all([zt[Q](...pt),ae&&Jt.done]))[0]});return function(pt){return je.apply(this,arguments)}}();return Qe.set(ye,se),se}!function Ae(q){Pe=q(Pe)}(q=>({...q,get:(ye,Q,re)=>Je(ye,Q)||q.get(ye,Q,re),has:(ye,Q)=>!!Je(ye,Q)||q.has(ye,Q)}))},5861:(lt,oe,F)=>{"use strict";function m(V,ce,de,_e,he,pe,Ee){try{var K=V[pe](Ee),Z=K.value}catch(te){return void de(te)}K.done?ce(Z):Promise.resolve(Z).then(_e,he)}function U(V){return function(){var ce=this,de=arguments;return new Promise(function(_e,he){var pe=V.apply(ce,de);function Ee(Z){m(pe,_e,he,Ee,K,"next",Z)}function K(Z){m(pe,_e,he,Ee,K,"throw",Z)}Ee(void 0)})}}F.d(oe,{Z:()=>U})}},lt=>{lt(lt.s=6432)}]);